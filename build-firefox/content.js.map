{"version":3,"file":"content.js","mappings":"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OAAO;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,SAAI,IAAI,SAAI;AAC1B;AACA;AACA;AACA;AACA,6DAA6D,cAAc;AAC3E;AACA;AACA;AACA;AACA;AACA,cAAc,SAAI,IAAI,SAAI;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,MAAM;AAC1B;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AAC4C;AACyB;AACI;AACjC;AACjC;AACP,kBAAkB,wDAAW;AAC7B;AACA,KAAK;AACL,QAAQ,KAAqC;AAC7C;AACA,wBAAwB,+CAAQ;AAChC;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,wDAAW;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gFAAgF,4BAA4B,gCAAgC;AAC5I,eAAe,iDAAS;AACxB,KAAK;AACL;AACA;AACA;AACA,IAAI,wEAAyB;AAC7B;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACO;AACP;AACA,qBAAqB,uBAAuB;AAC5C;AACA;AACA,qEAAqE;AACrE;AACA,IAAI,gDAAS;AACb;AACA;AACA;AACA,oCAAoC,kDAAU;AAC9C;AACA;AACA;AACA,KAAK;AACL,IAAI,gDAAS;AACb;AACA,wCAAwC,yCAAK;AAC7C;AACA;AACA,6BAA6B,qDAAiB;AAC9C;AACA,KAAK;AACL;AACA;;;;;;;;;;;;;;;;;;;;;;;ACxGA,cAAc,SAAI,IAAI,SAAI;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,MAAM;AAC1B;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AAC+C;AAC+C;AAC5C;AACE;AACF;AAClD;AACA;AACA;AACO;AACP;AACA,qBAAqB,uBAAuB;AAC5C;AACA;AACA,qEAAqE;AACrE;AACA;AACA,kBAAkB,iEAAkB;AACpC,sBAAsB,kDAAW;AACjC,+BAA+B,qDAAiB;AAChD;AACA,kBAAkB,yCAAK;AACvB;AACA;AACA;AACA,KAAK;AACL,kBAAkB,kDAAW;AAC7B,eAAe,+DAAuB;AACtC,KAAK;AACL,oBAAoB,kDAAW;AAC/B;AACA;AACA,KAAK;AACL,wBAAwB,4GAAgC;AACxD,IAAI,gDAAS;AACb;AACA,wCAAwC,yCAAK;AAC7C;AACA;AACA,6BAA6B,qDAAiB;AAC9C;AACA,KAAK;AACL;AACA;;;;;;;;;;;;;;;;;;;;;AC1DA,cAAc,SAAI,IAAI,SAAI;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,MAAM;AAC1B;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA,gBAAgB,SAAI,IAAI,SAAI;AAC5B;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AAC2C;AACpC;AACP;AACA;AACA;AACA,wEAAwE,iBAAiB;AACzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,QAAQ;AAC5B;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,kBAAkB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACO;AACP,2BAA2B,qDAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACtGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb,IAAI,IAAqC;AACzC;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;;AAGL;;AAEA;AACA,oBAAoB;;AAEpB;AACA;AACA,MAAM;;;AAGN;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,4BAA4B;AAC5B;AACA,qCAAqC;;AAErC,gCAAgC;AAChC;AACA;;AAEA,gCAAgC;;AAEhC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6FAA6F,aAAa;AAC1G;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iGAAiG,eAAe;AAChH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;;;AAGN;AACA;AACA,KAAK,GAAG;;AAER,kDAAkD;AAClD;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,8MAA8M;;AAE9M;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,aAAa,YAAY;AACzB,cAAc,SAAS;AACvB;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,YAAY;AACzB,aAAa,WAAW;AACxB,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,YAAY;AACzB,aAAa,QAAQ;AACrB,aAAa,WAAW;AACxB,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,YAAY;AACzB,aAAa,QAAQ;AACrB,aAAa,WAAW;AACxB,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA,0BAA0B;;AAE1B,2BAA2B;AAC3B;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,iBAAiB;AAC5B;AACA,WAAW,WAAW;AACtB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,WAAW;AACtB;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,0BAA0B;;AAE1B;AACA;AACA;;AAEA;AACA,oDAAoD;;AAEpD;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,iCAAiC;;AAEjC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,wCAAwC;AACxC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAY;AACZ;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,WAAW,GAAG;AACd,WAAW,GAAG;AACd,WAAW,eAAe;AAC1B,WAAW,GAAG;AACd,WAAW,GAAG;AACd;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK,GAAG;;AAER;AACA;AACA;AACA;AACA;AACA,KAAK,GAAG;AACR;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB;;AAEhB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,qEAAqE;;AAErE;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;;;AAGA;;AAEA;AACA;AACA,IAAI;AACJ;;AAEA,oBAAoB,oBAAoB;AACxC;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAI;;;AAGJ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,gBAAgB;;AAEhB,uBAAuB,kBAAkB;;AAEzC;AACA,yBAAyB;;AAEzB,4BAA4B;AAC5B;AACA;;AAEA,gCAAgC;;AAEhC;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,MAAM;;;AAGN;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,IAAI;AACJ;;;AAGA;;AAEA;AACA;AACA,IAAI;AACJ;;AAEA,oBAAoB,oBAAoB;AACxC;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,YAAY,SAAS;AACrB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,YAAY,QAAQ;AACpB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,WAAW,QAAQ;AACnB,YAAY;AACZ;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAI;;;AAGJ;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,wCAAwC;AACxC;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,wBAAwB;;AAExB;;AAEA;AACA,oBAAoB,qBAAqB;AACzC;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,qIAAqI,yCAAyC;AAC9K;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,IAAI;AACf,WAAW,kBAAkB;AAC7B,WAAW,GAAG;AACd,YAAY,QAAQ;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,IAAI;AACf,YAAY,QAAQ;AACpB;;;AAGA;AACA;AACA;AACA,SAAS;AACT,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,IAAI;AACf,WAAW,kBAAkB;AAC7B,WAAW,GAAG;AACd;AACA;AACA;AACA,wCAAwC;AACxC,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,YAAY,cAAc;AAC1B;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK,GAAG;;AAER;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mBAAmB;;AAEnB;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA,0CAA0C;AAC1C;;AAEA;AACA;AACA,WAAW;AACX;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA,oCAAoC;AACpC;;AAEA;AACA;AACA,WAAW;AACX;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA,+CAA+C,IAAI;AACnD;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA,oCAAoC,IAAI;AACxC;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,0CAA0C;AAC1C;;AAEA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;;AAEvC;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA,sBAAsB;AACtB;AACA,SAAS;AACT,uBAAuB;AACvB;AACA,SAAS;AACT,uBAAuB;AACvB;AACA,SAAS;AACT,wBAAwB;AACxB;AACA,SAAS;AACT,wBAAwB;AACxB;AACA,SAAS;AACT,iCAAiC;AACjC;AACA,SAAS;AACT,2BAA2B;AAC3B;AACA,SAAS;AACT,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;;;AAGN;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,2DAA2D;;AAE3D;AACA;;AAEA;AACA,2DAA2D;AAC3D;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;;AAGT;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA,QAAQ;AACR;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA,QAAQ;AACR;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,aAAa,kBAAkB;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;;AAEA;AACA;AACA,gFAAgF;AAChF;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAkB;;;AAGlB;AACA;AACA,cAAc;AACd;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;AACA;;AAEA;AACA,IAAI;;;AAGJ;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,8BAA8B;AAC9B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,2HAA2H;AAC3H;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA;;AAEA;AACA;;AAEA,oEAAoE;;AAEpE;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,GAAG;AACd;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,2DAA2D;AAC3D;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,WAAW;AACtB,WAAW,GAAG;AACd;;;AAGA;AACA;AACA;AACA;;AAEA;AACA,oBAAoB,iBAAiB;AACrC;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,MAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN,4CAA4C;;AAE5C;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB;;;AAGA;AACA;AACA;;AAEA,oBAAoB,iBAAiB;AACrC;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,MAAM;AACN;AACA;;AAEA;;AAEA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA,MAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;;AAEA,sDAAsD;AACtD;;AAEA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;;AAGA;AACA,oBAAoB,sBAAsB;AAC1C;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,MAAM;;;AAGN;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA,kBAAkB,sBAAsB;AACxC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD;AACzD;;AAEA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,MAAM;AACN;AACA;;AAEA;AACA,mCAAmC;AACnC;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;;AAEA,0OAA0O;AAC1O;AACA,WAAW;AACX;AACA;;AAEA;AACA,MAAM;AACN,gCAAgC;AAChC;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,SAAS;AACT,QAAQ;AACR;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe,kBAAkB;AACjC;;AAEA;AACA;AACA,YAAY;AACZ;;AAEA;AACA,QAAQ;AACR;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gBAAgB;AAChB,iBAAiB;AACjB,gBAAgB;AAChB,gBAAgB;AAChB,qBAAqB;AACrB,kBAAkB;AAClB,gBAAgB;AAChB,0DAA0D;AAC1D,WAAW;AACX,oBAAoB;AACpB,qBAAqB;AACrB,qBAAqB;AACrB,qBAAqB;AACrB,iBAAiB;AACjB,kBAAkB;AAClB,sBAAsB;AACtB,YAAY;AACZ,YAAY;AACZ,uBAAuB;AACvB,oBAAoB;AACpB,mBAAmB;AACnB,kBAAkB;AAClB,qBAAqB;AACrB,wBAAwB;AACxB,iBAAiB;AACjB,aAAa;AACb,2BAA2B;AAC3B,0BAA0B;AAC1B,uBAAuB;AACvB,eAAe;AACf,kBAAkB;AAClB,cAAc;AACd,gBAAgB;AAChB,4BAA4B;AAC5B,qBAAqB;AACrB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;;;;;;;;ACnrFa;;AAEb,IAAI,KAAqC,EAAE;AAAA,EAE1C,CAAC;AACF,EAAE,yIAAsD;AACxD;;;;;;;;;;;;;;;;;;ACNwC;;AAExC,YAAY,kDAAe;;AAEC;;;;;;;;;;;;ACJ5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;AACb,KAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,YAAY;AACpE,SAAS;AACT;AACA;AACA;AACA;AACA,wDAAwD,YAAY;AACpE;AACA,0DAA0D,YAAY;AACtE,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,mBAAO,CAAC,8DAAO;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,4BAA4B;AAChC;AACA;AACA;AACA;AACA;AACA,GAAG;;;;;;;;;;;;AC9FH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;AACb,KAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,mBAAO,CAAC,8DAAO;AAC/B,aAAa,mBAAO,CAAC,4GAA8B;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,wCAAwC;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;;;;;;;;;;;AChGU;;AAEb,IAAI,KAAqC,EAAE;AAAA,EAE1C,CAAC;AACF,EAAE,0MAA8E;AAChF;;;;;;;;;;;;ACNa;;AAEb,IAAI,KAAqC,EAAE;AAAA,EAE1C,CAAC;AACF,EAAE,sOAA4F;AAC9F;;;;;;;;;;;;;;;;;;;;;;;;ACNgD;AACqC;AACzC;;AAE5C;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG,KAAK,uDAAgB;AACxB;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,kBAAkB,yDAAc;AAChC;AACA,6CAA6C,qDAAU;AACvD,kJAAkJ;;AAElJ;AACA;AACA;AACA;AACA,uCAAuC;;AAEvC;;AAEA,MAAM,oDAAS;AACf;AACA,2CAA2C,yDAAO;AAClD;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA,SAAS,2DAAQ;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG,KAAK,uDAAgB;AACxB;AACA,GAAG;AACH;;AAE2G;;;;;;;;;;;;;;;;;;;AClGhE;AACM;;AAEjD;AACA;AACA;AACA;AACA;;AAEA,aAAa,oDAAS;AACtB;AACA;AACA,OAAO,0DAAa;AACpB;AACA;AACA;;AAEA,aAAa,oDAAS;AACtB;;AAEkC;;;;;;;;;;;;;;;;;;;;;;;;;;ACpB6C;AAC3B;AACM;AACJ;AACb;AACQ;;AAEjD;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,MAAM,mDAAQ,OAAO,mDAAQ;AAC7B;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,oBAAoB,2DAAQ,CAAC,2DAAQ,GAAG;AACxC;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,MAAM;AACN,GAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,sBAAsB,6DAAkB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,6DAAkB;AAC7D,gBAAgB,uDAAO;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,0DAAU;AACzB;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;;AAEA,iBAAiB,kDAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA,mBAAmB,kDAAS;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,QAAQ,mDAAQ;AAChB;AACA;;AAEA;AACA,6CAA6C,gEAAa,KAAK,yDAAM;AACrE;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,yDAAM;;AAE/B,WAAW,2DAAQ,CAAC,2DAAQ,GAAG;AAC/B;AACA,KAAK;AACL;;AAEA;AACA,WAAW,uDAAY;AACvB;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA,QAAQ,0DAAa;AACrB,MAAM,+CAAI,iFAAiF;AAC3F;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA,CAAC;;AAE6E;;;;;;;;;;;;;;;;;;;;;;;;;;ACjRW;AACuT;AAC3V;AAC0C;AACmF;AACjI;AACA;AACsH;AACrH;AACI;;AAEtD;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,eAAe;AACf,cAAc;AACd,gBAAgB;AAChB,kBAAkB;AAClB;AACA;AACA;;AAEA;AACA;AACA,gEAAgE,mDAAQ,uBAAuB,oDAAS;AACxG,GAAG;AACH;AACA,EAAE,+CAAI;AACN;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qFAAqF,0DAAe;AACpG,gCAAgC,gEAAa,qBAAqB,yDAAM;AACxE;AACA;AACA;AACA;;AAEA,SAAS,0DAAa;AACtB,MAAM,+CAAI;AACV;;AAEA;AACA,uCAAuC,oDAAS;AAChD;;AAEA,mDAAmD;AACnD;AACA;AACA,OAAO;AACP,iCAAiC,2DAAQ,SAAS;AAClD;AACA,KAAK,kBAAkB;;AAEvB;;AAEA;AACA;;AAEA;;AAEA;AACA,sBAAsB,2DAAQ,CAAC,8DAAc,8BAA8B,UAAU;AACrF;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA,eAAe;;AAEf;AACA;AACA;AACA;AACA,KAAK;AACL,wCAAwC;;AAExC,mBAAmB,kDAAO;AAC1B,aAAa,2DAAc;AAC3B,KAAK,GAAG;;AAER,kBAAkB,kDAAO;AACzB,aAAa,2DAAc;AAC3B,KAAK;AACL;AACA;AACA,kBAAkB,kDAAO;AACzB;;AAEA,UAAU,oDAAS;AACnB,uBAAuB,yDAAc;AACrC,yCAAyC,2DAAQ,SAAS;AAC1D,eAAe,mEAAkB;AACjC;AACA;AACA,SAAS;AACT,QAAQ,SAAS,mDAAQ;AACzB,0CAA0C,yDAAc;AACxD,eAAe,mEAAkB,CAAC,2DAAQ,CAAC,2DAAQ,GAAG;AACtD;AACA;AACA,SAAS;AACT,QAAQ,SAAS,oDAAS,sBAAsB,qDAAU;AAC1D,0CAA0C,yDAAc;AACxD,yCAAyC,2DAAQ,SAAS;AAC1D,eAAe,mEAAkB,CAAC,2DAAQ,CAAC,2DAAQ;AACnD;AACA,SAAS;AACT;AACA,SAAS;AACT,QAAQ;AACR;AACA,eAAe,mEAAkB,CAAC,2DAAQ,CAAC,2DAAQ;AACnD,cAAc,yDAAc;AAC5B,SAAS;AACT;AACA,SAAS;AACT;AACA,KAAK;AACL,sBAAsB,kDAAO;AAC7B,aAAa,iEAAoB;AACjC,KAAK;AACL;AACA,gBAAgB,kDAAO,oBAAoB;AAC3C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,IAAI,gEAAgB;AACpB;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,2DAAQ,CAAC,2DAAQ,GAAG;AACnC,kBAAkB,2DAAQ,CAAC,2DAAQ,GAAG;AACtC,cAAc,2DAAQ,CAAC,2DAAQ,GAAG;AAClC,gBAAgB,2DAAQ,CAAC,2DAAQ,GAAG;AACpC,cAAc,2DAAQ,CAAC,2DAAQ,GAAG;AAClC,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA,aAAa,qDAAU;AACvB,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,oDAAS;AACzB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO,IAAI;AACX,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA,8DAA8D;;AAE9D;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,qBAAqB,qDAAU;AAC/B,sBAAsB,kDAAK;;AAE3B,yBAAyB,iDAAI;AAC7B;AACA,OAAO;;AAEP,wBAAwB,mDAAM;;AAE9B;AACA;;AAEA,6BAA6B,kDAAO;AACpC;AACA,aAAa,2DAAQ,CAAC,2DAAQ,GAAG;AACjC;AACA,OAAO;AACP,KAAK,IAAI,kDAAO;AAChB;AACA,+BAA+B,mDAAQ;AACvC;AACA,QAAQ;AACR;AACA;AACA,aAAa,kDAAO;AACpB,eAAe,2DAAQ,CAAC,2DAAQ,GAAG;AACnC;AACA;AACA,SAAS;AACT,OAAO;AACP,KAAK;AACL;AACA;AACA,aAAa,2DAAQ,CAAC,2DAAQ,GAAG;AACjC;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,sCAAsC,4CAAK,iBAAiB,uDAAY;;AAExE,QAAQ,mDAAQ;AAChB;AACA,0EAA0E;AAC1E;;AAEA;AACA;AACA,4CAA4C,gEAAa,KAAK,yDAAM,CAAC,kDAAO;AAC5E;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA,oBAAoB,uDAAY;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA,2CAA2C,4CAAK,WAAW,4CAAK;AAChE,mCAAmC,gEAAgB;AACnD,eAAe,4CAAK,CAAC,2DAAQ,CAAC,2DAAQ,GAAG;AACzC;AACA;AACA,YAAY,8DAAc;AAC1B,YAAY,wEAAwB;AACpC;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,oBAAoB,2DAAQ,2CAA2C,UAAU;AACjF;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL,6BAA6B,kDAAO;AACpC;AACA,KAAK;AACL;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA,wBAAwB,kDAAO;AAC/B;AACA,KAAK;AACL;AACA;AACA,eAAe,kDAAO;AACtB;AACA,OAAO;AACP;AACA;AACA,eAAe,kDAAO;AACtB;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA,QAAQ,mDAAQ;AAChB;AACA,MAAM;;;AAGN;AACA;AACA,MAAM;;;AAGN;AACA;;AAEA;AACA,gDAAgD,uDAAY;AAC5D;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,oBAAoB,2DAAQ,iDAAiD,UAAU;AACvF;AACA;AACA;AACA;AACA,kCAAkC,mDAAQ;AAC1C,sBAAsB,uDAAY;AAClC,QAAQ,uDAAY,CAAC,uDAAY,2BAA2B,+CAAI;AAChE;;AAEA;AACA,iCAAiC,wDAAa;AAC9C,UAAU;AACV;AACA;;AAEA;AACA;AACA;AACA;;AAEA,sCAAsC,gEAAa,KAAK,yDAAM;AAC9D;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4BAA4B,kDAAO;AACnC;AACA,KAAK;AACL;AACA;AACA;AACA,iCAAiC,kDAAO;AACxC;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA,iCAAiC,gEAAgB;AACjD;;AAEA;AACA,oBAAoB,2DAAQ;AAC5B;AACA,OAAO,oBAAoB,UAAU;AACrC;;AAEA,aAAa,mDAAG,oBAAoB,mDAAG;AACvC;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA,8BAA8B,2DAAQ,oDAAoD,sBAAsB;AAChH;;AAEA,aAAa,mDAAG,wBAAwB,mDAAG;AAC3C;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA,qBAAqB,kDAAO;AAC5B;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,kBAAkB,iDAAI;AACtB,MAAM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;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,QAAQ,WAAW;AACnB;AACA;AACA;;AAEA,yBAAyB,sDAAW;AACpC;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;;AAEA;AACA,qDAAqD;AACrD;;AAEA;AACA;AACA,eAAe,oDAAS;AACxB;AACA,SAAS;;AAET;AACA,YAAY,mDAAQ;AACpB;;AAEA;AACA,0BAA0B;AAC1B;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,eAAe,oDAAS;AACxB;AACA,SAAS;;AAET;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,WAAW,sDAAW;AACtB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,4BAA4B,0DAAe;AAC3C;AACA,SAAS;AACT;AACA,SAAS;AACT,QAAQ;AACR;AACA;AACA;;AAEA,4BAA4B,0DAAU,qDAAqD;AAC3F,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA,kBAAkB;;;AAGlB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,YAAY,mDAAQ;AACpB,qDAAqD,2DAAgB;AACrE,UAAU;AACV;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,UAAU,0DAAU;AACpB;AACA,QAAQ;;;AAGR;AACA,aAAa,0DAAa;AAC1B,UAAU,+CAAI;AACd;;AAEA;AACA;;AAEA,kCAAkC,uDAAY;AAC9C,aAAa,kDAAO;AACpB;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,aAAa,yDAAM;AACnB;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAc,0DAAe;AAC7B;AACA;AACA;;AAEA,4BAA4B,mDAAQ;AACpC;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,6BAA6B,kDAAO,CAAC,uDAAY;AACjD;AACA,OAAO;AACP;;AAEA,0BAA0B,qDAAU;;AAEpC,QAAQ,mDAAQ;AAChB;AACA;;AAEA,WAAW,kDAAO,CAAC,uDAAY;AAC/B;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,0BAA0B,kDAAO;AACjC;AACA,OAAO;AACP;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,wBAAwB,2DAAQ,uCAAuC,UAAU;AACjF;AACA;;AAEA;AACA;AACA,6CAA6C,2DAAQ,iCAAiC,UAAU;AAChG;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,WAAW,mDAAQ;AACnB;AACA;;AAEA,4DAA4D;AAC5D;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA;AACA,QAAQ;AACR;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA,2BAA2B,0DAAe;AAC1C;AACA,aAAa,mDAAQ;AACrB,KAAK;AACL;AACA;;AAEA,qBAAqB,2DAAQ,CAAC,2DAAQ,GAAG;AACzC,eAAe,4DAAe,CAAC,kDAAO;AACtC,YAAY,kDAAO;AACnB;AACA;AACA;AACA;AACA;AACA,eAAe,2DAAQ,CAAC,2DAAQ,GAAG;AACnC;AACA;AACA,WAAW;AACX;AACA,SAAS;AACT;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,sCAAsC,yDAAM;;AAE5C,iBAAiB,kDAAO;AACxB,aAAa,0DAAa;AAC1B,UAAU,+CAAI,mDAAmD,MAAM,UAAU,8EAA8E,aAAa;AAC5K;;AAEA,oCAAoC,kEAAuB;;AAE3D,aAAa,0DAAa;AAC1B;AACA;;AAEA;AACA,OAAO,SAAS,kEAAuB;AACvC;;AAEA,+CAA+C,kEAAuB;AACtE,0CAA0C,kEAAuB,QAAQ,iDAAI;;AAE7E,SAAS,0DAAa;AACtB,MAAM,+CAAI;AACV;;AAEA,uBAAuB,kDAAO;AAC9B;;AAEA;AACA,wDAAwD,gEAAa,KAAK,yDAAM,CAAC,kEAAuB,QAAQ,uDAAU;AAC1H;;AAEA;AACA,wDAAwD,gEAAa,KAAK,yDAAM,CAAC,kEAAuB,QAAQ,kDAAK;AACrH;;AAEA;AACA,KAAK;AACL;AACA,+BAA+B,kDAAO,CAAC,gEAAa,CAAC,gEAAa,CAAC,gEAAa,CAAC,gEAAa,KAAK,yDAAM,sBAAsB,yDAAM,wBAAwB,yDAAM,oBAAoB,yDAAM;AAC7L,aAAa,kDAAO;AACpB;AACA,OAAO;AACP,KAAK;;AAEL;AACA,sCAAsC,2DAAQ,4EAA4E,8BAA8B;AACxJ;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;;AAEA;AACA,CAAC;;AAEoB;;;;;;;;;;;;;;;;;;;;ACjjDrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,OAAO;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,cAAc;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,MAAM;AAC1B;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA,6EAA6E,OAAO;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;;AAE6D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7EpB;;AAEzC,YAAY,kDAAW;AACvB,WAAW,kDAAW;AACtB,YAAY,kDAAW;AACvB,WAAW,kDAAW;AACtB,aAAa,kDAAW;AACxB,gBAAgB,kDAAW;AAC3B,aAAa,kDAAW;AACxB,YAAY,kDAAW;AACvB,gBAAgB,kDAAW;AAC3B,UAAU,kDAAW;AACrB,WAAW,kDAAW;AACtB,aAAa,kDAAW;AACxB,qBAAqB,kDAAW;AAChC,oBAAoB,kDAAW;AAC/B,YAAY,kDAAW;AACvB,aAAa,kDAAW;AACxB,aAAa,kDAAW;AACxB,WAAW,kDAAW;;AAE0I;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrB/E;AACxB;AACqJ;AAC9J;AACzB;AAC8I;AACpH;;AAEjD,6BAA6B,uDAAY;AACzC,QAAQ,iDAAI;AACZ,CAAC;AACD;AACA;AACA;AACA;AACA;;AAEA,MAAM,mDAAQ;AACd;;AAEA,QAAQ,qDAAU;AAClB;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,IAAI,SAAS,qDAAU;AACvB;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA,QAAQ,qDAAU;AAClB,qBAAqB,2DAAQ,CAAC,2DAAQ,GAAG;AACzC;AACA,OAAO;AACP,MAAM;AACN;AACA,qBAAqB,2DAAQ,CAAC,2DAAQ,CAAC,2DAAQ,GAAG;AAClD;AACA,OAAO;AACP,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,gBAAgB,kDAAO;AACvB;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,SAAS,2DAAQ,CAAC,2DAAQ;AAC1B,QAAQ,mDAAQ;AAChB,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU,kDAAO;AACjB,iDAAiD,wDAAa;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,uDAAY,CAAC,qDAAU;AAC7C;;AAEA,MAAM,mDAAQ;AACd;AACA,oBAAoB,qDAAU;AAC9B,IAAI;AACJ,oBAAoB,qDAAU;AAC9B;;AAEA,SAAS,2DAAQ,CAAC,2DAAQ,GAAG;AAC7B,UAAU,kDAAO;AACjB;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAU,iDAAM;AAChB,WAAW,qDAAU,kBAAkB,wDAAa;AACpD;AACA;AACA;AACA,2DAA2D,qDAAU,uBAAuB,uDAAY;AACxG;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL,sBAAsB,uDAAY,CAAC,qDAAU;AAC7C;;AAEA,MAAM,mDAAQ;AACd;AACA,oBAAoB,qDAAU;AAC9B,IAAI;AACJ,oBAAoB,qDAAU;AAC9B;;AAEA,uBAAuB,qDAAU;AACjC,SAAS,2DAAQ,CAAC,2DAAQ,GAAG;AAC7B;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qBAAqB,2DAAQ,CAAC,2DAAQ,GAAG;AACzC,QAAQ,qDAAc;AACtB,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qBAAqB,2DAAQ,CAAC,2DAAQ,GAAG;AACzC;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA,oBAAoB,mDAAM;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qBAAqB,2DAAQ,CAAC,2DAAQ,GAAG;AACzC;AACA;AACA,4BAA4B;AAC5B;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA,UAAU,gDAAK;AACf;AACA;AACA;AACA;AACA;AACA,SAAS,2DAAQ,CAAC,2DAAQ,GAAG;AAC7B,WAAW,mDAAQ;AACnB;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU,mDAAQ;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAU,kDAAW;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,qDAAU;AAC3B;AACA,UAAU,kDAAW;AACrB;AACA;AACA;AACA;AACA;AACA,yBAAyB,qDAAU;AACnC;AACA;AACA,IAAI;AACJ;AACA,UAAU,kDAAW;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU,mDAAQ;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,kDAAW;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,uBAAuB,kDAAW;AAClC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,uBAAuB,kDAAW;AAClC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,kDAAW;AAClC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAU,kDAAW;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,OAAO,0DAAa;AACpB;;AAEA;AACA;;AAEA,uBAAuB,uBAAuB;AAC9C;AACA;;AAEA,mGAAmG,gEAAa,KAAK,yDAAM;;AAE3H;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG,EAAE,2DAAQ,CAAC,2DAAQ,GAAG;AACzB;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,kDAAO;AACnB,YAAY,qDAAU;AACtB;AACA,GAAG,EAAE,2DAAQ,CAAC,2DAAQ,GAAG;AACzB,QAAQ,qDAAc;AACtB,GAAG;AACH;AACA;AACA;AACA,UAAU,kDAAW;AACrB;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,8BAA8B,2DAAQ,0DAA0D,wBAAwB;AACxH;AACA;;AAEA;AACA,sCAAsC,mDAAQ;AAC9C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,8CAA8C,wDAAa;AAC3D;AACA;;AAEA;AACA;;AAEA;AACA,WAAW,kDAAO;AAClB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,WAAW,iDAAM;AACjB,oGAAoG;;AAEpG,aAAa,0DAAa;AAC1B,oDAAoD;;AAEpD,UAAU,+CAAI,EAAE,mDAAQ;AACxB;AACA;;AAEA,iDAAiD,qDAAc;AAC/D;AACA;AACA,YAAY;AACZ;AACA;AACA;;AAEA;;AAEA,WAAW,gDAAK;AAChB;AACA;AACA;AACA;AACA;;AAEA,WAAW,mDAAQ;AACnB;AACA;AACA;AACA,wBAAwB,kDAAO;AAC/B,6BAA6B,wDAAa;AAC1C,WAAW;;AAEX;AACA;AACA;;AAEA,mBAAmB,yDAAM;AACzB;AACA,qCAAqC,kDAAO;AAC5C,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA;;AAEA,WAAW,iDAAM;AACjB;AACA;;AAEA;AACA;AACA;;AAEA,mBAAmB,yDAAM;AACzB;AACA,qCAAqC,kDAAO;AAC5C,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA;;AAEA,WAAW,iDAAM;AACjB;AACA;AACA;AACA;AACA;;AAEA,WAAW,mDAAQ;AACnB;AACA,2BAA2B,wDAAa;AACxC;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,UAAU;AACV;;AAEA,wBAAwB,2DAAQ,CAAC,2DAAQ,GAAG;AAC5C;AACA;;AAEA,+BAA+B,uBAAuB;AACtD;AACA;;AAEA,mCAAmC,gEAAa,sCAAsC,yDAAM;AAC5F;AACA,WAAW;;AAEX;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,oBAAoB,2DAAQ,iCAAiC,UAAU;AACvE;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA,wBAAwB,kDAAO;AAC/B;AACA;;AAE8U;;;;;;;;;;;;;;;;;;;;;AC7oB7R;AACT;AACA;;AAExC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sEAAsE,uDAAU;AAChF;AACA;AACA;AACA;AACA;;AAEA;AACA,sEAAsE,kDAAK;AAC3E;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;;AAEA,cAAc,qDAAU;AACxB;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA,qBAAqB,qDAAU;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEmD;;;;;;;;;;;;;;;;;;;AClInD;AACA;AACA;AACA;;AAEmF;;;;;;;;;;;;;;;;;;ACLlC;;AAEjD;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,aAAa,UAAM;AACnB,WAAW,UAAM;AACjB;;AAEA,OAAO,0DAAa;AACpB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEsC;;;;;;;;;;;;;;;;AC9CtC,oBAAoB,aAAoB;;AAEf;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACFmR;AACpQ;AACrB;AACqB;AAC4C;AAC9B;AACb;AACD;AACM;AACX;AACQ;AACI;AACU;AAC0B;;AAEnF,aAAa,+CAAQ;AACrB,aAAa,+CAAQ;AACrB,WAAW,6CAAM;AACjB,aAAa,+CAAQ;AACrB,iBAAiB,mDAAY;AAC7B,iBAAiB,mDAAY;AAC7B,gBAAgB,kDAAW;AAC3B,iBAAiB,mDAAY;AAC7B,YAAY,8CAAO;AACnB,UAAU,4CAAK;AACf,WAAW,6CAAM;AACjB,aAAa,+CAAQ;AACrB,WAAW,6CAAM;;AAEsG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7BtC;AACxB;AACY;AAC6C;AACF;AAC/D;AAC+O;AACrP;AACsB;AACxB;AACkB;AACN;AACN;;AAE/C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC,8CAA8C;;AAE/C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,UAAU,kDAAO;AACjB;;AAEA;AACA;;AAEA,mBAAmB,uDAAY,CAAC,wDAAa;;AAE7C;AACA;AACA,aAAa,0DAAa;AAC1B,UAAU,+CAAI;AACd;;AAEA;AACA;;AAEA;AACA;AACA,uEAAuE,oBAAoB;AAC3F;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,OAAO;;AAEP,2BAA2B;AAC3B;AACA;;AAEA;AACA,6CAA6C,qDAAc;AAC3D,6CAA6C,mDAAQ,cAAc,qDAAc,8CAA8C,kDAAQ,WAAW,kDAAO;;AAEzJ;AACA;AACA;AACA,UAAU;;;AAGV,aAAa,0DAAa;AAC1B,UAAU,+CAAI;AACd;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,2DAAQ,CAAC,2DAAQ,GAAG;AAC/C,iCAAiC,kDAAO,aAAa,kDAAK;AAC1D;AACA,WAAW;;AAEX;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,wCAAwC,8DAAiB;AACzD,iBAAiB,qDAAU;;AAE3B;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,WAAW;AACX,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;;AAEA;AACA,aAAa,kDAAK;AAClB;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,aAAa,iDAAI;AACjB;;AAEA;AACA;;AAEA;AACA,YAAY;AACZ;AACA,wEAAwE,kDAAS;AACjF,cAAc;AACd;AACA;AACA;;AAEA;;AAEA,aAAa,mDAAM;AACnB;;AAEA;;AAEA,aAAa,kDAAK;AAClB;AACA;AACA;AACA;;AAEA,4CAA4C;AAC5C;AACA;;AAEA;AACA;AACA;AACA,cAAc;;;AAGd,kCAAkC,kDAAW;AAC7C,iCAAiC,yDAAc;AAC/C;AACA;AACA;;AAEA,mBAAmB,0DAAa;AAChC,gBAAgB,+CAAI;AACpB;AACA;;AAEA;;AAEA;AACA;AACA,qBAAqB,0DAAa;AAClC,kBAAkB,+CAAI;AACtB;;AAEA;AACA;;AAEA,wCAAwC,qDAAU;;AAElD;AACA;AACA;AACA;;AAEA,2BAA2B,qDAAU;AACrC;AACA;AACA;AACA,eAAe;;AAEf;AACA;AACA;AACA;;AAEA;;AAEA,kBAAkB,oDAAS;AAC3B;AACA;AACA;AACA;AACA;;AAEA;AACA,cAAc;AACd;AACA;;AAEA;AACA;;AAEA,aAAa,iDAAI;AACjB;AACA;;AAEA;AACA;;AAEA,aAAa,gDAAG;AAChB;AACA;AACA;;AAEA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;;AAEA;AACA,eAAe,0DAAa;AAC5B,YAAY,+CAAI;AAChB;;AAEA;AACA;AACA;;AAEA,0BAA0B,2DAAQ,CAAC,2DAAQ,GAAG;;AAE9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,oDAAS;AAClC;AACA,KAAK;AACL,qBAAqB,kDAAQ;AAC7B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,aAAa,0DAAO;AACpB;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,WAAW,0DAAa;AACxB,QAAQ,+CAAI;AACZ;;AAEA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,oBAAoB,2DAAQ,iCAAiC,UAAU;AACvE;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;;AAEA;AACA;;AAEA,sBAAsB;;;AAGtB,uCAAuC;;AAEvC,yBAAyB;;AAEzB;AACA;AACA,eAAe,kDAAS;AACxB;AACA,MAAM;AACN;;AAEA;AACA;AACA;AACA,MAAM;;;AAGN;AACA;AACA,KAAK,GAAG;;AAER;AACA;AACA,MAAM;;;AAGN;AACA;AACA,sBAAsB,2DAAQ,uCAAuC,UAAU;AAC/E;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;AACA,oBAAoB,2DAAQ,kCAAkC,UAAU;AACxE;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA,oBAAoB,2DAAQ,yCAAyC,UAAU;AAC/E;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP,2EAA2E,qDAAU;AACrF,wBAAwB,uDAAU;;AAElC;AACA,sBAAsB,2DAAQ,sCAAsC,UAAU;AAC9E;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA;;AAEA;;AAEA,MAAM,kDAAQ;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA,kCAAkC;;AAElC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,mBAAmB,qDAAU;AAC7B,uCAAuC;;AAEvC;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,MAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;;AAGA;;AAEA,IAAI,kDAAQ;AACZ;AACA;A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ACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK,KAAK,uDAAgB;AAC1B;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;;AAEA,iBAAiB,uDAAY;AAC7B;AACA,OAAO;AACP;;AAEA;;AAEA;AACA;AACA;AACA,OAAO;AACP,MAAM;AACN,gBAAgB,kDAAK;AACrB;;AAEA,QAAQ,wDAAa;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA,uBAAuB,qDAAU;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA,YAAY,qDAAU;AACtB;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK,KAAK,uDAAgB;AAC1B;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,iBAAiB,uDAAY;AAC7B;AACA,OAAO;AACP,KAAK;AACL;;AAEA,iBAAiB,uDAAY,CAAC,kDAAK;AACnC;AACA,OAAO;AACP,KAAK;AACL;;AAEA,iBAAiB,uDAAY,CAAC,uDAAU;AACxC;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,KAAK,KAAK,uDAAgB;AAC1B;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,WAAW,0DAAa;AACxB,QAAQ,+CAAI;AACZ,QAAQ;;;AAGR;AACA,MAAM;;;AAGN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,KAAK,KAAK,uDAAgB;AAC1B;AACA,KAAK;AACL;;AAEA;AACA,iBAAiB,wDAAS;;AAE1B;AACA;AACA;AACA,oEAAoE,2DAAQ,CAAC,2DAAQ;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,oBAAoB,2DAAQ;AAC5B;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA,QAAQ;;;AAGR,MAAM,8DAAe;AACrB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,wBAAwB,uDAAgB;AACxC;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,MAAM,mDAAQ;AACd,WAAW,2DAAQ,CAAC,2DAAQ,GAAG;AAC/B;AACA,KAAK;AACL;;AAEA,SAAS,2DAAQ,CAAC,2DAAQ,CAAC,2DAAQ,GAAG;AACtC,UAAU,mDAAQ;AAClB,GAAG;AACH;;AAEA;AACA;AACA,SAAS,0DAAO;AAChB,SAAS,0DAAa;AACtB,yBAAyB,oDAAS,YAAY,qDAAU;AACxD,MAAM,+CAAI,yEAAyE,oDAAS;AAC5F;;AAEA;AACA;AACA,MAAM;AACN,aAAa,8DAAmB;AAChC;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAE4D;;;;;;;;;;;;;;;;;;;AC5+CJ;AACpC;AACsB;AACtB;AACM;;AAE1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;;;AAGP;AACA;;AAEA;AACA;AACA;AACA,SAAS,2DAAQ,CAAC,2DAAQ;AAC1B,UAAU,mDAAM;AAChB,GAAG;AACH;AACA;AACA;AACA,0BAA0B,yDAAM;;AAEhC,aAAa,2DAAQ,CAAC,2DAAQ,GAAG;AACjC,cAAc,mDAAM;AACpB;AACA,OAAO;AACP;AACA,GAAG;AACH;;AAE8C;;;;;;;;;;;;;;;;;;ACvCE;AACN;;AAE1C;AACA;;AAEA;;AAEA;AACA,kBAAkB,2DAAQ,yCAAyC,UAAU;AAC7E;;AAEA,UAAU,uDAAY;AACtB;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEoB;;;;;;;;;;;;;;;;;;AC/BoC;AACrB;;AAEnC;AACA;;AAEA,sBAAsB,4CAAK,8BAA8B,4CAAK;;AAE9D;AACA,0BAA0B,2DAAQ,8CAA8C,oBAAoB;AACpG,eAAe,yDAAM;AACrB;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEsB;;;;;;;;;;;;;;;;ACjCtB;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEoB;;;;;;;;;;;;;;;;;AClB4B;;AAEhD;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,2DAAQ,CAAC,2DAAQ,GAAG;AACvC;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA,CAAC;;AAEoB;;;;;;;;;;;;;;;;;AC9ErB;AACA;AACA;AACA;;AAE2B;;;;;;;;;;;;;;;;;ACL3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAE4B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACf2C;AAClC;;AAErC;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA,2BAA2B,kDAAO;AAClC;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,+BAA+B,2DAAQ,6DAA6D,yBAAyB;AAC7H;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;;AAEA;AACA;AACA,+BAA+B,2DAAQ,6DAA6D,yBAAyB;AAC7H,uCAAuC;;AAEvC;AACA;AACA;AACA;AACA,WAAW;AACX,UAAU;AACV;AACA;AACA,WAAW;AACX;AACA,QAAQ;AACR;AACA;AACA,yCAAyC,2DAAQ,mCAAmC,UAAU;AAC9F;;AAEA;AACA;;AAEA;AACA;AACA;AACA,mBAAmB;AACnB,kBAAkB;AAClB;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA,+BAA+B,2DAAQ,6DAA6D,yBAAyB;AAC7H;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,eAAe;AACf;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,+BAA+B,2DAAQ,6DAA6D,yBAAyB;AAC7H;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA,gBAAgB;AAChB;AACA;AACA,SAAS,gEAAa,KAAK,yDAAM,SAAS,kDAAO,CAAC,gEAAa,KAAK,yDAAM;AAC1E;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,GAAG,IAAI;AACP;AACA;AACA,iBAAiB,kDAAO;AACxB;AACA,GAAG;AACH;;AAEiL;;;;;;;;;;;;;;;;;ACrQjL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kCAAkC;;AAEnC;;AAEA;AACA;AACA;AACA,CAAC,wCAAwC;;AAEF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChC0C;AACrC;AACG;AACsC;AACpC;;AAEjD;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,0DAAe;AAC/B;;AAEA;AACA;;AAEA;AACA;AACA;AACA,MAAM;;;AAGN;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,kBAAkB,0BAA0B;AAC5C;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,kBAAkB,2BAA2B;AAC7C;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,kBAAkB,2DAAQ,2CAA2C,UAAU;AAC/E;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,yBAAyB,2DAAQ,qCAAqC,iBAAiB;AACvF;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,yBAAyB,2DAAQ,qCAAqC,iBAAiB;AACvF;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,uBAAuB,2DAAQ,qCAAqC,iBAAiB;AACrF;AACA,2BAA2B;;AAE3B,sBAAsB,wBAAwB;AAC9C;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,oCAAoC,gEAAa,KAAK,yDAAM;AAC5D;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,kBAAkB,2DAAQ,uCAAuC,UAAU;AAC3E;AACA;;AAEA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,WAAW,yDAAM;AACjB;AACA;;AAEA;AACA,uBAAuB,2DAAQ,qCAAqC,iBAAiB;AACrF;;AAEA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,0DAAa;AACpB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA,sBAAsB,2DAAQ,2CAA2C,UAAU;AACnF;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA,2BAA2B;AAC3B,GAAG;AACH;AACA,EAAE;;AAEF;;AAEA,KAAK,0DAAa;AAClB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,QAAQ;;;AAGR;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAY,6DAAkB;AAC9B;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAY,6DAAkB;AAC9B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,CAAC,IAAI;;AAEL,6BAA6B;AAC7B;AACA,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,WAAW,2DAAQ;AACnB;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,SAAS,2DAAQ;AACjB;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,WAAW,2DAAQ,CAAC,2DAAQ,GAAG;AAC/B;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA,yCAAyC,yDAAc;AACvD;AACA;;AAEA;AACA;AACA;AACA,OAAO,0DAAa;AACpB;;AAEA;AACA;AACA;AACA,MAAM;AACN,sGAAsG;;AAEtG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL,qBAAqB,6DAAkB;AACvC;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,kDAAK,oBAAoB,iDAAI,kBAAkB,qDAAc;AACvF;;AAEqpB;;;;;;;;;;;AClnBrpB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,MAAM;AACN;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wBAAwB,sBAAsB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,sCAAsC;;AAEtC;AACA;AACA;;AAEA,4BAA4B;AAC5B;AACA;AACA;AACA,6BAA6B;;;;;;;;;;;ACvL7B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,4EAA4E;AAC5E,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,aAAa;AACb,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,2CAA2C,iDAAiD;;AAE5F;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf,MAAM;AACN,eAAe;AACf;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,0DAA0D;AAC1D;AACA;AACA;;AAEA;AACA;AACA;AACA,sCAAsC,uDAAuD;AAC7F;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,WAAW;AACX;;AAEA;AACA;AACA,wCAAwC,WAAW;AACnD;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sCAAsC,gBAAgB;AACtD;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA,4BAA4B;AAC5B;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,UAAU;AACV;AACA;AACA;AACA;;AAEA;;AAEA,UAAU;AACV;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qCAAqC,cAAc;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,iCAAiC,mBAAmB;AACpD;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA,kBAAkB;;AAElB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,yBAAyB,gBAAgB;AACzC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,aAAa;AACb;AACA;;AAEA;AACA,aAAa;AACb;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,+CAA+C,QAAQ;AACvD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA,YAAY;AACZ;AACA;AACA;;AAEA,YAAY;AACZ;AACA;AACA;;AAEA,YAAY;AACZ;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,+CAA+C,QAAQ;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,QAAQ;AACR;AACA;;AAEA;AACA,KAAK;;AAEL;AACA,+CAA+C,QAAQ;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,+CAA+C,QAAQ;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,CAAC;AACD;AACA;AACA;AACA;AACA,EAAE,KAA0B,oBAAoB,CAAE;AAClD;;AAEA;AACA,EAAE,kBAAkB;AACpB,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;;;;;;;;;;;;;;;;;;ACxvBO,2CAA2C,uDAAuD;AAClG;AACP;AACA;AACO;AACP;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,iD;;;;;;;;;;;;;;;;;;;;;;ACd0D;AACV;AACsB;AAC1B;AACV;AACa;AACI;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6EAA6E,uDAAc;AAC3F,QAAQ,gEAAY;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,uDAAc;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,yBAAyB,0DAAiB;AAC1C;AACA;AACA;AACA;AACA,yBAAyB,uBAAuB;AAChD;AACA;AACA,eAAe,yDAAa;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,qBAAqB,mBAAmB,qBAAqB,gBAAgB,wBAAwB;AAChJ,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACqB;AACtB;AACA;AACA,gFAAgF,2CAAM;AACtF;AACA;AACA,oBAAoB,4DAAU,gBAAgB,4DAAU,iBAAiB,4DAAU;AACnF;AACA;AACA,sCAAsC,mDAAU,2BAA2B,6DAAc;AACzF;AACA,sC;;;;;;;;;;;;;;;;;;;;;;;;;;ACrGkC;AACa;AACe;AAC5B;AACiC;AAChC;AACkE;AACvC;AACX;AACnD;AACA,IAAI,gDAAS;AACb;AACA;AACA;AACA;AACA;AACA,gBAAgB,6DAAc;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,wEAAgB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,yEAAiB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,yEAAqB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,uDAAY;AACQ;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,IAAI,gDAAS;AACb;AACA;AACA;AACA,YAAY,4DAAU;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,2CAAM;AAC/B;AACA,sDAAsD;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACyB;AAC1B;AACA,QAAQ,2CAAM;AACd,QAAQ,gEAAY;AACpB;AACA;AACA,QAAQ,gFAAoB;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,2CAAM;AACtC,6BAA6B,uEAAe,0BAA0B,yDAAyD;AAC/H;AACO;AACP;AACA,UAAU,4CAAI;AACd;AACA,cAAc,4CAAI;AAClB;AACA,sC;;;;;;;;;;;;;;;;;;;;;ACvLwD;AACT;AACkB;AACpB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,+CAAQ,oDAAoD,sBAAsB;AAClI;AACA;AACA;AACA;AACA,oCAAoC,QAAQ;AAC5C;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,4DAAU;AAC1B;AACA;AACA;AACA;AACA,0CAA0C,0EAAmB;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,+CAAQ,uDAAuD,uBAAuB;AACnI;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,0EAAmB;AAClE,yCAAyC,oDAAa,CAAC,oDAAa,KAAK,6CAAM,WAAW,6CAAM;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,QAAQ;AACxC;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA,0BAA0B,0EAAmB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,0DAAS;AACrB;AACA;AACA;AACA;AACA,uBAAuB,0DAAS;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;AACuB;AACjB;AACA;AACP;AACA,uCAAuC,4DAAU,kBAAkB,4DAAU,eAAe,4DAAU;AACtG;AACA;AACA,QAAQ,4DAAU;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,wC;;;;;;;;;;;;;;;AC9IO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,kC;;;;;;;;;;;;;;;;ACP8C;AACvC;AACP;AACA;AACA,yBAAyB,uBAAuB;AAChD;AACA;AACA;AACA;AACA,uDAAuD,oDAAa,qBAAqB,6CAAM;AAC/F;AACA,wCAAwC,oDAAa,qBAAqB,6CAAM;AAChF,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,2C;;;;;;;;;;;;;;;ACnBO,gCAAgC,+EAA+E;AACtH,sC;;;;;;;;;;;;;;;;ACDsD;AAC/C,0BAA0B,mEAAgB;AACjD;AACA;AACA;AACA,2GAA2G,uCAAuC;AAClJ;AACA;AACA;AACA;AACA,CAAC;AACD,+C;;;;;;;;;;;;;;;ACXO;AACP;AACA;AACA;AACA;AACA;AACA,qC;;;;;;;;;;;;;;;ACNO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4C;;;;;;;;;;;;;;;;;ACVmC;AACnC;AACO;AACP,QAAQ,2CAAM;AACd;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP,QAAQ,2CAAM;AACd;AACA;AACA;AACA;AACA,wC;;;;;;;;;;;;;;;AC3BO;AACP;AACA;AACA,oC;;;;;;;;;;;;;;;ACHO;AACP;AACA;AACA,sC;;;;;;;;;;;;;;;ACHO;AACP,gC;;;;;;;;;;;;;;;;;ACDsC;AAC/B;AACP;AACA,qBAAqB,uBAAuB;AAC5C;AACA;AACA;AACA;AACO;AACP;AACA,eAAe,+CAAQ;AACvB;AACA;AACA;AACA;AACA;AACA,gDAAgD,kBAAkB;AAClE;AACA;AACA,gC;;;;;;;;;;;;;;;;;ACnBmC;AAC4B;AACxD;AACP,IAAI,uEAAe;AACnB,+BAA+B,2CAAM;AACrC;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,gD;;;;;;;;;;;;;;;ACbA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C,4CAA4C;AAC5C,4CAA4C;AAC5C;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB,UAAU;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,UAAU;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,UAAU;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,UAAU;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,UAAU;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,YAAY;AAC9B;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,UAAU;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,2DAA2D,wBAAwB;;AAEnF;AACA;AACA,2CAA2C,wBAAwB;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,8EAA8E,4BAA4B,iBAAiB;AAC3H,8EAA8E,2BAA2B,kBAAkB;AAC3H,qDAAqD,oDAAoD,iBAAiB;AAC1H,qDAAqD,oDAAoD,iBAAiB;AAC1H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,sBAAsB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,MAAM,iBAAiB,aAAa,iBAAiB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,EAAE,cAAc,EAAE,cAAc,EAAE;AAC7D,2BAA2B,EAAE,cAAc,EAAE,cAAc,EAAE;AAC7D,2BAA2B,EAAE,cAAc,EAAE,cAAc,EAAE,cAAc,EAAE;AAC7E,2BAA2B,EAAE,cAAc,EAAE,cAAc,EAAE,cAAc,EAAE;AAC7E;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,yCAAyC,SAAS,QAAQ,SAAS,QAAQ,QAAQ;AACnF;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEgC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3pChC;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS,gBAAgB,sCAAsC,kBAAkB;AACjF,wBAAwB;AACxB;AACA;;AAEO;AACP;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEO;AACP;AACA,+CAA+C,OAAO;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA,2DAA2D,cAAc;AACzE;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA,2CAA2C,QAAQ;AACnD;AACA;;AAEO;AACP,kCAAkC;AAClC;;AAEO;AACP,uBAAuB,uFAAuF;AAC9G;AACA;AACA,yGAAyG;AACzG;AACA,sCAAsC,QAAQ;AAC9C;AACA,gEAAgE;AAChE;AACA,8CAA8C,yFAAyF;AACvI,8DAA8D,2CAA2C;AACzG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA,kBAAkB,yBAAyB;AAC3C;AACA;AACA;AACA;;AAEO;AACP;AACA;;AAEO;AACP;AACA,4CAA4C,yEAAyE;AACrH;;AAEO;AACP;AACA;;AAEO;AACP,0BAA0B,+DAA+D,iBAAiB;AAC1G;AACA,kCAAkC,MAAM,+BAA+B,YAAY;AACnF,iCAAiC,MAAM,mCAAmC,YAAY;AACtF,8BAA8B;AAC9B;AACA,GAAG;AACH;;AAEO;AACP,YAAY,6BAA6B,0BAA0B,cAAc,qBAAqB;AACtG,2IAA2I,cAAc;AACzJ,qBAAqB,sBAAsB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC,iCAAiC,SAAS;AAC1C,iCAAiC,WAAW,UAAU;AACtD,wCAAwC,cAAc;AACtD;AACA,4GAA4G,OAAO;AACnH,+EAA+E,iBAAiB;AAChG,uDAAuD,gBAAgB,QAAQ;AAC/E,6CAA6C,gBAAgB,gBAAgB;AAC7E;AACA,gCAAgC;AAChC;AACA;AACA,QAAQ,YAAY,aAAa,SAAS,UAAU;AACpD,kCAAkC,SAAS;AAC3C;AACA;;AAEO;AACP;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;;AAEM;AACP;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,MAAM;AACxB;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACO;AACP,2BAA2B,sBAAsB;AACjD;AACA;AACA;;AAEA;AACO;AACP,gDAAgD,QAAQ;AACxD,uCAAuC,QAAQ;AAC/C,uDAAuD,QAAQ;AAC/D;AACA;AACA;;AAEO;AACP,2EAA2E,OAAO;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;;AAEO;AACP;AACA;AACA,wMAAwM,cAAc;AACtN,4BAA4B,sBAAsB;AAClD,wBAAwB,YAAY,sBAAsB,qCAAqC,2CAA2C,MAAM;AAChJ,0BAA0B,MAAM,iBAAiB,YAAY;AAC7D,qBAAqB;AACrB,4BAA4B;AAC5B,2BAA2B;AAC3B,0BAA0B;AAC1B;;AAEO;AACP;AACA,eAAe,6CAA6C,UAAU,sDAAsD,cAAc;AAC1I,wBAAwB,6BAA6B,oBAAoB,uCAAuC,kBAAkB;AAClI;;AAEO;AACP;AACA;AACA,yGAAyG,uFAAuF,cAAc;AAC9M,qBAAqB,8BAA8B,gDAAgD,wDAAwD;AAC3J,2CAA2C,sCAAsC,UAAU,mBAAmB,IAAI;AAClH;;AAEO;AACP,+BAA+B,uCAAuC,YAAY,KAAK,OAAO;AAC9F;AACA;;AAEA;AACA,wCAAwC,4BAA4B;AACpE,CAAC;AACD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA,qDAAqD,cAAc;AACnE;AACA;AACA;;AAEO;AACP,2CAA2C;AAC3C;;AAEO;AACP;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,MAAM,oBAAoB,YAAY;AAC5E,qBAAqB,8CAA8C;AACnE;AACA;AACA,qBAAqB,aAAa;AAClC;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uFAAuF,SAAS,gBAAgB;AAChH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA,iEAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAC;;;;;;;;;;;;;;;;;;;;;;AChZ0C;AAS5C;;;;GAIG;AACH,SAAS,oBAAoB,CAAC,KAAoB;IAC9C,MAAM,MAAM,GAAG,KAAK,CAAC,MAAqB,CAAC;IAC3C,IAAI,CAAC,MAAM;QAAE,OAAO,KAAK,CAAC;IAE1B,kDAAkD;IAClD,MAAM,OAAO,GAAG,MAAM,CAAC,OAAO,EAA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","sources":["webpack://wave-reader/../node_modules/react/cjs/react-jsx-runtime.production.min.js","webpack://wave-reader/../node_modules/react/cjs/react-jsx-runtime.development.js","webpack://wave-reader/../node_modules/react/jsx-runtime.js","webpack://wave-reader/../src/core/ViewStateMachine.tsx","webpack://wave-reader/../src/core/ViewStack.ts","webpack://wave-reader/../src/core/TomeBase.ts","webpack://wave-reader/../src/core/Tracing.ts","webpack://wave-reader/../src/core/TomeConnector.ts","webpack://wave-reader/../src/core/RobotCopy.ts","webpack://wave-reader/../src/core/ClientGenerator.ts","webpack://wave-reader/../src/core/TomeClient.ts","webpack://wave-reader/../src/core/TomeAdapters.ts","webpack://wave-reader/../src/core/TomeConfig.ts","webpack://wave-reader/../src/core/TomeRenderer.tsx","webpack://wave-reader/../src/components/ErrorBoundary.tsx","webpack://wave-reader/../src/core/StructuralSystem.tsx","webpack://wave-reader/../src/core/StructuralRouter.tsx","webpack://wave-reader/../src/core/StructuralTomeConnector.tsx","webpack://wave-reader/../src/core/DefaultStructuralConfig.ts","webpack://wave-reader/../log-view-machine/node_modules/@xstate/react/es/useConstant.js","webpack://wave-reader/../log-view-machine/node_modules/@xstate/react/es/useInterpret.js","webpack://wave-reader/../log-view-machine/node_modules/@xstate/react/es/useMachine.js","webpack://wave-reader/../log-view-machine/node_modules/@xstate/react/es/utils.js","webpack://wave-reader/../log-view-machine/node_modules/react/cjs/react.development.js","webpack://wave-reader/../log-view-machine/node_modules/react/index.js","webpack://wave-reader/../log-view-machine/node_modules/use-isomorphic-layout-effect/dist/use-isomorphic-layout-effect.browser.esm.js","webpack://wave-reader/../log-view-machine/node_modules/use-sync-external-store/cjs/use-sync-external-store-shim.development.js","webpack://wave-reader/../log-view-machine/node_modules/use-sync-external-store/cjs/use-sync-external-store-shim/with-selector.development.js","webpack://wave-reader/../log-view-machine/node_modules/use-sync-external-store/shim/index.js","webpack://wave-reader/../log-view-machine/node_modules/use-sync-external-store/shim/with-selector.js","webpack://wave-reader/../log-view-machine/node_modules/xstate/es/Actor.js","webpack://wave-reader/../log-view-machine/node_modules/xstate/es/Machine.js","webpack://wave-reader/../log-view-machine/node_modules/xstate/es/State.js","webpack://wave-reader/../log-view-machine/node_modules/xstate/es/StateNode.js","webpack://wave-reader/../log-view-machine/node_modules/xstate/es/_virtual/_tslib.js","webpack://wave-reader/../log-view-machine/node_modules/xstate/es/actionTypes.js","webpack://wave-reader/../log-view-machine/node_modules/xstate/es/actions.js","webpack://wave-reader/../log-view-machine/node_modules/xstate/es/behaviors.js","webpack://wave-reader/../log-view-machine/node_modules/xstate/es/constants.js","webpack://wave-reader/../log-view-machine/node_modules/xstate/es/devTools.js","webpack://wave-reader/../log-view-machine/node_modules/xstate/es/environment.js","webpack://wave-reader/../log-view-machine/node_modules/xstate/es/index.js","webpack://wave-reader/../log-view-machine/node_modules/xstate/es/interpreter.js","webpack://wave-reader/../log-view-machine/node_modules/xstate/es/invokeUtils.js","webpack://wave-reader/../log-view-machine/node_modules/xstate/es/mapState.js","webpack://wave-reader/../log-view-machine/node_modules/xstate/es/match.js","webpack://wave-reader/../log-view-machine/node_modules/xstate/es/registry.js","webpack://wave-reader/../log-view-machine/node_modules/xstate/es/scheduler.js","webpack://wave-reader/../log-view-machine/node_modules/xstate/es/schema.js","webpack://wave-reader/../log-view-machine/node_modules/xstate/es/serviceScope.js","webpack://wave-reader/../log-view-machine/node_modules/xstate/es/stateUtils.js","webpack://wave-reader/../log-view-machine/node_modules/xstate/es/types.js","webpack://wave-reader/../log-view-machine/node_modules/xstate/es/utils.js","webpack://wave-reader/./node_modules/process/browser.js","webpack://wave-reader/./node_modules/regenerator-runtime/runtime.js","webpack://wave-reader/./node_modules/rxjs/dist/esm5/internal/NotificationFactories.js","webpack://wave-reader/./node_modules/rxjs/dist/esm5/internal/Observable.js","webpack://wave-reader/./node_modules/rxjs/dist/esm5/internal/Subscriber.js","webpack://wave-reader/./node_modules/rxjs/dist/esm5/internal/Subscription.js","webpack://wave-reader/./node_modules/rxjs/dist/esm5/internal/config.js","webpack://wave-reader/./node_modules/rxjs/dist/esm5/internal/scheduler/timeoutProvider.js","webpack://wave-reader/./node_modules/rxjs/dist/esm5/internal/symbol/observable.js","webpack://wave-reader/./node_modules/rxjs/dist/esm5/internal/util/UnsubscriptionError.js","webpack://wave-reader/./node_modules/rxjs/dist/esm5/internal/util/arrRemove.js","webpack://wave-reader/./node_modules/rxjs/dist/esm5/internal/util/createErrorClass.js","webpack://wave-reader/./node_modules/rxjs/dist/esm5/internal/util/errorContext.js","webpack://wave-reader/./node_modules/rxjs/dist/esm5/internal/util/identity.js","webpack://wave-reader/./node_modules/rxjs/dist/esm5/internal/util/isFunction.js","webpack://wave-reader/./node_modules/rxjs/dist/esm5/internal/util/noop.js","webpack://wave-reader/./node_modules/rxjs/dist/esm5/internal/util/pipe.js","webpack://wave-reader/./node_modules/rxjs/dist/esm5/internal/util/reportUnhandledError.js","webpack://wave-reader/./node_modules/tinycolor2/esm/tinycolor.js","webpack://wave-reader/./node_modules/tslib/tslib.es6.mjs","webpack://wave-reader/./src/components/util/user-input.ts","webpack://wave-reader/./src/content-scripts/log-view-content-system-integrated.ts","webpack://wave-reader/./src/content-scripts/log-view-content-system-tome.ts","webpack://wave-reader/./src/content-scripts/log-view-shadow-system-tome.ts","webpack://wave-reader/./src/models/defaults.ts","webpack://wave-reader/./src/models/message.ts","webpack://wave-reader/./src/models/messages/simplified-messages.ts","webpack://wave-reader/./src/models/options.ts","webpack://wave-reader/./src/models/text.ts","webpack://wave-reader/./src/models/wave.ts","webpack://wave-reader/./src/services/content-system-dom-service.ts","webpack://wave-reader/./src/services/content-system-message-service.ts","webpack://wave-reader/./src/services/keychord-content-integration.ts","webpack://wave-reader/./src/services/keychord-service.ts","webpack://wave-reader/./src/services/ml-settings-service.ts","webpack://wave-reader/./src/services/selector-hierarchy.ts","webpack://wave-reader/./src/services/simple-color-service.ts","webpack://wave-reader/./src/types/tome-metadata.ts","webpack://wave-reader/./src/util/attribute-constructor.ts","webpack://wave-reader/./src/util/util.ts","webpack://wave-reader/webpack/bootstrap","webpack://wave-reader/webpack/runtime/compat get default export","webpack://wave-reader/webpack/runtime/create fake namespace object","webpack://wave-reader/webpack/runtime/define property getters","webpack://wave-reader/webpack/runtime/hasOwnProperty shorthand","webpack://wave-reader/webpack/runtime/make namespace object","webpack://wave-reader/webpack/runtime/node module decorator","webpack://wave-reader/./static/content.js"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","/**\n * @license React\n * react-jsx-runtime.development.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nif (process.env.NODE_ENV !== \"production\") {\n  (function() {\n'use strict';\n\nvar React = require('react');\n\n// ATTENTION\n// When adding new symbols to this file,\n// Please consider also adding to 'react-devtools-shared/src/backend/ReactSymbols'\n// The Symbol used to tag the ReactElement-like types.\nvar REACT_ELEMENT_TYPE = Symbol.for('react.element');\nvar REACT_PORTAL_TYPE = Symbol.for('react.portal');\nvar REACT_FRAGMENT_TYPE = Symbol.for('react.fragment');\nvar REACT_STRICT_MODE_TYPE = Symbol.for('react.strict_mode');\nvar REACT_PROFILER_TYPE = Symbol.for('react.profiler');\nvar REACT_PROVIDER_TYPE = Symbol.for('react.provider');\nvar REACT_CONTEXT_TYPE = Symbol.for('react.context');\nvar REACT_FORWARD_REF_TYPE = Symbol.for('react.forward_ref');\nvar REACT_SUSPENSE_TYPE = Symbol.for('react.suspense');\nvar REACT_SUSPENSE_LIST_TYPE = Symbol.for('react.suspense_list');\nvar REACT_MEMO_TYPE = Symbol.for('react.memo');\nvar REACT_LAZY_TYPE = Symbol.for('react.lazy');\nvar REACT_OFFSCREEN_TYPE = Symbol.for('react.offscreen');\nvar MAYBE_ITERATOR_SYMBOL = Symbol.iterator;\nvar FAUX_ITERATOR_SYMBOL = '@@iterator';\nfunction getIteratorFn(maybeIterable) {\n  if (maybeIterable === null || typeof maybeIterable !== 'object') {\n    return null;\n  }\n\n  var maybeIterator = MAYBE_ITERATOR_SYMBOL && maybeIterable[MAYBE_ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL];\n\n  if (typeof maybeIterator === 'function') {\n    return maybeIterator;\n  }\n\n  return null;\n}\n\nvar ReactSharedInternals = React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n\nfunction error(format) {\n  {\n    {\n      for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        args[_key2 - 1] = arguments[_key2];\n      }\n\n      printWarning('error', format, args);\n    }\n  }\n}\n\nfunction printWarning(level, format, args) {\n  // When changing this logic, you might want to also\n  // update consoleWithStackDev.www.js as well.\n  {\n    var ReactDebugCurrentFrame = ReactSharedInternals.ReactDebugCurrentFrame;\n    var stack = ReactDebugCurrentFrame.getStackAddendum();\n\n    if (stack !== '') {\n      format += '%s';\n      args = args.concat([stack]);\n    } // eslint-disable-next-line react-internal/safe-string-coercion\n\n\n    var argsWithFormat = args.map(function (item) {\n      return String(item);\n    }); // Careful: RN currently depends on this prefix\n\n    argsWithFormat.unshift('Warning: ' + format); // We intentionally don't use spread (or .apply) directly because it\n    // breaks IE9: https://github.com/facebook/react/issues/13610\n    // eslint-disable-next-line react-internal/no-production-logging\n\n    Function.prototype.apply.call(console[level], console, argsWithFormat);\n  }\n}\n\n// -----------------------------------------------------------------------------\n\nvar enableScopeAPI = false; // Experimental Create Event Handle API.\nvar enableCacheElement = false;\nvar enableTransitionTracing = false; // No known bugs, but needs performance testing\n\nvar enableLegacyHidden = false; // Enables unstable_avoidThisFallback feature in Fiber\n// stuff. Intended to enable React core members to more easily debug scheduling\n// issues in DEV builds.\n\nvar enableDebugTracing = false; // Track which Fiber(s) schedule render work.\n\nvar REACT_MODULE_REFERENCE;\n\n{\n  REACT_MODULE_REFERENCE = Symbol.for('react.module.reference');\n}\n\nfunction isValidElementType(type) {\n  if (typeof type === 'string' || typeof type === 'function') {\n    return true;\n  } // Note: typeof might be other than 'symbol' or 'number' (e.g. if it's a polyfill).\n\n\n  if (type === REACT_FRAGMENT_TYPE || type === REACT_PROFILER_TYPE || enableDebugTracing  || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || type === REACT_SUSPENSE_LIST_TYPE || enableLegacyHidden  || type === REACT_OFFSCREEN_TYPE || enableScopeAPI  || enableCacheElement  || enableTransitionTracing ) {\n    return true;\n  }\n\n  if (typeof type === 'object' && type !== null) {\n    if (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_PROVIDER_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_FORWARD_REF_TYPE || // This needs to include all possible module reference object\n    // types supported by any Flight configuration anywhere since\n    // we don't know which Flight build this will end up being used\n    // with.\n    type.$$typeof === REACT_MODULE_REFERENCE || type.getModuleId !== undefined) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction getWrappedName(outerType, innerType, wrapperName) {\n  var displayName = outerType.displayName;\n\n  if (displayName) {\n    return displayName;\n  }\n\n  var functionName = innerType.displayName || innerType.name || '';\n  return functionName !== '' ? wrapperName + \"(\" + functionName + \")\" : wrapperName;\n} // Keep in sync with react-reconciler/getComponentNameFromFiber\n\n\nfunction getContextName(type) {\n  return type.displayName || 'Context';\n} // Note that the reconciler package should generally prefer to use getComponentNameFromFiber() instead.\n\n\nfunction getComponentNameFromType(type) {\n  if (type == null) {\n    // Host root, text node or just invalid type.\n    return null;\n  }\n\n  {\n    if (typeof type.tag === 'number') {\n      error('Received an unexpected object in getComponentNameFromType(). ' + 'This is likely a bug in React. Please file an issue.');\n    }\n  }\n\n  if (typeof type === 'function') {\n    return type.displayName || type.name || null;\n  }\n\n  if (typeof type === 'string') {\n    return type;\n  }\n\n  switch (type) {\n    case REACT_FRAGMENT_TYPE:\n      return 'Fragment';\n\n    case REACT_PORTAL_TYPE:\n      return 'Portal';\n\n    case REACT_PROFILER_TYPE:\n      return 'Profiler';\n\n    case REACT_STRICT_MODE_TYPE:\n      return 'StrictMode';\n\n    case REACT_SUSPENSE_TYPE:\n      return 'Suspense';\n\n    case REACT_SUSPENSE_LIST_TYPE:\n      return 'SuspenseList';\n\n  }\n\n  if (typeof type === 'object') {\n    switch (type.$$typeof) {\n      case REACT_CONTEXT_TYPE:\n        var context = type;\n        return getContextName(context) + '.Consumer';\n\n      case REACT_PROVIDER_TYPE:\n        var provider = type;\n        return getContextName(provider._context) + '.Provider';\n\n      case REACT_FORWARD_REF_TYPE:\n        return getWrappedName(type, type.render, 'ForwardRef');\n\n      case REACT_MEMO_TYPE:\n        var outerName = type.displayName || null;\n\n        if (outerName !== null) {\n          return outerName;\n        }\n\n        return getComponentNameFromType(type.type) || 'Memo';\n\n      case REACT_LAZY_TYPE:\n        {\n          var lazyComponent = type;\n          var payload = lazyComponent._payload;\n          var init = lazyComponent._init;\n\n          try {\n            return getComponentNameFromType(init(payload));\n          } catch (x) {\n            return null;\n          }\n        }\n\n      // eslint-disable-next-line no-fallthrough\n    }\n  }\n\n  return null;\n}\n\nvar assign = Object.assign;\n\n// Helpers to patch console.logs to avoid logging during side-effect free\n// replaying on render function. This currently only patches the object\n// lazily which won't cover if the log function was extracted eagerly.\n// We could also eagerly patch the method.\nvar disabledDepth = 0;\nvar prevLog;\nvar prevInfo;\nvar prevWarn;\nvar prevError;\nvar prevGroup;\nvar prevGroupCollapsed;\nvar prevGroupEnd;\n\nfunction disabledLog() {}\n\ndisabledLog.__reactDisabledLog = true;\nfunction disableLogs() {\n  {\n    if (disabledDepth === 0) {\n      /* eslint-disable react-internal/no-production-logging */\n      prevLog = console.log;\n      prevInfo = console.info;\n      prevWarn = console.warn;\n      prevError = console.error;\n      prevGroup = console.group;\n      prevGroupCollapsed = console.groupCollapsed;\n      prevGroupEnd = console.groupEnd; // https://github.com/facebook/react/issues/19099\n\n      var props = {\n        configurable: true,\n        enumerable: true,\n        value: disabledLog,\n        writable: true\n      }; // $FlowFixMe Flow thinks console is immutable.\n\n      Object.defineProperties(console, {\n        info: props,\n        log: props,\n        warn: props,\n        error: props,\n        group: props,\n        groupCollapsed: props,\n        groupEnd: props\n      });\n      /* eslint-enable react-internal/no-production-logging */\n    }\n\n    disabledDepth++;\n  }\n}\nfunction reenableLogs() {\n  {\n    disabledDepth--;\n\n    if (disabledDepth === 0) {\n      /* eslint-disable react-internal/no-production-logging */\n      var props = {\n        configurable: true,\n        enumerable: true,\n        writable: true\n      }; // $FlowFixMe Flow thinks console is immutable.\n\n      Object.defineProperties(console, {\n        log: assign({}, props, {\n          value: prevLog\n        }),\n        info: assign({}, props, {\n          value: prevInfo\n        }),\n        warn: assign({}, props, {\n          value: prevWarn\n        }),\n        error: assign({}, props, {\n          value: prevError\n        }),\n        group: assign({}, props, {\n          value: prevGroup\n        }),\n        groupCollapsed: assign({}, props, {\n          value: prevGroupCollapsed\n        }),\n        groupEnd: assign({}, props, {\n          value: prevGroupEnd\n        })\n      });\n      /* eslint-enable react-internal/no-production-logging */\n    }\n\n    if (disabledDepth < 0) {\n      error('disabledDepth fell below zero. ' + 'This is a bug in React. Please file an issue.');\n    }\n  }\n}\n\nvar ReactCurrentDispatcher = ReactSharedInternals.ReactCurrentDispatcher;\nvar prefix;\nfunction describeBuiltInComponentFrame(name, source, ownerFn) {\n  {\n    if (prefix === undefined) {\n      // Extract the VM specific prefix used by each line.\n      try {\n        throw Error();\n      } catch (x) {\n        var match = x.stack.trim().match(/\\n( *(at )?)/);\n        prefix = match && match[1] || '';\n      }\n    } // We use the prefix to ensure our stacks line up with native stack frames.\n\n\n    return '\\n' + prefix + name;\n  }\n}\nvar reentry = false;\nvar componentFrameCache;\n\n{\n  var PossiblyWeakMap = typeof WeakMap === 'function' ? WeakMap : Map;\n  componentFrameCache = new PossiblyWeakMap();\n}\n\nfunction describeNativeComponentFrame(fn, construct) {\n  // If something asked for a stack inside a fake render, it should get ignored.\n  if ( !fn || reentry) {\n    return '';\n  }\n\n  {\n    var frame = componentFrameCache.get(fn);\n\n    if (frame !== undefined) {\n      return frame;\n    }\n  }\n\n  var control;\n  reentry = true;\n  var previousPrepareStackTrace = Error.prepareStackTrace; // $FlowFixMe It does accept undefined.\n\n  Error.prepareStackTrace = undefined;\n  var previousDispatcher;\n\n  {\n    previousDispatcher = ReactCurrentDispatcher.current; // Set the dispatcher in DEV because this might be call in the render function\n    // for warnings.\n\n    ReactCurrentDispatcher.current = null;\n    disableLogs();\n  }\n\n  try {\n    // This should throw.\n    if (construct) {\n      // Something should be setting the props in the constructor.\n      var Fake = function () {\n        throw Error();\n      }; // $FlowFixMe\n\n\n      Object.defineProperty(Fake.prototype, 'props', {\n        set: function () {\n          // We use a throwing setter instead of frozen or non-writable props\n          // because that won't throw in a non-strict mode function.\n          throw Error();\n        }\n      });\n\n      if (typeof Reflect === 'object' && Reflect.construct) {\n        // We construct a different control for this case to include any extra\n        // frames added by the construct call.\n        try {\n          Reflect.construct(Fake, []);\n        } catch (x) {\n          control = x;\n        }\n\n        Reflect.construct(fn, [], Fake);\n      } else {\n        try {\n          Fake.call();\n        } catch (x) {\n          control = x;\n        }\n\n        fn.call(Fake.prototype);\n      }\n    } else {\n      try {\n        throw Error();\n      } catch (x) {\n        control = x;\n      }\n\n      fn();\n    }\n  } catch (sample) {\n    // This is inlined manually because closure doesn't do it for us.\n    if (sample && control && typeof sample.stack === 'string') {\n      // This extracts the first frame from the sample that isn't also in the control.\n      // Skipping one frame that we assume is the frame that calls the two.\n      var sampleLines = sample.stack.split('\\n');\n      var controlLines = control.stack.split('\\n');\n      var s = sampleLines.length - 1;\n      var c = controlLines.length - 1;\n\n      while (s >= 1 && c >= 0 && sampleLines[s] !== controlLines[c]) {\n        // We expect at least one stack frame to be shared.\n        // Typically this will be the root most one. However, stack frames may be\n        // cut off due to maximum stack limits. In this case, one maybe cut off\n        // earlier than the other. We assume that the sample is longer or the same\n        // and there for cut off earlier. So we should find the root most frame in\n        // the sample somewhere in the control.\n        c--;\n      }\n\n      for (; s >= 1 && c >= 0; s--, c--) {\n        // Next we find the first one that isn't the same which should be the\n        // frame that called our sample function and the control.\n        if (sampleLines[s] !== controlLines[c]) {\n          // In V8, the first line is describing the message but other VMs don't.\n          // If we're about to return the first line, and the control is also on the same\n          // line, that's a pretty good indicator that our sample threw at same line as\n          // the control. I.e. before we entered the sample frame. So we ignore this result.\n          // This can happen if you passed a class to function component, or non-function.\n          if (s !== 1 || c !== 1) {\n            do {\n              s--;\n              c--; // We may still have similar intermediate frames from the construct call.\n              // The next one that isn't the same should be our match though.\n\n              if (c < 0 || sampleLines[s] !== controlLines[c]) {\n                // V8 adds a \"new\" prefix for native classes. Let's remove it to make it prettier.\n                var _frame = '\\n' + sampleLines[s].replace(' at new ', ' at '); // If our component frame is labeled \"<anonymous>\"\n                // but we have a user-provided \"displayName\"\n                // splice it in to make the stack more readable.\n\n\n                if (fn.displayName && _frame.includes('<anonymous>')) {\n                  _frame = _frame.replace('<anonymous>', fn.displayName);\n                }\n\n                {\n                  if (typeof fn === 'function') {\n                    componentFrameCache.set(fn, _frame);\n                  }\n                } // Return the line we found.\n\n\n                return _frame;\n              }\n            } while (s >= 1 && c >= 0);\n          }\n\n          break;\n        }\n      }\n    }\n  } finally {\n    reentry = false;\n\n    {\n      ReactCurrentDispatcher.current = previousDispatcher;\n      reenableLogs();\n    }\n\n    Error.prepareStackTrace = previousPrepareStackTrace;\n  } // Fallback to just using the name if we couldn't make it throw.\n\n\n  var name = fn ? fn.displayName || fn.name : '';\n  var syntheticFrame = name ? describeBuiltInComponentFrame(name) : '';\n\n  {\n    if (typeof fn === 'function') {\n      componentFrameCache.set(fn, syntheticFrame);\n    }\n  }\n\n  return syntheticFrame;\n}\nfunction describeFunctionComponentFrame(fn, source, ownerFn) {\n  {\n    return describeNativeComponentFrame(fn, false);\n  }\n}\n\nfunction shouldConstruct(Component) {\n  var prototype = Component.prototype;\n  return !!(prototype && prototype.isReactComponent);\n}\n\nfunction describeUnknownElementTypeFrameInDEV(type, source, ownerFn) {\n\n  if (type == null) {\n    return '';\n  }\n\n  if (typeof type === 'function') {\n    {\n      return describeNativeComponentFrame(type, shouldConstruct(type));\n    }\n  }\n\n  if (typeof type === 'string') {\n    return describeBuiltInComponentFrame(type);\n  }\n\n  switch (type) {\n    case REACT_SUSPENSE_TYPE:\n      return describeBuiltInComponentFrame('Suspense');\n\n    case REACT_SUSPENSE_LIST_TYPE:\n      return describeBuiltInComponentFrame('SuspenseList');\n  }\n\n  if (typeof type === 'object') {\n    switch (type.$$typeof) {\n      case REACT_FORWARD_REF_TYPE:\n        return describeFunctionComponentFrame(type.render);\n\n      case REACT_MEMO_TYPE:\n        // Memo may contain any component type so we recursively resolve it.\n        return describeUnknownElementTypeFrameInDEV(type.type, source, ownerFn);\n\n      case REACT_LAZY_TYPE:\n        {\n          var lazyComponent = type;\n          var payload = lazyComponent._payload;\n          var init = lazyComponent._init;\n\n          try {\n            // Lazy may contain any component type so we recursively resolve it.\n            return describeUnknownElementTypeFrameInDEV(init(payload), source, ownerFn);\n          } catch (x) {}\n        }\n    }\n  }\n\n  return '';\n}\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nvar loggedTypeFailures = {};\nvar ReactDebugCurrentFrame = ReactSharedInternals.ReactDebugCurrentFrame;\n\nfunction setCurrentlyValidatingElement(element) {\n  {\n    if (element) {\n      var owner = element._owner;\n      var stack = describeUnknownElementTypeFrameInDEV(element.type, element._source, owner ? owner.type : null);\n      ReactDebugCurrentFrame.setExtraStackFrame(stack);\n    } else {\n      ReactDebugCurrentFrame.setExtraStackFrame(null);\n    }\n  }\n}\n\nfunction checkPropTypes(typeSpecs, values, location, componentName, element) {\n  {\n    // $FlowFixMe This is okay but Flow doesn't know it.\n    var has = Function.call.bind(hasOwnProperty);\n\n    for (var typeSpecName in typeSpecs) {\n      if (has(typeSpecs, typeSpecName)) {\n        var error$1 = void 0; // Prop type validation may throw. In case they do, we don't want to\n        // fail the render phase where it didn't fail before. So we log it.\n        // After these have been cleaned up, we'll let them throw.\n\n        try {\n          // This is intentionally an invariant that gets caught. It's the same\n          // behavior as without this statement except with a better message.\n          if (typeof typeSpecs[typeSpecName] !== 'function') {\n            // eslint-disable-next-line react-internal/prod-error-codes\n            var err = Error((componentName || 'React class') + ': ' + location + ' type `' + typeSpecName + '` is invalid; ' + 'it must be a function, usually from the `prop-types` package, but received `' + typeof typeSpecs[typeSpecName] + '`.' + 'This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.');\n            err.name = 'Invariant Violation';\n            throw err;\n          }\n\n          error$1 = typeSpecs[typeSpecName](values, typeSpecName, componentName, location, null, 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED');\n        } catch (ex) {\n          error$1 = ex;\n        }\n\n        if (error$1 && !(error$1 instanceof Error)) {\n          setCurrentlyValidatingElement(element);\n\n          error('%s: type specification of %s' + ' `%s` is invalid; the type checker ' + 'function must return `null` or an `Error` but returned a %s. ' + 'You may have forgotten to pass an argument to the type checker ' + 'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and ' + 'shape all require an argument).', componentName || 'React class', location, typeSpecName, typeof error$1);\n\n          setCurrentlyValidatingElement(null);\n        }\n\n        if (error$1 instanceof Error && !(error$1.message in loggedTypeFailures)) {\n          // Only monitor this failure once because there tends to be a lot of the\n          // same error.\n          loggedTypeFailures[error$1.message] = true;\n          setCurrentlyValidatingElement(element);\n\n          error('Failed %s type: %s', location, error$1.message);\n\n          setCurrentlyValidatingElement(null);\n        }\n      }\n    }\n  }\n}\n\nvar isArrayImpl = Array.isArray; // eslint-disable-next-line no-redeclare\n\nfunction isArray(a) {\n  return isArrayImpl(a);\n}\n\n/*\n * The `'' + value` pattern (used in in perf-sensitive code) throws for Symbol\n * and Temporal.* types. See https://github.com/facebook/react/pull/22064.\n *\n * The functions in this module will throw an easier-to-understand,\n * easier-to-debug exception with a clear errors message message explaining the\n * problem. (Instead of a confusing exception thrown inside the implementation\n * of the `value` object).\n */\n// $FlowFixMe only called in DEV, so void return is not possible.\nfunction typeName(value) {\n  {\n    // toStringTag is needed for namespaced types like Temporal.Instant\n    var hasToStringTag = typeof Symbol === 'function' && Symbol.toStringTag;\n    var type = hasToStringTag && value[Symbol.toStringTag] || value.constructor.name || 'Object';\n    return type;\n  }\n} // $FlowFixMe only called in DEV, so void return is not possible.\n\n\nfunction willCoercionThrow(value) {\n  {\n    try {\n      testStringCoercion(value);\n      return false;\n    } catch (e) {\n      return true;\n    }\n  }\n}\n\nfunction testStringCoercion(value) {\n  // If you ended up here by following an exception call stack, here's what's\n  // happened: you supplied an object or symbol value to React (as a prop, key,\n  // DOM attribute, CSS property, string ref, etc.) and when React tried to\n  // coerce it to a string using `'' + value`, an exception was thrown.\n  //\n  // The most common types that will cause this exception are `Symbol` instances\n  // and Temporal objects like `Temporal.Instant`. But any object that has a\n  // `valueOf` or `[Symbol.toPrimitive]` method that throws will also cause this\n  // exception. (Library authors do this to prevent users from using built-in\n  // numeric operators like `+` or comparison operators like `>=` because custom\n  // methods are needed to perform accurate arithmetic or comparison.)\n  //\n  // To fix the problem, coerce this object or symbol value to a string before\n  // passing it to React. The most reliable way is usually `String(value)`.\n  //\n  // To find which value is throwing, check the browser or debugger console.\n  // Before this exception was thrown, there should be `console.error` output\n  // that shows the type (Symbol, Temporal.PlainDate, etc.) that caused the\n  // problem and how that type was used: key, atrribute, input value prop, etc.\n  // In most cases, this console output also shows the component and its\n  // ancestor components where the exception happened.\n  //\n  // eslint-disable-next-line react-internal/safe-string-coercion\n  return '' + value;\n}\nfunction checkKeyStringCoercion(value) {\n  {\n    if (willCoercionThrow(value)) {\n      error('The provided key is an unsupported type %s.' + ' This value must be coerced to a string before before using it here.', typeName(value));\n\n      return testStringCoercion(value); // throw (to help callers find troubleshooting comments)\n    }\n  }\n}\n\nvar ReactCurrentOwner = ReactSharedInternals.ReactCurrentOwner;\nvar RESERVED_PROPS = {\n  key: true,\n  ref: true,\n  __self: true,\n  __source: true\n};\nvar specialPropKeyWarningShown;\nvar specialPropRefWarningShown;\nvar didWarnAboutStringRefs;\n\n{\n  didWarnAboutStringRefs = {};\n}\n\nfunction hasValidRef(config) {\n  {\n    if (hasOwnProperty.call(config, 'ref')) {\n      var getter = Object.getOwnPropertyDescriptor(config, 'ref').get;\n\n      if (getter && getter.isReactWarning) {\n        return false;\n      }\n    }\n  }\n\n  return config.ref !== undefined;\n}\n\nfunction hasValidKey(config) {\n  {\n    if (hasOwnProperty.call(config, 'key')) {\n      var getter = Object.getOwnPropertyDescriptor(config, 'key').get;\n\n      if (getter && getter.isReactWarning) {\n        return false;\n      }\n    }\n  }\n\n  return config.key !== undefined;\n}\n\nfunction warnIfStringRefCannotBeAutoConverted(config, self) {\n  {\n    if (typeof config.ref === 'string' && ReactCurrentOwner.current && self && ReactCurrentOwner.current.stateNode !== self) {\n      var componentName = getComponentNameFromType(ReactCurrentOwner.current.type);\n\n      if (!didWarnAboutStringRefs[componentName]) {\n        error('Component \"%s\" contains the string ref \"%s\". ' + 'Support for string refs will be removed in a future major release. ' + 'This case cannot be automatically converted to an arrow function. ' + 'We ask you to manually fix this case by using useRef() or createRef() instead. ' + 'Learn more about using refs safely here: ' + 'https://reactjs.org/link/strict-mode-string-ref', getComponentNameFromType(ReactCurrentOwner.current.type), config.ref);\n\n        didWarnAboutStringRefs[componentName] = true;\n      }\n    }\n  }\n}\n\nfunction defineKeyPropWarningGetter(props, displayName) {\n  {\n    var warnAboutAccessingKey = function () {\n      if (!specialPropKeyWarningShown) {\n        specialPropKeyWarningShown = true;\n\n        error('%s: `key` is not a prop. Trying to access it will result ' + 'in `undefined` being returned. If you need to access the same ' + 'value within the child component, you should pass it as a different ' + 'prop. (https://reactjs.org/link/special-props)', displayName);\n      }\n    };\n\n    warnAboutAccessingKey.isReactWarning = true;\n    Object.defineProperty(props, 'key', {\n      get: warnAboutAccessingKey,\n      configurable: true\n    });\n  }\n}\n\nfunction defineRefPropWarningGetter(props, displayName) {\n  {\n    var warnAboutAccessingRef = function () {\n      if (!specialPropRefWarningShown) {\n        specialPropRefWarningShown = true;\n\n        error('%s: `ref` is not a prop. Trying to access it will result ' + 'in `undefined` being returned. If you need to access the same ' + 'value within the child component, you should pass it as a different ' + 'prop. (https://reactjs.org/link/special-props)', displayName);\n      }\n    };\n\n    warnAboutAccessingRef.isReactWarning = true;\n    Object.defineProperty(props, 'ref', {\n      get: warnAboutAccessingRef,\n      configurable: true\n    });\n  }\n}\n/**\n * Factory method to create a new React element. This no longer adheres to\n * the class pattern, so do not use new to call it. Also, instanceof check\n * will not work. Instead test $$typeof field against Symbol.for('react.element') to check\n * if something is a React Element.\n *\n * @param {*} type\n * @param {*} props\n * @param {*} key\n * @param {string|object} ref\n * @param {*} owner\n * @param {*} self A *temporary* helper to detect places where `this` is\n * different from the `owner` when React.createElement is called, so that we\n * can warn. We want to get rid of owner and replace string `ref`s with arrow\n * functions, and as long as `this` and owner are the same, there will be no\n * change in behavior.\n * @param {*} source An annotation object (added by a transpiler or otherwise)\n * indicating filename, line number, and/or other information.\n * @internal\n */\n\n\nvar ReactElement = function (type, key, ref, self, source, owner, props) {\n  var element = {\n    // This tag allows us to uniquely identify this as a React Element\n    $$typeof: REACT_ELEMENT_TYPE,\n    // Built-in properties that belong on the element\n    type: type,\n    key: key,\n    ref: ref,\n    props: props,\n    // Record the component responsible for creating this element.\n    _owner: owner\n  };\n\n  {\n    // The validation flag is currently mutative. We put it on\n    // an external backing store so that we can freeze the whole object.\n    // This can be replaced with a WeakMap once they are implemented in\n    // commonly used development environments.\n    element._store = {}; // To make comparing ReactElements easier for testing purposes, we make\n    // the validation flag non-enumerable (where possible, which should\n    // include every environment we run tests in), so the test framework\n    // ignores it.\n\n    Object.defineProperty(element._store, 'validated', {\n      configurable: false,\n      enumerable: false,\n      writable: true,\n      value: false\n    }); // self and source are DEV only properties.\n\n    Object.defineProperty(element, '_self', {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: self\n    }); // Two elements created in two different places should be considered\n    // equal for testing purposes and therefore we hide it from enumeration.\n\n    Object.defineProperty(element, '_source', {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: source\n    });\n\n    if (Object.freeze) {\n      Object.freeze(element.props);\n      Object.freeze(element);\n    }\n  }\n\n  return element;\n};\n/**\n * https://github.com/reactjs/rfcs/pull/107\n * @param {*} type\n * @param {object} props\n * @param {string} key\n */\n\nfunction jsxDEV(type, config, maybeKey, source, self) {\n  {\n    var propName; // Reserved names are extracted\n\n    var props = {};\n    var key = null;\n    var ref = null; // Currently, key can be spread in as a prop. This causes a potential\n    // issue if key is also explicitly declared (ie. <div {...props} key=\"Hi\" />\n    // or <div key=\"Hi\" {...props} /> ). We want to deprecate key spread,\n    // but as an intermediary step, we will use jsxDEV for everything except\n    // <div {...props} key=\"Hi\" />, because we aren't currently able to tell if\n    // key is explicitly declared to be undefined or not.\n\n    if (maybeKey !== undefined) {\n      {\n        checkKeyStringCoercion(maybeKey);\n      }\n\n      key = '' + maybeKey;\n    }\n\n    if (hasValidKey(config)) {\n      {\n        checkKeyStringCoercion(config.key);\n      }\n\n      key = '' + config.key;\n    }\n\n    if (hasValidRef(config)) {\n      ref = config.ref;\n      warnIfStringRefCannotBeAutoConverted(config, self);\n    } // Remaining properties are added to a new props object\n\n\n    for (propName in config) {\n      if (hasOwnProperty.call(config, propName) && !RESERVED_PROPS.hasOwnProperty(propName)) {\n        props[propName] = config[propName];\n      }\n    } // Resolve default props\n\n\n    if (type && type.defaultProps) {\n      var defaultProps = type.defaultProps;\n\n      for (propName in defaultProps) {\n        if (props[propName] === undefined) {\n          props[propName] = defaultProps[propName];\n        }\n      }\n    }\n\n    if (key || ref) {\n      var displayName = typeof type === 'function' ? type.displayName || type.name || 'Unknown' : type;\n\n      if (key) {\n        defineKeyPropWarningGetter(props, displayName);\n      }\n\n      if (ref) {\n        defineRefPropWarningGetter(props, displayName);\n      }\n    }\n\n    return ReactElement(type, key, ref, self, source, ReactCurrentOwner.current, props);\n  }\n}\n\nvar ReactCurrentOwner$1 = ReactSharedInternals.ReactCurrentOwner;\nvar ReactDebugCurrentFrame$1 = ReactSharedInternals.ReactDebugCurrentFrame;\n\nfunction setCurrentlyValidatingElement$1(element) {\n  {\n    if (element) {\n      var owner = element._owner;\n      var stack = describeUnknownElementTypeFrameInDEV(element.type, element._source, owner ? owner.type : null);\n      ReactDebugCurrentFrame$1.setExtraStackFrame(stack);\n    } else {\n      ReactDebugCurrentFrame$1.setExtraStackFrame(null);\n    }\n  }\n}\n\nvar propTypesMisspellWarningShown;\n\n{\n  propTypesMisspellWarningShown = false;\n}\n/**\n * Verifies the object is a ReactElement.\n * See https://reactjs.org/docs/react-api.html#isvalidelement\n * @param {?object} object\n * @return {boolean} True if `object` is a ReactElement.\n * @final\n */\n\n\nfunction isValidElement(object) {\n  {\n    return typeof object === 'object' && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;\n  }\n}\n\nfunction getDeclarationErrorAddendum() {\n  {\n    if (ReactCurrentOwner$1.current) {\n      var name = getComponentNameFromType(ReactCurrentOwner$1.current.type);\n\n      if (name) {\n        return '\\n\\nCheck the render method of `' + name + '`.';\n      }\n    }\n\n    return '';\n  }\n}\n\nfunction getSourceInfoErrorAddendum(source) {\n  {\n    if (source !== undefined) {\n      var fileName = source.fileName.replace(/^.*[\\\\\\/]/, '');\n      var lineNumber = source.lineNumber;\n      return '\\n\\nCheck your code at ' + fileName + ':' + lineNumber + '.';\n    }\n\n    return '';\n  }\n}\n/**\n * Warn if there's no key explicitly set on dynamic arrays of children or\n * object keys are not valid. This allows us to keep track of children between\n * updates.\n */\n\n\nvar ownerHasKeyUseWarning = {};\n\nfunction getCurrentComponentErrorInfo(parentType) {\n  {\n    var info = getDeclarationErrorAddendum();\n\n    if (!info) {\n      var parentName = typeof parentType === 'string' ? parentType : parentType.displayName || parentType.name;\n\n      if (parentName) {\n        info = \"\\n\\nCheck the top-level render call using <\" + parentName + \">.\";\n      }\n    }\n\n    return info;\n  }\n}\n/**\n * Warn if the element doesn't have an explicit key assigned to it.\n * This element is in an array. The array could grow and shrink or be\n * reordered. All children that haven't already been validated are required to\n * have a \"key\" property assigned to it. Error statuses are cached so a warning\n * will only be shown once.\n *\n * @internal\n * @param {ReactElement} element Element that requires a key.\n * @param {*} parentType element's parent's type.\n */\n\n\nfunction validateExplicitKey(element, parentType) {\n  {\n    if (!element._store || element._store.validated || element.key != null) {\n      return;\n    }\n\n    element._store.validated = true;\n    var currentComponentErrorInfo = getCurrentComponentErrorInfo(parentType);\n\n    if (ownerHasKeyUseWarning[currentComponentErrorInfo]) {\n      return;\n    }\n\n    ownerHasKeyUseWarning[currentComponentErrorInfo] = true; // Usually the current owner is the offender, but if it accepts children as a\n    // property, it may be the creator of the child that's responsible for\n    // assigning it a key.\n\n    var childOwner = '';\n\n    if (element && element._owner && element._owner !== ReactCurrentOwner$1.current) {\n      // Give the component that originally created this child.\n      childOwner = \" It was passed a child from \" + getComponentNameFromType(element._owner.type) + \".\";\n    }\n\n    setCurrentlyValidatingElement$1(element);\n\n    error('Each child in a list should have a unique \"key\" prop.' + '%s%s See https://reactjs.org/link/warning-keys for more information.', currentComponentErrorInfo, childOwner);\n\n    setCurrentlyValidatingElement$1(null);\n  }\n}\n/**\n * Ensure that every element either is passed in a static location, in an\n * array with an explicit keys property defined, or in an object literal\n * with valid key property.\n *\n * @internal\n * @param {ReactNode} node Statically passed child of any type.\n * @param {*} parentType node's parent's type.\n */\n\n\nfunction validateChildKeys(node, parentType) {\n  {\n    if (typeof node !== 'object') {\n      return;\n    }\n\n    if (isArray(node)) {\n      for (var i = 0; i < node.length; i++) {\n        var child = node[i];\n\n        if (isValidElement(child)) {\n          validateExplicitKey(child, parentType);\n        }\n      }\n    } else if (isValidElement(node)) {\n      // This element was passed in a valid location.\n      if (node._store) {\n        node._store.validated = true;\n      }\n    } else if (node) {\n      var iteratorFn = getIteratorFn(node);\n\n      if (typeof iteratorFn === 'function') {\n        // Entry iterators used to provide implicit keys,\n        // but now we print a separate warning for them later.\n        if (iteratorFn !== node.entries) {\n          var iterator = iteratorFn.call(node);\n          var step;\n\n          while (!(step = iterator.next()).done) {\n            if (isValidElement(step.value)) {\n              validateExplicitKey(step.value, parentType);\n            }\n          }\n        }\n      }\n    }\n  }\n}\n/**\n * Given an element, validate that its props follow the propTypes definition,\n * provided by the type.\n *\n * @param {ReactElement} element\n */\n\n\nfunction validatePropTypes(element) {\n  {\n    var type = element.type;\n\n    if (type === null || type === undefined || typeof type === 'string') {\n      return;\n    }\n\n    var propTypes;\n\n    if (typeof type === 'function') {\n      propTypes = type.propTypes;\n    } else if (typeof type === 'object' && (type.$$typeof === REACT_FORWARD_REF_TYPE || // Note: Memo only checks outer props here.\n    // Inner props are checked in the reconciler.\n    type.$$typeof === REACT_MEMO_TYPE)) {\n      propTypes = type.propTypes;\n    } else {\n      return;\n    }\n\n    if (propTypes) {\n      // Intentionally inside to avoid triggering lazy initializers:\n      var name = getComponentNameFromType(type);\n      checkPropTypes(propTypes, element.props, 'prop', name, element);\n    } else if (type.PropTypes !== undefined && !propTypesMisspellWarningShown) {\n      propTypesMisspellWarningShown = true; // Intentionally inside to avoid triggering lazy initializers:\n\n      var _name = getComponentNameFromType(type);\n\n      error('Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?', _name || 'Unknown');\n    }\n\n    if (typeof type.getDefaultProps === 'function' && !type.getDefaultProps.isReactClassApproved) {\n      error('getDefaultProps is only used on classic React.createClass ' + 'definitions. Use a static property named `defaultProps` instead.');\n    }\n  }\n}\n/**\n * Given a fragment, validate that it can only be provided with fragment props\n * @param {ReactElement} fragment\n */\n\n\nfunction validateFragmentProps(fragment) {\n  {\n    var keys = Object.keys(fragment.props);\n\n    for (var i = 0; i < keys.length; i++) {\n      var key = keys[i];\n\n      if (key !== 'children' && key !== 'key') {\n        setCurrentlyValidatingElement$1(fragment);\n\n        error('Invalid prop `%s` supplied to `React.Fragment`. ' + 'React.Fragment can only have `key` and `children` props.', key);\n\n        setCurrentlyValidatingElement$1(null);\n        break;\n      }\n    }\n\n    if (fragment.ref !== null) {\n      setCurrentlyValidatingElement$1(fragment);\n\n      error('Invalid attribute `ref` supplied to `React.Fragment`.');\n\n      setCurrentlyValidatingElement$1(null);\n    }\n  }\n}\n\nvar didWarnAboutKeySpread = {};\nfunction jsxWithValidation(type, props, key, isStaticChildren, source, self) {\n  {\n    var validType = isValidElementType(type); // We warn in this case but don't throw. We expect the element creation to\n    // succeed and there will likely be errors in render.\n\n    if (!validType) {\n      var info = '';\n\n      if (type === undefined || typeof type === 'object' && type !== null && Object.keys(type).length === 0) {\n        info += ' You likely forgot to export your component from the file ' + \"it's defined in, or you might have mixed up default and named imports.\";\n      }\n\n      var sourceInfo = getSourceInfoErrorAddendum(source);\n\n      if (sourceInfo) {\n        info += sourceInfo;\n      } else {\n        info += getDeclarationErrorAddendum();\n      }\n\n      var typeString;\n\n      if (type === null) {\n        typeString = 'null';\n      } else if (isArray(type)) {\n        typeString = 'array';\n      } else if (type !== undefined && type.$$typeof === REACT_ELEMENT_TYPE) {\n        typeString = \"<\" + (getComponentNameFromType(type.type) || 'Unknown') + \" />\";\n        info = ' Did you accidentally export a JSX literal instead of a component?';\n      } else {\n        typeString = typeof type;\n      }\n\n      error('React.jsx: type is invalid -- expected a string (for ' + 'built-in components) or a class/function (for composite ' + 'components) but got: %s.%s', typeString, info);\n    }\n\n    var element = jsxDEV(type, props, key, source, self); // The result can be nullish if a mock or a custom function is used.\n    // TODO: Drop this when these are no longer allowed as the type argument.\n\n    if (element == null) {\n      return element;\n    } // Skip key warning if the type isn't valid since our key validation logic\n    // doesn't expect a non-string/function type and can throw confusing errors.\n    // We don't want exception behavior to differ between dev and prod.\n    // (Rendering will throw with a helpful message and as soon as the type is\n    // fixed, the key warnings will appear.)\n\n\n    if (validType) {\n      var children = props.children;\n\n      if (children !== undefined) {\n        if (isStaticChildren) {\n          if (isArray(children)) {\n            for (var i = 0; i < children.length; i++) {\n              validateChildKeys(children[i], type);\n            }\n\n            if (Object.freeze) {\n              Object.freeze(children);\n            }\n          } else {\n            error('React.jsx: Static children should always be an array. ' + 'You are likely explicitly calling React.jsxs or React.jsxDEV. ' + 'Use the Babel transform instead.');\n          }\n        } else {\n          validateChildKeys(children, type);\n        }\n      }\n    }\n\n    {\n      if (hasOwnProperty.call(props, 'key')) {\n        var componentName = getComponentNameFromType(type);\n        var keys = Object.keys(props).filter(function (k) {\n          return k !== 'key';\n        });\n        var beforeExample = keys.length > 0 ? '{key: someKey, ' + keys.join(': ..., ') + ': ...}' : '{key: someKey}';\n\n        if (!didWarnAboutKeySpread[componentName + beforeExample]) {\n          var afterExample = keys.length > 0 ? '{' + keys.join(': ..., ') + ': ...}' : '{}';\n\n          error('A props object containing a \"key\" prop is being spread into JSX:\\n' + '  let props = %s;\\n' + '  <%s {...props} />\\n' + 'React keys must be passed directly to JSX without using spread:\\n' + '  let props = %s;\\n' + '  <%s key={someKey} {...props} />', beforeExample, componentName, afterExample, componentName);\n\n          didWarnAboutKeySpread[componentName + beforeExample] = true;\n        }\n      }\n    }\n\n    if (type === REACT_FRAGMENT_TYPE) {\n      validateFragmentProps(element);\n    } else {\n      validatePropTypes(element);\n    }\n\n    return element;\n  }\n} // These two functions exist to still get child warnings in dev\n// even with the prod transform. This means that jsxDEV is purely\n// opt-in behavior for better messages but that we won't stop\n// giving you warnings if you use production apis.\n\nfunction jsxWithValidationStatic(type, props, key) {\n  {\n    return jsxWithValidation(type, props, key, true);\n  }\n}\nfunction jsxWithValidationDynamic(type, props, key) {\n  {\n    return jsxWithValidation(type, props, key, false);\n  }\n}\n\nvar jsx =  jsxWithValidationDynamic ; // we may want to special case jsxs internally to take advantage of static children.\n// for now we can ship identical prod functions\n\nvar jsxs =  jsxWithValidationStatic ;\n\nexports.Fragment = REACT_FRAGMENT_TYPE;\nexports.jsx = jsx;\nexports.jsxs = jsxs;\n  })();\n}\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","import React from 'react';\nimport { useMachine } from '@xstate/react';\nimport { createMachine, assign, interpret } from 'xstate';\nimport { RobotCopy } from './RobotCopy';\nimport { MachineRouter } from './TomeBase';\nimport { TomeRenderContainer } from './TomeConfig';\n\n/**\n * Routed send function type for services\n * Allows services to communicate with other machines via the router\n */\nexport type RoutedSend = (target: string, event: string, payload?: any) => Promise<any>;\n\n/**\n * Service meta parameter - provides context and utilities to services\n */\nexport interface ServiceMeta {\n    routedSend?: RoutedSend;\n    machineId: string;\n    router?: MachineRouter;\n    machine?: any;  // Reference to current machine for relative routing\n}\n\n/**\n * XState Action Types for better IDE support\n */\nexport type XStateAction<TContext = any, TEvent = any> = \n  | string \n  | ((context: TContext, event: TEvent) => void)\n  | { type: string; [key: string]: any };\n\n/**\n * XState Action Creator for assign actions\n * @template TContext - The context type\n * @template TEvent - The event type\n */\nexport type ActionCreator<TContext = any, TEvent = any> = \n  | ((context: TContext, event: TEvent) => Partial<TContext>)\n  | Partial<TContext>;\n\n/**\n * XState Actions Configuration\n * @template TContext - The context type\n * @template TEvent - The event type\n */\nexport type XStateActions<TContext = any, TEvent = any> = {\n  [key: string]: XStateAction<TContext, TEvent>;\n};\n\n/**\n * Helper function to create assign actions with better IDE support\n * @template TContext - The context type\n * @template TEvent - The event type\n * @param actionCreator - Function or object that creates the context update\n * @returns XState assign action\n * \n * @example\n * ```typescript\n * // Function-based assign\n * const addItem = createAssignAction<MyContext, AddItemEvent>((context, event) => ({\n *   items: [...context.items, event.payload]\n * }));\n * \n * // Object-based assign\n * const clearItems = createAssignAction<MyContext>({ items: [] });\n * ```\n */\nexport function createAssignAction<TContext = any, TEvent = any>(\n  actionCreator: ActionCreator<TContext, TEvent>\n) {\n  return assign(actionCreator as any);\n}\n\n/**\n * Helper function to create named actions for better navigation\n * @template TContext - The context type\n * @template TEvent - The event type\n * @param name - The action name\n * @param action - The action implementation\n * @returns Named action object\n * \n * @example\n * ```typescript\n * const logAction = createNamedAction('logAction', (context, event) => {\n *   console.log('Action executed:', event.type);\n * });\n * ```\n */\nexport function createNamedAction<TContext = any, TEvent = any>(\n  name: string,\n  action: (context: TContext, event: TEvent) => void\n) {\n  return { [name]: action };\n}\n\nexport interface LogEntry {\n  id: string;\n  timestamp: string;\n  level: string;\n  message: string;\n  metadata?: any;\n}\n\n/**\n * Context object provided to state handlers in withState() methods\n * @template TModel - The type of the model/context data\n */\nexport type StateContext<TModel = any> = {\n  /** Current state name */\n  state: string;\n  /** Current model/context data */\n  model: TModel;\n  /** Available state transitions */\n  transitions: any[];\n  /** \n   * Log a message with optional metadata\n   * @param message - The log message\n   * @param metadata - Optional metadata object\n   */\n  log: (message: string, metadata?: any) => Promise<void>;\n  /** \n   * Render a React component for this state\n   * @param component - The React component to render\n   * @returns The rendered component\n   */\n  view: (component: React.ReactNode) => React.ReactNode;\n  /** Clear the current view */\n  clear: () => void;\n  /** \n   * Transition to a different state\n   * @param to - Target state name\n   */\n  transition: (to: string) => void;\n  /** \n   * Send an event to the state machine\n   * @param event - Event object with type and optional payload\n   */\n  send: (event: any) => void;\n  /** \n   * Register an event handler\n   * @param eventName - Name of the event to listen for\n   * @param handler - Function to call when event occurs\n   */\n  on: (eventName: string, handler: () => void) => void;\n  // Sub-machine support\n  /** \n   * Create a sub-machine\n   * @param machineId - Unique identifier for the sub-machine\n   * @param config - Configuration for the sub-machine\n   * @returns The created sub-machine instance\n   */\n  subMachine: (machineId: string, config: ViewStateMachineConfig<any>) => ViewStateMachine<any>;\n  /** \n   * Get an existing sub-machine\n   * @param machineId - Unique identifier of the sub-machine\n   * @returns The sub-machine instance or undefined if not found\n   */\n  getSubMachine: (machineId: string) => ViewStateMachine<any> | undefined;\n  // GraphQL support\n  graphql: {\n    /** Execute a GraphQL query */\n    query: (query: string, variables?: any) => Promise<any>;\n    /** Execute a GraphQL mutation */\n    mutation: (mutation: string, variables?: any) => Promise<any>;\n    /** Subscribe to a GraphQL subscription */\n    subscription: (subscription: string, variables?: any) => Promise<any>;\n  };\n};\n\n/**\n * Handler function for state-specific logic\n * @template TModel - The type of the model/context data\n * @param context - The state context containing model, view functions, and utilities\n * @returns Promise that resolves when state handling is complete\n */\nexport type StateHandler<TModel = any> = (context: StateContext<TModel>) => Promise<any>;\n\nexport type ViewStateMachineConfig<TModel = any> = {\n  machineId: string;\n  xstateConfig: any;\n  logStates?: Record<string, StateHandler<TModel>>;\n  tomeConfig?: any;\n  subMachines?: Record<string, ViewStateMachineConfig<any>>;\n  predictableActionArguments?: boolean; // Make XState predictableActionArguments configurable\n  router?: MachineRouter;  // Optional router for inter-machine communication\n};\n\nexport class ViewStateMachine<TModel = any> {\n  private machine: any;\n  private stateHandlers: Map<string, StateHandler<TModel>>;\n  private serverStateHandlers: Map<string, (context: ServerStateContext<TModel>) => void> = new Map();\n  private viewStack: React.ReactNode[] = [];\n  private renderContainer?: any;  // Container for wrapping rendered views\n  \n  private logEntries: any[] = [];\n  private tomeConfig?: any;\n  private isTomeSynchronized: boolean = false;\n  private subMachines: Map<string, ViewStateMachine<any>> = new Map();\n  // Add RobotCopy support for incoming messages\n  private robotCopy?: RobotCopy;\n  private incomingMessageHandlers: Map<string, (message: any) => void> = new Map();\n  // Router support for inter-machine communication\n  private router?: MachineRouter;\n  private machineId: string;\n  private routedSend?: RoutedSend;\n  public parentMachine?: any;  // Reference to parent machine for relative routing\n\n  constructor(config: ViewStateMachineConfig<TModel>) {\n    this.stateHandlers = new Map();\n    this.tomeConfig = config.tomeConfig;\n    this.machineId = config.machineId;\n    \n    // Set router if provided\n    if (config.router) {\n      this.setRouter(config.router);\n    }\n    \n    // Create the XState machine\n    const machineDefinition = createMachine({\n      ...config.xstateConfig,\n      predictableActionArguments: config.predictableActionArguments ?? true, // Default to true, but allow override\n      on: {\n        ...config.xstateConfig.on,\n        // Add our custom events\n        VIEW_ADDED: {\n          actions: assign((context: any, event: any) => ({\n            viewStack: [...(context.viewStack || []), event.payload]\n          }))\n        },\n        VIEW_CLEARED: {\n          actions: assign({\n            viewStack: []\n          })\n        },\n        LOG_ADDED: {\n          actions: assign((context: any, event: any) => ({\n            logEntries: [...(context.logEntries || []), event.payload]\n          }))\n        },\n        // Sub-machine events\n        SUB_MACHINE_CREATED: {\n          actions: assign((context: any, event: any) => ({\n            subMachines: { ...context.subMachines, [event.payload.id]: event.payload }\n          }))\n        },\n        // RobotCopy incoming message events\n        ROBOTCOPY_MESSAGE: {\n          actions: assign((context: any, event: any) => ({\n            robotCopyMessages: [...(context.robotCopyMessages || []), event.payload]\n          }))\n        }\n      }\n    }, {\n      // Pass actions from config to options so XState can properly resolve them\n      actions: config.xstateConfig.actions || {},\n      // Wrap services to provide meta parameter with routedSend\n      services: this.wrapServices(config.xstateConfig.services || {})\n    });\n\n    // Interpret the machine to create a service with send method\n    this.machine = interpret(machineDefinition);\n\n    // Register log state handlers if provided\n    if (config.logStates) {\n      Object.entries(config.logStates).forEach(([stateName, handler]) => {\n        this.withState(stateName, handler);\n      });\n    }\n\n    // Initialize sub-machines\n    if (config.subMachines) {\n      Object.entries(config.subMachines).forEach(([id, subConfig]) => {\n        const subMachine = new ViewStateMachine(subConfig);\n        this.subMachines.set(id, subMachine);\n      });\n    }\n  }\n\n  // Add RobotCopy support methods\n  withRobotCopy(robotCopy: RobotCopy): ViewStateMachine<TModel> {\n    this.robotCopy = robotCopy;\n    this.setupRobotCopyIncomingHandling();\n    return this;\n  }\n\n  private setupRobotCopyIncomingHandling() {\n    if (!this.robotCopy) return;\n    \n    // Listen for incoming messages from RobotCopy\n    this.robotCopy.onResponse('default', (response: any) => {\n      const { type, payload } = response;\n      const handler = this.incomingMessageHandlers.get(type);\n      if (handler) {\n        handler(payload);\n      } else {\n        console.log('No handler found for incoming RobotCopy message type:', type);\n      }\n    });\n  }\n\n  registerRobotCopyHandler(eventType: string, handler: (message: any) => void): ViewStateMachine<TModel> {\n    this.incomingMessageHandlers.set(eventType, handler);\n    return this;\n  }\n\n  handleRobotCopyMessage(message: any): void {\n    const { type, payload } = message;\n    const handler = this.incomingMessageHandlers.get(type);\n    if (handler) {\n      handler(payload);\n    }\n  }\n\n  // Fluent API methods\n  /**\n   * Register a state handler for the specified state\n   * @param stateName - The name of the state to handle\n   * @param handler - Function that handles the state logic\n   * @returns This ViewStateMachine instance for method chaining\n   * \n   * @example\n   * ```typescript\n   * machine.withState('idle', async ({ state, model, log, view, transition }) => {\n   *   await log('Entered idle state');\n   *   view(<div>Idle UI</div>);\n   * });\n   * ```\n   */\n  withState(stateName: string, handler: StateHandler<TModel>): ViewStateMachine<TModel> {\n    this.stateHandlers.set(stateName, handler);\n    return this;\n  }\n\n  /**\n   * Execute state handler with proper context\n   * @param stateName - The name of the state to execute\n   * @param context - The state context\n   */\n  private async executeStateHandler(stateName: string, context: StateContext<TModel>): Promise<void> {\n    const handler = this.stateHandlers.get(stateName);\n    if (handler) {\n      try {\n        await handler(context);\n      } catch (error) {\n        console.error(`Error executing state handler for ${stateName}:`, error);\n      }\n    }\n  }\n\n  // Override for withState that registers message handlers\n  withStateAndMessageHandler(\n    stateName: string, \n    handler: StateHandler<TModel>, \n    messageType: string, \n    messageHandler: (message: any) => void\n  ): ViewStateMachine<TModel> {\n    this.stateHandlers.set(stateName, handler);\n    \n    // Register the message handler if RobotCopy is available\n    if (this.robotCopy) {\n      this.registerRobotCopyHandler(messageType, messageHandler);\n    }\n    \n    return this;\n  }\n\n  withServerState(stateName: string, handler: (context: ServerStateContext<TModel>) => void): ViewStateMachine<TModel> {\n    // This method is not directly implemented in the original class,\n    // but the new_code suggests it should be added.\n    // For now, we'll just add a placeholder.\n    // In a real scenario, this would involve adding a new state handler type\n    // or modifying the existing ones to support server-side rendering.\n    // Since the new_code only provided the type, we'll just add a placeholder.\n    // This will likely cause a type error until the actual implementation is added.\n    // @ts-ignore // This is a placeholder, not a direct implementation\n    this.serverStateHandlers.set(stateName, handler);\n    return this;\n  }\n\n  // Sub-machine support\n  withSubMachine(machineId: string, config: ViewStateMachineConfig<any>): ViewStateMachine<TModel> {\n    const subMachine = new ViewStateMachine(config);\n    this.subMachines.set(machineId, subMachine);\n    return this;\n  }\n\n  getSubMachine(machineId: string): ViewStateMachine<any> | undefined {\n    return this.subMachines.get(machineId);\n  }\n\n  // Add missing method for StructuralTomeConnector compatibility\n  subscribe(callback: (state: any) => void): () => void {\n    // Subscribe to state changes - the service must be started first\n    if (this.machine && typeof this.machine.subscribe === 'function') {\n      const subscription = this.machine.subscribe(callback);\n\n      if (typeof subscription === 'function') {\n        return subscription;\n      }\n\n      if (subscription && typeof subscription.unsubscribe === 'function') {\n        return () => subscription.unsubscribe();\n      }\n    }\n\n    // Fallback: create a simple subscription that calls the callback with current state\n    const currentState = this.getState();\n    callback(currentState);\n    return () => {}; // Return empty unsubscribe function\n  }\n\n  // State context methods\n  private createStateContext(state: any, model: TModel): StateContext<TModel> {\n    return {\n      state: state.value,\n      model,\n      transitions: state.history?.events || [],\n      log: async (message: string, metadata?: any) => {\n        const logEntry = {\n          id: Date.now().toString(),\n          timestamp: new Date().toISOString(),\n          level: 'INFO',\n          message,\n          metadata: metadata || {}\n        };\n        this.logEntries.push(logEntry);\n        this.machine.send({ type: 'LOG_ADDED', payload: logEntry });\n        console.log(`[${state.value}] ${message}`, metadata);\n      },\n      view: (component: React.ReactNode) => {\n        if (!this.isTomeSynchronized && this.tomeConfig) {\n          console.warn('Warning: view() called from Tome without synchronized ViewStateMachine. This may cause architectural issues.');\n        }\n        this.viewStack.push(component);\n        this.machine.send({ type: 'VIEW_ADDED', payload: component });\n        return component;\n      },\n      clear: () => {\n        this.viewStack = [];\n        this.machine.send({ type: 'VIEW_CLEARED' });\n      },\n      transition: (to: string) => {\n        this.machine.send({ type: 'TRANSITION', payload: { to } });\n      },\n      send: (event: any) => {\n        this.machine.send(event);\n      },\n      on: (eventName: string, handler: () => void) => {\n        // Register event handlers for state activations\n        this.machine.on(eventName, handler);\n      },\n      // Sub-machine methods\n      subMachine: (machineId: string, config: ViewStateMachineConfig<any>) => {\n        const subMachine = new ViewStateMachine(config);\n        this.subMachines.set(machineId, subMachine);\n        return subMachine;\n      },\n      getSubMachine: (machineId: string) => {\n        return this.subMachines.get(machineId);\n      },\n      // GraphQL methods\n      graphql: {\n        query: async (query: string, variables?: any) => {\n          // This would integrate with a GraphQL client\n          console.log('GraphQL Query:', query, variables);\n          return { data: { query: 'mock-data' } };\n        },\n        mutation: async (mutation: string, variables?: any) => {\n          console.log('GraphQL Mutation:', mutation, variables);\n          return { data: { mutation: 'mock-result' } };\n        },\n        subscription: async (subscription: string, variables?: any) => {\n          console.log('GraphQL Subscription:', subscription, variables);\n          return { data: { subscription: 'mock-stream' } };\n        }\n      }\n    };\n  }\n\n  // React hook for using the machine\n  useViewStateMachine(initialModel: TModel) {\n    const [state, send] = useMachine(this.machine);\n    \n    const context = this.createStateContext(state, initialModel);\n    \n    // Execute state handler if exists\n    React.useEffect(() => {\n      this.executeStateHandler(state.value, context);\n    }, [state.value]);\n\n    return {\n      state: state.value,\n      context: state.context,\n      send,\n      logEntries: this.logEntries,\n      viewStack: this.viewStack,\n      subMachines: this.subMachines,\n      // Expose fluent API methods\n      log: context.log,\n      view: context.view,\n      clear: context.clear,\n      transition: context.transition,\n      subMachine: context.subMachine,\n      getSubMachine: context.getSubMachine\n    };\n  }\n\n  /**\n   * Set the router for inter-machine communication\n   * Creates a routedSend function for services to use\n   */\n  setRouter(router: MachineRouter): void {\n    this.router = router;\n    if (router) {\n      this.routedSend = this.createRoutedSendForContext();\n    }\n  }\n\n  /**\n   * Create a routed send function that supports relative paths\n   * This function is passed to services via the meta parameter\n   */\n  private createRoutedSendForContext(): RoutedSend {\n    return async (target: string, event: string, payload?: any) => {\n      if (!this.router) {\n        throw new Error('Router not available for this machine');\n      }\n      \n      // Try relative resolution first (supports ., .., ./, ../)\n      let machine = this.router.resolveRelative(target, this);\n      \n      // Fallback to absolute resolution\n      if (!machine) {\n        machine = this.router.resolve(target);\n      }\n      \n      if (!machine) {\n        throw new Error(`Machine ${target} not found via router`);\n      }\n      \n      // Format event for XState: if payload provided, merge into event object\n      const formattedEvent = payload \n        ? { type: event, ...payload }\n        : event;\n      \n      // Send the event to the resolved machine\n      if (machine.send) {\n        machine.send(formattedEvent);\n        // Return a simple success response since XState send doesn't return a value\n        return { success: true, event, target };\n      }\n      \n      return { success: false, error: 'No send method' };\n    };\n  }\n\n  /**\n   * Wrap services to provide meta parameter with routedSend and other utilities\n   */\n  private wrapServices(services: any): any {\n    const wrappedServices: any = {};\n    \n    for (const [serviceName, serviceImpl] of Object.entries(services)) {\n      wrappedServices[serviceName] = async (context: any, event: any) => {\n        const meta: ServiceMeta = {\n          routedSend: this.routedSend,\n          machineId: this.machineId,\n          router: this.router,\n          machine: this  // Reference to current machine for relative routing\n        };\n        \n        // Call original service with meta as third parameter\n        return (serviceImpl as Function)(context, event, meta);\n      };\n    }\n    \n    return wrappedServices;\n  }\n\n  // Event subscription methods for TomeConnector\n  on(eventType: string, handler: (event: any) => void): void {\n    if (this.machine && typeof this.machine.on === 'function') {\n      this.machine.on(eventType, handler);\n    } else {\n      console.warn('Machine not started or on method not available');\n    }\n  }\n\n  // Direct send method for TomeConnector\n  send(event: any, payload?: any): void {\n    if (this.machine && typeof this.machine.send === 'function') {\n      const formattedEvent =\n        typeof event === 'string'\n          ? (payload ? { type: event, ...payload } : event)\n          : event;\n\n      this.machine.send(formattedEvent);\n    } else {\n      console.warn('Machine not started or send method not available');\n    }\n  }\n\n  // Start the machine service\n  start(): Promise<void> {\n    if (this.machine && typeof this.machine.start === 'function') {\n      this.machine.start();\n    }\n    return Promise.resolve();\n  }\n\n  // Get current state\n  getState(): any {\n    if (this.machine && typeof this.machine.getSnapshot === 'function') {\n      return this.machine.getSnapshot();\n    }\n    return null;\n  }\n\n  // Stop the machine service\n  stop(): void {\n    if (this.machine && typeof this.machine.stop === 'function') {\n      this.machine.stop();\n    }\n  }\n\n  async executeServerState(stateName: string, model: TModel): Promise<string> {\n    const handler = this.serverStateHandlers.get(stateName);\n    if (handler) {\n      const context = this.createServerStateContext(model);\n      await handler(context);\n      return context.renderedHtml || '';\n    }\n    return '';\n  }\n\n  private createServerStateContext(model: TModel): ServerStateContext<TModel> {\n    return {\n      state: this.machine.initialState.value,\n      model,\n      transitions: [],\n      log: async (message: string, metadata?: any) => {\n        const entry: LogEntry = {\n          id: `log_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n          timestamp: new Date().toISOString(),\n          level: 'INFO',\n          message,\n          metadata,\n        };\n        this.logEntries.push(entry);\n      },\n      renderHtml: (html: string) => {\n        return html;\n      },\n      clear: () => {\n        // Server-side clear operation\n      },\n      transition: (_to: string) => {\n        // Server-side transition\n      },\n      send: (_event: any) => {\n        // Server-side event sending\n      },\n      on: (_eventName: string, _handler: () => void) => {\n        // Server-side event handling\n      },\n      subMachine: (machineId: string, config: ViewStateMachineConfig<any>) => {\n        const subMachine = new ViewStateMachine(config);\n        this.subMachines.set(machineId, subMachine);\n        return subMachine;\n      },\n      getSubMachine: (machineId: string) => {\n        return this.subMachines.get(machineId);\n      },\n      graphql: {\n        query: async (_query: string, _variables?: any) => {\n          // Server-side GraphQL query\n          return {};\n        },\n        mutation: async (_mutation: string, _variables?: any) => {\n          // Server-side GraphQL mutation\n          return {};\n        },\n        subscription: async (_subscription: string, _variables?: any) => {\n          // Server-side GraphQL subscription\n          return {};\n        },\n      },\n      renderedHtml: '',\n    };\n  }\n\n  // Compose with other ViewStateMachines\n  compose(otherView: ViewStateMachine<TModel>): ViewStateMachine<TModel> {\n    // Merge state handlers\n    otherView.stateHandlers.forEach((handler, stateName) => {\n      this.stateHandlers.set(stateName, handler);\n    });\n    \n    // Merge view stacks\n    this.viewStack = [...this.viewStack, ...otherView.viewStack];\n    \n    // Merge sub-machines\n    otherView.subMachines.forEach((subMachine, id) => {\n      this.subMachines.set(id, subMachine);\n    });\n    \n    return this;\n  }\n\n  // Synchronize with Tome\n  synchronizeWithTome(tomeConfig: any): ViewStateMachine<TModel> {\n    this.tomeConfig = tomeConfig;\n    this.isTomeSynchronized = true;\n    return this;\n  }\n\n  /**\n   * Set the render container for wrapping views\n   * todo: consider using React.ComponentType<{ children?: React.ReactNode }>\n   */\n  setRenderContainer(container: TomeRenderContainer | any): ViewStateMachine<TModel> {\n    this.renderContainer = container;\n    return this;\n  }\n\n  // Render the composed view\n  render(model: TModel): React.ReactNode {\n    const composedView = (\n      <div className=\"composed-view\">\n        {this.viewStack.map((view, index) => (\n          <div key={index} className=\"view-container\">\n            {view}\n          </div>\n        ))}\n        {/* Render sub-machines\n        todo: should we add a UI order for subMachines to specifically order? */}\n        {Array.from(this.subMachines.entries()).map(([id, subMachine]) => (\n          <div key={id} className=\"sub-machine-container\">\n            {subMachine.render(model)}\n          </div>\n        ))}\n      </div>\n    );\n\n    // If renderContainer is set, wrap the composed view\n    if (this.renderContainer) {\n      return React.createElement(this.renderContainer, { className: 'view-container' }, composedView);\n    }\n\n    return composedView;\n  }\n}\n\nexport type ServerStateContext<TModel = any> = {\n  state: string;\n  model: TModel;\n  transitions: any[];\n  log: (message: string, metadata?: any) => Promise<void>;\n  renderHtml: (html: string) => string;\n  clear: () => void;\n  transition: (to: string) => void;\n  send: (event: any) => void;\n  on: (eventName: string, handler: () => void) => void;\n  // Sub-machine support\n  subMachine: (machineId: string, config: ViewStateMachineConfig<any>) => ViewStateMachine<any>;\n  getSubMachine: (machineId: string) => ViewStateMachine<any> | undefined;\n  // GraphQL support\n  graphql: {\n    query: (query: string, variables?: any) => Promise<any>;\n    mutation: (mutation: string, variables?: any) => Promise<any>;\n    subscription: (subscription: string, variables?: any) => Promise<any>;\n  };\n  // Server-specific\n  renderedHtml: string;\n};\n\nclass ProxyMachine {\n  private robotCopy: RobotCopy;\n  \n  constructor(robotCopy: RobotCopy) {\n    this.robotCopy = robotCopy;\n  }\n\n  async send(event: any) {\n    await this.robotCopy.sendMessage(event);\n  }\n}\n\nexport type ProxyRobotCopyStateViewStateMachineConfig<TModel = any> = ViewStateMachineConfig<TModel> & {\n  robotCopy: RobotCopy;\n  // Support for incoming message handling\n  incomingMessageHandlers?: Record<string, (message: any) => void>;\n  // predictableActionArguments is inherited from ViewStateMachineConfig\n};\n\nexport class ProxyRobotCopyStateMachine<TModel = any> extends ViewStateMachine<TModel> {\n  private proxyRobotCopy: RobotCopy;\n  private proxyIncomingMessageHandlers: Map<string, (message: any) => void> = new Map();\n  \n  constructor(config: ProxyRobotCopyStateViewStateMachineConfig<TModel>) {\n    super(config);\n    this.proxyRobotCopy = config.robotCopy;\n    // Initialize proxy machine for RobotCopy communication\n    new ProxyMachine(this.proxyRobotCopy);\n    \n    // Set up incoming message handlers\n    if (config.incomingMessageHandlers) {\n      Object.entries(config.incomingMessageHandlers).forEach(([eventType, handler]) => {\n        this.proxyIncomingMessageHandlers.set(eventType, handler);\n      });\n    }\n    \n    // Set up RobotCopy to handle incoming messages\n    this.setupIncomingMessageHandling();\n  }\n\n  private setupIncomingMessageHandling() {\n    // Listen for incoming messages from RobotCopy\n    this.proxyRobotCopy.onResponse('default', (response: any) => {\n      const { type, payload } = response;\n      const handler = this.proxyIncomingMessageHandlers.get(type);\n      if (handler) {\n        handler(payload);\n      } else {\n        console.log('No handler found for incoming message type:', type);\n      }\n    });\n  }\n\n  async send(event: any) {\n    // Send outgoing message through RobotCopy\n    await this.proxyRobotCopy.sendMessage(event);\n  }\n\n  // Add method to register incoming message handlers\n  registerIncomingHandler(eventType: string, handler: (message: any) => void) {\n    this.proxyIncomingMessageHandlers.set(eventType, handler);\n  }\n\n  // Add method to handle incoming messages manually\n  handleIncomingMessage(message: any) {\n    const { type, payload } = message;\n    const handler = this.proxyIncomingMessageHandlers.get(type);\n    if (handler) {\n      handler(payload);\n    }\n  }\n\n  render(_model: TModel): React.ReactNode {\n    throw new Error('ProxyStateMachine does not support rendering');\n  }\n\n  useViewStateMachine(_initialModel: TModel) {\n    throw new Error('ProxyStateMachine does not support useViewStateMachine');\n    return {} as any; // This line will never be reached due to the throw\n  }\n\n  compose(_otherView: ViewStateMachine<TModel>): ViewStateMachine<TModel> {\n    throw new Error('ProxyStateMachine does not support compose');\n  }\n\n  synchronizeWithTome(_tomeConfig: any): ViewStateMachine<TModel> {\n    throw new Error('ProxyStateMachine does not support synchronizeWithTome');\n  }\n\n  withState(stateName: string, handler: StateHandler<TModel>): ViewStateMachine<TModel> {\n    this.registerIncomingHandler(stateName, handler);\n    return this;\n  }\n}\n\nexport function createProxyRobotCopyStateMachine<TModel = any>(\n  config: ProxyRobotCopyStateViewStateMachineConfig<TModel>\n): ProxyRobotCopyStateMachine<TModel>;\nexport function createProxyRobotCopyStateMachine<TModel = any>(\n  config: Omit<ProxyRobotCopyStateViewStateMachineConfig<TModel>, 'predictableActionArguments'>,\n  predictableActionArguments?: boolean\n): ProxyRobotCopyStateMachine<TModel>;\nexport function createProxyRobotCopyStateMachine<TModel = any>(\n  config: ProxyRobotCopyStateViewStateMachineConfig<TModel> | Omit<ProxyRobotCopyStateViewStateMachineConfig<TModel>, 'predictableActionArguments'>,\n  predictableActionArguments?: boolean\n): ProxyRobotCopyStateMachine<TModel> {\n  const fullConfig: ProxyRobotCopyStateViewStateMachineConfig<TModel> = {\n    ...config,\n    ...(predictableActionArguments !== undefined && { predictableActionArguments })\n  };\n  return new ProxyRobotCopyStateMachine(fullConfig);\n}\n\n// Helper function to create a ViewStateMachine\nexport function createViewStateMachine<TModel = any>(\n  config: ViewStateMachineConfig<TModel>\n): ViewStateMachine<TModel>;\nexport function createViewStateMachine<TModel = any>(\n  config: Omit<ViewStateMachineConfig<TModel>, 'predictableActionArguments'>,\n  predictableActionArguments?: boolean\n): ViewStateMachine<TModel>;\nexport function createViewStateMachine<TModel = any>(\n  config: ViewStateMachineConfig<TModel> | Omit<ViewStateMachineConfig<TModel>, 'predictableActionArguments'>,\n  predictableActionArguments?: boolean\n): ViewStateMachine<TModel> {\n  const fullConfig: ViewStateMachineConfig<TModel> = {\n    ...config,\n    ...(predictableActionArguments !== undefined && { predictableActionArguments })\n  };\n  return new ViewStateMachine(fullConfig);\n} ","import React from 'react';\n\n/**\n * ViewStackEntry\n * \n * Represents a single entry in the view stack with metadata\n */\nexport interface ViewStackEntry {\n    key: string;\n    component: React.ReactNode;\n    timestamp: number;\n}\n\n/**\n * ViewStack\n * \n * Manages a stack of React components for stateless rendering.\n * Supports clearing and composing views for the Tome architecture.\n */\nexport class ViewStack {\n    private stack: ViewStackEntry[] = [];\n    private currentView: string = '';\n    private lastViewCleared: number = 0;\n\n    /**\n     * Append a new view to the stack\n     */\n    append(key: string, component: React.ReactNode): void {\n        this.stack.push({\n            key,\n            component,\n            timestamp: Date.now()\n        });\n        this.currentView = key;\n    }\n\n    /**\n     * Clear the entire view stack\n     * Resets to empty state and updates lastViewCleared timestamp\n     */\n    clear(): void {\n        this.stack = [];\n        this.currentView = '';\n        this.lastViewCleared = Date.now();\n    }\n\n    /**\n     * Compose all views in the stack into a single React fragment\n     */\n    compose(): React.ReactNode {\n        if (this.stack.length === 0) {\n            return null;\n        }\n\n        if (this.stack.length === 1) {\n            return this.stack[0].component;\n        }\n\n        // Compose multiple views with unique keys\n        return React.createElement(\n            React.Fragment,\n            null,\n            ...this.stack.map((entry, index) =>\n                React.createElement(\n                    React.Fragment,\n                    { key: `${entry.key}-${entry.timestamp}-${index}` },\n                    entry.component\n                )\n            )\n        );\n    }\n\n    /**\n     * Get the current view key\n     */\n    getCurrentView(): string {\n        return this.currentView;\n    }\n\n    /**\n     * Get the timestamp of the last view clear operation\n     */\n    getLastViewCleared(): number {\n        return this.lastViewCleared;\n    }\n\n    /**\n     * Get the number of views in the stack\n     */\n    getStackSize(): number {\n        return this.stack.length;\n    }\n\n    /**\n     * Check if the stack is empty\n     */\n    isEmpty(): boolean {\n        return this.stack.length === 0;\n    }\n\n    /**\n     * Get a copy of the current stack (for debugging)\n     */\n    getStack(): ViewStackEntry[] {\n        return [...this.stack];\n    }\n}\n\n\n","import React from 'react';\nimport { ViewStack } from './ViewStack';\n\n/**\n * ViewKeyObserver\n * \n * Callback type for observing view key changes\n */\nexport type ViewKeyObserver = (key: string) => void;\n\n/**\n * MachineRouter\n * \n * Handles routing messages between machines using path-based addressing\n */\nexport class MachineRouter {\n    private machines: Map<string, any> = new Map();\n\n    constructor() {\n        // Router for managing hierarchical machine communication\n    }\n\n    /**\n     * Register a machine with a path\n     */\n    register(path: string, machine: any): void {\n        this.machines.set(path, machine);\n    }\n\n    /**\n     * Unregister a machine\n     */\n    unregister(path: string): void {\n        this.machines.delete(path);\n    }\n\n    /**\n     * Resolve a path to a machine (absolute paths only)\n     * For relative paths, use resolveRelative() with a context machine\n     */\n    resolve(path: string): any | undefined {\n        return this.machines.get(path) || undefined;\n    }\n\n    /**\n     * Resolve hierarchical paths like \"Parent.Child.GrandChild\"\n     */\n    resolveHierarchical(path: string): any | null {\n        const parts = path.split('.');\n        let current = this.machines.get(parts[0]);\n        \n        for (let i = 1; i < parts.length && current; i++) {\n            // Try to get sub-machine\n            if (current.subMachines && current.subMachines.get) {\n                current = current.subMachines.get(parts[i]);\n            } else if (current.router && current.router.machines) {\n                current = current.router.machines.get(parts[i]);\n            } else {\n                return null;\n            }\n        }\n        \n        return current;\n    }\n\n    /**\n     * Resolve relative paths from a context machine\n     * Supports: '.', '..', './', '../', '../../', etc.\n     */\n    resolveRelative(path: string, contextMachine: any): any | null {\n        // Handle absolute paths (no . or ..)\n        if (!path.startsWith('.')) {\n            return this.resolveHierarchical(path);\n        }\n        \n        // Handle current machine reference (.)\n        if (path === '.') {\n            return contextMachine;\n        }\n        \n        // Handle parent machine reference (..)\n        if (path === '..') {\n            return contextMachine.parentMachine || null;\n        }\n        \n        // Handle relative child (./ prefix)\n        if (path.startsWith('./')) {\n            const subPath = path.substring(2);\n            return this.navigateFromMachine(contextMachine, subPath);\n        }\n        \n        // Handle relative parent (../ prefix)\n        if (path.startsWith('../')) {\n            let remainingPath = path;\n            let currentMachine = contextMachine;\n\n            while (remainingPath.startsWith('../') || remainingPath.startsWith('..')) {\n                remainingPath = remainingPath.startsWith('../') ?\n                    remainingPath.substring(3) :\n                    remainingPath.substring(2);\n\n                if (currentMachine.parentMachine) {\n                    currentMachine = currentMachine.parentMachine;\n                } else {\n                    console.warn(` TomeBase: No parent available for relative path: ${path} fall back to absolute resolution for: ${remainingPath}`);\n                    // No parent available, fall back to absolute resolution\n                    return remainingPath\n                        ? this.resolveHierarchical(remainingPath)\n                        : null;\n                }\n            }\n\n            if (!remainingPath) {\n                return currentMachine;\n            }\n\n            return this.navigateFromMachine(currentMachine, remainingPath);\n        }\n        \n        return null;\n    }\n\n    /**\n     * Navigate from a specific machine following a path\n     * Supports '/', '.', and '..' as path separators\n     */\n    private navigateFromMachine(machine: any, path: string): any | null {\n        if (!path) return machine;\n        \n        const parts = path.split('/');\n        let current = machine;\n        \n        for (const part of parts) {\n            if (!part || part === '.') {\n                continue; // Empty or stay at current\n            } else if (part === '..') {\n                current = current.parentMachine;\n                if (!current) return null;\n            } else {\n                // Navigate to sub-machine\n                if (current.subMachines && current.subMachines.get) {\n                    current = current.subMachines.get(part);\n                } else if (current.router && current.router.machines) {\n                    current = current.router.machines.get(part);\n                } else {\n                    return null;\n                }\n                if (!current) return null;\n            }\n        }\n        \n        return current;\n    }\n\n    /**\n     * Send a message to a machine at the specified path\n     */\n    send(path: string, event: string, data?: any): Promise<any> {\n        const machine = this.resolve(path);\n        \n        if (!machine) {\n            console.warn(` TomeBase: Cannot resolve path \"${path}\"`);\n            return Promise.resolve({ success: false, error: `Path not found: ${path}` });\n        }\n\n        // If machine has a send method, use it\n        if (machine.send && typeof machine.send === 'function') {\n            try {\n                const result = machine.send({ type: event, ...data });\n                return Promise.resolve(result);\n            } catch (error) {\n                console.error(` TomeBase: Error sending to \"${path}\":`, error);\n                return Promise.resolve({ success: false, error });\n            }\n        }\n\n        console.warn(` TomeBase: Machine at \"${path}\" has no send method`);\n        return Promise.resolve({ success: false, error: 'No send method' });\n    }\n}\n\n/**\n * TomeBase\n * \n * Base class for all Tome modules with observable pattern and view stack integration\n */\nexport abstract class TomeBase {\n    protected viewStack: ViewStack;\n    protected viewKeyObservers: Set<ViewKeyObserver>;\n    protected currentViewKey: string;\n    protected router: MachineRouter;\n    protected machine: any;\n    protected childTomes: Map<string, TomeBase>;\n\n    constructor() {\n        this.viewStack = new ViewStack();\n        this.viewKeyObservers = new Set();\n        this.currentViewKey = 'initial';\n        this.router = new MachineRouter();\n        this.machine = null;\n        this.childTomes = new Map();\n    }\n\n    /**\n     * Get the current view key\n     */\n    getViewKey(): string {\n        return this.currentViewKey;\n    }\n\n    /**\n     * Observe view key changes\n     * Returns an unsubscribe function\n     */\n    observeViewKey(callback: ViewKeyObserver): () => void {\n        this.viewKeyObservers.add(callback);\n        \n        // Immediately call with current value\n        callback(this.currentViewKey);\n        \n        // Return unsubscribe function\n        return () => {\n            this.viewKeyObservers.delete(callback);\n        };\n    }\n\n    /**\n     * Update the view key and notify observers\n     */\n    protected updateViewKey(newKey: string): void {\n        if (this.currentViewKey !== newKey) {\n            this.currentViewKey = newKey;\n            this.notifyViewKeyObservers();\n        }\n    }\n\n    /**\n     * Notify all view key observers\n     */\n    protected notifyViewKeyObservers(): void {\n        this.viewKeyObservers.forEach(observer => {\n            try {\n                observer(this.currentViewKey);\n            } catch (error) {\n                console.error(' TomeBase: Error in view key observer:', error);\n            }\n        });\n    }\n\n    /**\n     * Clear the view stack\n     */\n    clear(): void {\n        this.viewStack.clear();\n        this.updateViewKey(`cleared-${Date.now()}`);\n    }\n\n    /**\n     * Append a view to the stack\n     */\n    protected appendView(key: string, component: React.ReactNode): void {\n        this.viewStack.append(key, component);\n        this.updateViewKey(key);\n    }\n\n    /**\n     * Render the composed view from the view stack\n     * Note: For ViewStateMachines, rendering is handled by the view() function in withState\n     * This method returns the composed view stack for display\n     */\n    render(): React.ReactNode {\n        // If we have a machine with a render method, use it\n        if (this.machine && typeof this.machine.render === 'function') {\n            return this.machine.render();\n        }\n        \n        // Otherwise compose from view stack\n        return this.viewStack.compose();\n    }\n\n    /**\n     * Register a child tome\n     */\n    registerChild(path: string, tome: TomeBase): void {\n        this.childTomes.set(path, tome);\n        this.router.register(path, tome);\n        // Note: Parent-child relationships are handled via machine.parentMachine property\n    }\n\n    /**\n     * Unregister a child tome\n     */\n    unregisterChild(path: string): void {\n        this.childTomes.delete(path);\n        this.router.unregister(path);\n    }\n\n    /**\n     * Send a message using hierarchical routing\n     */\n    protected send(path: string, event: string, data?: any): Promise<any> {\n        return this.router.send(path, event, data);\n    }\n\n    /**\n     * Initialize the tome (to be implemented by subclasses)\n     */\n    abstract initialize(): Promise<void>;\n\n    /**\n     * Cleanup resources\n     */\n    cleanup(): void {\n        this.viewKeyObservers.clear();\n        this.viewStack.clear();\n        this.childTomes.forEach(child => child.cleanup());\n        this.childTomes.clear();\n    }\n\n    /**\n     * Get debug information about the tome\n     */\n    getDebugInfo(): any {\n        return {\n            currentViewKey: this.currentViewKey,\n            viewStackSize: this.viewStack.getStackSize(),\n            observerCount: this.viewKeyObservers.size,\n            childTomes: Array.from(this.childTomes.keys()),\n            lastViewCleared: this.viewStack.getLastViewCleared()\n        };\n    }\n}\n\n","export interface MessageMetadata {\n  messageId: string;\n  traceId: string;\n  spanId: string;\n  timestamp: string;\n  backend: 'kotlin' | 'node';\n  action: string;\n  data?: any;\n  backendDisabled?: boolean;\n}\n\nexport interface TraceInfo {\n  traceId: string;\n  messages: MessageMetadata[];\n  startTime?: string;\n  endTime?: string;\n  backend?: 'kotlin' | 'node';\n}\n\nexport class Tracing {\n  private messageHistory: Map<string, MessageMetadata> = new Map();\n  private traceMap: Map<string, string[]> = new Map();\n\n  generateMessageId(): string {\n    return `msg_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n\n  generateTraceId(): string {\n    return `trace_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n\n  generateSpanId(): string {\n    return `span_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n\n  trackMessage(messageId: string, traceId: string, spanId: string, metadata: Partial<MessageMetadata>): MessageMetadata {\n    const message: MessageMetadata = {\n      messageId,\n      traceId,\n      spanId,\n      timestamp: new Date().toISOString(),\n      backend: metadata.backend || 'node',\n      action: metadata.action || 'unknown',\n      data: metadata.data,\n    };\n\n    this.messageHistory.set(messageId, message);\n\n    if (!this.traceMap.has(traceId)) {\n      this.traceMap.set(traceId, []);\n    }\n    this.traceMap.get(traceId)!.push(messageId);\n\n    return message;\n  }\n\n  getMessage(messageId: string): MessageMetadata | undefined {\n    return this.messageHistory.get(messageId);\n  }\n\n  getTraceMessages(traceId: string): MessageMetadata[] {\n    const messageIds = this.traceMap.get(traceId) || [];\n    return messageIds.map(id => this.messageHistory.get(id)).filter(Boolean) as MessageMetadata[];\n  }\n\n  getFullTrace(traceId: string): TraceInfo {\n    const messages = this.getTraceMessages(traceId);\n    return {\n      traceId,\n      messages,\n      startTime: messages[0]?.timestamp,\n      endTime: messages[messages.length - 1]?.timestamp,\n      backend: messages[0]?.backend,\n    };\n  }\n\n  getMessageHistory(): MessageMetadata[] {\n    return Array.from(this.messageHistory.values());\n  }\n\n  getTraceIds(): string[] {\n    return Array.from(this.traceMap.keys());\n  }\n\n  clearHistory(): void {\n    this.messageHistory.clear();\n    this.traceMap.clear();\n  }\n\n  // Create tracing headers for HTTP requests\n  createTracingHeaders(traceId: string, spanId: string, messageId: string, enableDataDog: boolean = false): Record<string, string> {\n    const headers: Record<string, string> = {\n      'x-trace-id': traceId,\n      'x-span-id': spanId,\n      'x-message-id': messageId,\n    };\n\n    if (enableDataDog) {\n      headers['x-datadog-trace-id'] = traceId;\n      headers['x-datadog-parent-id'] = spanId;\n      headers['x-datadog-sampling-priority'] = '1';\n    }\n\n    return headers;\n  }\n}\n\nexport function createTracing(): Tracing {\n  return new Tracing();\n} ","import { ViewStateMachine } from './ViewStateMachine';\nimport { RobotCopy } from './RobotCopy';\n\nexport interface TomeConnection {\n  id: string;\n  sourceTome: ViewStateMachine<any>;\n  targetTome: ViewStateMachine<any>;\n  eventMapping: Map<string, string>; // source event -> target event\n  stateMapping: Map<string, string>; // source state path -> target state path\n  bidirectional: boolean;\n  filters?: {\n    events?: string[];\n    states?: string[];\n  };\n  transformers?: {\n    eventTransformer?: (event: any, direction: 'forward' | 'backward') => any;\n    stateTransformer?: (state: any, direction: 'forward' | 'backward') => any;\n  };\n  // Add RobotCopy integration fields\n  traceId?: string;\n  spanId?: string;\n  createdAt: string;\n  lastActivity: string;\n  healthStatus: 'healthy' | 'degraded' | 'unhealthy';\n}\n\nexport interface TomeConnectionConfig {\n  eventMapping?: Record<string, string>;\n  stateMapping?: Record<string, string>;\n  bidirectional?: boolean;\n  filters?: {\n    events?: string[];\n    states?: string[];\n  };\n  transformers?: {\n    eventTransformer?: (event: any, direction: 'forward' | 'backward') => any;\n    stateTransformer?: (state: any, direction: 'forward' | 'backward') => any;\n  };\n  // Add RobotCopy-specific config\n  enableTracing?: boolean;\n  enableHealthMonitoring?: boolean;\n  customTraceId?: string;\n}\n\nexport class TomeConnector {\n  private connections: Map<string, TomeConnection> = new Map();\n  private robotCopy?: RobotCopy;\n  private connectionMetrics: Map<string, any> = new Map();\n  private healthCheckInterval?: NodeJS.Timeout;\n  private isInitialized: boolean = false;\n\n  constructor(robotCopy?: RobotCopy) {\n    this.robotCopy = robotCopy;\n    if (robotCopy) {\n      this.initializeRobotCopyIntegration();\n    }\n  }\n\n  private async initializeRobotCopyIntegration(): Promise<void> {\n    if (!this.robotCopy || this.isInitialized) return;\n    \n    try {\n      // Register TomeConnector with RobotCopy for monitoring\n      this.robotCopy.registerMachine('tome-connector', this, {\n        type: 'connector',\n        capabilities: ['event-routing', 'state-sync', 'network-topology'],\n        version: '1.0.0'\n      });\n      \n      // Set up periodic health checks if enabled\n      const enableHealthMonitoring = await this.robotCopy.isEnabled('enable-health-monitoring');\n      if (enableHealthMonitoring) {\n        this.startHealthMonitoring();\n      }\n      \n      this.isInitialized = true;\n      console.log('TomeConnector RobotCopy integration initialized successfully');\n    } catch (error) {\n      console.warn('Failed to initialize RobotCopy integration:', error);\n    }\n  }\n\n  private startHealthMonitoring(): void {\n    if (this.healthCheckInterval) {\n      clearInterval(this.healthCheckInterval);\n    }\n    \n    this.healthCheckInterval = setInterval(async () => {\n      await this.performHealthCheck();\n    }, 30000); // Every 30 seconds\n  }\n\n  private async performHealthCheck(): Promise<void> {\n    if (!this.robotCopy) return;\n    \n    try {\n      const connections = this.getConnections();\n      const healthStatus = {\n        totalConnections: connections.length,\n        activeConnections: connections.filter(conn => \n          conn.sourceTome.getState() && conn.targetTome.getState()\n        ).length,\n        degradedConnections: connections.filter(conn => \n          conn.healthStatus === 'degraded'\n        ).length,\n        unhealthyConnections: connections.filter(conn => \n          conn.healthStatus === 'unhealthy'\n        ).length,\n        timestamp: new Date().toISOString(),\n        connectorId: this.robotCopy.generateMessageId()\n      };\n      \n      // Send health status through RobotCopy\n      await this.robotCopy.sendMessage('health-check', healthStatus);\n      \n      // Update connection health statuses\n      connections.forEach(connection => {\n        this.updateConnectionHealth(connection.id);\n      });\n      \n    } catch (error) {\n      console.warn('Health check failed:', error);\n    }\n  }\n\n  private updateConnectionHealth(connectionId: string): void {\n    const connection = this.connections.get(connectionId);\n    if (!connection) return;\n    \n    try {\n      const sourceState = connection.sourceTome.getState();\n      const targetState = connection.targetTome.getState();\n      \n      if (!sourceState || !targetState) {\n        connection.healthStatus = 'unhealthy';\n      } else if (Date.now() - new Date(connection.lastActivity).getTime() > 60000) {\n        connection.healthStatus = 'degraded';\n      } else {\n        connection.healthStatus = 'healthy';\n      }\n      \n      connection.lastActivity = new Date().toISOString();\n    } catch (error) {\n      connection.healthStatus = 'unhealthy';\n      connection.lastActivity = new Date().toISOString();\n    }\n  }\n\n  // Connect two Tomes with bidirectional state and event flow\n  async connect(\n    sourceTome: ViewStateMachine<any>,\n    targetTome: ViewStateMachine<any>,\n    config: TomeConnectionConfig = {}\n  ): Promise<string> {\n    const connectionId = `connection_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    \n    // Generate tracing context if RobotCopy is available\n    let traceId: string | undefined;\n    let spanId: string | undefined;\n    \n    if (this.robotCopy && config.enableTracing !== false) {\n      traceId = config.customTraceId || this.robotCopy.generateTraceId();\n      spanId = this.robotCopy.generateSpanId();\n      \n      // Track connection creation\n      this.robotCopy.trackMessage(connectionId, traceId, spanId, {\n        action: 'connection_created',\n        data: {\n          source: sourceTome.constructor.name,\n          target: targetTome.constructor.name,\n          config,\n          timestamp: new Date().toISOString()\n        }\n      });\n    }\n    \n    const connection: TomeConnection = {\n      id: connectionId,\n      sourceTome,\n      targetTome,\n      eventMapping: new Map(Object.entries(config.eventMapping || {})),\n      stateMapping: new Map(Object.entries(config.stateMapping || {})),\n      bidirectional: config.bidirectional ?? true,\n      filters: config.filters,\n      transformers: config.transformers,\n      traceId,\n      spanId,\n      createdAt: new Date().toISOString(),\n      lastActivity: new Date().toISOString(),\n      healthStatus: 'healthy'\n    };\n\n    this.connections.set(connectionId, connection);\n    await this.setupConnection(connection);\n\n    console.log(`Connected Tomes: ${sourceTome.constructor.name} <-> ${targetTome.constructor.name}`);\n    return connectionId;\n  }\n\n  private async setupConnection(connection: TomeConnection): Promise<void> {\n    const { sourceTome, targetTome, eventMapping, stateMapping, bidirectional, filters, transformers } = connection;\n\n    // Forward events from source to target\n    await this.setupEventForwarding(sourceTome, targetTome, eventMapping, 'forward', filters, transformers, connection);\n    \n    // Forward events from target to source (if bidirectional)\n    if (bidirectional) {\n      await this.setupEventForwarding(targetTome, sourceTome, this.reverseMap(eventMapping), 'backward', filters, transformers, connection);\n    }\n\n    // Forward state changes\n    await this.setupStateForwarding(sourceTome, targetTome, stateMapping, 'forward', filters, transformers, connection);\n    \n    if (bidirectional) {\n      await this.setupStateForwarding(targetTome, sourceTome, this.reverseMap(stateMapping), 'backward', filters, transformers, connection);\n    }\n  }\n\n  private async setupEventForwarding(\n    sourceTome: ViewStateMachine<any>,\n    targetTome: ViewStateMachine<any>,\n    eventMapping: Map<string, string>,\n    direction: 'forward' | 'backward',\n    filters?: { events?: string[] },\n    transformers?: { eventTransformer?: (event: any, direction: 'forward' | 'backward') => any },\n    connection?: TomeConnection\n  ): Promise<void> {\n    // Subscribe to source Tome's events\n    sourceTome.on('event', async (event: any) => {\n      // Check if event should be filtered\n      if (filters?.events && !filters.events.includes(event.type)) {\n        return;\n      }\n\n      // Check RobotCopy feature toggles for intelligent routing\n      if (this.robotCopy) {\n        try {\n          const enableEventRouting = await this.robotCopy.isEnabled('enable-event-routing');\n          if (!enableEventRouting) {\n            console.log('Event routing disabled by feature toggle');\n            return;\n          }\n        } catch (error) {\n          console.warn('Failed to check event routing toggle:', error);\n        }\n      }\n\n      // Transform event if transformer is provided\n      let transformedEvent = event;\n      if (transformers?.eventTransformer) {\n        transformedEvent = transformers.eventTransformer(event, direction);\n      }\n\n      // Add RobotCopy tracing context if available\n      if (this.robotCopy && connection) {\n        const eventTraceId = this.robotCopy.generateTraceId();\n        const eventSpanId = this.robotCopy.generateSpanId();\n        \n        transformedEvent = {\n          ...transformedEvent,\n          _traceId: eventTraceId,\n          _spanId: eventSpanId,\n          _connectionId: connection.id,\n          _direction: direction,\n          _timestamp: new Date().toISOString()\n        };\n        \n        // Track the event\n        this.robotCopy.trackMessage(\n          `event_${event.type}_${Date.now()}`,\n          eventTraceId,\n          eventSpanId,\n          {\n            action: 'event_forwarded',\n            data: {\n              eventType: event.type,\n              source: sourceTome.constructor.name,\n              target: targetTome.constructor.name,\n              direction,\n              connectionId: connection.id\n            }\n          }\n        );\n      }\n\n      // Map event type if mapping exists\n      const mappedEventType = eventMapping.get(transformedEvent.type) || transformedEvent.type;\n      \n      // Forward to target Tome\n      targetTome.send({\n        type: mappedEventType,\n        ...transformedEvent,\n        _forwarded: true,\n        _direction: direction,\n        _source: sourceTome.constructor.name,\n      });\n\n      // Update connection activity\n      if (connection) {\n        connection.lastActivity = new Date().toISOString();\n      }\n    });\n  }\n\n  private async setupStateForwarding(\n    sourceTome: ViewStateMachine<any>,\n    targetTome: ViewStateMachine<any>,\n    stateMapping: Map<string, string>,\n    direction: 'forward' | 'backward',\n    filters?: { states?: string[] },\n    transformers?: { stateTransformer?: (state: any, direction: 'forward' | 'backward') => any },\n    connection?: TomeConnection\n  ): Promise<void> {\n    // Subscribe to source Tome's state changes\n    sourceTome.on('stateChange', async (event: any) => {\n      const newState = event.newState || event.state;\n      const oldState = event.oldState || event.previousState;\n      \n      // Check if state should be filtered\n      if (filters?.states) {\n        const hasRelevantState = filters.states.some(statePath => \n          this.getStateValue(newState, statePath) !== this.getStateValue(oldState, statePath)\n        );\n        if (!hasRelevantState) {\n          return;\n        }\n      }\n\n      // Check RobotCopy feature toggles for state synchronization\n      if (this.robotCopy) {\n        try {\n          const enableStateSync = await this.robotCopy.isEnabled('enable-state-sync');\n          if (!enableStateSync) {\n            console.log('State synchronization disabled by feature toggle');\n            return;\n          }\n        } catch (error) {\n          console.warn('Failed to check state sync toggle:', error);\n        }\n      }\n\n      // Transform state if transformer is provided\n      let transformedState = newState;\n      if (transformers?.stateTransformer) {\n        transformedState = transformers.stateTransformer(newState, direction);\n      }\n\n      // Add RobotCopy backend-aware state transformation\n      if (this.robotCopy) {\n        try {\n          const backendType = await this.robotCopy.getBackendType();\n          transformedState = await this.transformStateForBackend(transformedState, backendType);\n        } catch (error) {\n          console.warn('Failed to transform state for backend:', error);\n        }\n      }\n\n      // Map state paths and update target Tome's context\n      const stateUpdates: Record<string, any> = {};\n      stateMapping.forEach((targetPath, sourcePath) => {\n        const sourceValue = this.getStateValue(transformedState, sourcePath);\n        if (sourceValue !== undefined) {\n          stateUpdates[targetPath] = sourceValue;\n        }\n      });\n\n      // Update target Tome's context\n      if (Object.keys(stateUpdates).length > 0) {\n        const syncEvent = {\n          type: 'SYNC_STATE',\n          updates: stateUpdates,\n          _forwarded: true,\n          _direction: direction,\n          _source: sourceTome.constructor.name,\n        };\n\n        // Add RobotCopy tracing if available\n        if (this.robotCopy && connection) {\n          const stateTraceId = this.robotCopy.generateTraceId();\n          const stateSpanId = this.robotCopy.generateSpanId();\n          \n          Object.assign(syncEvent, {\n            _traceId: stateTraceId,\n            _spanId: stateSpanId,\n            _connectionId: connection.id,\n            _timestamp: new Date().toISOString()\n          });\n          \n          // Track the state sync\n          this.robotCopy.trackMessage(\n            `state_sync_${Date.now()}`,\n            stateTraceId,\n            stateSpanId,\n            {\n              action: 'state_synchronized',\n              data: {\n                updates: Object.keys(stateUpdates),\n                source: sourceTome.constructor.name,\n                target: targetTome.constructor.name,\n                direction,\n                connectionId: connection.id\n              }\n            }\n          );\n        }\n\n        targetTome.send(syncEvent);\n      }\n\n      // Update connection activity\n      if (connection) {\n        connection.lastActivity = new Date().toISOString();\n      }\n    });\n  }\n\n  private async transformStateForBackend(state: any, backendType: 'kotlin' | 'node'): Promise<any> {\n    // Transform state based on backend capabilities\n    switch (backendType) {\n      case 'kotlin':\n        // Kotlin backend might prefer different data structures\n        return this.transformStateForKotlin(state);\n      case 'node':\n        // Node backend might prefer different data structures\n        return this.transformStateForNode(state);\n      default:\n        return state;\n    }\n  }\n\n  private transformStateForKotlin(state: any): any {\n    // Transform state for Kotlin backend preferences\n    // This could include type conversions, null handling, etc.\n    return state;\n  }\n\n  private transformStateForNode(state: any): any {\n    // Transform state for Node backend preferences\n    // This could include different serialization, etc.\n    return state;\n  }\n\n  private getStateValue(state: any, path: string): any {\n    return path.split('.').reduce((obj, key) => obj?.[key], state);\n  }\n\n  private reverseMap<K, V>(map: Map<K, V>): Map<V, K> {\n    const reversed = new Map<V, K>();\n    map.forEach((value, key) => {\n      reversed.set(value, key);\n    });\n    return reversed;\n  }\n\n  // Disconnect Tomes\n  async disconnect(connectionId: string): Promise<boolean> {\n    const connection = this.connections.get(connectionId);\n    if (!connection) {\n      return false;\n    }\n\n    // Track disconnection with RobotCopy if available\n    if (this.robotCopy) {\n      try {\n        const traceId = this.robotCopy.generateTraceId();\n        const spanId = this.robotCopy.generateSpanId();\n        \n        this.robotCopy.trackMessage(\n          `disconnect_${connectionId}`,\n          traceId,\n          spanId,\n          {\n            action: 'connection_disconnected',\n            data: {\n              connectionId,\n              source: connection.sourceTome.constructor.name,\n              target: connection.targetTome.constructor.name,\n              duration: Date.now() - new Date(connection.createdAt).getTime(),\n              timestamp: new Date().toISOString()\n            }\n          }\n        );\n      } catch (error) {\n        console.warn('Failed to track disconnection:', error);\n      }\n    }\n\n    // Clean up event listeners\n    // Note: In a real implementation, you'd need to store and remove specific listeners\n    this.connections.delete(connectionId);\n    console.log(`Disconnected Tomes: ${connection.sourceTome.constructor.name} <-> ${connection.targetTome.constructor.name}`);\n    return true;\n  }\n\n  // Get all connections\n  getConnections(): TomeConnection[] {\n    return Array.from(this.connections.values());\n  }\n\n  // Get connections for a specific Tome\n  getConnectionsForTome(tome: ViewStateMachine<any>): TomeConnection[] {\n    return this.getConnections().filter(conn => \n      conn.sourceTome === tome || conn.targetTome === tome\n    );\n  }\n\n  // Create a network of connected Tomes\n  async createNetwork(tomes: ViewStateMachine<any>[], config: TomeConnectionConfig = {}): Promise<string[]> {\n    const connectionIds: string[] = [];\n    \n    for (let i = 0; i < tomes.length - 1; i++) {\n      const connectionId = await this.connect(tomes[i], tomes[i + 1], config);\n      connectionIds.push(connectionId);\n    }\n\n    // Connect last Tome back to first (ring topology)\n    if (tomes.length > 2) {\n      const ringConnectionId = await this.connect(tomes[tomes.length - 1], tomes[0], config);\n      connectionIds.push(ringConnectionId);\n    }\n\n    return connectionIds;\n  }\n\n  // Create a hub-and-spoke network\n  async createHubNetwork(\n    hubTome: ViewStateMachine<any>,\n    spokeTomes: ViewStateMachine<any>[],\n    config: TomeConnectionConfig = {}\n  ): Promise<string[]> {\n    const connectionIds: string[] = [];\n    \n    for (const spokeTome of spokeTomes) {\n      const connectionId = await this.connect(hubTome, spokeTome, config);\n      connectionIds.push(connectionId);\n    }\n\n    return connectionIds;\n  }\n\n  // Broadcast event to all connected Tomes\n  async broadcastEvent(event: any, sourceTome: ViewStateMachine<any>): Promise<void> {\n    const connections = this.getConnectionsForTome(sourceTome);\n    \n    // Add RobotCopy tracing if available\n    if (this.robotCopy) {\n      const traceId = this.robotCopy.generateTraceId();\n      const spanId = this.robotCopy.generateSpanId();\n      \n      event = {\n        ...event,\n        _traceId: traceId,\n        _spanId: spanId,\n        _broadcasted: true,\n        _timestamp: new Date().toISOString()\n      };\n      \n      // Track the broadcast\n      this.robotCopy.trackMessage(\n        `broadcast_${event.type}_${Date.now()}`,\n        traceId,\n        spanId,\n        {\n          action: 'event_broadcasted',\n          data: {\n            eventType: event.type,\n            source: sourceTome.constructor.name,\n            targetCount: connections.length,\n            timestamp: new Date().toISOString()\n          }\n        }\n      );\n    }\n    \n    connections.forEach(connection => {\n      const targetTome = connection.targetTome === sourceTome ? connection.sourceTome : connection.targetTome;\n      targetTome.send({\n        ...event,\n        _source: sourceTome.constructor.name,\n      });\n      \n      // Update connection activity\n      connection.lastActivity = new Date().toISOString();\n    });\n  }\n\n  // Get network topology\n  getNetworkTopology(): any {\n    const topology: any = {\n      nodes: new Set<string>(),\n      edges: [],\n    };\n\n    this.getConnections().forEach(connection => {\n      topology.nodes.add(connection.sourceTome.constructor.name);\n      topology.nodes.add(connection.targetTome.constructor.name);\n      \n      topology.edges.push({\n        from: connection.sourceTome.constructor.name,\n        to: connection.targetTome.constructor.name,\n        bidirectional: connection.bidirectional,\n        id: connection.id,\n        healthStatus: connection.healthStatus,\n        createdAt: connection.createdAt,\n        lastActivity: connection.lastActivity,\n        traceId: connection.traceId\n      });\n    });\n\n    return {\n      nodes: Array.from(topology.nodes),\n      edges: topology.edges,\n      metrics: {\n        totalConnections: this.connections.size,\n        healthyConnections: this.getConnections().filter(c => c.healthStatus === 'healthy').length,\n        degradedConnections: this.getConnections().filter(c => c.healthStatus === 'degraded').length,\n        unhealthyConnections: this.getConnections().filter(c => c.healthStatus === 'unhealthy').length\n      }\n    };\n  }\n\n  // Validate network for potential issues (Turing completeness risks)\n  async validateNetwork(): Promise<{ warnings: string[], errors: string[] }> {\n    const warnings: string[] = [];\n    const errors: string[] = [];\n    const topology = this.getNetworkTopology();\n\n    // Check for circular dependencies\n    const visited = new Set<string>();\n    const recursionStack = new Set<string>();\n\n    const hasCycle = (node: string, parent?: string): boolean => {\n      if (recursionStack.has(node)) {\n        return true;\n      }\n      if (visited.has(node)) {\n        return false;\n      }\n\n      visited.add(node);\n      recursionStack.add(node);\n\n      const edges = topology.edges.filter((edge: any) => \n        edge.from === node || (edge.bidirectional && edge.to === node)\n      );\n\n      for (const edge of edges) {\n        const nextNode = edge.from === node ? edge.to : edge.from;\n        if (nextNode !== parent && hasCycle(nextNode, node)) {\n          return true;\n        }\n      }\n\n      recursionStack.delete(node);\n      return false;\n    };\n\n    // Check each node for cycles\n    topology.nodes.forEach((node: any) => {\n      if (hasCycle(node)) {\n        errors.push(`Circular dependency detected involving node: ${node}`);\n      }\n    });\n\n    // Check for high fan-out (potential performance issues)\n    const fanOutCounts = new Map<string, number>();\n    topology.edges.forEach((edge: any) => {\n      fanOutCounts.set(edge.from, (fanOutCounts.get(edge.from) || 0) + 1);\n      if (edge.bidirectional) {\n        fanOutCounts.set(edge.to, (fanOutCounts.get(edge.to) || 0) + 1);\n      }\n    });\n\n    fanOutCounts.forEach((count, node) => {\n      if (count > 10) {\n        warnings.push(`High fan-out detected for node ${node}: ${count} connections`);\n      }\n    });\n\n    // Check for event amplification (potential infinite loops)\n    const eventCounts = new Map<string, number>();\n    this.getConnections().forEach(connection => {\n      connection.eventMapping.forEach((targetEvent, sourceEvent) => {\n        const key = `${sourceEvent}->${targetEvent}`;\n        eventCounts.set(key, (eventCounts.get(key) || 0) + 1);\n      });\n    });\n\n    eventCounts.forEach((count, eventPair) => {\n      if (count > 5) {\n        warnings.push(`Potential event amplification detected: ${eventPair} appears ${count} times`);\n      }\n    });\n\n    // Check RobotCopy-specific validations if available\n    if (this.robotCopy) {\n      try {\n        const enableAdvancedValidation = await this.robotCopy.isEnabled('enable-advanced-validation');\n        if (enableAdvancedValidation) {\n          // Add advanced validation logic here\n          const advancedWarnings = await this.performAdvancedValidation();\n          warnings.push(...advancedWarnings);\n        }\n      } catch (error) {\n        console.warn('Failed to perform advanced validation:', error);\n      }\n    }\n\n    return { warnings, errors };\n  }\n\n  private async performAdvancedValidation(): Promise<string[]> {\n    const warnings: string[] = [];\n    \n    // Check for potential performance issues based on connection patterns\n    const connections = this.getConnections();\n    \n    // Check for connections with high event frequency\n    const highFrequencyConnections = connections.filter(conn => {\n      const timeSinceCreation = Date.now() - new Date(conn.createdAt).getTime();\n      const timeSinceLastActivity = Date.now() - new Date(conn.lastActivity).getTime();\n      return timeSinceCreation > 60000 && timeSinceLastActivity < 1000; // High activity\n    });\n    \n    if (highFrequencyConnections.length > 0) {\n      warnings.push(`High frequency connections detected: ${highFrequencyConnections.length} connections showing high activity`);\n    }\n    \n    return warnings;\n  }\n\n  // Get RobotCopy instance for external access\n  getRobotCopy(): RobotCopy | undefined {\n    return this.robotCopy;\n  }\n\n  // Get connection metrics\n  getConnectionMetrics(): Map<string, any> {\n    return this.connectionMetrics;\n  }\n\n  // Cleanup method\n  destroy(): void {\n    if (this.healthCheckInterval) {\n      clearInterval(this.healthCheckInterval);\n    }\n    \n    // Disconnect all connections\n    this.getConnections().forEach(connection => {\n      this.disconnect(connection.id);\n    });\n    \n    console.log('TomeConnector destroyed');\n  }\n}\n\nexport function createTomeConnector(robotCopy?: RobotCopy): TomeConnector {\n  return new TomeConnector(robotCopy);\n} ","// ViewStateMachine import removed as it's not used\nimport { Tracing, createTracing, MessageMetadata } from './Tracing';\n\nexport interface RobotCopyConfig {\n  unleashUrl?: string;\n  unleashClientKey?: string;\n  unleashAppName?: string;\n  unleashEnvironment?: string;\n  apiPath?: string;\n  traceApiPath?: string;\n  messageApiPath?: string;\n  kotlinBackendUrl?: string;\n  nodeBackendUrl?: string;\n  enableTracing?: boolean;\n  enableDataDog?: boolean;\n}\n\nexport class RobotCopy {\n  private config: RobotCopyConfig;\n  private tracing: Tracing;\n  private unleashToggles: Map<string, boolean> = new Map();\n  private machines: Map<string, { machine: any; config: any; registeredAt: string }> | undefined;\n\n  constructor(config: RobotCopyConfig = {}) {\n    this.config = {\n      unleashUrl: 'http://localhost:4242/api',\n      unleashClientKey: 'default:development.unleash-insecure-api-token',\n      unleashAppName: 'fish-burger-frontend',\n      unleashEnvironment: 'development',\n      apiPath: '/api/',\n      traceApiPath: '/api/trace/',\n      messageApiPath: '/api/message/',\n      kotlinBackendUrl: 'http://localhost:8080',\n      nodeBackendUrl: 'http://localhost:3001',\n      enableTracing: true,\n      enableDataDog: true,\n      ...config,\n    };\n\n    this.tracing = createTracing();\n    this.initializeUnleashToggles();\n  }\n\n  private async initializeUnleashToggles() {\n    // Simulate Unleash toggle initialization\n    // In real implementation, this would fetch from Unleash API\n    // Default to false for backend requests - should be overridden by app-specific toggle service\n    this.unleashToggles.set('fish-burger-kotlin-backend', false);\n    this.unleashToggles.set('fish-burger-node-backend', true);\n    this.unleashToggles.set('enable-tracing', true);\n    this.unleashToggles.set('enable-datadog', true);\n    this.unleashToggles.set('enable-backend-api-requests', false);\n  }\n\n  async isEnabled(toggleName: string, _context: any = {}): Promise<boolean> {\n    return this.unleashToggles.get(toggleName) || false;\n  }\n\n  async getBackendUrl(): Promise<string> {\n    const useKotlin = await this.isEnabled('fish-burger-kotlin-backend');\n    return useKotlin ? this.config.kotlinBackendUrl! : this.config.nodeBackendUrl!;\n  }\n\n  async getBackendType(): Promise<'kotlin' | 'node'> {\n    const useKotlin = await this.isEnabled('fish-burger-kotlin-backend');\n    return useKotlin ? 'kotlin' : 'node';\n  }\n\n  generateMessageId(): string {\n    return this.tracing.generateMessageId();\n  }\n\n  generateTraceId(): string {\n    return this.tracing.generateTraceId();\n  }\n\n  generateSpanId(): string {\n    return this.tracing.generateSpanId();\n  }\n\n  trackMessage(messageId: string, traceId: string, spanId: string, metadata: Partial<MessageMetadata>): MessageMetadata {\n    return this.tracing.trackMessage(messageId, traceId, spanId, metadata);\n  }\n\n  getMessage(messageId: string): MessageMetadata | undefined {\n    return this.tracing.getMessage(messageId);\n  }\n\n  getTraceMessages(traceId: string): MessageMetadata[] {\n    return this.tracing.getTraceMessages(traceId);\n  }\n\n  getFullTrace(traceId: string) {\n    return this.tracing.getFullTrace(traceId);\n  }\n\n  async sendMessage(action: string, data: any = {}): Promise<any> {\n    const messageId = this.generateMessageId();\n    const traceId = this.generateTraceId();\n    const spanId = this.generateSpanId();\n    const backend = await this.getBackendType();\n    const backendUrl = await this.getBackendUrl();\n    const apiPath = this.config.apiPath;\n\n    // Track the message\n    this.trackMessage(messageId, traceId, spanId, {\n      backend,\n      action,\n      data,\n    });\n\n    const backendEnabled = await this.isEnabled('enable-backend-api-requests');\n\n    if (!backendEnabled) {\n      const mockResult = {\n        success: true,\n        messageId,\n        traceId,\n        spanId,\n        data: {\n          requestedAction: action,\n          requestPayload: data,\n        },\n        backendDisabled: true,\n      };\n\n      this.trackMessage(\n        `${messageId}_response`,\n        traceId,\n        spanId,\n        {\n          backend,\n          action: `${action}_response`,\n          data: mockResult,\n          backendDisabled: true,\n        }\n      );\n\n      return mockResult;\n    }\n\n    // Prepare headers for tracing\n    const headers: Record<string, string> = {\n      'Content-Type': 'application/json',\n      ...this.tracing.createTracingHeaders(traceId, spanId, messageId, await this.isEnabled('enable-datadog')),\n    };\n\n    try {\n      const response = await fetch(`${backendUrl}${apiPath}${action}`, {\n        method: 'POST',\n        headers,\n        body: JSON.stringify({\n          ...data,\n          messageId,\n          traceId,\n          spanId,\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n      }\n\n      const result = await response.json();\n      \n      // Track the response\n      this.trackMessage(\n        `${messageId}_response`,\n        traceId,\n        spanId,\n        {\n          backend,\n          action: `${action}_response`,\n          data: result,\n        }\n      );\n\n      return result;\n    } catch (error) {\n      // Track the error\n      this.trackMessage(\n        `${messageId}_error`,\n        traceId,\n        spanId,\n        {\n          backend,\n          action: `${action}_error`,\n          data: { error: error instanceof Error ? error.message : String(error) },\n        }\n      );\n\n      throw error;\n    }\n  }\n\n  // Fish Burger example methods have been moved to:\n  // example/node-example/src/fish-burger-robotcopy-extensions.js\n  // This keeps the core RobotCopy class clean and app-agnostic\n\n  async getTrace(traceId: string): Promise<any> {\n    const backendUrl = await this.getBackendUrl();\n    const traceApiPath = this.config.traceApiPath;\n    const backendEnabled = await this.isEnabled('enable-backend-api-requests');\n\n    if (!backendEnabled) {\n      return {\n        traceId,\n        backendDisabled: true,\n        messages: [],\n        fetchedAt: new Date().toISOString(),\n      };\n    }\n\n    try {\n      const response = await fetch(`${backendUrl}${traceApiPath}${traceId}`);\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n      }\n      return await response.json();\n    } catch (error) {\n      console.error(`Failed to get trace ${traceId}:`, error);\n      return this.getFullTrace(traceId);\n    }\n  }\n\n  async getMessageFromBackend(messageId: string): Promise<any> {\n    const backendUrl = await this.getBackendUrl();\n    const messageApiPath = this.config.messageApiPath;\n\n    try {\n      const response = await fetch(`${backendUrl}${messageApiPath}${messageId}`);\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n      }\n      return await response.json();\n    } catch (error) {\n      console.error(`Failed to get message ${messageId}:`, error);\n      return this.getMessage(messageId);\n    }\n  }\n\n\n\n  // Debugging and monitoring methods\n  getMessageHistory(): MessageMetadata[] {\n    return this.tracing.getMessageHistory();\n  }\n\n  getTraceIds(): string[] {\n    return this.tracing.getTraceIds();\n  }\n\n  clearHistory(): void {\n    this.tracing.clearHistory();\n  }\n\n  // Configuration methods\n  updateConfig(newConfig: Partial<RobotCopyConfig>): void {\n    this.config = { ...this.config, ...newConfig };\n  }\n\n  getConfig(): RobotCopyConfig {\n    return { ...this.config };\n  }\n\n  // Response handling\n  private responseHandlers: Map<string, (response: any) => void> = new Map();\n\n  onResponse(channel: string, handler: (response: any) => void): void {\n    // Store the handler for the specified channel\n    this.responseHandlers.set(channel, handler);\n    console.log(`Registered response handler for channel: ${channel}`);\n  }\n\n  // Method to trigger response handlers (for testing or manual triggering)\n  triggerResponse(channel: string, response: any): void {\n    const handler = this.responseHandlers.get(channel);\n    if (handler) {\n      console.log(`Triggering response handler for channel: ${channel}`, response);\n      handler(response);\n    } else {\n      console.warn(`No response handler found for channel: ${channel}`);\n    }\n  }\n\n  // Method to remove response handlers\n  removeResponseHandler(channel: string): void {\n    this.responseHandlers.delete(channel);\n    console.log(`Removed response handler for channel: ${channel}`);\n  }\n\n  // Machine registration for state machines\n  registerMachine(name: string, machine: any, config: any = {}): void {\n    console.log(`Registering machine: ${name}`, { config });\n    // Store the machine registration for future use\n    // This could be used for machine discovery, monitoring, etc.\n    if (!this.machines) {\n      this.machines = new Map();\n    }\n    this.machines.set(name, { machine, config, registeredAt: new Date().toISOString() });\n  }\n\n  // Get registered machines\n  getRegisteredMachines(): Map<string, any> {\n    return this.machines || new Map();\n  }\n\n  // Get a specific registered machine\n  getRegisteredMachine(name: string): any {\n    return this.machines?.get(name);\n  }\n}\n\nexport function createRobotCopy(config?: RobotCopyConfig): RobotCopy {\n  return new RobotCopy(config);\n} ","import { ViewStateMachine } from './ViewStateMachine';\n\nexport interface ClientGeneratorConfig {\n  machineId: string;\n  description?: string;\n  version?: string;\n  author?: string;\n  tags?: string[];\n  examples?: ClientGeneratorExample[];\n}\n\nexport interface ClientGeneratorExample {\n  name: string;\n  description: string;\n  code: string;\n  language: 'typescript' | 'javascript' | 'react' | 'kotlin' | 'java';\n}\n\nexport interface ClientGeneratorDiscovery {\n  machines: Map<string, ViewStateMachine<any>>;\n  states: Map<string, string[]>;\n  events: Map<string, string[]>;\n  actions: Map<string, string[]>;\n  services: Map<string, string[]>;\n  examples: ClientGeneratorExample[];\n  documentation: string;\n}\n\nexport class ClientGenerator {\n  private machines: Map<string, ViewStateMachine<any>> = new Map();\n  private configs: Map<string, ClientGeneratorConfig> = new Map();\n\n  constructor() {}\n\n  // Register a machine for discovery\n  registerMachine(machineId: string, machine: ViewStateMachine<any>, config?: ClientGeneratorConfig): void {\n    this.machines.set(machineId, machine);\n    if (config) {\n      this.configs.set(machineId, config);\n    }\n  }\n\n  // Discover all registered machines\n  discover(): ClientGeneratorDiscovery {\n    const discovery: ClientGeneratorDiscovery = {\n      machines: new Map(),\n      states: new Map(),\n      events: new Map(),\n      actions: new Map(),\n      services: new Map(),\n      examples: [],\n      documentation: ''\n    };\n\n    this.machines.forEach((machine, machineId) => {\n      discovery.machines.set(machineId, machine);\n      \n      // Analyze machine structure\n      const config = this.configs.get(machineId);\n      if (config) {\n        // Extract states, events, actions, services from XState config\n        this.analyzeMachine(machine, machineId, discovery);\n        \n        // Add examples\n        if (config.examples) {\n          discovery.examples.push(...config.examples);\n        }\n      }\n    });\n\n    // Generate documentation\n    discovery.documentation = this.generateDocumentation(discovery);\n\n    return discovery;\n  }\n\n  private analyzeMachine(_machine: ViewStateMachine<any>, machineId: string, discovery: ClientGeneratorDiscovery): void {\n    // This would analyze the XState machine configuration\n    // For now, we'll create a basic structure\n    discovery.states.set(machineId, ['idle', 'creating', 'success', 'error']);\n    discovery.events.set(machineId, ['ADD_INGREDIENT', 'CREATE_BURGER', 'CONTINUE']);\n    discovery.actions.set(machineId, ['addIngredient', 'setLoading', 'handleSuccess']);\n    discovery.services.set(machineId, ['createBurgerService']);\n  }\n\n  private generateDocumentation(discovery: ClientGeneratorDiscovery): string {\n    let doc = '# ViewStateMachine Discovery\\n\\n';\n    \n    discovery.machines.forEach((_machine, machineId) => {\n      const config = this.configs.get(machineId);\n      doc += `## ${machineId}\\n\\n`;\n      \n      if (config?.description) {\n        doc += `${config.description}\\n\\n`;\n      }\n\n      const states = discovery.states.get(machineId) || [];\n      const events = discovery.events.get(machineId) || [];\n      const actions = discovery.actions.get(machineId) || [];\n      const services = discovery.services.get(machineId) || [];\n\n      doc += `### States\\n`;\n      states.forEach(state => {\n        doc += `- \\`${state}\\`\\n`;\n      });\n      doc += '\\n';\n\n      doc += `### Events\\n`;\n      events.forEach(event => {\n        doc += `- \\`${event}\\`\\n`;\n      });\n      doc += '\\n';\n\n      doc += `### Actions\\n`;\n      actions.forEach(action => {\n        doc += `- \\`${action}\\`\\n`;\n      });\n      doc += '\\n';\n\n      doc += `### Services\\n`;\n      services.forEach(service => {\n        doc += `- \\`${service}\\`\\n`;\n      });\n      doc += '\\n';\n    });\n\n    return doc;\n  }\n\n  // Generate client code for a specific language\n  generateClientCode(language: 'typescript' | 'javascript' | 'react' | 'kotlin' | 'java', machineId?: string): string {\n    const discovery = this.discover();\n    \n    switch (language) {\n      case 'typescript':\n        return this.generateTypeScriptClient(discovery, machineId);\n      case 'javascript':\n        return this.generateJavaScriptClient(discovery, machineId);\n      case 'react':\n        return this.generateReactClient(discovery, machineId);\n      case 'kotlin':\n        return this.generateKotlinClient(discovery, machineId);\n      case 'java':\n        return this.generateJavaClient(discovery, machineId);\n      default:\n        throw new Error(`Unsupported language: ${language}`);\n    }\n  }\n\n  private generateTypeScriptClient(discovery: ClientGeneratorDiscovery, machineId?: string): string {\n    let code = '// Generated TypeScript client\\n\\n';\n    \n    if (machineId) {\n      const machine = discovery.machines.get(machineId);\n      if (machine) {\n        code += `import { ViewStateMachine } from './ViewStateMachine';\\n\\n`;\n        code += `export class ${machineId}Client {\\n`;\n        code += `  private machine: ViewStateMachine<any>;\\n\\n`;\n        code += `  constructor() {\\n`;\n        code += `    // Initialize machine\\n`;\n        code += `  }\\n\\n`;\n        code += `  // Client methods would be generated here\\n`;\n        code += `}\\n`;\n      }\n    } else {\n      // Generate for all machines\n      discovery.machines.forEach((_machine, id) => {\n        code += `export class ${id}Client {\\n`;\n        code += `  // Generated client for ${id}\\n`;\n        code += `}\\n\\n`;\n      });\n    }\n\n    return code;\n  }\n\n  private generateJavaScriptClient(discovery: ClientGeneratorDiscovery, machineId?: string): string {\n    let code = '// Generated JavaScript client\\n\\n';\n    \n    if (machineId) {\n      code += `class ${machineId}Client {\\n`;\n      code += `  constructor() {\\n`;\n      code += `    // Initialize client\\n`;\n      code += `  }\\n\\n`;\n      code += `  // Client methods\\n`;\n      code += `}\\n\\n`;\n      code += `module.exports = ${machineId}Client;\\n`;\n    } else {\n      discovery.machines.forEach((_machine, id) => {\n        code += `class ${id}Client {\\n`;\n        code += `  // Generated client for ${id}\\n`;\n        code += `}\\n\\n`;\n      });\n    }\n\n    return code;\n  }\n\n  private generateReactClient(discovery: ClientGeneratorDiscovery, machineId?: string): string {\n    let code = '// Generated React client\\n\\n';\n    code += `import React from 'react';\\n`;\n    code += `import { useViewStateMachine } from './ViewStateMachine';\\n\\n`;\n    \n    if (machineId) {\n      code += `export const ${machineId}Component: React.FC = () => {\\n`;\n      code += `  const { state, send, log, view, clear } = useViewStateMachine({\\n`;\n      code += `    // Initial model\\n`;\n      code += `  });\\n\\n`;\n      code += `  return (\\n`;\n      code += `    <div>\\n`;\n      code += `      {/* Generated UI */}\\n`;\n      code += `    </div>\\n`;\n      code += `  );\\n`;\n      code += `};\\n`;\n    } else {\n      discovery.machines.forEach((_machine, id) => {\n        code += `export const ${id}Component: React.FC = () => {\\n`;\n        code += `  // Generated component for ${id}\\n`;\n        code += `  return <div>${id} Component</div>;\\n`;\n        code += `};\\n\\n`;\n      });\n    }\n\n    return code;\n  }\n\n  private generateKotlinClient(discovery: ClientGeneratorDiscovery, machineId?: string): string {\n    let code = '// Generated Kotlin client\\n\\n';\n    \n    if (machineId) {\n      code += `class ${machineId}Client {\\n`;\n      code += `  private val machine: ViewStateMachine<*>? = null\\n\\n`;\n      code += `  fun initialize() {\\n`;\n      code += `    // Initialize machine\\n`;\n      code += `  }\\n\\n`;\n      code += `  // Client methods\\n`;\n      code += `}\\n`;\n    } else {\n      discovery.machines.forEach((_machine, id) => {\n        code += `class ${id}Client {\\n`;\n        code += `  // Generated client for ${id}\\n`;\n        code += `}\\n\\n`;\n      });\n    }\n\n    return code;\n  }\n\n  private generateJavaClient(discovery: ClientGeneratorDiscovery, machineId?: string): string {\n    let code = '// Generated Java client\\n\\n';\n    \n    if (machineId) {\n      code += `public class ${machineId}Client {\\n`;\n      code += `  private ViewStateMachine machine;\\n\\n`;\n      code += `  public ${machineId}Client() {\\n`;\n      code += `    // Initialize machine\\n`;\n      code += `  }\\n\\n`;\n      code += `  // Client methods\\n`;\n      code += `}\\n`;\n    } else {\n      discovery.machines.forEach((_machine, id) => {\n        code += `public class ${id}Client {\\n`;\n        code += `  // Generated client for ${id}\\n`;\n        code += `}\\n\\n`;\n      });\n    }\n\n    return code;\n  }\n\n  // Generate integration examples\n  generateIntegrationExamples(): ClientGeneratorExample[] {\n    return [\n      {\n        name: 'Basic Usage',\n        description: 'How to create and use a ViewStateMachine',\n        language: 'typescript',\n        code: `\nconst machine = createViewStateMachine({\n  machineId: 'my-machine',\n  xstateConfig: { /* config */ }\n})\n.withState('idle', async ({ log, view }) => {\n  await log('Entered idle state');\n  return view(<div>Idle UI</div>);\n});`\n      },\n      {\n        name: 'Sub-Machines',\n        description: 'How to compose sub-machines',\n        language: 'typescript',\n        code: `\nconst parentMachine = createViewStateMachine({\n  machineId: 'parent',\n  xstateConfig: { /* config */ },\n  subMachines: {\n    child: { machineId: 'child', xstateConfig: { /* config */ } }\n  }\n})\n.withSubMachine('child', childConfig);`\n      },\n      {\n        name: 'ClientGenerator Discovery',\n        description: 'How to use ClientGenerator for automated discovery',\n        language: 'typescript',\n        code: `\nconst clientGenerator = new ClientGenerator();\nclientGenerator.registerMachine('my-machine', machine, {\n  description: 'My awesome machine',\n  examples: [/* examples */]\n});\n\nconst discovery = clientGenerator.discover();\nconst clientCode = clientGenerator.generateClientCode('typescript', 'my-machine');`\n      }\n    ];\n  }\n}\n\n// Helper function to create ClientGenerator\nexport function createClientGenerator(): ClientGenerator {\n  return new ClientGenerator();\n} ","/**\n * TomeClient - Browser-compatible client for TomeManager API\n * \n * This client implements the TomeManager interface but communicates with\n * server-side Tome functionality via HTTP API calls, avoiding the need\n * to bundle Express or other server dependencies in the browser.\n */\n\nimport { TomeManager } from './TomeConfig';\nimport { TomeAPI, TomeInstanceResponse, TomeListResponse, TomeStatusResponse, TomeMessageRequest, TomeMessageResponse } from './TomeAPI';\n\nexport class TomeClient implements TomeManager {\n  public tomes: Map<string, any> = new Map();\n  private api: TomeAPI;\n  \n  constructor(api: TomeAPI) {\n    this.api = api;\n  }\n  \n  /**\n   * Register a new Tome with the server\n   */\n  async registerTome(config: any): Promise<any> {\n    console.log(` [Client] Registering Tome: ${config.id}`);\n    \n    try {\n      const response = await this.api.registerTome(config);\n      \n      // Create a client-side proxy for the tome instance\n      const tomeInstance = this.createTomeInstanceProxy(response);\n      this.tomes.set(config.id, tomeInstance);\n      \n      console.log(` [Client] Successfully registered Tome: ${config.id}`);\n      return tomeInstance;\n    } catch (error) {\n      console.error(` [Client] Failed to register Tome ${config.id}:`, error);\n      throw error;\n    }\n  }\n  \n  /**\n   * Unregister a Tome from the server\n   */\n  async unregisterTome(id: string): Promise<void> {\n    console.log(` [Client] Unregistering Tome: ${id}`);\n    \n    try {\n      await this.api.unregisterTome(id);\n      this.tomes.delete(id);\n      console.log(` [Client] Successfully unregistered Tome: ${id}`);\n    } catch (error) {\n      console.error(` [Client] Failed to unregister Tome ${id}:`, error);\n      throw error;\n    }\n  }\n  \n  /**\n   * Get a Tome instance (from cache or server)\n   */\n  getTome(id: string): any | undefined {\n    return this.tomes.get(id);\n  }\n  \n  /**\n   * Start a Tome on the server\n   */\n  async startTome(id: string): Promise<void> {\n    console.log(` [Client] Starting Tome: ${id}`);\n    \n    try {\n      await this.api.startTome(id);\n      console.log(` [Client] Successfully started Tome: ${id}`);\n    } catch (error) {\n      console.error(` [Client] Failed to start Tome ${id}:`, error);\n      throw error;\n    }\n  }\n  \n  /**\n   * Stop a Tome on the server\n   */\n  async stopTome(id: string): Promise<void> {\n    console.log(` [Client] Stopping Tome: ${id}`);\n    \n    try {\n      await this.api.stopTome(id);\n      console.log(` [Client] Successfully stopped Tome: ${id}`);\n    } catch (error) {\n      console.error(` [Client] Failed to stop Tome ${id}:`, error);\n      throw error;\n    }\n  }\n  \n  /**\n   * List all registered Tomes\n   */\n  listTomes(): string[] {\n    return Array.from(this.tomes.keys());\n  }\n  \n  /**\n   * Create a client-side proxy for a Tome instance\n   */\n  private createTomeInstanceProxy(response: TomeInstanceResponse): any {\n    return {\n      id: response.id,\n      config: response.config,\n      context: response.context,\n      machines: response.machines,\n      \n      async start(): Promise<void> {\n        await this.api.startTome(response.id);\n      },\n      \n      async stop(): Promise<void> {\n        await this.api.stopTome(response.id);\n      },\n      \n      async sendMessage(machineId: string, event: string, data?: any): Promise<any> {\n        const request: TomeMessageRequest = {\n          tomeId: response.id,\n          machineId,\n          event,\n          data\n        };\n        \n        const apiResponse = await this.sendTomeMessage(request);\n        return apiResponse.result;\n      },\n      \n      async getMachineState(machineId: string): Promise<any> {\n        return await this.api.getTomeMachineState(response.id, machineId);\n      },\n      \n      async getMachineContext(machineId: string): Promise<any> {\n        return await this.api.getTomeMachineContext(response.id, machineId);\n      },\n      \n      async getStatus(): Promise<TomeStatusResponse> {\n        return await this.api.getTomeStatus(response.id);\n      }\n    };\n  }\n  \n  /**\n   * Send a message to a Tome machine (convenience method)\n   */\n  async sendTomeMessage(request: TomeMessageRequest): Promise<TomeMessageResponse> {\n    console.log(` [Client] Sending message to Tome ${request.tomeId}, Machine ${request.machineId}: ${request.event}`);\n    \n    try {\n      const result = await this.api.sendTomeMessage(request.tomeId, request.machineId, request.event, request.data);\n      return { success: true, result };\n    } catch (error) {\n      console.error(` [Client] Failed to send message:`, error);\n      return { success: false, error: error instanceof Error ? error.message : String(error) };\n    }\n  }\n}\n\n/**\n * HTTP implementation of TomeAPI\n */\nexport class HttpTomeAPI implements TomeAPI {\n  public baseUrl: string;\n  \n  constructor(baseUrl: string = 'http://localhost:3000/api/tomes') {\n    this.baseUrl = baseUrl;\n  }\n  \n  private async request<T>(endpoint: string, options: RequestInit = {}): Promise<T> {\n    const url = `${this.baseUrl}${endpoint}`;\n    const response = await fetch(url, {\n      headers: {\n        'Content-Type': 'application/json',\n        ...options.headers\n      },\n      ...options\n    });\n    \n    if (!response.ok) {\n      throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n    }\n    \n    return response.json();\n  }\n  \n  async registerTome(config: any): Promise<TomeInstanceResponse> {\n    return this.request<TomeInstanceResponse>('/', {\n      method: 'POST',\n      body: JSON.stringify(config)\n    });\n  }\n  \n  async unregisterTome(id: string): Promise<void> {\n    await this.request<void>(`/${id}`, {\n      method: 'DELETE'\n    });\n  }\n  \n  async getTome(id: string): Promise<TomeInstanceResponse | null> {\n    try {\n      return await this.request<TomeInstanceResponse>(`/${id}`);\n    } catch (error) {\n      if (error instanceof Error && error.message.includes('404')) {\n        return null;\n      }\n      throw error;\n    }\n  }\n  \n  async listTomes(): Promise<TomeListResponse> {\n    return this.request<TomeListResponse>('/');\n  }\n  \n  async startTome(id: string): Promise<void> {\n    await this.request<void>(`/${id}/start`, {\n      method: 'POST'\n    });\n  }\n  \n  async stopTome(id: string): Promise<void> {\n    await this.request<void>(`/${id}/stop`, {\n      method: 'POST'\n    });\n  }\n  \n  async getTomeStatus(id: string): Promise<TomeStatusResponse> {\n    return this.request<TomeStatusResponse>(`/${id}/status`);\n  }\n  \n  async sendTomeMessage(tomeId: string, machineId: string, event: string, data?: any): Promise<any> {\n    return this.request<any>(`/${tomeId}/machines/${machineId}/message`, {\n      method: 'POST',\n      body: JSON.stringify({ event, data })\n    });\n  }\n  \n  async getTomeMachineState(tomeId: string, machineId: string): Promise<any> {\n    return this.request<any>(`/${tomeId}/machines/${machineId}/state`);\n  }\n  \n  async getTomeMachineContext(tomeId: string, machineId: string): Promise<any> {\n    return this.request<any>(`/${tomeId}/machines/${machineId}/context`);\n  }\n}\n\n/**\n * Factory function to create a TomeClient\n */\nexport function createTomeClient(apiUrl?: string): TomeClient {\n  const api = new HttpTomeAPI(apiUrl);\n  return new TomeClient(api);\n}\n\n\n\n","import React from 'react';\nimport { ISubMachine } from './TomeConfig';\n\n/**\n * ProxyMachineAdapter\n * \n * Adapter that wraps ProxyRobotCopyStateMachine to implement ISubMachine interface\n */\nexport class ProxyMachineAdapter implements ISubMachine {\n  private machine: any;\n  private startTime: number;\n  private errorCount: number;\n  private eventHandlers: Map<string, Set<(data: any) => void>>;\n\n  constructor(machine: any) {\n    this.machine = machine;\n    this.startTime = Date.now();\n    this.errorCount = 0;\n    this.eventHandlers = new Map();\n  }\n\n  get machineId(): string {\n    return this.machine.machineId || 'unknown-proxy';\n  }\n\n  get machineType(): 'proxy' | 'view' | 'background' | 'content' {\n    return 'proxy';\n  }\n\n  getState(): any {\n    return this.machine.getState?.() || { value: 'unknown' };\n  }\n\n  getContext(): any {\n    return this.machine.getContext?.() || {};\n  }\n\n  isInState(stateName: string): boolean {\n    const state = this.getState();\n    return state.value === stateName || state.matches?.(stateName) || false;\n  }\n\n  send(event: string | object): void {\n    try {\n      this.machine.send?.(event);\n    } catch (error) {\n      this.errorCount++;\n      this.emit('error', { error, event });\n    }\n  }\n\n  canHandle(event: string): boolean {\n    // Check if the machine can handle this event based on current state\n    const state = this.getState();\n    const stateConfig = this.machine.getConfig?.()?.states?.[state.value];\n    return stateConfig?.on?.[event] !== undefined;\n  }\n\n  async start(): Promise<void> {\n    try {\n      await this.machine.start?.();\n      this.emit('started', { machineId: this.machineId });\n    } catch (error) {\n      this.errorCount++;\n      this.emit('error', { error, action: 'start' });\n      throw error;\n    }\n  }\n\n  async stop(): Promise<void> {\n    try {\n      await this.machine.stop?.();\n      this.emit('stopped', { machineId: this.machineId });\n    } catch (error) {\n      this.errorCount++;\n      this.emit('error', { error, action: 'stop' });\n      throw error;\n    }\n  }\n\n  async pause(): Promise<void> {\n    // Proxy machines don't typically have pause functionality\n    this.emit('paused', { machineId: this.machineId });\n  }\n\n  async resume(): Promise<void> {\n    // Proxy machines don't typically have resume functionality\n    this.emit('resumed', { machineId: this.machineId });\n  }\n\n  async routeMessage(message: any): Promise<any> {\n    try {\n      // Route message through the proxy's robot copy functionality\n      if (this.machine.robotCopy?.sendMessage) {\n        return await this.machine.robotCopy.sendMessage(message);\n      }\n      return { success: false, error: 'No routing capability' };\n    } catch (error) {\n      this.errorCount++;\n      this.emit('error', { error, action: 'routeMessage' });\n      throw error;\n    }\n  }\n\n  async sendToParent(message: any): Promise<any> {\n    // Proxy machines typically send to parent through their robot copy\n    return this.routeMessage(message);\n  }\n\n  async sendToChild(_machineId: string, _message: any): Promise<any> {\n    // Proxy machines don't typically have children\n    return { success: false, error: 'Proxy machines do not have children' };\n  }\n\n  async broadcast(message: any): Promise<any> {\n    return this.routeMessage(message);\n  }\n\n  getConfig(): any {\n    return this.machine.getConfig?.() || {};\n  }\n\n  updateConfig(config: Partial<any>): void {\n    // Proxy machines typically don't support runtime config updates\n    this.emit('configUpdateRequested', { config });\n  }\n\n  getHealth(): {\n    status: 'healthy' | 'degraded' | 'unhealthy';\n    lastHeartbeat: number;\n    errorCount: number;\n    uptime: number;\n  } {\n    return {\n      status: this.errorCount > 10 ? 'unhealthy' : this.errorCount > 5 ? 'degraded' : 'healthy',\n      lastHeartbeat: Date.now(),\n      errorCount: this.errorCount,\n      uptime: Date.now() - this.startTime\n    };\n  }\n\n  on(event: string, handler: (data: any) => void): void {\n    if (!this.eventHandlers.has(event)) {\n      this.eventHandlers.set(event, new Set());\n    }\n    this.eventHandlers.get(event)!.add(handler);\n  }\n\n  off(event: string, handler: (data: any) => void): void {\n    const handlers = this.eventHandlers.get(event);\n    if (handlers) {\n      handlers.delete(handler);\n    }\n  }\n\n  emit(event: string, data: any): void {\n    const handlers = this.eventHandlers.get(event);\n    if (handlers) {\n      handlers.forEach(handler => {\n        try {\n          handler(data);\n        } catch (error) {\n          console.error(`Error in event handler for ${event}:`, error);\n        }\n      });\n    }\n  }\n\n  subscribe(callback: (data: any) => void): { unsubscribe: () => void } {\n    return this.machine.subscribe?.(callback) || {\n      unsubscribe: () => {\n        console.log(' ProxyMachineAdapter: No subscription to unsubscribe from');\n      }\n    };\n  }\n}\n\n/**\n * ViewMachineAdapter\n * \n * Adapter that wraps ViewStateMachine to implement ISubMachine interface\n */\nexport class ViewMachineAdapter implements ISubMachine {\n  private machine: any;\n  private startTime: number;\n  private errorCount: number;\n  private eventHandlers: Map<string, Set<(data: any) => void>>;\n\n  constructor(machine: any) {\n    this.machine = machine;\n    this.startTime = Date.now();\n    this.errorCount = 0;\n    this.eventHandlers = new Map();\n  }\n\n  get machineId(): string {\n    return this.machine.machineId || 'unknown-view';\n  }\n\n  get machineType(): 'proxy' | 'view' | 'background' | 'content' {\n    return 'view';\n  }\n\n  getState(): any {\n    return this.machine.getState?.() || { value: 'unknown' };\n  }\n\n  getContext(): any {\n    return this.machine.getContext?.() || {};\n  }\n\n  isInState(stateName: string): boolean {\n    const state = this.getState();\n    return state.value === stateName || state.matches?.(stateName) || false;\n  }\n\n  send(event: string | object): void {\n    try {\n      this.machine.send?.(event);\n    } catch (error) {\n      this.errorCount++;\n      this.emit('error', { error, event });\n    }\n  }\n\n  canHandle(event: string): boolean {\n    const state = this.getState();\n    const stateConfig = this.machine.getConfig?.()?.states?.[state.value];\n    return stateConfig?.on?.[event] !== undefined;\n  }\n\n  async start(): Promise<void> {\n    try {\n      await this.machine.start?.();\n      this.emit('started', { machineId: this.machineId });\n    } catch (error) {\n      this.errorCount++;\n      this.emit('error', { error, action: 'start' });\n      throw error;\n    }\n  }\n\n  async stop(): Promise<void> {\n    try {\n      await this.machine.stop?.();\n      this.emit('stopped', { machineId: this.machineId });\n    } catch (error) {\n      this.errorCount++;\n      this.emit('error', { error, action: 'stop' });\n      throw error;\n    }\n  }\n\n  async pause(): Promise<void> {\n    // View machines can be paused by stopping event processing\n    this.emit('paused', { machineId: this.machineId });\n  }\n\n  async resume(): Promise<void> {\n    // View machines can be resumed by restarting event processing\n    this.emit('resumed', { machineId: this.machineId });\n  }\n\n  async routeMessage(message: any): Promise<any> {\n    try {\n      // View machines route messages through their state machine\n      this.send(message);\n      return { success: true, message: 'Message routed to state machine' };\n    } catch (error) {\n      this.errorCount++;\n      this.emit('error', { error, action: 'routeMessage' });\n      throw error;\n    }\n  }\n\n  async sendToParent(message: any): Promise<any> {\n    // View machines can send messages to parent through extension messaging\n    try {\n      if (typeof window !== 'undefined' && (window as any).chrome?.runtime) {\n        return await (window as any).chrome.runtime.sendMessage(message);\n      }\n      return { success: false, error: 'No parent communication available' };\n    } catch (error) {\n      this.errorCount++;\n      this.emit('error', { error, action: 'sendToParent' });\n      throw error;\n    }\n  }\n\n  async sendToChild(_machineId: string, _message: any): Promise<any> {\n    // View machines don't typically have children\n    return { success: false, error: 'View machines do not have children' };\n  }\n\n  async broadcast(message: any): Promise<any> {\n    // View machines can broadcast through extension messaging\n    return this.sendToParent(message);\n  }\n\n  render?(): React.ReactNode {\n    // Delegate to the machine's render method if it exists\n    return this.machine.render?.() || null;\n  }\n\n  getConfig(): any {\n    return this.machine.getConfig?.() || {};\n  }\n\n  updateConfig(config: Partial<any>): void {\n    // View machines can update their configuration\n    this.emit('configUpdateRequested', { config });\n  }\n\n  getHealth(): {\n    status: 'healthy' | 'degraded' | 'unhealthy';\n    lastHeartbeat: number;\n    errorCount: number;\n    uptime: number;\n  } {\n    return {\n      status: this.errorCount > 10 ? 'unhealthy' : this.errorCount > 5 ? 'degraded' : 'healthy',\n      lastHeartbeat: Date.now(),\n      errorCount: this.errorCount,\n      uptime: Date.now() - this.startTime\n    };\n  }\n\n  on(event: string, handler: (data: any) => void): void {\n    if (!this.eventHandlers.has(event)) {\n      this.eventHandlers.set(event, new Set());\n    }\n    this.eventHandlers.get(event)!.add(handler);\n  }\n\n  off(event: string, handler: (data: any) => void): void {\n    const handlers = this.eventHandlers.get(event);\n    if (handlers) {\n      handlers.delete(handler);\n    }\n  }\n\n  emit(event: string, data: any): void {\n    const handlers = this.eventHandlers.get(event);\n    if (handlers) {\n      handlers.forEach(handler => {\n        try {\n          handler(data);\n        } catch (error) {\n          console.error(`Error in event handler for ${event}:`, error);\n        }\n      });\n    }\n  }\n\n  subscribe(callback: (data: any) => void): { unsubscribe: () => void } {\n    return this.machine.subscribe?.(callback) || {\n      unsubscribe: () => {\n        console.log(' ViewMachineAdapter: No subscription to unsubscribe from');\n      }\n    };\n  }\n}\n\n/**\n * LazyTomeManager - Only instantiated when needed\n */\nexport class LazyTomeManager {\n  private tome: any;\n  private isInitialized: boolean = false;\n  private subTomes: Map<string, any> = new Map();\n  private eventListeners: Map<string, Set<(data: any) => void>> = new Map();\n  private renderKey: number = 0;\n\n  constructor(tome: any) {\n    this.tome = tome;\n  }\n  \n  // Lazy initialization\n  private _ensureInitialized(): void {\n    if (!this.isInitialized) {\n      console.log(' LazyTomeManager: Initializing for tome', this.tome.id);\n      this.isInitialized = true;\n      this.tome.isStarted = false;\n      this.tome.isRegistered = false;\n    }\n  }\n  \n  // TomeManager methods\n  registerTome(tome: any): { success: boolean } {\n    this._ensureInitialized();\n    console.log(' LazyTomeManager: Registering tome', tome.id);\n    this.subTomes.set(tome.id, tome);\n    return { success: true };\n  }\n  \n  startTome(tomeId: string): { success: boolean } {\n    this._ensureInitialized();\n    console.log(' LazyTomeManager: Starting tome', tomeId);\n    \n    if (tomeId === this.tome.id) {\n      this.tome.isStarted = true;\n      // Start all sub-machines\n      Object.values(this.tome.machines || {}).forEach((machine: any) => {\n        if (machine.start) {\n          machine.start();\n        }\n      });\n    } else {\n      const subTome = this.subTomes.get(tomeId);\n      if (subTome && subTome.start) {\n        subTome.start();\n      }\n    }\n    \n    this.emit('tomeStarted', { tomeId });\n    return { success: true };\n  }\n  \n  stopTome(tomeId: string): { success: boolean } {\n    this._ensureInitialized();\n    console.log(' LazyTomeManager: Stopping tome', tomeId);\n    \n    if (tomeId === this.tome.id) {\n      this.tome.isStarted = false;\n      // Stop all sub-machines\n      Object.values(this.tome.machines || {}).forEach((machine: any) => {\n        if (machine.stop) {\n          machine.stop();\n        }\n      });\n    } else {\n      const subTome = this.subTomes.get(tomeId);\n      if (subTome && subTome.stop) {\n        subTome.stop();\n      }\n    }\n    \n    this.emit('tomeStopped', { tomeId });\n    return { success: true };\n  }\n  \n  getTome(tomeId: string): any {\n    this._ensureInitialized();\n    console.log(' LazyTomeManager: Getting tome', tomeId);\n    \n    if (tomeId === this.tome.id) {\n      return this.tome;\n    }\n    return this.subTomes.get(tomeId) || null;\n  }\n  \n  // Event system\n  on(event: string, handler: (data: any) => void): LazyTomeManager {\n    this._ensureInitialized();\n    if (!this.eventListeners.has(event)) {\n      this.eventListeners.set(event, new Set());\n    }\n    this.eventListeners.get(event)!.add(handler);\n    return this;\n  }\n  \n  off(event: string, handler: (data: any) => void): LazyTomeManager {\n    this._ensureInitialized();\n    const handlers = this.eventListeners.get(event);\n    if (handlers) {\n      handlers.delete(handler);\n    }\n    return this;\n  }\n  \n  emit(event: string, data: any): LazyTomeManager {\n    this._ensureInitialized();\n    const handlers = this.eventListeners.get(event);\n    if (handlers) {\n      handlers.forEach(handler => {\n        try {\n          handler(data);\n        } catch (error) {\n          console.error(` LazyTomeManager: Error in event handler for ${event}:`, error);\n        }\n      });\n    }\n    return this;\n  }\n  \n  // Force re-render\n  forceRender(): LazyTomeManager {\n    this._ensureInitialized();\n    this.renderKey++;\n    this.emit('render', { tomeId: this.tome.id, renderKey: this.renderKey });\n    return this;\n  }\n\n  // Sub-machine management\n  getSubMachine(machineId: string): any {\n    console.log(' Tome: Getting sub-machine', machineId);\n    return this.tome.machines?.[machineId] || null;\n  }\n\n  // State management\n  getState(): any {\n    const states: any = {};\n    Object.entries(this.tome.machines || {}).forEach(([id, machine]: [string, any]) => {\n      if (machine.getState) {\n        states[id] = machine.getState();\n      }\n    });\n    return {\n      tomeId: this.tome.id,\n      isStarted: this.tome.isStarted || false,\n      isRegistered: this.tome.isRegistered || false,\n      machines: states\n    };\n  }\n\n  getContext(): any {\n    const contexts: any = {};\n    Object.entries(this.tome.machines || {}).forEach(([id, machine]: [string, any]) => {\n      if (machine.getContext) {\n        contexts[id] = machine.getContext();\n      }\n    });\n    return {\n      tomeId: this.tome.id,\n      machines: contexts\n    };\n  }\n\n  // Health monitoring\n  getHealth(): any {\n    const machineHealth: any = {};\n    Object.entries(this.tome.machines || {}).forEach(([id, machine]: [string, any]) => {\n      if (machine.getHealth) {\n        machineHealth[id] = machine.getHealth();\n      }\n    });\n    \n    const overallStatus = Object.values(machineHealth).every((health: any) => \n      health && health.status === 'healthy'\n    ) ? 'healthy' : 'degraded';\n    \n    return {\n      status: overallStatus,\n      tomeId: this.tome.id,\n      isStarted: this.tome.isStarted || false,\n      machines: machineHealth\n    };\n  }\n\n  // Routing\n  route(path: string, method: string, data: any): any {\n    console.log(' Tome: Routing request', { path, method, tomeId: this.tome.id });\n    \n    if (!this.tome.routing || !this.tome.routing.routes) {\n      return { success: false, error: 'No routing configured' };\n    }\n    \n    // Find matching route\n    const route = Object.values(this.tome.routing.routes).find((r: any) => \n      r.path === path && r.method === method\n    );\n    \n    if (!route) {\n      return { success: false, error: 'Route not found' };\n    }\n    \n    // Execute route transformer\n    if ((route as any).transformers && (route as any).transformers.input) {\n      try {\n        return (route as any).transformers.input({\n          context: this.getContext(),\n          event: data,\n          send: (event: any) => this.emit('route', event),\n          log: (message: string, data: any) => console.log(' Tome Route:', message, data),\n          transition: (state: string) => console.log(' Tome: Transitioning to', state),\n          machine: this\n        });\n      } catch (error) {\n        console.error(' Tome: Route execution error', error);\n        return { success: false, error: (error as Error).message };\n      }\n    }\n    \n    return { success: true };\n  }\n}\n","import React from 'react';\nimport { LazyTomeManager } from './TomeAdapters';\n\n/**\n * TomeConfig - Configuration for Tome routing and state management\n * \n * This interface defines how tomes can be configured with routing support,\n * allowing each tome to insert gracefully into a routing hierarchy.\n */\n\nexport interface TomeMachineConfig {\n  id: string;\n  name: string;\n  description?: string;\n  xstateConfig: any;\n  context?: Record<string, any>;\n  dependencies?: string[];\n}\n\nexport interface TomeBinding {\n  path: string;\n  method?: 'GET' | 'POST' | 'PUT' | 'DELETE' | 'PATCH';\n  middleware?: string[];\n  guards?: string[];\n  transformers?: {\n    input?: (data: any) => any;\n    output?: (data: any) => any;\n  };\n}\n\nexport interface TomeRouteConfig {\n  basePath?: string;\n  middleware?: string[];\n  cors?: boolean;\n  rateLimit?: {\n    windowMs: number;\n    max: number;\n  };\n  authentication?: {\n    required: boolean;\n    type?: 'jwt' | 'api-key' | 'session';\n  };\n}\n\n/**\n * TomeRenderContainer type for wrapping rendered views\n * Supports React components, element types, or render functions\n */\nexport type TomeRenderContainer = \n  | React.ComponentType<{ children?: React.ReactNode; className?: string }>\n  | React.ElementType\n  | ((props: Partial<{ children?: React.ReactNode; className?: string }>) => React.ReactNode);\n\nexport interface TomeConfig {\n  id: string;\n  name: string;\n  description?: string;\n  version?: string;\n  \n  // Machine configurations\n  machines: Record<string, TomeMachineConfig>;\n  \n  // Routing configuration\n  routing?: {\n    basePath?: string;\n    routes?: Record<string, TomeBinding>;\n    middleware?: string[];\n    cors?: boolean;\n    rateLimit?: {\n      windowMs: number;\n      max: number;\n    };\n    authentication?: {\n      required: boolean;\n      type?: 'jwt' | 'api-key' | 'session';\n    };\n  };\n  \n  // Shared context for all machines in the tome\n  context?: Record<string, any>;\n  \n  // Dependencies and plugins\n  dependencies?: string[];\n  plugins?: string[];\n  \n  // GraphQL configuration\n  graphql?: {\n    enabled: boolean;\n    schema?: string;\n    resolvers?: Record<string, any>;\n    subscriptions?: boolean;\n  };\n  \n  // Logging configuration\n  logging?: {\n    level?: 'debug' | 'info' | 'warn' | 'error';\n    format?: 'json' | 'text';\n    transports?: string[];\n  };\n  \n  // State persistence\n  persistence?: {\n    enabled: boolean;\n    type?: 'memory' | 'database' | 'file';\n    config?: Record<string, any>;\n  };\n  \n  // Monitoring and metrics\n  monitoring?: {\n    enabled: boolean;\n    metrics?: string[];\n    tracing?: boolean;\n    healthChecks?: string[];\n  };\n  \n  // UI Rendering support\n  render?: () => React.ReactNode;\n  renderContainer?: TomeRenderContainer;\n}\n\nexport interface TomeInstance {\n  id: string;\n  config: TomeConfig;\n  machines: Map<string, any>;\n  router?: any;\n  context: Record<string, any>;\n  \n  // Methods\n  start(): Promise<void>;\n  stop(): Promise<void>;\n  getMachine(id: string): any;\n  sendMessage(machineId: string, event: string, data?: any): Promise<any>;\n  getState(machineId: string): any;\n  updateContext(updates: Record<string, any>): void;\n}\n\nexport interface TomeManager {\n  tomes: Map<string, TomeInstance>;\n  \n  // Methods\n  registerTome(config: TomeConfig): Promise<TomeInstance>;\n  unregisterTome(id: string): Promise<void>;\n  getTome(id: string): TomeInstance | undefined;\n  startTome(id: string): Promise<void>;\n  stopTome(id: string): Promise<void>;\n  listTomes(): string[];\n}\n\n/**\n * ISubMachine Interface\n * \n * Common interface for all sub-machines in the Tome architecture.\n * Provides standardized access to machine vitals, routing, and messaging capabilities.\n */\nexport interface ISubMachine {\n  // Machine identification\n  readonly machineId: string;\n  readonly machineType: 'proxy' | 'view' | 'background' | 'content';\n  \n  // State management\n  getState(): any;\n  getContext(): any;\n  isInState(stateName: string): boolean;\n  \n  // Event handling\n  send(event: string | object): void;\n  canHandle(event: string): boolean;\n  \n  // Lifecycle\n  start(): Promise<void>;\n  stop(): Promise<void>;\n  pause(): Promise<void>;\n  resume(): Promise<void>;\n  \n  // Routing and messaging\n  routeMessage(message: any): Promise<any>;\n  sendToParent(message: any): Promise<any>;\n  sendToChild(machineId: string, message: any): Promise<any>;\n  broadcast(message: any): Promise<any>;\n\n  // View rendering (for view container)\n  renderContainer?(): React.ReactNode;\n  \n  // View rendering (for view machines)\n  render?(): React.ReactNode;\n  \n  // Configuration\n  getConfig(): any;\n  updateConfig(config: Partial<any>): void;\n  \n  // Health and monitoring\n  getHealth(): {\n    status: 'healthy' | 'degraded' | 'unhealthy';\n    lastHeartbeat: number;\n    errorCount: number;\n    uptime: number;\n  };\n  \n  // Event subscription\n  on(event: string, handler: (data: any) => void): void;\n  off(event: string, handler: (data: any) => void): void;\n  emit(event: string, data: any): void;\n  \n  // State change subscription\n  subscribe(callback: (data: any) => void): { unsubscribe: () => void };\n}\n\n/**\n * Create a TomeConfig with routing support and lazy TomeManager\n */\nexport function createTomeConfig(config: Partial<TomeConfig>): TomeConfig & {\n  tomeManager: any;\n  start(): { success: boolean };\n  stop(): { success: boolean };\n  registerTome(tome: any): { success: boolean };\n  startTome(tomeId: string): { success: boolean };\n  stopTome(tomeId: string): { success: boolean };\n  getTome(tomeId: string): any;\n  on(event: string, handler: (data: any) => void): any;\n  off(event: string, handler: (data: any) => void): any;\n  emit(event: string, data: any): any;\n  forceRender(): any;\n  getSubMachine(machineId: string): any;\n  subscribe(callback: (data: any) => void): { unsubscribe: () => void };\n  getState(): any;\n  getContext(): any;\n  getHealth(): any;\n  route(path: string, method: string, data: any): any;\n} {\n  // LazyTomeManager is now imported at the top of the file\n  \n  const tomeConfig = {\n    id: config.id || 'default-tome',\n    name: config.name || 'Default Tome',\n    description: config.description || 'A configured tome with routing support',\n    version: config.version || '1.0.0',\n    machines: config.machines || {},\n    routing: {\n      basePath: config.routing?.basePath || '/api',\n      routes: config.routing?.routes || {},\n      middleware: config.routing?.middleware || [],\n      cors: config.routing?.cors ?? true,\n      rateLimit: config.routing?.rateLimit || {\n        windowMs: 15 * 60 * 1000, // 15 minutes\n        max: 100 // limit each IP to 100 requests per windowMs\n      },\n      authentication: config.routing?.authentication || {\n        required: false\n      }\n    },\n    context: config.context || {},\n    dependencies: config.dependencies || [],\n    plugins: config.plugins || [],\n    graphql: {\n      enabled: config.graphql?.enabled ?? true,\n      schema: config.graphql?.schema,\n      resolvers: config.graphql?.resolvers || {},\n      subscriptions: config.graphql?.subscriptions ?? true\n    },\n    logging: {\n      level: config.logging?.level || 'info',\n      format: config.logging?.format || 'json',\n      transports: config.logging?.transports || ['console']\n    },\n    persistence: {\n      enabled: config.persistence?.enabled ?? false,\n      type: config.persistence?.type || 'memory',\n      config: config.persistence?.config || {}\n    },\n    monitoring: {\n      enabled: config.monitoring?.enabled ?? true,\n      metrics: config.monitoring?.metrics || ['requests', 'errors', 'performance'],\n      tracing: config.monitoring?.tracing ?? true,\n      healthChecks: config.monitoring?.healthChecks || ['/health']\n    },\n    render: config.render,\n    renderContainer: config.renderContainer\n  };\n\n  let lazyTomeManager: any = null;\n\n  return {\n    ...tomeConfig,\n    \n    // Lazy TomeManager getter\n    get tomeManager() {\n      if (!lazyTomeManager) {\n        lazyTomeManager = new LazyTomeManager(this);\n      }\n      return lazyTomeManager;\n    },\n    \n    // TomeManager methods that delegate to lazy manager\n    start() {\n      return this.tomeManager.startTome(this.id);\n    },\n    \n    stop() {\n      return this.tomeManager.stopTome(this.id);\n    },\n    \n    registerTome(tome: any) {\n      return this.tomeManager.registerTome(tome);\n    },\n    \n    startTome(tomeId: string) {\n      return this.tomeManager.startTome(tomeId);\n    },\n    \n    stopTome(tomeId: string) {\n      return this.tomeManager.stopTome(tomeId);\n    },\n    \n    getTome(tomeId: string) {\n      return this.tomeManager.getTome(tomeId);\n    },\n    \n    // Event system\n    on(event: string, handler: (data: any) => void) {\n      return this.tomeManager.on(event, handler);\n    },\n    \n    off(event: string, handler: (data: any) => void) {\n      return this.tomeManager.off(event, handler);\n    },\n    \n    emit(event: string, data: any) {\n      return this.tomeManager.emit(event, data);\n    },\n    \n    // Force re-render\n    forceRender() {\n      return this.tomeManager.forceRender();\n    },\n    \n    // Sub-machine management\n    getSubMachine(machineId: string) {\n      return this.tomeManager.getSubMachine(machineId);\n    },\n    \n    // Subscription system\n    subscribe(callback: (data: any) => void) {\n      console.log(' Tome: Subscribing to tome', this.id);\n      if (typeof callback === 'function') {\n        callback({ type: 'tomeStarted', data: this });\n      }\n      return {\n        unsubscribe: () => {\n          console.log(' Tome: Unsubscribing from tome', this.id);\n        }\n      };\n    },\n    \n    // State management\n    getState() {\n      return this.tomeManager.getState();\n    },\n    \n    getContext() {\n      return this.tomeManager.getContext();\n    },\n    \n    // Health monitoring\n    getHealth() {\n      return this.tomeManager.getHealth();\n    },\n    \n    // Routing\n    route(path: string, method: string, data: any) {\n      return this.tomeManager.route(path, method, data);\n    }\n  };\n}\n\n/**\n * Example TomeConfig for Fish Burger system\n */\nexport const FishBurgerTomeConfig: TomeConfig = createTomeConfig({\n  id: 'fish-burger-tome',\n  name: 'Fish Burger System',\n  description: 'Complete fish burger ordering and cooking system',\n  version: '1.0.0',\n  machines: {\n    orderMachine: {\n      id: 'order-machine',\n      name: 'Order Management',\n      description: 'Handles order creation and management',\n      xstateConfig: {\n        id: 'order-machine',\n        initial: 'idle',\n        states: {\n          idle: {\n            on: { CREATE_ORDER: 'processing' }\n          },\n          processing: {\n            on: { COMPLETE_ORDER: 'completed' }\n          },\n          completed: {\n            on: { RESET: 'idle' }\n          }\n        }\n      }\n    },\n    cookingMachine: {\n      id: 'cooking-machine',\n      name: 'Cooking System',\n      description: 'Manages the cooking process',\n      xstateConfig: {\n        id: 'cooking-machine',\n        initial: 'idle',\n        states: {\n          idle: {\n            on: { START_COOKING: 'cooking' }\n          },\n          cooking: {\n            on: { COMPLETE_COOKING: 'completed' }\n          },\n          completed: {\n            on: { RESET: 'idle' }\n          }\n        }\n      }\n    }\n  },\n  routing: {\n    basePath: '/api/fish-burger',\n    routes: {\n      orderMachine: {\n        path: '/orders',\n        method: 'POST'\n      },\n      cookingMachine: {\n        path: '/cooking',\n        method: 'POST'\n      }\n    }\n  },\n  context: {\n    baseUrl: 'http://localhost:3000',\n    adminKey: (typeof process !== 'undefined' && process.env?.ADMIN_KEY) || 'admin123'\n  }\n});\n\n/**\n * Example TomeConfig for Editor system\n */\nexport const EditorTomeConfig: TomeConfig = createTomeConfig({\n  id: 'editor-tome',\n  name: 'Component Editor System',\n  description: 'Visual component editor with real-time preview',\n  version: '1.0.0',\n  machines: {\n    editorMachine: {\n      id: 'editor-machine',\n      name: 'Component Editor',\n      description: 'Main editor interface',\n      xstateConfig: {\n        id: 'editor-machine',\n        initial: 'idle',\n        states: {\n          idle: {\n            on: { LOAD_COMPONENT: 'editing' }\n          },\n          editing: {\n            on: { SAVE: 'saving' }\n          },\n          saving: {\n            on: { SAVE_SUCCESS: 'editing' }\n          }\n        }\n      }\n    },\n    previewMachine: {\n      id: 'preview-machine',\n      name: 'Preview System',\n      description: 'Real-time component preview',\n      xstateConfig: {\n        id: 'preview-machine',\n        initial: 'idle',\n        states: {\n          idle: {\n            on: { UPDATE_PREVIEW: 'updating' }\n          },\n          updating: {\n            on: { PREVIEW_READY: 'ready' }\n          },\n          ready: {\n            on: { UPDATE_PREVIEW: 'updating' }\n          }\n        }\n      }\n    }\n  },\n  routing: {\n    basePath: '/api/editor',\n    routes: {\n      editorMachine: {\n        path: '/components',\n        method: 'POST'\n      },\n      previewMachine: {\n        path: '/preview',\n        method: 'POST'\n      }\n    }\n  },\n  context: {\n    editorType: 'generic',\n    previewMode: 'iframe'\n  }\n}); ","import React, { useState, useEffect } from 'react';\nimport { TomeBase } from './TomeBase';\nimport { ViewStateMachine } from './ViewStateMachine';\n\n/**\n * Common tome rendering pattern that provides:\n * - View key subscription for React data pump\n * - Single point of truth via tome.render()\n * - Loading state fallback\n */\nexport const useTomeRenderer = (tome: TomeBase | ViewStateMachine<any>) => {\n  const isTomeBase = tome instanceof TomeBase;\n  const [viewKey, setViewKey] = useState(isTomeBase ? tome.getViewKey() : 'initial');\n  const [renderedView, setRenderedView] = useState<React.ReactNode>(null);\n\n  useEffect(() => {\n    if (isTomeBase) {\n      const unsubscribe = tome.observeViewKey(setViewKey);\n      return unsubscribe;\n    }\n  }, [tome, isTomeBase]);\n\n  useEffect(() => {\n    if (isTomeBase) {\n      const view = tome.render() || null;\n      setRenderedView(view);\n    } else {\n      // ViewStateMachine.render requires a model parameter\n      // For now, render an empty view or handle differently\n      setRenderedView(null);\n    }\n  }, [viewKey, tome, isTomeBase]);\n\n  return renderedView || <div>Loading...</div>;\n};\n\n/**\n * TomeRenderer component wrapper for easier usage\n */\nexport interface TomeRendererProps {\n  tome: TomeBase | ViewStateMachine<any>;\n  loadingComponent?: React.ReactNode;\n  children?: (renderedView: React.ReactNode) => React.ReactNode;\n}\n\nexport const TomeRenderer: React.FC<TomeRendererProps> = ({ \n  tome, \n  loadingComponent = <div>Loading...</div>,\n  children \n}) => {\n  const renderedView = useTomeRenderer(tome);\n\n  if (children) {\n    return <>{children(renderedView)}</>;\n  }\n\n  return <>{renderedView || loadingComponent}</>;\n};\n\nexport default TomeRenderer;\n","import { Component, ReactNode, ErrorInfo } from 'react';\n\ninterface ErrorBoundaryState {\n  hasError: boolean;\n  error?: Error;\n  errorInfo?: ErrorInfo;\n}\n\ninterface ErrorBoundaryProps {\n  children: ReactNode;\n  onError?: (error: Error, errorInfo?: ErrorInfo) => void;\n  fallback?: (error: Error, errorInfo: ErrorInfo | undefined, retry: () => void) => ReactNode;\n}\n\n/**\n * ErrorBoundary Component\n * \n * Catches React errors in child components and displays a fallback UI.\n * Can be used independently without GenericEditor dependencies.\n */\nexport class ErrorBoundary extends Component<ErrorBoundaryProps, ErrorBoundaryState> {\n  constructor(props: ErrorBoundaryProps) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(error: Error): ErrorBoundaryState {\n    return { hasError: true, error };\n  }\n\n  componentDidCatch(error: Error, errorInfo: ErrorInfo) {\n    console.error('Error caught by boundary:', error, errorInfo);\n    this.props.onError?.(error, errorInfo);\n  }\n\n  handleRetry = () => {\n    this.setState({ hasError: false, error: undefined, errorInfo: undefined });\n  };\n\n  render() {\n    if (this.state.hasError && this.state.error) {\n      if (this.props.fallback) {\n        return this.props.fallback(this.state.error, this.state.errorInfo, this.handleRetry);\n      }\n\n      // Default fallback UI\n      return (\n        <div style={{\n          padding: '20px',\n          margin: '20px',\n          border: '2px solid #ff6b6b',\n          borderRadius: '8px',\n          backgroundColor: '#fff5f5'\n        }}>\n          <h3 style={{ color: '#ff6b6b', marginTop: 0 }}> Something went wrong</h3>\n          <p style={{ color: '#333' }}>\n            {this.state.error.message || 'An unexpected error occurred'}\n          </p>\n          <button\n            onClick={this.handleRetry}\n            style={{\n              padding: '8px 16px',\n              backgroundColor: '#667eea',\n              color: 'white',\n              border: 'none',\n              borderRadius: '4px',\n              cursor: 'pointer',\n              marginTop: '10px'\n            }}\n          >\n             Try Again\n          </button>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\nexport default ErrorBoundary;\n\n","import React from 'react';\nimport { assign } from 'xstate';\nimport { ViewStateMachine, ViewStateMachineConfig } from './ViewStateMachine';\n\n// Core structural types\nexport interface AppStructureNode {\n  id: string;\n  name: string;\n  type: 'application' | 'navigation' | 'main-content' | 'control' | 'input' | 'configuration' | 'information' | 'service-layer' | 'communication' | 'content-layer' | 'content-script' | 'content-control';\n  component?: string;\n  tome?: string;\n  routing?: {\n    path: string;\n    children?: AppStructureNode[];\n  };\n  children?: AppStructureNode[];\n}\n\nexport interface ComponentTomeMapping {\n  [componentName: string]: {\n    componentPath: string;\n    tomePath: string;\n    templatePath: string;\n  };\n}\n\nexport interface RouteConfig {\n  path: string;\n  component?: string;\n  redirect?: string;\n  children?: RouteConfig[];\n}\n\nexport interface NavigationItem {\n  id: string;\n  label: string;\n  path: string;\n  icon?: string;\n  children?: NavigationItem[];\n}\n\nexport interface RoutingConfig {\n  routes: RouteConfig[];\n  navigation: {\n    primary: NavigationItem[];\n    secondary?: NavigationItem[];\n  };\n}\n\nexport interface TomeDefinition {\n  machineId: string;\n  description: string;\n  states: string[];\n  events: string[];\n}\n\nexport interface TomeConfig {\n  tomes: Record<string, TomeDefinition>;\n  machineStates?: Record<string, Record<string, any>>;\n}\n\nexport interface AppStructureConfig {\n  AppStructure: AppStructureNode;\n  ComponentTomeMapping: ComponentTomeMapping;\n  RoutingConfig: RoutingConfig;\n  TomeConfig: TomeConfig;\n}\n\n// Structural system class\nexport class StructuralSystem {\n  private config: AppStructureConfig;\n  private machines: Map<string, ViewStateMachine<any>> = new Map();\n  // Component cache for future use\n  // private _componentCache: Map<string, any> = new Map();\n\n  constructor(config: AppStructureConfig) {\n    this.config = config;\n  }\n\n  // Get the complete application structure\n  getAppStructure(): AppStructureNode {\n    return this.config.AppStructure;\n  }\n\n  // Get component-tome mapping\n  getComponentTomeMapping(): ComponentTomeMapping {\n    return this.config.ComponentTomeMapping;\n  }\n\n  // Get routing configuration\n  getRoutingConfig(): RoutingConfig {\n    return this.config.RoutingConfig;\n  }\n\n  // Get tome configuration\n  getTomeConfig(): TomeConfig {\n    return this.config.TomeConfig;\n  }\n\n  // Create a machine for a specific component\n  createMachine(componentName: string, initialModel?: any): ViewStateMachine<any> | null {\n    const mapping = this.config.ComponentTomeMapping[componentName];\n    const tomeConfig = this.config.TomeConfig.tomes[`${componentName}-tome`];\n\n    if (!mapping || !tomeConfig) {\n      console.warn(`No configuration found for component: ${componentName}`);\n      return null;\n    }\n\n    try {\n      // Create machine configuration\n      const machineConfig: ViewStateMachineConfig<any> = {\n        machineId: tomeConfig.machineId,\n        xstateConfig: {\n          id: tomeConfig.machineId,\n          initial: 'idle',\n          context: {\n            model: initialModel || {},\n            componentName,\n            tomePath: mapping.tomePath,\n            templatePath: mapping.templatePath\n          },\n          states: this.createStatesFromTome(tomeConfig),\n          on: this.createEventsFromTome(tomeConfig)\n        },\n        tomeConfig: {\n          ...tomeConfig,\n          componentMapping: mapping\n        }\n      };\n\n      const machine = new ViewStateMachine(machineConfig);\n      this.machines.set(componentName, machine);\n      return machine;\n    } catch (error) {\n      console.error(`Failed to create machine for ${componentName}:`, error);\n      return null;\n    }\n  }\n\n  // Get an existing machine\n  getMachine(componentName: string): ViewStateMachine<any> | undefined {\n    return this.machines.get(componentName);\n  }\n\n  // Get all machines\n  getAllMachines(): Map<string, ViewStateMachine<any>> {\n    return this.machines;\n  }\n\n  // Find route by path\n  findRoute(path: string): RouteConfig | null {\n    const findRouteRecursive = (routes: RouteConfig[], targetPath: string): RouteConfig | null => {\n      for (const route of routes) {\n        if (route.path === targetPath) {\n          return route;\n        }\n        if (route.children) {\n          const found = findRouteRecursive(route.children, targetPath);\n          if (found) return found;\n        }\n      }\n      return null;\n    };\n\n    return findRouteRecursive(this.config.RoutingConfig.routes, path);\n  }\n\n  // Get navigation breadcrumbs for a path\n  getBreadcrumbs(path: string): NavigationItem[] {\n    const breadcrumbs: NavigationItem[] = [];\n    const pathParts = path.split('/').filter(Boolean);\n    \n    let currentPath = '';\n    for (const part of pathParts) {\n      currentPath += `/${part}`;\n      const route = this.findRoute(currentPath);\n      if (route && route.component) {\n        const navItem = this.findNavigationItem(currentPath);\n        if (navItem) {\n          breadcrumbs.push(navItem);\n        }\n      }\n    }\n\n    return breadcrumbs;\n  }\n\n  // Find navigation item by path\n  findNavigationItem(path: string): NavigationItem | null {\n    const findInNavigation = (items: NavigationItem[], targetPath: string): NavigationItem | null => {\n      for (const item of items) {\n        if (item.path === targetPath) {\n          return item;\n        }\n        if (item.children) {\n          const found = findInNavigation(item.children, targetPath);\n          if (found) return found;\n        }\n      }\n      return null;\n    };\n\n    const primary = findInNavigation(this.config.RoutingConfig.navigation.primary, path);\n    if (primary) return primary;\n\n    if (this.config.RoutingConfig.navigation.secondary) {\n      return findInNavigation(this.config.RoutingConfig.navigation.secondary, path);\n    }\n\n    return null;\n  }\n\n  // Validate the structural configuration\n  validate(): { isValid: boolean; errors: string[] } {\n    const errors: string[] = [];\n\n    // Validate component-tome mappings\n    for (const [componentName, _mapping] of Object.entries(this.config.ComponentTomeMapping)) {\n      if (!this.config.TomeConfig.tomes[`${componentName}-tome`]) {\n        errors.push(`Component ${componentName} has no corresponding tome configuration`);\n      }\n    }\n\n    // Validate routing\n    for (const route of this.config.RoutingConfig.routes) {\n      if (route.component && !this.config.ComponentTomeMapping[route.component]) {\n        errors.push(`Route ${route.path} references unknown component: ${route.component}`);\n      }\n    }\n\n    // Validate navigation\n    const validateNavigation = (items: NavigationItem[]) => {\n      for (const item of items) {\n        if (!this.findRoute(item.path)) {\n          errors.push(`Navigation item ${item.id} references unknown route: ${item.path}`);\n        }\n        if (item.children) {\n          validateNavigation(item.children);\n        }\n      }\n    };\n\n    validateNavigation(this.config.RoutingConfig.navigation.primary);\n    if (this.config.RoutingConfig.navigation.secondary) {\n      validateNavigation(this.config.RoutingConfig.navigation.secondary);\n    }\n\n    return {\n      isValid: errors.length === 0,\n      errors\n    };\n  }\n\n  // Create XState states from tome configuration\n  private createStatesFromTome(tomeConfig: TomeDefinition): any {\n    const states: any = {};\n    \n    for (const state of tomeConfig.states) {\n      states[state] = {\n        on: {}\n      };\n    }\n\n    return states;\n  }\n\n  // Create XState events from tome configuration\n  private createEventsFromTome(tomeConfig: TomeDefinition): any {\n    const events: any = {};\n    \n    for (const event of tomeConfig.events) {\n      events[event] = {\n        actions: assign((_context: any, event: any) => ({\n          lastEvent: event.type,\n          lastEventPayload: event.payload\n        }))\n      };\n    }\n\n    return events;\n  }\n}\n\n// React hook for using the structural system\nexport function useStructuralSystem(config: AppStructureConfig) {\n  const [system] = React.useState(() => new StructuralSystem(config));\n  \n  React.useEffect(() => {\n    const validation = system.validate();\n    if (!validation.isValid) {\n      console.warn('Structural system validation errors:', validation.errors);\n    }\n  }, [system]);\n\n  return system;\n}\n\n// Utility function to create a structural system\nexport function createStructuralSystem(config: AppStructureConfig): StructuralSystem {\n  return new StructuralSystem(config);\n}\n\n// Types are already exported above as interfaces\n","import React, { useState, useEffect, createContext, useContext, ReactNode } from 'react';\nimport { StructuralSystem, AppStructureConfig, NavigationItem } from './StructuralSystem';\n\n// Router context\nexport interface RouterContextType {\n  currentRoute: string;\n  navigate: (path: string) => void;\n  goBack: () => void;\n  breadcrumbs: NavigationItem[];\n  structuralSystem: StructuralSystem;\n}\n\nconst RouterContext = createContext<RouterContextType | null>(null);\n\n// Router hook\nexport function useRouter(): RouterContextType {\n  const context = useContext(RouterContext);\n  if (!context) {\n    throw new Error('useRouter must be used within a StructuralRouter');\n  }\n  return context;\n}\n\n// Router props\ninterface StructuralRouterProps {\n  config: AppStructureConfig;\n  initialRoute?: string;\n  onRouteChange?: (route: string) => void;\n  children: ReactNode;\n}\n\n// Main router component\nexport const StructuralRouter: React.FC<StructuralRouterProps> = ({\n  config,\n  initialRoute = '/',\n  onRouteChange,\n  children\n}) => {\n  const [currentRoute, setCurrentRoute] = useState(initialRoute);\n  const [routeHistory, setRouteHistory] = useState<string[]>([initialRoute]);\n  const [structuralSystem] = useState(() => new StructuralSystem(config));\n\n  // Handle route changes\n  const navigate = (path: string) => {\n    const route = structuralSystem.findRoute(path);\n    if (route) {\n      setCurrentRoute(path);\n      setRouteHistory(prev => [...prev, path]);\n      onRouteChange?.(path);\n    } else {\n      console.warn(`Route not found: ${path}`);\n    }\n  };\n\n  // Handle back navigation\n  const goBack = () => {\n    if (routeHistory.length > 1) {\n      const newHistory = routeHistory.slice(0, -1);\n      const previousRoute = newHistory[newHistory.length - 1];\n      setCurrentRoute(previousRoute);\n      setRouteHistory(newHistory);\n      onRouteChange?.(previousRoute);\n    }\n  };\n\n  // Get breadcrumbs for current route\n  const breadcrumbs = structuralSystem.getBreadcrumbs(currentRoute);\n\n  // Context value\n  const contextValue: RouterContextType = {\n    currentRoute,\n    navigate,\n    goBack,\n    breadcrumbs,\n    structuralSystem\n  };\n\n  // Handle initial route validation\n  useEffect(() => {\n    const route = structuralSystem.findRoute(initialRoute);\n    if (!route) {\n      console.warn(`Initial route not found: ${initialRoute}`);\n      // Try to find a valid default route\n      const defaultRoute = config.RoutingConfig.routes.find(r => r.component)?.path;\n      if (defaultRoute && defaultRoute !== initialRoute) {\n        setCurrentRoute(defaultRoute);\n        setRouteHistory([defaultRoute]);\n        onRouteChange?.(defaultRoute);\n      }\n    }\n  }, [initialRoute, structuralSystem, config.RoutingConfig.routes, onRouteChange]);\n\n  return (\n    <RouterContext.Provider value={contextValue}>\n      <div className=\"structural-router\">\n        <RouterHeader />\n        <div className=\"router-content\">\n          <RouterSidebar />\n          <RouterMain>\n            {children}\n          </RouterMain>\n        </div>\n      </div>\n    </RouterContext.Provider>\n  );\n};\n\n// Router header component\nconst RouterHeader: React.FC = () => {\n  const { breadcrumbs, goBack } = useRouter();\n  \n  return (\n    <header className=\"router-header\">\n      <div className=\"header-content\">\n        <h1 className=\"router-title\">Log View Machine</h1>\n        <nav className=\"breadcrumb-nav\">\n          {breadcrumbs.map((item, index) => (\n            <span key={item.id} className=\"breadcrumb-item\">\n              {index > 0 && <span className=\"breadcrumb-separator\">/</span>}\n              <span className=\"breadcrumb-label\">{item.label}</span>\n            </span>\n          ))}\n        </nav>\n      </div>\n      <button \n        className=\"back-button\" \n        onClick={goBack}\n        disabled={breadcrumbs.length <= 1}\n      >\n         Back\n      </button>\n    </header>\n  );\n};\n\n// Router sidebar component\nconst RouterSidebar: React.FC = () => {\n  const { structuralSystem, navigate, currentRoute } = useRouter();\n  const config = structuralSystem.getRoutingConfig();\n  \n  const renderNavigationItems = (items: NavigationItem[]) => {\n    return items.map(item => (\n      <div key={item.id} className=\"nav-item\">\n        <button\n          className={`nav-button ${currentRoute === item.path ? 'active' : ''}`}\n          onClick={() => navigate(item.path)}\n        >\n          {item.icon && <span className=\"nav-icon\">{item.icon}</span>}\n          <span className=\"nav-label\">{item.label}</span>\n        </button>\n        {item.children && (\n          <div className=\"nav-children\">\n            {renderNavigationItems(item.children)}\n          </div>\n        )}\n      </div>\n    ));\n  };\n\n  return (\n    <aside className=\"router-sidebar\">\n      <nav className=\"primary-navigation\">\n        <h3 className=\"nav-section-title\">Primary</h3>\n        {renderNavigationItems(config.navigation.primary)}\n      </nav>\n      {config.navigation.secondary && (\n        <nav className=\"secondary-navigation\">\n          <h3 className=\"nav-section-title\">Secondary</h3>\n          {renderNavigationItems(config.navigation.secondary)}\n        </nav>\n      )}\n    </aside>\n  );\n};\n\n// Router main content area\nconst RouterMain: React.FC<{ children: ReactNode }> = ({ children }) => {\n  return (\n    <main className=\"router-main\">\n      {children}\n    </main>\n  );\n};\n\n// Route component for rendering specific routes\ninterface RouteProps {\n  path: string;\n  component: React.ComponentType<any>;\n  fallback?: React.ComponentType<any>;\n}\n\nexport const Route: React.FC<RouteProps> = ({ path, component: Component, fallback: Fallback }) => {\n  const { currentRoute } = useRouter();\n  \n  // Handle exact route matches\n  if (currentRoute === path) {\n    return <Component />;\n  }\n  \n  // Handle wildcard routes (catch-all)\n  if (path === '*' && Component) {\n    return <Component />;\n  }\n  \n  // Handle fallback for unmatched routes\n  if (Fallback && currentRoute !== path) {\n    return <Fallback />;\n  }\n  \n  return null;\n};\n\n// Default fallback component\nexport const RouteFallback: React.FC = () => {\n  const { currentRoute } = useRouter();\n  \n  return (\n    <div className=\"route-fallback\">\n      <h2>Route Not Found</h2>\n      <p>The route \"{currentRoute}\" could not be found.</p>\n    </div>\n  );\n};\n\n// Export the router components\nexport default StructuralRouter;\n","import React, { useEffect, useState, useRef, useMemo, ReactNode } from 'react';\nimport { ViewStateMachine } from './ViewStateMachine';\nimport { StructuralSystem } from './StructuralSystem';\n\n// Props for the structural tome connector\ninterface StructuralTomeConnectorProps {\n  componentName: string;\n  structuralSystem: StructuralSystem;\n  initialModel?: any;\n  onStateChange?: (state: string, model: any) => void;\n  onLogEntry?: (entry: any) => void;\n  onMachineCreated?: (machine: ViewStateMachine<any>) => void;\n  children?: ReactNode | ((context: TomeConnectorContext) => ReactNode);\n}\n\n// Context provided to children\nexport interface TomeConnectorContext {\n  machine: ViewStateMachine<any> | null;\n  currentState: string;\n  model: any;\n  logEntries: any[];\n  isLoading: boolean;\n  error: string | null;\n  sendEvent: (event: any) => void;\n  updateModel: (updates: any) => void;\n  componentName: string;\n  tomeConfig: any;\n  componentMapping: any;\n}\n\n// Internal state\ninterface TomeConnectorState {\n  machine: ViewStateMachine<any> | null;\n  currentState: string;\n  model: any;\n  logEntries: any[];\n  isLoading: boolean;\n  error: string | null;\n}\n\n// Main component\nexport const StructuralTomeConnector: React.FC<StructuralTomeConnectorProps> = ({\n  componentName,\n  structuralSystem,\n  initialModel = {},\n  onStateChange,\n  onLogEntry,\n  onMachineCreated,\n  children\n}) => {\n  const [state, setState] = useState<TomeConnectorState>({\n    machine: null,\n    currentState: 'idle',\n    model: initialModel,\n    logEntries: [],\n    isLoading: true,\n    error: null\n  });\n\n  const machineRef = useRef<ViewStateMachine<any> | null>(null);\n  const logEntriesRef = useRef<any[]>([]);\n\n  // Get tome configuration and component mapping\n  const tomeConfig = useMemo(() => {\n    return structuralSystem.getTomeConfig().tomes[`${componentName}-tome`];\n  }, [componentName, structuralSystem]);\n\n  const componentMapping = useMemo(() => {\n    return structuralSystem.getComponentTomeMapping()[componentName];\n  }, [componentName, structuralSystem]);\n\n  // Initialize the tome machine\n  useEffect(() => {\n    const initializeTome = async () => {\n      try {\n        setState(prev => ({ ...prev, isLoading: true, error: null }));\n\n        // Validate configuration\n        if (!tomeConfig) {\n          throw new Error(`No tome configuration found for component: ${componentName}`);\n        }\n\n        if (!componentMapping) {\n          throw new Error(`No component mapping found for: ${componentName}`);\n        }\n\n        // Create or get the machine\n        let machine: ViewStateMachine<any> | null = structuralSystem.getMachine(componentName) || null;\n        if (!machine) {\n          machine = structuralSystem.createMachine(componentName, initialModel);\n          if (!machine) {\n            throw new Error(`Failed to create machine for component: ${componentName}`);\n          }\n        }\n\n        // Store machine reference\n        machineRef.current = machine;\n        onMachineCreated?.(machine);\n\n        // Set up state change listener\n        const unsubscribe = machine.subscribe((state: any) => {\n          const currentState = state.value || 'idle';\n          const model = state.context?.model || initialModel;\n          \n          setState(prev => ({\n            ...prev,\n            currentState,\n            model,\n            isLoading: false\n          }));\n\n          onStateChange?.(currentState, model);\n        });\n\n        // Set up logging\n        machine.on('LOG_ADDED', async (entry: any) => {\n          const newEntry = {\n            id: Date.now().toString(),\n            timestamp: new Date().toISOString(),\n            level: 'info',\n            message: entry.message,\n            metadata: entry.metadata\n          };\n\n          setState(prev => ({\n            ...prev,\n            logEntries: [...prev.logEntries, newEntry]\n          }));\n\n          logEntriesRef.current = [...logEntriesRef.current, newEntry];\n          onLogEntry?.(newEntry);\n        });\n\n        // Initialize the machine\n        await machine.start();\n\n        setState(prev => ({\n          ...prev,\n          machine,\n          isLoading: false\n        }));\n\n        return unsubscribe;\n      } catch (error) {\n        const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n        setState(prev => ({\n          ...prev,\n          error: errorMessage,\n          isLoading: false\n        }));\n        console.error(`Failed to initialize tome for ${componentName}:`, error);\n      }\n    };\n\n    initializeTome();\n  }, [componentName, structuralSystem, initialModel, onStateChange, onLogEntry, onMachineCreated]);\n\n  // Send event to the machine\n  const sendEvent = (event: any) => {\n    if (machineRef.current) {\n      machineRef.current.send(event);\n    }\n  };\n\n  // Update the model\n  const updateModel = (updates: any) => {\n    if (machineRef.current) {\n      const currentModel = machineRef.current.getState()?.context?.model || {};\n      const newModel = { ...currentModel, ...updates };\n      \n      // Update the machine context\n      machineRef.current.send({\n        type: 'MODEL_UPDATE',\n        payload: { model: newModel }\n      });\n    }\n  };\n\n  // Context value for children\n  const contextValue: TomeConnectorContext = {\n    machine: state.machine,\n    currentState: state.currentState,\n    model: state.model,\n    logEntries: state.logEntries,\n    isLoading: state.isLoading,\n    error: state.error,\n    sendEvent,\n    updateModel,\n    componentName,\n    tomeConfig,\n    componentMapping\n  };\n\n  // Render children\n  if (typeof children === 'function') {\n    return <>{children(contextValue)}</>;\n  }\n\n  return (\n    <div className=\"structural-tome-connector\">\n      <TomeHeader context={contextValue} />\n      <TomeContent context={contextValue}>\n        {children}\n      </TomeContent>\n      <TomeFooter context={contextValue} />\n    </div>\n  );\n};\n\n// Tome header component\nconst TomeHeader: React.FC<{ context: TomeConnectorContext }> = ({ context }) => {\n  const { componentName, currentState, tomeConfig, error } = context;\n\n  return (\n    <header className=\"tome-header\">\n      <div className=\"tome-info\">\n        <h3 className=\"tome-title\">{componentName}</h3>\n        {tomeConfig && (\n          <p className=\"tome-description\">{tomeConfig.description}</p>\n        )}\n      </div>\n      <div className=\"tome-status\">\n        <span className={`state-indicator state-${currentState}`}>\n          {currentState}\n        </span>\n        {error && (\n          <span className=\"error-indicator\" title={error}>\n            \n          </span>\n        )}\n      </div>\n    </header>\n  );\n};\n\n// Tome content component\nconst TomeContent: React.FC<{ \n  context: TomeConnectorContext; \n  children?: ReactNode \n}> = ({ context, children }) => {\n  const { isLoading, error } = context;\n\n  if (isLoading) {\n    return (\n      <div className=\"tome-content loading\">\n        <div className=\"loading-spinner\">Loading...</div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"tome-content error\">\n        <div className=\"error-message\">\n          <h4>Error</h4>\n          <p>{error}</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"tome-content\">\n      {children}\n    </div>\n  );\n};\n\n// Tome footer component\nconst TomeFooter: React.FC<{ context: TomeConnectorContext }> = ({ context }) => {\n  const { logEntries, tomeConfig } = context;\n\n  if (!tomeConfig || logEntries.length === 0) {\n    return null;\n  }\n\n  return (\n    <footer className=\"tome-footer\">\n      <details className=\"tome-logs\">\n        <summary>Logs ({logEntries.length})</summary>\n        <div className=\"log-entries\">\n          {logEntries.slice(-5).map(entry => (\n            <div key={entry.id} className={`log-entry log-${entry.level}`}>\n              <span className=\"log-timestamp\">\n                {new Date(entry.timestamp).toLocaleTimeString()}\n              </span>\n              <span className=\"log-message\">{entry.message}</span>\n              {entry.metadata && (\n                <span className=\"log-metadata\">\n                  {JSON.stringify(entry.metadata)}\n                </span>\n              )}\n            </div>\n          ))}\n        </div>\n      </details>\n    </footer>\n  );\n};\n\n// Hook for using the tome connector\nexport function useStructuralTomeConnector(\n  componentName: string,\n  structuralSystem: StructuralSystem\n): TomeConnectorContext {\n  const [context, setContext] = useState<TomeConnectorContext>({\n    machine: null,\n    currentState: 'idle',\n    model: {},\n    logEntries: [],\n    isLoading: true,\n    error: null,\n    sendEvent: () => {},\n    updateModel: () => {},\n    componentName,\n    tomeConfig: null,\n    componentMapping: null\n  });\n\n  useEffect(() => {\n    const tomeConfig = structuralSystem.getTomeConfig().tomes[`${componentName}-tome`];\n    const componentMapping = structuralSystem.getComponentTomeMapping()[componentName];\n    \n    setContext(prev => ({\n      ...prev,\n      tomeConfig,\n      componentMapping\n    }));\n  }, [componentName, structuralSystem]);\n\n  return context;\n}\n\n// Export the component and types\nexport default StructuralTomeConnector;\n","import { AppStructureConfig } from './StructuralSystem';\n\n// Default application structure configuration\nexport const DefaultStructuralConfig: AppStructureConfig = {\n  // Root application structure\n  AppStructure: {\n    id: 'log-view-machine-app',\n    name: 'Log View Machine Application',\n    type: 'application',\n    routing: {\n      path: '/'\n    }\n  },\n\n  // Component to Tome mapping\n  ComponentTomeMapping: {\n    'dashboard': {\n      componentPath: 'src/components/Dashboard.tsx',\n      tomePath: 'src/component-middleware/dashboard/DashboardTomes.tsx',\n      templatePath: 'src/component-middleware/dashboard/templates/dashboard-component/'\n    },\n    'log-viewer': {\n      componentPath: 'src/components/LogViewer.tsx',\n      tomePath: 'src/component-middleware/log-viewer/LogViewerTomes.tsx',\n      templatePath: 'src/component-middleware/log-viewer/templates/log-viewer-component/'\n    },\n    'state-machine': {\n      componentPath: 'src/components/StateMachine.tsx',\n      tomePath: 'src/component-middleware/state-machine/StateMachineTomes.tsx',\n      templatePath: 'src/component-middleware/state-machine/templates/state-machine-component/'\n    },\n    'tome-manager': {\n      componentPath: 'src/components/TomeManager.tsx',\n      tomePath: 'src/component-middleware/tome-manager/TomeManagerTomes.tsx',\n      templatePath: 'src/component-middleware/tome-manager/templates/tome-manager-component/'\n    },\n    'settings': {\n      componentPath: 'src/components/Settings.tsx',\n      tomePath: 'src/component-middleware/settings/SettingsTomes.tsx',\n      templatePath: 'src/component-middleware/settings/templates/settings-component/'\n    },\n    // Add missing component mappings for the editor\n    'app': {\n      componentPath: 'src/App.tsx',\n      tomePath: 'src/core/AppTome.tsx',\n      templatePath: 'src/templates/app-component/'\n    },\n    'WaveTabs': {\n      componentPath: 'src/components/WaveTabs.tsx',\n      tomePath: 'src/component-middleware/wave-tabs/WaveTabsTomes.tsx',\n      templatePath: 'src/component-middleware/wave-tabs/templates/wave-tabs-component/'\n    },\n    'SelectorInput': {\n      componentPath: 'src/components/SelectorInput.tsx',\n      tomePath: 'src/component-middleware/selector-input/SelectorInputTomes.tsx',\n      templatePath: 'src/component-middleware/selector-input/templates/selector-input-component/'\n    },\n    'About': {\n      componentPath: 'src/components/About.tsx',\n      tomePath: 'src/component-middleware/about/AboutTomes.tsx',\n      templatePath: 'src/component-middleware/about/templates/about-component/'\n    }\n  },\n\n  // Routing configuration\n  RoutingConfig: {\n    routes: [\n      {\n        path: '/',\n        redirect: '/dashboard'\n      },\n      {\n        path: '/dashboard',\n        component: 'dashboard'\n      },\n      {\n        path: '/log-viewer',\n        component: 'log-viewer'\n      },\n      {\n        path: '/state-machine',\n        component: 'state-machine'\n      },\n      {\n        path: '/tome-manager',\n        component: 'tome-manager'\n      },\n      {\n        path: '/settings',\n        component: 'settings'\n      },\n      // Add routes for editor components\n      {\n        path: '/app',\n        component: 'app'\n      },\n      {\n        path: '/wave-tabs',\n        component: 'WaveTabs'\n      },\n      {\n        path: '/selector-input',\n        component: 'SelectorInput'\n      },\n      {\n        path: '/about',\n        component: 'About'\n      }\n    ],\n    navigation: {\n      primary: [\n        {\n          id: 'dashboard',\n          label: 'Dashboard',\n          path: '/dashboard',\n          icon: ''\n        },\n        {\n          id: 'log-viewer',\n          label: 'Log Viewer',\n          path: '/log-viewer',\n          icon: ''\n        },\n        {\n          id: 'state-machine',\n          label: 'State Machine',\n          path: '/state-machine',\n          icon: ''\n        },\n        {\n          id: 'tome-manager',\n          label: 'Tome Manager',\n          path: '/tome-manager',\n          icon: ''\n        },\n        {\n          id: 'WaveTabs',\n          label: 'Wave Tabs',\n          path: '/wave-tabs',\n          icon: ''\n        },\n        {\n          id: 'SelectorInput',\n          label: 'Selector Input',\n          path: '/selector-input',\n          icon: ''\n        }\n      ],\n      secondary: [\n        {\n          id: 'settings',\n          label: 'Settings',\n          path: '/settings',\n          icon: ''\n        },\n        {\n          id: 'About',\n          label: 'About',\n          path: '/about',\n          icon: ''\n        }\n      ]\n    }\n  },\n\n  // Tome configuration\n  TomeConfig: {\n    tomes: {\n      'dashboard-tome': {\n        machineId: 'dashboard',\n        description: 'Main dashboard with overview and navigation',\n        states: ['idle', 'loading', 'loaded', 'error'],\n        events: ['LOAD', 'REFRESH', 'ERROR', 'CLEAR']\n      },\n      'log-viewer-tome': {\n        machineId: 'log-viewer',\n        description: 'Log viewing and analysis functionality',\n        states: ['idle', 'loading', 'viewing', 'filtering', 'exporting', 'error'],\n        events: ['LOAD_LOGS', 'FILTER', 'EXPORT', 'CLEAR', 'ERROR']\n      },\n      'state-machine-tome': {\n        machineId: 'state-machine',\n        description: 'State machine visualization and management',\n        states: ['idle', 'loading', 'visualizing', 'editing', 'saving', 'error'],\n        events: ['LOAD_MACHINE', 'VISUALIZE', 'EDIT', 'SAVE', 'ERROR']\n      },\n      'tome-manager-tome': {\n        machineId: 'tome-manager',\n        description: 'Tome lifecycle and configuration management',\n        states: ['idle', 'loading', 'managing', 'creating', 'editing', 'deleting', 'error'],\n        events: ['LOAD_TOMES', 'CREATE', 'EDIT', 'DELETE', 'SAVE', 'ERROR']\n      },\n      'settings-tome': {\n        machineId: 'settings',\n        description: 'Application settings and configuration',\n        states: ['idle', 'loading', 'editing', 'saving', 'resetting', 'error'],\n        events: ['LOAD_SETTINGS', 'EDIT', 'SAVE', 'RESET', 'ERROR']\n      },\n      // Add missing tome configurations for the editor\n      'app-tome': {\n        machineId: 'app',\n        description: 'Main application state management',\n        states: ['idle', 'initializing', 'ready', 'navigating', 'error'],\n        events: ['INITIALIZE', 'NAVIGATE', 'TAB_CHANGE', 'ERROR']\n      },\n      'WaveTabs-tome': {\n        machineId: 'WaveTabs',\n        description: 'Wave tabs navigation state management',\n        states: ['idle', 'active', 'navigating', 'error'],\n        events: ['TAB_SELECT', 'TAB_ADD', 'TAB_REMOVE', 'ERROR']\n      },\n      'SelectorInput-tome': {\n        machineId: 'SelectorInput',\n        description: 'Selector input state management',\n        states: ['idle', 'inputting', 'validating', 'saving', 'error'],\n        events: ['INPUT_CHANGE', 'VALIDATE', 'SAVE', 'CLEAR', 'ERROR']\n      },\n      'About-tome': {\n        machineId: 'About',\n        description: 'About component state management',\n        states: ['idle', 'expanded', 'help', 'error'],\n        events: ['EXPAND', 'SHOW_HELP', 'COLLAPSE', 'ERROR']\n      }\n    },\n    machineStates: {\n      'dashboard': {\n        idle: {\n          description: 'Dashboard is ready for interaction',\n          actions: ['initialize', 'setupEventListeners']\n        },\n        loading: {\n          description: 'Loading dashboard data',\n          actions: ['fetchData', 'showLoadingState']\n        },\n        loaded: {\n          description: 'Dashboard data is loaded and ready',\n          actions: ['renderDashboard', 'setupInteractions']\n        },\n        error: {\n          description: 'Error occurred while loading dashboard',\n          actions: ['showError', 'provideRetryOption']\n        }\n      },\n      'log-viewer': {\n        idle: {\n          description: 'Log viewer is ready',\n          actions: ['initialize', 'setupLogSources']\n        },\n        loading: {\n          description: 'Loading log data',\n          actions: ['fetchLogs', 'parseLogs', 'showProgress']\n        },\n        viewing: {\n          description: 'Displaying logs for viewing',\n          actions: ['renderLogs', 'setupFilters', 'enableSearch']\n        },\n        filtering: {\n          description: 'Applying filters to logs',\n          actions: ['applyFilters', 'updateView', 'showFilterCount']\n        }\n      },\n      // Add missing machine states for the editor components\n      'app': {\n        idle: {\n          description: 'Application is ready for initialization',\n          actions: ['setup', 'prepare']\n        },\n        initializing: {\n          description: 'Application is initializing',\n          actions: ['loadConfig', 'setupMachines', 'prepareUI']\n        },\n        ready: {\n          description: 'Application is ready for use',\n          actions: ['enableNavigation', 'setupEventHandlers']\n        },\n        navigating: {\n          description: 'Application is navigating between routes',\n          actions: ['updateRoute', 'updateContext']\n        },\n        error: {\n          description: 'Application encountered an error',\n          actions: ['showError', 'provideRecovery']\n        }\n      },\n      'wave-tabs': {\n        idle: {\n          description: 'Wave tabs are ready',\n          actions: ['setup', 'prepare']\n        },\n        active: {\n          description: 'Wave tabs are active and navigable',\n          actions: ['enableNavigation', 'setupTabHandlers']\n        },\n        navigating: {\n          description: 'Wave tabs are navigating between tabs',\n          actions: ['updateActiveTab', 'updateHistory']\n        },\n        error: {\n          description: 'Wave tabs encountered an error',\n          actions: ['showError', 'provideRecovery']\n        }\n      },\n      'selector-input': {\n        idle: {\n          description: 'Selector input is ready',\n          actions: ['setup', 'prepare']\n        },\n        inputting: {\n          description: 'User is entering input',\n          actions: ['captureInput', 'validateFormat']\n        },\n        validating: {\n          description: 'Input is being validated',\n          actions: ['checkSyntax', 'verifyRules']\n        },\n        saving: {\n          description: 'Input is being saved',\n          actions: ['persistData', 'updateState']\n        },\n        error: {\n          description: 'Selector input encountered an error',\n          actions: ['showError', 'provideRecovery']\n        }\n      },\n      'about': {\n        idle: {\n          description: 'About component is ready',\n          actions: ['setup', 'prepare']\n        },\n        expanded: {\n          description: 'About information is expanded',\n          actions: ['showDetails', 'enableInteractions']\n        },\n        help: {\n          description: 'Help information is displayed',\n          actions: ['showHelp', 'enableNavigation']\n        },\n        error: {\n          description: 'About component encountered an error',\n          actions: ['showError', 'provideRecovery']\n        }\n      }\n    }\n  }\n};\n\n// Utility function to create a custom structural config\nexport function createStructuralConfig(\n  overrides: Partial<AppStructureConfig> = {}\n): AppStructureConfig {\n  return {\n    ...DefaultStructuralConfig,\n    ...overrides,\n    ComponentTomeMapping: {\n      ...DefaultStructuralConfig.ComponentTomeMapping,\n      ...overrides.ComponentTomeMapping\n    },\n    RoutingConfig: {\n      ...DefaultStructuralConfig.RoutingConfig,\n      ...overrides.RoutingConfig,\n      routes: [\n        ...(overrides.RoutingConfig?.routes || DefaultStructuralConfig.RoutingConfig.routes)\n      ],\n      navigation: {\n        ...DefaultStructuralConfig.RoutingConfig.navigation,\n        ...overrides.RoutingConfig?.navigation,\n        primary: [\n          ...(overrides.RoutingConfig?.navigation?.primary || DefaultStructuralConfig.RoutingConfig.navigation.primary)\n        ],\n        secondary: [\n          ...(overrides.RoutingConfig?.navigation?.secondary || DefaultStructuralConfig.RoutingConfig.navigation.secondary || [])\n        ]\n      }\n    },\n    TomeConfig: {\n      ...DefaultStructuralConfig.TomeConfig,\n      ...overrides.TomeConfig,\n      tomes: {\n        ...DefaultStructuralConfig.TomeConfig.tomes,\n        ...overrides.TomeConfig?.tomes\n      },\n      machineStates: {\n        ...DefaultStructuralConfig.TomeConfig.machineStates,\n        ...overrides.TomeConfig?.machineStates\n      }\n    }\n  };\n}\n\n// Export the default config\nexport default DefaultStructuralConfig;\n","import * as React from 'react';\nexport default function useConstant(fn) {\n    var ref = React.useRef();\n    if (!ref.current) {\n        ref.current = { v: fn() };\n    }\n    return ref.current.v;\n}\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { useEffect, useState } from 'react';\nimport useIsomorphicLayoutEffect from 'use-isomorphic-layout-effect';\nimport { interpret, InterpreterStatus, State, toObserver } from 'xstate';\nimport useConstant from './useConstant';\nexport function useIdleInterpreter(getMachine, options) {\n    var machine = useConstant(function () {\n        return typeof getMachine === 'function' ? getMachine() : getMachine;\n    });\n    if (process.env.NODE_ENV !== 'production' &&\n        typeof getMachine !== 'function') {\n        var _a = __read(useState(machine), 1), initialMachine = _a[0];\n        if (getMachine !== initialMachine) {\n            console.warn('Machine given to `useMachine` has changed between renders. This is not supported and might lead to unexpected results.\\n' +\n                'Please make sure that you pass the same Machine as argument each time.');\n        }\n    }\n    var context = options.context, guards = options.guards, actions = options.actions, activities = options.activities, services = options.services, delays = options.delays, rehydratedState = options.state, interpreterOptions = __rest(options, [\"context\", \"guards\", \"actions\", \"activities\", \"services\", \"delays\", \"state\"]);\n    var service = useConstant(function () {\n        var machineConfig = {\n            context: context,\n            guards: guards,\n            actions: actions,\n            activities: activities,\n            services: services,\n            delays: delays\n        };\n        var machineWithConfig = machine.withConfig(machineConfig, function () { return (__assign(__assign({}, machine.context), context)); });\n        return interpret(machineWithConfig, interpreterOptions);\n    });\n    // Make sure options are kept updated when they change.\n    // This mutation assignment is safe because the service instance is only used\n    // in one place -- this hook's caller.\n    useIsomorphicLayoutEffect(function () {\n        Object.assign(service.machine.options.actions, actions);\n        Object.assign(service.machine.options.guards, guards);\n        Object.assign(service.machine.options.activities, activities);\n        Object.assign(service.machine.options.services, services);\n        Object.assign(service.machine.options.delays, delays);\n    }, [actions, guards, activities, services, delays]);\n    return service;\n}\nexport function useInterpret(getMachine) {\n    var _a = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        _a[_i - 1] = arguments[_i];\n    }\n    var _b = __read(_a, 2), _c = _b[0], options = _c === void 0 ? {} : _c, observerOrListener = _b[1];\n    var service = useIdleInterpreter(getMachine, options);\n    useEffect(function () {\n        if (!observerOrListener) {\n            return;\n        }\n        var sub = service.subscribe(toObserver(observerOrListener));\n        return function () {\n            sub.unsubscribe();\n        };\n    }, [observerOrListener]);\n    useEffect(function () {\n        var rehydratedState = options.state;\n        service.start(rehydratedState ? State.create(rehydratedState) : undefined);\n        return function () {\n            service.stop();\n            service.status = InterpreterStatus.NotStarted;\n        };\n    }, []);\n    return service;\n}\n","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { useCallback, useEffect } from 'react';\nimport { useSyncExternalStoreWithSelector } from 'use-sync-external-store/shim/with-selector';\nimport { InterpreterStatus, State } from 'xstate';\nimport { useIdleInterpreter } from './useInterpret';\nimport { isInterpreterStateEqual } from './utils';\nfunction identity(a) {\n    return a;\n}\nexport function useMachine(getMachine) {\n    var _a = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        _a[_i - 1] = arguments[_i];\n    }\n    var _b = __read(_a, 1), _c = _b[0], options = _c === void 0 ? {} : _c;\n    // using `useIdleInterpreter` allows us to subscribe to the service *before* we start it\n    // so we don't miss any notifications\n    var service = useIdleInterpreter(getMachine, options);\n    var getSnapshot = useCallback(function () {\n        if (service.status === InterpreterStatus.NotStarted) {\n            return (options.state\n                ? State.create(options.state)\n                : service.machine.initialState);\n        }\n        return service.getSnapshot();\n    }, [service]);\n    var isEqual = useCallback(function (prevState, nextState) {\n        return isInterpreterStateEqual(service, prevState, nextState);\n    }, [service]);\n    var subscribe = useCallback(function (handleStoreChange) {\n        var unsubscribe = service.subscribe(handleStoreChange).unsubscribe;\n        return unsubscribe;\n    }, [service]);\n    var storeSnapshot = useSyncExternalStoreWithSelector(subscribe, getSnapshot, getSnapshot, identity, isEqual);\n    useEffect(function () {\n        var rehydratedState = options.state;\n        service.start(rehydratedState ? State.create(rehydratedState) : undefined);\n        return function () {\n            service.stop();\n            service.status = InterpreterStatus.NotStarted;\n        };\n    }, []);\n    return [storeSnapshot, service.send, service];\n}\n","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nimport { InterpreterStatus } from 'xstate';\nexport function partition(items, predicate) {\n    var e_1, _a;\n    var _b = __read([[], []], 2), truthy = _b[0], falsy = _b[1];\n    try {\n        for (var items_1 = __values(items), items_1_1 = items_1.next(); !items_1_1.done; items_1_1 = items_1.next()) {\n            var item = items_1_1.value;\n            if (predicate(item)) {\n                truthy.push(item);\n            }\n            else {\n                falsy.push(item);\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (items_1_1 && !items_1_1.done && (_a = items_1.return)) _a.call(items_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return [truthy, falsy];\n}\nexport function getServiceSnapshot(service) {\n    return service.status !== 0\n        ? service.getSnapshot()\n        : service.machine.initialState;\n}\n// From https://github.com/reduxjs/react-redux/blob/master/src/utils/shallowEqual.ts\nfunction is(x, y) {\n    if (x === y) {\n        return x !== 0 || y !== 0 || 1 / x === 1 / y;\n    }\n    else {\n        return x !== x && y !== y;\n    }\n}\nexport function shallowEqual(objA, objB) {\n    if (is(objA, objB))\n        return true;\n    if (typeof objA !== 'object' ||\n        objA === null ||\n        typeof objB !== 'object' ||\n        objB === null) {\n        return false;\n    }\n    var keysA = Object.keys(objA);\n    var keysB = Object.keys(objB);\n    if (keysA.length !== keysB.length)\n        return false;\n    for (var i = 0; i < keysA.length; i++) {\n        if (!Object.prototype.hasOwnProperty.call(objB, keysA[i]) ||\n            !is(objA[keysA[i]], objB[keysA[i]])) {\n            return false;\n        }\n    }\n    return true;\n}\nexport function isService(actor) {\n    return 'state' in actor && 'machine' in actor;\n}\nexport function isInterpreterStateEqual(service, prevState, nextState) {\n    if (service.status === InterpreterStatus.NotStarted) {\n        return true;\n    }\n    // Only change the current state if:\n    // - the incoming state is the \"live\" initial state (since it might have new actors)\n    // - OR the incoming state actually changed.\n    //\n    // The \"live\" initial state will have .changed === undefined.\n    var initialStateChanged = nextState.changed === undefined &&\n        (Object.keys(nextState.children).length > 0 ||\n            typeof prevState.changed === 'boolean');\n    return !(nextState.changed || initialStateChanged);\n}\n","/**\n * @license React\n * react.development.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nif (process.env.NODE_ENV !== \"production\") {\n  (function() {\n\n          'use strict';\n\n/* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */\nif (\n  typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ !== 'undefined' &&\n  typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart ===\n    'function'\n) {\n  __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error());\n}\n          var ReactVersion = '18.3.1';\n\n// ATTENTION\n// When adding new symbols to this file,\n// Please consider also adding to 'react-devtools-shared/src/backend/ReactSymbols'\n// The Symbol used to tag the ReactElement-like types.\nvar REACT_ELEMENT_TYPE = Symbol.for('react.element');\nvar REACT_PORTAL_TYPE = Symbol.for('react.portal');\nvar REACT_FRAGMENT_TYPE = Symbol.for('react.fragment');\nvar REACT_STRICT_MODE_TYPE = Symbol.for('react.strict_mode');\nvar REACT_PROFILER_TYPE = Symbol.for('react.profiler');\nvar REACT_PROVIDER_TYPE = Symbol.for('react.provider');\nvar REACT_CONTEXT_TYPE = Symbol.for('react.context');\nvar REACT_FORWARD_REF_TYPE = Symbol.for('react.forward_ref');\nvar REACT_SUSPENSE_TYPE = Symbol.for('react.suspense');\nvar REACT_SUSPENSE_LIST_TYPE = Symbol.for('react.suspense_list');\nvar REACT_MEMO_TYPE = Symbol.for('react.memo');\nvar REACT_LAZY_TYPE = Symbol.for('react.lazy');\nvar REACT_OFFSCREEN_TYPE = Symbol.for('react.offscreen');\nvar MAYBE_ITERATOR_SYMBOL = Symbol.iterator;\nvar FAUX_ITERATOR_SYMBOL = '@@iterator';\nfunction getIteratorFn(maybeIterable) {\n  if (maybeIterable === null || typeof maybeIterable !== 'object') {\n    return null;\n  }\n\n  var maybeIterator = MAYBE_ITERATOR_SYMBOL && maybeIterable[MAYBE_ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL];\n\n  if (typeof maybeIterator === 'function') {\n    return maybeIterator;\n  }\n\n  return null;\n}\n\n/**\n * Keeps track of the current dispatcher.\n */\nvar ReactCurrentDispatcher = {\n  /**\n   * @internal\n   * @type {ReactComponent}\n   */\n  current: null\n};\n\n/**\n * Keeps track of the current batch's configuration such as how long an update\n * should suspend for if it needs to.\n */\nvar ReactCurrentBatchConfig = {\n  transition: null\n};\n\nvar ReactCurrentActQueue = {\n  current: null,\n  // Used to reproduce behavior of `batchedUpdates` in legacy mode.\n  isBatchingLegacy: false,\n  didScheduleLegacyUpdate: false\n};\n\n/**\n * Keeps track of the current owner.\n *\n * The current owner is the component who should own any components that are\n * currently being constructed.\n */\nvar ReactCurrentOwner = {\n  /**\n   * @internal\n   * @type {ReactComponent}\n   */\n  current: null\n};\n\nvar ReactDebugCurrentFrame = {};\nvar currentExtraStackFrame = null;\nfunction setExtraStackFrame(stack) {\n  {\n    currentExtraStackFrame = stack;\n  }\n}\n\n{\n  ReactDebugCurrentFrame.setExtraStackFrame = function (stack) {\n    {\n      currentExtraStackFrame = stack;\n    }\n  }; // Stack implementation injected by the current renderer.\n\n\n  ReactDebugCurrentFrame.getCurrentStack = null;\n\n  ReactDebugCurrentFrame.getStackAddendum = function () {\n    var stack = ''; // Add an extra top frame while an element is being validated\n\n    if (currentExtraStackFrame) {\n      stack += currentExtraStackFrame;\n    } // Delegate to the injected renderer-specific implementation\n\n\n    var impl = ReactDebugCurrentFrame.getCurrentStack;\n\n    if (impl) {\n      stack += impl() || '';\n    }\n\n    return stack;\n  };\n}\n\n// -----------------------------------------------------------------------------\n\nvar enableScopeAPI = false; // Experimental Create Event Handle API.\nvar enableCacheElement = false;\nvar enableTransitionTracing = false; // No known bugs, but needs performance testing\n\nvar enableLegacyHidden = false; // Enables unstable_avoidThisFallback feature in Fiber\n// stuff. Intended to enable React core members to more easily debug scheduling\n// issues in DEV builds.\n\nvar enableDebugTracing = false; // Track which Fiber(s) schedule render work.\n\nvar ReactSharedInternals = {\n  ReactCurrentDispatcher: ReactCurrentDispatcher,\n  ReactCurrentBatchConfig: ReactCurrentBatchConfig,\n  ReactCurrentOwner: ReactCurrentOwner\n};\n\n{\n  ReactSharedInternals.ReactDebugCurrentFrame = ReactDebugCurrentFrame;\n  ReactSharedInternals.ReactCurrentActQueue = ReactCurrentActQueue;\n}\n\n// by calls to these methods by a Babel plugin.\n//\n// In PROD (or in packages without access to React internals),\n// they are left as they are instead.\n\nfunction warn(format) {\n  {\n    {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      printWarning('warn', format, args);\n    }\n  }\n}\nfunction error(format) {\n  {\n    {\n      for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        args[_key2 - 1] = arguments[_key2];\n      }\n\n      printWarning('error', format, args);\n    }\n  }\n}\n\nfunction printWarning(level, format, args) {\n  // When changing this logic, you might want to also\n  // update consoleWithStackDev.www.js as well.\n  {\n    var ReactDebugCurrentFrame = ReactSharedInternals.ReactDebugCurrentFrame;\n    var stack = ReactDebugCurrentFrame.getStackAddendum();\n\n    if (stack !== '') {\n      format += '%s';\n      args = args.concat([stack]);\n    } // eslint-disable-next-line react-internal/safe-string-coercion\n\n\n    var argsWithFormat = args.map(function (item) {\n      return String(item);\n    }); // Careful: RN currently depends on this prefix\n\n    argsWithFormat.unshift('Warning: ' + format); // We intentionally don't use spread (or .apply) directly because it\n    // breaks IE9: https://github.com/facebook/react/issues/13610\n    // eslint-disable-next-line react-internal/no-production-logging\n\n    Function.prototype.apply.call(console[level], console, argsWithFormat);\n  }\n}\n\nvar didWarnStateUpdateForUnmountedComponent = {};\n\nfunction warnNoop(publicInstance, callerName) {\n  {\n    var _constructor = publicInstance.constructor;\n    var componentName = _constructor && (_constructor.displayName || _constructor.name) || 'ReactClass';\n    var warningKey = componentName + \".\" + callerName;\n\n    if (didWarnStateUpdateForUnmountedComponent[warningKey]) {\n      return;\n    }\n\n    error(\"Can't call %s on a component that is not yet mounted. \" + 'This is a no-op, but it might indicate a bug in your application. ' + 'Instead, assign to `this.state` directly or define a `state = {};` ' + 'class property with the desired state in the %s component.', callerName, componentName);\n\n    didWarnStateUpdateForUnmountedComponent[warningKey] = true;\n  }\n}\n/**\n * This is the abstract API for an update queue.\n */\n\n\nvar ReactNoopUpdateQueue = {\n  /**\n   * Checks whether or not this composite component is mounted.\n   * @param {ReactClass} publicInstance The instance we want to test.\n   * @return {boolean} True if mounted, false otherwise.\n   * @protected\n   * @final\n   */\n  isMounted: function (publicInstance) {\n    return false;\n  },\n\n  /**\n   * Forces an update. This should only be invoked when it is known with\n   * certainty that we are **not** in a DOM transaction.\n   *\n   * You may want to call this when you know that some deeper aspect of the\n   * component's state has changed but `setState` was not called.\n   *\n   * This will not invoke `shouldComponentUpdate`, but it will invoke\n   * `componentWillUpdate` and `componentDidUpdate`.\n   *\n   * @param {ReactClass} publicInstance The instance that should rerender.\n   * @param {?function} callback Called after component is updated.\n   * @param {?string} callerName name of the calling function in the public API.\n   * @internal\n   */\n  enqueueForceUpdate: function (publicInstance, callback, callerName) {\n    warnNoop(publicInstance, 'forceUpdate');\n  },\n\n  /**\n   * Replaces all of the state. Always use this or `setState` to mutate state.\n   * You should treat `this.state` as immutable.\n   *\n   * There is no guarantee that `this.state` will be immediately updated, so\n   * accessing `this.state` after calling this method may return the old value.\n   *\n   * @param {ReactClass} publicInstance The instance that should rerender.\n   * @param {object} completeState Next state.\n   * @param {?function} callback Called after component is updated.\n   * @param {?string} callerName name of the calling function in the public API.\n   * @internal\n   */\n  enqueueReplaceState: function (publicInstance, completeState, callback, callerName) {\n    warnNoop(publicInstance, 'replaceState');\n  },\n\n  /**\n   * Sets a subset of the state. This only exists because _pendingState is\n   * internal. This provides a merging strategy that is not available to deep\n   * properties which is confusing. TODO: Expose pendingState or don't use it\n   * during the merge.\n   *\n   * @param {ReactClass} publicInstance The instance that should rerender.\n   * @param {object} partialState Next partial state to be merged with state.\n   * @param {?function} callback Called after component is updated.\n   * @param {?string} Name of the calling function in the public API.\n   * @internal\n   */\n  enqueueSetState: function (publicInstance, partialState, callback, callerName) {\n    warnNoop(publicInstance, 'setState');\n  }\n};\n\nvar assign = Object.assign;\n\nvar emptyObject = {};\n\n{\n  Object.freeze(emptyObject);\n}\n/**\n * Base class helpers for the updating state of a component.\n */\n\n\nfunction Component(props, context, updater) {\n  this.props = props;\n  this.context = context; // If a component has string refs, we will assign a different object later.\n\n  this.refs = emptyObject; // We initialize the default updater but the real one gets injected by the\n  // renderer.\n\n  this.updater = updater || ReactNoopUpdateQueue;\n}\n\nComponent.prototype.isReactComponent = {};\n/**\n * Sets a subset of the state. Always use this to mutate\n * state. You should treat `this.state` as immutable.\n *\n * There is no guarantee that `this.state` will be immediately updated, so\n * accessing `this.state` after calling this method may return the old value.\n *\n * There is no guarantee that calls to `setState` will run synchronously,\n * as they may eventually be batched together.  You can provide an optional\n * callback that will be executed when the call to setState is actually\n * completed.\n *\n * When a function is provided to setState, it will be called at some point in\n * the future (not synchronously). It will be called with the up to date\n * component arguments (state, props, context). These values can be different\n * from this.* because your function may be called after receiveProps but before\n * shouldComponentUpdate, and this new state, props, and context will not yet be\n * assigned to this.\n *\n * @param {object|function} partialState Next partial state or function to\n *        produce next partial state to be merged with current state.\n * @param {?function} callback Called after state is updated.\n * @final\n * @protected\n */\n\nComponent.prototype.setState = function (partialState, callback) {\n  if (typeof partialState !== 'object' && typeof partialState !== 'function' && partialState != null) {\n    throw new Error('setState(...): takes an object of state variables to update or a ' + 'function which returns an object of state variables.');\n  }\n\n  this.updater.enqueueSetState(this, partialState, callback, 'setState');\n};\n/**\n * Forces an update. This should only be invoked when it is known with\n * certainty that we are **not** in a DOM transaction.\n *\n * You may want to call this when you know that some deeper aspect of the\n * component's state has changed but `setState` was not called.\n *\n * This will not invoke `shouldComponentUpdate`, but it will invoke\n * `componentWillUpdate` and `componentDidUpdate`.\n *\n * @param {?function} callback Called after update is complete.\n * @final\n * @protected\n */\n\n\nComponent.prototype.forceUpdate = function (callback) {\n  this.updater.enqueueForceUpdate(this, callback, 'forceUpdate');\n};\n/**\n * Deprecated APIs. These APIs used to exist on classic React classes but since\n * we would like to deprecate them, we're not going to move them over to this\n * modern base class. Instead, we define a getter that warns if it's accessed.\n */\n\n\n{\n  var deprecatedAPIs = {\n    isMounted: ['isMounted', 'Instead, make sure to clean up subscriptions and pending requests in ' + 'componentWillUnmount to prevent memory leaks.'],\n    replaceState: ['replaceState', 'Refactor your code to use setState instead (see ' + 'https://github.com/facebook/react/issues/3236).']\n  };\n\n  var defineDeprecationWarning = function (methodName, info) {\n    Object.defineProperty(Component.prototype, methodName, {\n      get: function () {\n        warn('%s(...) is deprecated in plain JavaScript React classes. %s', info[0], info[1]);\n\n        return undefined;\n      }\n    });\n  };\n\n  for (var fnName in deprecatedAPIs) {\n    if (deprecatedAPIs.hasOwnProperty(fnName)) {\n      defineDeprecationWarning(fnName, deprecatedAPIs[fnName]);\n    }\n  }\n}\n\nfunction ComponentDummy() {}\n\nComponentDummy.prototype = Component.prototype;\n/**\n * Convenience component with default shallow equality check for sCU.\n */\n\nfunction PureComponent(props, context, updater) {\n  this.props = props;\n  this.context = context; // If a component has string refs, we will assign a different object later.\n\n  this.refs = emptyObject;\n  this.updater = updater || ReactNoopUpdateQueue;\n}\n\nvar pureComponentPrototype = PureComponent.prototype = new ComponentDummy();\npureComponentPrototype.constructor = PureComponent; // Avoid an extra prototype jump for these methods.\n\nassign(pureComponentPrototype, Component.prototype);\npureComponentPrototype.isPureReactComponent = true;\n\n// an immutable object with a single mutable value\nfunction createRef() {\n  var refObject = {\n    current: null\n  };\n\n  {\n    Object.seal(refObject);\n  }\n\n  return refObject;\n}\n\nvar isArrayImpl = Array.isArray; // eslint-disable-next-line no-redeclare\n\nfunction isArray(a) {\n  return isArrayImpl(a);\n}\n\n/*\n * The `'' + value` pattern (used in in perf-sensitive code) throws for Symbol\n * and Temporal.* types. See https://github.com/facebook/react/pull/22064.\n *\n * The functions in this module will throw an easier-to-understand,\n * easier-to-debug exception with a clear errors message message explaining the\n * problem. (Instead of a confusing exception thrown inside the implementation\n * of the `value` object).\n */\n// $FlowFixMe only called in DEV, so void return is not possible.\nfunction typeName(value) {\n  {\n    // toStringTag is needed for namespaced types like Temporal.Instant\n    var hasToStringTag = typeof Symbol === 'function' && Symbol.toStringTag;\n    var type = hasToStringTag && value[Symbol.toStringTag] || value.constructor.name || 'Object';\n    return type;\n  }\n} // $FlowFixMe only called in DEV, so void return is not possible.\n\n\nfunction willCoercionThrow(value) {\n  {\n    try {\n      testStringCoercion(value);\n      return false;\n    } catch (e) {\n      return true;\n    }\n  }\n}\n\nfunction testStringCoercion(value) {\n  // If you ended up here by following an exception call stack, here's what's\n  // happened: you supplied an object or symbol value to React (as a prop, key,\n  // DOM attribute, CSS property, string ref, etc.) and when React tried to\n  // coerce it to a string using `'' + value`, an exception was thrown.\n  //\n  // The most common types that will cause this exception are `Symbol` instances\n  // and Temporal objects like `Temporal.Instant`. But any object that has a\n  // `valueOf` or `[Symbol.toPrimitive]` method that throws will also cause this\n  // exception. (Library authors do this to prevent users from using built-in\n  // numeric operators like `+` or comparison operators like `>=` because custom\n  // methods are needed to perform accurate arithmetic or comparison.)\n  //\n  // To fix the problem, coerce this object or symbol value to a string before\n  // passing it to React. The most reliable way is usually `String(value)`.\n  //\n  // To find which value is throwing, check the browser or debugger console.\n  // Before this exception was thrown, there should be `console.error` output\n  // that shows the type (Symbol, Temporal.PlainDate, etc.) that caused the\n  // problem and how that type was used: key, atrribute, input value prop, etc.\n  // In most cases, this console output also shows the component and its\n  // ancestor components where the exception happened.\n  //\n  // eslint-disable-next-line react-internal/safe-string-coercion\n  return '' + value;\n}\nfunction checkKeyStringCoercion(value) {\n  {\n    if (willCoercionThrow(value)) {\n      error('The provided key is an unsupported type %s.' + ' This value must be coerced to a string before before using it here.', typeName(value));\n\n      return testStringCoercion(value); // throw (to help callers find troubleshooting comments)\n    }\n  }\n}\n\nfunction getWrappedName(outerType, innerType, wrapperName) {\n  var displayName = outerType.displayName;\n\n  if (displayName) {\n    return displayName;\n  }\n\n  var functionName = innerType.displayName || innerType.name || '';\n  return functionName !== '' ? wrapperName + \"(\" + functionName + \")\" : wrapperName;\n} // Keep in sync with react-reconciler/getComponentNameFromFiber\n\n\nfunction getContextName(type) {\n  return type.displayName || 'Context';\n} // Note that the reconciler package should generally prefer to use getComponentNameFromFiber() instead.\n\n\nfunction getComponentNameFromType(type) {\n  if (type == null) {\n    // Host root, text node or just invalid type.\n    return null;\n  }\n\n  {\n    if (typeof type.tag === 'number') {\n      error('Received an unexpected object in getComponentNameFromType(). ' + 'This is likely a bug in React. Please file an issue.');\n    }\n  }\n\n  if (typeof type === 'function') {\n    return type.displayName || type.name || null;\n  }\n\n  if (typeof type === 'string') {\n    return type;\n  }\n\n  switch (type) {\n    case REACT_FRAGMENT_TYPE:\n      return 'Fragment';\n\n    case REACT_PORTAL_TYPE:\n      return 'Portal';\n\n    case REACT_PROFILER_TYPE:\n      return 'Profiler';\n\n    case REACT_STRICT_MODE_TYPE:\n      return 'StrictMode';\n\n    case REACT_SUSPENSE_TYPE:\n      return 'Suspense';\n\n    case REACT_SUSPENSE_LIST_TYPE:\n      return 'SuspenseList';\n\n  }\n\n  if (typeof type === 'object') {\n    switch (type.$$typeof) {\n      case REACT_CONTEXT_TYPE:\n        var context = type;\n        return getContextName(context) + '.Consumer';\n\n      case REACT_PROVIDER_TYPE:\n        var provider = type;\n        return getContextName(provider._context) + '.Provider';\n\n      case REACT_FORWARD_REF_TYPE:\n        return getWrappedName(type, type.render, 'ForwardRef');\n\n      case REACT_MEMO_TYPE:\n        var outerName = type.displayName || null;\n\n        if (outerName !== null) {\n          return outerName;\n        }\n\n        return getComponentNameFromType(type.type) || 'Memo';\n\n      case REACT_LAZY_TYPE:\n        {\n          var lazyComponent = type;\n          var payload = lazyComponent._payload;\n          var init = lazyComponent._init;\n\n          try {\n            return getComponentNameFromType(init(payload));\n          } catch (x) {\n            return null;\n          }\n        }\n\n      // eslint-disable-next-line no-fallthrough\n    }\n  }\n\n  return null;\n}\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nvar RESERVED_PROPS = {\n  key: true,\n  ref: true,\n  __self: true,\n  __source: true\n};\nvar specialPropKeyWarningShown, specialPropRefWarningShown, didWarnAboutStringRefs;\n\n{\n  didWarnAboutStringRefs = {};\n}\n\nfunction hasValidRef(config) {\n  {\n    if (hasOwnProperty.call(config, 'ref')) {\n      var getter = Object.getOwnPropertyDescriptor(config, 'ref').get;\n\n      if (getter && getter.isReactWarning) {\n        return false;\n      }\n    }\n  }\n\n  return config.ref !== undefined;\n}\n\nfunction hasValidKey(config) {\n  {\n    if (hasOwnProperty.call(config, 'key')) {\n      var getter = Object.getOwnPropertyDescriptor(config, 'key').get;\n\n      if (getter && getter.isReactWarning) {\n        return false;\n      }\n    }\n  }\n\n  return config.key !== undefined;\n}\n\nfunction defineKeyPropWarningGetter(props, displayName) {\n  var warnAboutAccessingKey = function () {\n    {\n      if (!specialPropKeyWarningShown) {\n        specialPropKeyWarningShown = true;\n\n        error('%s: `key` is not a prop. Trying to access it will result ' + 'in `undefined` being returned. If you need to access the same ' + 'value within the child component, you should pass it as a different ' + 'prop. (https://reactjs.org/link/special-props)', displayName);\n      }\n    }\n  };\n\n  warnAboutAccessingKey.isReactWarning = true;\n  Object.defineProperty(props, 'key', {\n    get: warnAboutAccessingKey,\n    configurable: true\n  });\n}\n\nfunction defineRefPropWarningGetter(props, displayName) {\n  var warnAboutAccessingRef = function () {\n    {\n      if (!specialPropRefWarningShown) {\n        specialPropRefWarningShown = true;\n\n        error('%s: `ref` is not a prop. Trying to access it will result ' + 'in `undefined` being returned. If you need to access the same ' + 'value within the child component, you should pass it as a different ' + 'prop. (https://reactjs.org/link/special-props)', displayName);\n      }\n    }\n  };\n\n  warnAboutAccessingRef.isReactWarning = true;\n  Object.defineProperty(props, 'ref', {\n    get: warnAboutAccessingRef,\n    configurable: true\n  });\n}\n\nfunction warnIfStringRefCannotBeAutoConverted(config) {\n  {\n    if (typeof config.ref === 'string' && ReactCurrentOwner.current && config.__self && ReactCurrentOwner.current.stateNode !== config.__self) {\n      var componentName = getComponentNameFromType(ReactCurrentOwner.current.type);\n\n      if (!didWarnAboutStringRefs[componentName]) {\n        error('Component \"%s\" contains the string ref \"%s\". ' + 'Support for string refs will be removed in a future major release. ' + 'This case cannot be automatically converted to an arrow function. ' + 'We ask you to manually fix this case by using useRef() or createRef() instead. ' + 'Learn more about using refs safely here: ' + 'https://reactjs.org/link/strict-mode-string-ref', componentName, config.ref);\n\n        didWarnAboutStringRefs[componentName] = true;\n      }\n    }\n  }\n}\n/**\n * Factory method to create a new React element. This no longer adheres to\n * the class pattern, so do not use new to call it. Also, instanceof check\n * will not work. Instead test $$typeof field against Symbol.for('react.element') to check\n * if something is a React Element.\n *\n * @param {*} type\n * @param {*} props\n * @param {*} key\n * @param {string|object} ref\n * @param {*} owner\n * @param {*} self A *temporary* helper to detect places where `this` is\n * different from the `owner` when React.createElement is called, so that we\n * can warn. We want to get rid of owner and replace string `ref`s with arrow\n * functions, and as long as `this` and owner are the same, there will be no\n * change in behavior.\n * @param {*} source An annotation object (added by a transpiler or otherwise)\n * indicating filename, line number, and/or other information.\n * @internal\n */\n\n\nvar ReactElement = function (type, key, ref, self, source, owner, props) {\n  var element = {\n    // This tag allows us to uniquely identify this as a React Element\n    $$typeof: REACT_ELEMENT_TYPE,\n    // Built-in properties that belong on the element\n    type: type,\n    key: key,\n    ref: ref,\n    props: props,\n    // Record the component responsible for creating this element.\n    _owner: owner\n  };\n\n  {\n    // The validation flag is currently mutative. We put it on\n    // an external backing store so that we can freeze the whole object.\n    // This can be replaced with a WeakMap once they are implemented in\n    // commonly used development environments.\n    element._store = {}; // To make comparing ReactElements easier for testing purposes, we make\n    // the validation flag non-enumerable (where possible, which should\n    // include every environment we run tests in), so the test framework\n    // ignores it.\n\n    Object.defineProperty(element._store, 'validated', {\n      configurable: false,\n      enumerable: false,\n      writable: true,\n      value: false\n    }); // self and source are DEV only properties.\n\n    Object.defineProperty(element, '_self', {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: self\n    }); // Two elements created in two different places should be considered\n    // equal for testing purposes and therefore we hide it from enumeration.\n\n    Object.defineProperty(element, '_source', {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: source\n    });\n\n    if (Object.freeze) {\n      Object.freeze(element.props);\n      Object.freeze(element);\n    }\n  }\n\n  return element;\n};\n/**\n * Create and return a new ReactElement of the given type.\n * See https://reactjs.org/docs/react-api.html#createelement\n */\n\nfunction createElement(type, config, children) {\n  var propName; // Reserved names are extracted\n\n  var props = {};\n  var key = null;\n  var ref = null;\n  var self = null;\n  var source = null;\n\n  if (config != null) {\n    if (hasValidRef(config)) {\n      ref = config.ref;\n\n      {\n        warnIfStringRefCannotBeAutoConverted(config);\n      }\n    }\n\n    if (hasValidKey(config)) {\n      {\n        checkKeyStringCoercion(config.key);\n      }\n\n      key = '' + config.key;\n    }\n\n    self = config.__self === undefined ? null : config.__self;\n    source = config.__source === undefined ? null : config.__source; // Remaining properties are added to a new props object\n\n    for (propName in config) {\n      if (hasOwnProperty.call(config, propName) && !RESERVED_PROPS.hasOwnProperty(propName)) {\n        props[propName] = config[propName];\n      }\n    }\n  } // Children can be more than one argument, and those are transferred onto\n  // the newly allocated props object.\n\n\n  var childrenLength = arguments.length - 2;\n\n  if (childrenLength === 1) {\n    props.children = children;\n  } else if (childrenLength > 1) {\n    var childArray = Array(childrenLength);\n\n    for (var i = 0; i < childrenLength; i++) {\n      childArray[i] = arguments[i + 2];\n    }\n\n    {\n      if (Object.freeze) {\n        Object.freeze(childArray);\n      }\n    }\n\n    props.children = childArray;\n  } // Resolve default props\n\n\n  if (type && type.defaultProps) {\n    var defaultProps = type.defaultProps;\n\n    for (propName in defaultProps) {\n      if (props[propName] === undefined) {\n        props[propName] = defaultProps[propName];\n      }\n    }\n  }\n\n  {\n    if (key || ref) {\n      var displayName = typeof type === 'function' ? type.displayName || type.name || 'Unknown' : type;\n\n      if (key) {\n        defineKeyPropWarningGetter(props, displayName);\n      }\n\n      if (ref) {\n        defineRefPropWarningGetter(props, displayName);\n      }\n    }\n  }\n\n  return ReactElement(type, key, ref, self, source, ReactCurrentOwner.current, props);\n}\nfunction cloneAndReplaceKey(oldElement, newKey) {\n  var newElement = ReactElement(oldElement.type, newKey, oldElement.ref, oldElement._self, oldElement._source, oldElement._owner, oldElement.props);\n  return newElement;\n}\n/**\n * Clone and return a new ReactElement using element as the starting point.\n * See https://reactjs.org/docs/react-api.html#cloneelement\n */\n\nfunction cloneElement(element, config, children) {\n  if (element === null || element === undefined) {\n    throw new Error(\"React.cloneElement(...): The argument must be a React element, but you passed \" + element + \".\");\n  }\n\n  var propName; // Original props are copied\n\n  var props = assign({}, element.props); // Reserved names are extracted\n\n  var key = element.key;\n  var ref = element.ref; // Self is preserved since the owner is preserved.\n\n  var self = element._self; // Source is preserved since cloneElement is unlikely to be targeted by a\n  // transpiler, and the original source is probably a better indicator of the\n  // true owner.\n\n  var source = element._source; // Owner will be preserved, unless ref is overridden\n\n  var owner = element._owner;\n\n  if (config != null) {\n    if (hasValidRef(config)) {\n      // Silently steal the ref from the parent.\n      ref = config.ref;\n      owner = ReactCurrentOwner.current;\n    }\n\n    if (hasValidKey(config)) {\n      {\n        checkKeyStringCoercion(config.key);\n      }\n\n      key = '' + config.key;\n    } // Remaining properties override existing props\n\n\n    var defaultProps;\n\n    if (element.type && element.type.defaultProps) {\n      defaultProps = element.type.defaultProps;\n    }\n\n    for (propName in config) {\n      if (hasOwnProperty.call(config, propName) && !RESERVED_PROPS.hasOwnProperty(propName)) {\n        if (config[propName] === undefined && defaultProps !== undefined) {\n          // Resolve default props\n          props[propName] = defaultProps[propName];\n        } else {\n          props[propName] = config[propName];\n        }\n      }\n    }\n  } // Children can be more than one argument, and those are transferred onto\n  // the newly allocated props object.\n\n\n  var childrenLength = arguments.length - 2;\n\n  if (childrenLength === 1) {\n    props.children = children;\n  } else if (childrenLength > 1) {\n    var childArray = Array(childrenLength);\n\n    for (var i = 0; i < childrenLength; i++) {\n      childArray[i] = arguments[i + 2];\n    }\n\n    props.children = childArray;\n  }\n\n  return ReactElement(element.type, key, ref, self, source, owner, props);\n}\n/**\n * Verifies the object is a ReactElement.\n * See https://reactjs.org/docs/react-api.html#isvalidelement\n * @param {?object} object\n * @return {boolean} True if `object` is a ReactElement.\n * @final\n */\n\nfunction isValidElement(object) {\n  return typeof object === 'object' && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;\n}\n\nvar SEPARATOR = '.';\nvar SUBSEPARATOR = ':';\n/**\n * Escape and wrap key so it is safe to use as a reactid\n *\n * @param {string} key to be escaped.\n * @return {string} the escaped key.\n */\n\nfunction escape(key) {\n  var escapeRegex = /[=:]/g;\n  var escaperLookup = {\n    '=': '=0',\n    ':': '=2'\n  };\n  var escapedString = key.replace(escapeRegex, function (match) {\n    return escaperLookup[match];\n  });\n  return '$' + escapedString;\n}\n/**\n * TODO: Test that a single child and an array with one item have the same key\n * pattern.\n */\n\n\nvar didWarnAboutMaps = false;\nvar userProvidedKeyEscapeRegex = /\\/+/g;\n\nfunction escapeUserProvidedKey(text) {\n  return text.replace(userProvidedKeyEscapeRegex, '$&/');\n}\n/**\n * Generate a key string that identifies a element within a set.\n *\n * @param {*} element A element that could contain a manual key.\n * @param {number} index Index that is used if a manual key is not provided.\n * @return {string}\n */\n\n\nfunction getElementKey(element, index) {\n  // Do some typechecking here since we call this blindly. We want to ensure\n  // that we don't block potential future ES APIs.\n  if (typeof element === 'object' && element !== null && element.key != null) {\n    // Explicit key\n    {\n      checkKeyStringCoercion(element.key);\n    }\n\n    return escape('' + element.key);\n  } // Implicit key determined by the index in the set\n\n\n  return index.toString(36);\n}\n\nfunction mapIntoArray(children, array, escapedPrefix, nameSoFar, callback) {\n  var type = typeof children;\n\n  if (type === 'undefined' || type === 'boolean') {\n    // All of the above are perceived as null.\n    children = null;\n  }\n\n  var invokeCallback = false;\n\n  if (children === null) {\n    invokeCallback = true;\n  } else {\n    switch (type) {\n      case 'string':\n      case 'number':\n        invokeCallback = true;\n        break;\n\n      case 'object':\n        switch (children.$$typeof) {\n          case REACT_ELEMENT_TYPE:\n          case REACT_PORTAL_TYPE:\n            invokeCallback = true;\n        }\n\n    }\n  }\n\n  if (invokeCallback) {\n    var _child = children;\n    var mappedChild = callback(_child); // If it's the only child, treat the name as if it was wrapped in an array\n    // so that it's consistent if the number of children grows:\n\n    var childKey = nameSoFar === '' ? SEPARATOR + getElementKey(_child, 0) : nameSoFar;\n\n    if (isArray(mappedChild)) {\n      var escapedChildKey = '';\n\n      if (childKey != null) {\n        escapedChildKey = escapeUserProvidedKey(childKey) + '/';\n      }\n\n      mapIntoArray(mappedChild, array, escapedChildKey, '', function (c) {\n        return c;\n      });\n    } else if (mappedChild != null) {\n      if (isValidElement(mappedChild)) {\n        {\n          // The `if` statement here prevents auto-disabling of the safe\n          // coercion ESLint rule, so we must manually disable it below.\n          // $FlowFixMe Flow incorrectly thinks React.Portal doesn't have a key\n          if (mappedChild.key && (!_child || _child.key !== mappedChild.key)) {\n            checkKeyStringCoercion(mappedChild.key);\n          }\n        }\n\n        mappedChild = cloneAndReplaceKey(mappedChild, // Keep both the (mapped) and old keys if they differ, just as\n        // traverseAllChildren used to do for objects as children\n        escapedPrefix + ( // $FlowFixMe Flow incorrectly thinks React.Portal doesn't have a key\n        mappedChild.key && (!_child || _child.key !== mappedChild.key) ? // $FlowFixMe Flow incorrectly thinks existing element's key can be a number\n        // eslint-disable-next-line react-internal/safe-string-coercion\n        escapeUserProvidedKey('' + mappedChild.key) + '/' : '') + childKey);\n      }\n\n      array.push(mappedChild);\n    }\n\n    return 1;\n  }\n\n  var child;\n  var nextName;\n  var subtreeCount = 0; // Count of children found in the current subtree.\n\n  var nextNamePrefix = nameSoFar === '' ? SEPARATOR : nameSoFar + SUBSEPARATOR;\n\n  if (isArray(children)) {\n    for (var i = 0; i < children.length; i++) {\n      child = children[i];\n      nextName = nextNamePrefix + getElementKey(child, i);\n      subtreeCount += mapIntoArray(child, array, escapedPrefix, nextName, callback);\n    }\n  } else {\n    var iteratorFn = getIteratorFn(children);\n\n    if (typeof iteratorFn === 'function') {\n      var iterableChildren = children;\n\n      {\n        // Warn about using Maps as children\n        if (iteratorFn === iterableChildren.entries) {\n          if (!didWarnAboutMaps) {\n            warn('Using Maps as children is not supported. ' + 'Use an array of keyed ReactElements instead.');\n          }\n\n          didWarnAboutMaps = true;\n        }\n      }\n\n      var iterator = iteratorFn.call(iterableChildren);\n      var step;\n      var ii = 0;\n\n      while (!(step = iterator.next()).done) {\n        child = step.value;\n        nextName = nextNamePrefix + getElementKey(child, ii++);\n        subtreeCount += mapIntoArray(child, array, escapedPrefix, nextName, callback);\n      }\n    } else if (type === 'object') {\n      // eslint-disable-next-line react-internal/safe-string-coercion\n      var childrenString = String(children);\n      throw new Error(\"Objects are not valid as a React child (found: \" + (childrenString === '[object Object]' ? 'object with keys {' + Object.keys(children).join(', ') + '}' : childrenString) + \"). \" + 'If you meant to render a collection of children, use an array ' + 'instead.');\n    }\n  }\n\n  return subtreeCount;\n}\n\n/**\n * Maps children that are typically specified as `props.children`.\n *\n * See https://reactjs.org/docs/react-api.html#reactchildrenmap\n *\n * The provided mapFunction(child, index) will be called for each\n * leaf child.\n *\n * @param {?*} children Children tree container.\n * @param {function(*, int)} func The map function.\n * @param {*} context Context for mapFunction.\n * @return {object} Object containing the ordered map of results.\n */\nfunction mapChildren(children, func, context) {\n  if (children == null) {\n    return children;\n  }\n\n  var result = [];\n  var count = 0;\n  mapIntoArray(children, result, '', '', function (child) {\n    return func.call(context, child, count++);\n  });\n  return result;\n}\n/**\n * Count the number of children that are typically specified as\n * `props.children`.\n *\n * See https://reactjs.org/docs/react-api.html#reactchildrencount\n *\n * @param {?*} children Children tree container.\n * @return {number} The number of children.\n */\n\n\nfunction countChildren(children) {\n  var n = 0;\n  mapChildren(children, function () {\n    n++; // Don't return anything\n  });\n  return n;\n}\n\n/**\n * Iterates through children that are typically specified as `props.children`.\n *\n * See https://reactjs.org/docs/react-api.html#reactchildrenforeach\n *\n * The provided forEachFunc(child, index) will be called for each\n * leaf child.\n *\n * @param {?*} children Children tree container.\n * @param {function(*, int)} forEachFunc\n * @param {*} forEachContext Context for forEachContext.\n */\nfunction forEachChildren(children, forEachFunc, forEachContext) {\n  mapChildren(children, function () {\n    forEachFunc.apply(this, arguments); // Don't return anything.\n  }, forEachContext);\n}\n/**\n * Flatten a children object (typically specified as `props.children`) and\n * return an array with appropriately re-keyed children.\n *\n * See https://reactjs.org/docs/react-api.html#reactchildrentoarray\n */\n\n\nfunction toArray(children) {\n  return mapChildren(children, function (child) {\n    return child;\n  }) || [];\n}\n/**\n * Returns the first child in a collection of children and verifies that there\n * is only one child in the collection.\n *\n * See https://reactjs.org/docs/react-api.html#reactchildrenonly\n *\n * The current implementation of this function assumes that a single child gets\n * passed without a wrapper, but the purpose of this helper function is to\n * abstract away the particular structure of children.\n *\n * @param {?object} children Child collection structure.\n * @return {ReactElement} The first and only `ReactElement` contained in the\n * structure.\n */\n\n\nfunction onlyChild(children) {\n  if (!isValidElement(children)) {\n    throw new Error('React.Children.only expected to receive a single React element child.');\n  }\n\n  return children;\n}\n\nfunction createContext(defaultValue) {\n  // TODO: Second argument used to be an optional `calculateChangedBits`\n  // function. Warn to reserve for future use?\n  var context = {\n    $$typeof: REACT_CONTEXT_TYPE,\n    // As a workaround to support multiple concurrent renderers, we categorize\n    // some renderers as primary and others as secondary. We only expect\n    // there to be two concurrent renderers at most: React Native (primary) and\n    // Fabric (secondary); React DOM (primary) and React ART (secondary).\n    // Secondary renderers store their context values on separate fields.\n    _currentValue: defaultValue,\n    _currentValue2: defaultValue,\n    // Used to track how many concurrent renderers this context currently\n    // supports within in a single renderer. Such as parallel server rendering.\n    _threadCount: 0,\n    // These are circular\n    Provider: null,\n    Consumer: null,\n    // Add these to use same hidden class in VM as ServerContext\n    _defaultValue: null,\n    _globalName: null\n  };\n  context.Provider = {\n    $$typeof: REACT_PROVIDER_TYPE,\n    _context: context\n  };\n  var hasWarnedAboutUsingNestedContextConsumers = false;\n  var hasWarnedAboutUsingConsumerProvider = false;\n  var hasWarnedAboutDisplayNameOnConsumer = false;\n\n  {\n    // A separate object, but proxies back to the original context object for\n    // backwards compatibility. It has a different $$typeof, so we can properly\n    // warn for the incorrect usage of Context as a Consumer.\n    var Consumer = {\n      $$typeof: REACT_CONTEXT_TYPE,\n      _context: context\n    }; // $FlowFixMe: Flow complains about not setting a value, which is intentional here\n\n    Object.defineProperties(Consumer, {\n      Provider: {\n        get: function () {\n          if (!hasWarnedAboutUsingConsumerProvider) {\n            hasWarnedAboutUsingConsumerProvider = true;\n\n            error('Rendering <Context.Consumer.Provider> is not supported and will be removed in ' + 'a future major release. Did you mean to render <Context.Provider> instead?');\n          }\n\n          return context.Provider;\n        },\n        set: function (_Provider) {\n          context.Provider = _Provider;\n        }\n      },\n      _currentValue: {\n        get: function () {\n          return context._currentValue;\n        },\n        set: function (_currentValue) {\n          context._currentValue = _currentValue;\n        }\n      },\n      _currentValue2: {\n        get: function () {\n          return context._currentValue2;\n        },\n        set: function (_currentValue2) {\n          context._currentValue2 = _currentValue2;\n        }\n      },\n      _threadCount: {\n        get: function () {\n          return context._threadCount;\n        },\n        set: function (_threadCount) {\n          context._threadCount = _threadCount;\n        }\n      },\n      Consumer: {\n        get: function () {\n          if (!hasWarnedAboutUsingNestedContextConsumers) {\n            hasWarnedAboutUsingNestedContextConsumers = true;\n\n            error('Rendering <Context.Consumer.Consumer> is not supported and will be removed in ' + 'a future major release. Did you mean to render <Context.Consumer> instead?');\n          }\n\n          return context.Consumer;\n        }\n      },\n      displayName: {\n        get: function () {\n          return context.displayName;\n        },\n        set: function (displayName) {\n          if (!hasWarnedAboutDisplayNameOnConsumer) {\n            warn('Setting `displayName` on Context.Consumer has no effect. ' + \"You should set it directly on the context with Context.displayName = '%s'.\", displayName);\n\n            hasWarnedAboutDisplayNameOnConsumer = true;\n          }\n        }\n      }\n    }); // $FlowFixMe: Flow complains about missing properties because it doesn't understand defineProperty\n\n    context.Consumer = Consumer;\n  }\n\n  {\n    context._currentRenderer = null;\n    context._currentRenderer2 = null;\n  }\n\n  return context;\n}\n\nvar Uninitialized = -1;\nvar Pending = 0;\nvar Resolved = 1;\nvar Rejected = 2;\n\nfunction lazyInitializer(payload) {\n  if (payload._status === Uninitialized) {\n    var ctor = payload._result;\n    var thenable = ctor(); // Transition to the next state.\n    // This might throw either because it's missing or throws. If so, we treat it\n    // as still uninitialized and try again next time. Which is the same as what\n    // happens if the ctor or any wrappers processing the ctor throws. This might\n    // end up fixing it if the resolution was a concurrency bug.\n\n    thenable.then(function (moduleObject) {\n      if (payload._status === Pending || payload._status === Uninitialized) {\n        // Transition to the next state.\n        var resolved = payload;\n        resolved._status = Resolved;\n        resolved._result = moduleObject;\n      }\n    }, function (error) {\n      if (payload._status === Pending || payload._status === Uninitialized) {\n        // Transition to the next state.\n        var rejected = payload;\n        rejected._status = Rejected;\n        rejected._result = error;\n      }\n    });\n\n    if (payload._status === Uninitialized) {\n      // In case, we're still uninitialized, then we're waiting for the thenable\n      // to resolve. Set it as pending in the meantime.\n      var pending = payload;\n      pending._status = Pending;\n      pending._result = thenable;\n    }\n  }\n\n  if (payload._status === Resolved) {\n    var moduleObject = payload._result;\n\n    {\n      if (moduleObject === undefined) {\n        error('lazy: Expected the result of a dynamic imp' + 'ort() call. ' + 'Instead received: %s\\n\\nYour code should look like: \\n  ' + // Break up imports to avoid accidentally parsing them as dependencies.\n        'const MyComponent = lazy(() => imp' + \"ort('./MyComponent'))\\n\\n\" + 'Did you accidentally put curly braces around the import?', moduleObject);\n      }\n    }\n\n    {\n      if (!('default' in moduleObject)) {\n        error('lazy: Expected the result of a dynamic imp' + 'ort() call. ' + 'Instead received: %s\\n\\nYour code should look like: \\n  ' + // Break up imports to avoid accidentally parsing them as dependencies.\n        'const MyComponent = lazy(() => imp' + \"ort('./MyComponent'))\", moduleObject);\n      }\n    }\n\n    return moduleObject.default;\n  } else {\n    throw payload._result;\n  }\n}\n\nfunction lazy(ctor) {\n  var payload = {\n    // We use these fields to store the result.\n    _status: Uninitialized,\n    _result: ctor\n  };\n  var lazyType = {\n    $$typeof: REACT_LAZY_TYPE,\n    _payload: payload,\n    _init: lazyInitializer\n  };\n\n  {\n    // In production, this would just set it on the object.\n    var defaultProps;\n    var propTypes; // $FlowFixMe\n\n    Object.defineProperties(lazyType, {\n      defaultProps: {\n        configurable: true,\n        get: function () {\n          return defaultProps;\n        },\n        set: function (newDefaultProps) {\n          error('React.lazy(...): It is not supported to assign `defaultProps` to ' + 'a lazy component import. Either specify them where the component ' + 'is defined, or create a wrapping component around it.');\n\n          defaultProps = newDefaultProps; // Match production behavior more closely:\n          // $FlowFixMe\n\n          Object.defineProperty(lazyType, 'defaultProps', {\n            enumerable: true\n          });\n        }\n      },\n      propTypes: {\n        configurable: true,\n        get: function () {\n          return propTypes;\n        },\n        set: function (newPropTypes) {\n          error('React.lazy(...): It is not supported to assign `propTypes` to ' + 'a lazy component import. Either specify them where the component ' + 'is defined, or create a wrapping component around it.');\n\n          propTypes = newPropTypes; // Match production behavior more closely:\n          // $FlowFixMe\n\n          Object.defineProperty(lazyType, 'propTypes', {\n            enumerable: true\n          });\n        }\n      }\n    });\n  }\n\n  return lazyType;\n}\n\nfunction forwardRef(render) {\n  {\n    if (render != null && render.$$typeof === REACT_MEMO_TYPE) {\n      error('forwardRef requires a render function but received a `memo` ' + 'component. Instead of forwardRef(memo(...)), use ' + 'memo(forwardRef(...)).');\n    } else if (typeof render !== 'function') {\n      error('forwardRef requires a render function but was given %s.', render === null ? 'null' : typeof render);\n    } else {\n      if (render.length !== 0 && render.length !== 2) {\n        error('forwardRef render functions accept exactly two parameters: props and ref. %s', render.length === 1 ? 'Did you forget to use the ref parameter?' : 'Any additional parameter will be undefined.');\n      }\n    }\n\n    if (render != null) {\n      if (render.defaultProps != null || render.propTypes != null) {\n        error('forwardRef render functions do not support propTypes or defaultProps. ' + 'Did you accidentally pass a React component?');\n      }\n    }\n  }\n\n  var elementType = {\n    $$typeof: REACT_FORWARD_REF_TYPE,\n    render: render\n  };\n\n  {\n    var ownName;\n    Object.defineProperty(elementType, 'displayName', {\n      enumerable: false,\n      configurable: true,\n      get: function () {\n        return ownName;\n      },\n      set: function (name) {\n        ownName = name; // The inner component shouldn't inherit this display name in most cases,\n        // because the component may be used elsewhere.\n        // But it's nice for anonymous functions to inherit the name,\n        // so that our component-stack generation logic will display their frames.\n        // An anonymous function generally suggests a pattern like:\n        //   React.forwardRef((props, ref) => {...});\n        // This kind of inner function is not used elsewhere so the side effect is okay.\n\n        if (!render.name && !render.displayName) {\n          render.displayName = name;\n        }\n      }\n    });\n  }\n\n  return elementType;\n}\n\nvar REACT_MODULE_REFERENCE;\n\n{\n  REACT_MODULE_REFERENCE = Symbol.for('react.module.reference');\n}\n\nfunction isValidElementType(type) {\n  if (typeof type === 'string' || typeof type === 'function') {\n    return true;\n  } // Note: typeof might be other than 'symbol' or 'number' (e.g. if it's a polyfill).\n\n\n  if (type === REACT_FRAGMENT_TYPE || type === REACT_PROFILER_TYPE || enableDebugTracing  || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || type === REACT_SUSPENSE_LIST_TYPE || enableLegacyHidden  || type === REACT_OFFSCREEN_TYPE || enableScopeAPI  || enableCacheElement  || enableTransitionTracing ) {\n    return true;\n  }\n\n  if (typeof type === 'object' && type !== null) {\n    if (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_PROVIDER_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_FORWARD_REF_TYPE || // This needs to include all possible module reference object\n    // types supported by any Flight configuration anywhere since\n    // we don't know which Flight build this will end up being used\n    // with.\n    type.$$typeof === REACT_MODULE_REFERENCE || type.getModuleId !== undefined) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction memo(type, compare) {\n  {\n    if (!isValidElementType(type)) {\n      error('memo: The first argument must be a component. Instead ' + 'received: %s', type === null ? 'null' : typeof type);\n    }\n  }\n\n  var elementType = {\n    $$typeof: REACT_MEMO_TYPE,\n    type: type,\n    compare: compare === undefined ? null : compare\n  };\n\n  {\n    var ownName;\n    Object.defineProperty(elementType, 'displayName', {\n      enumerable: false,\n      configurable: true,\n      get: function () {\n        return ownName;\n      },\n      set: function (name) {\n        ownName = name; // The inner component shouldn't inherit this display name in most cases,\n        // because the component may be used elsewhere.\n        // But it's nice for anonymous functions to inherit the name,\n        // so that our component-stack generation logic will display their frames.\n        // An anonymous function generally suggests a pattern like:\n        //   React.memo((props) => {...});\n        // This kind of inner function is not used elsewhere so the side effect is okay.\n\n        if (!type.name && !type.displayName) {\n          type.displayName = name;\n        }\n      }\n    });\n  }\n\n  return elementType;\n}\n\nfunction resolveDispatcher() {\n  var dispatcher = ReactCurrentDispatcher.current;\n\n  {\n    if (dispatcher === null) {\n      error('Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for' + ' one of the following reasons:\\n' + '1. You might have mismatching versions of React and the renderer (such as React DOM)\\n' + '2. You might be breaking the Rules of Hooks\\n' + '3. You might have more than one copy of React in the same app\\n' + 'See https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem.');\n    }\n  } // Will result in a null access error if accessed outside render phase. We\n  // intentionally don't throw our own error because this is in a hot path.\n  // Also helps ensure this is inlined.\n\n\n  return dispatcher;\n}\nfunction useContext(Context) {\n  var dispatcher = resolveDispatcher();\n\n  {\n    // TODO: add a more generic warning for invalid values.\n    if (Context._context !== undefined) {\n      var realContext = Context._context; // Don't deduplicate because this legitimately causes bugs\n      // and nobody should be using this in existing code.\n\n      if (realContext.Consumer === Context) {\n        error('Calling useContext(Context.Consumer) is not supported, may cause bugs, and will be ' + 'removed in a future major release. Did you mean to call useContext(Context) instead?');\n      } else if (realContext.Provider === Context) {\n        error('Calling useContext(Context.Provider) is not supported. ' + 'Did you mean to call useContext(Context) instead?');\n      }\n    }\n  }\n\n  return dispatcher.useContext(Context);\n}\nfunction useState(initialState) {\n  var dispatcher = resolveDispatcher();\n  return dispatcher.useState(initialState);\n}\nfunction useReducer(reducer, initialArg, init) {\n  var dispatcher = resolveDispatcher();\n  return dispatcher.useReducer(reducer, initialArg, init);\n}\nfunction useRef(initialValue) {\n  var dispatcher = resolveDispatcher();\n  return dispatcher.useRef(initialValue);\n}\nfunction useEffect(create, deps) {\n  var dispatcher = resolveDispatcher();\n  return dispatcher.useEffect(create, deps);\n}\nfunction useInsertionEffect(create, deps) {\n  var dispatcher = resolveDispatcher();\n  return dispatcher.useInsertionEffect(create, deps);\n}\nfunction useLayoutEffect(create, deps) {\n  var dispatcher = resolveDispatcher();\n  return dispatcher.useLayoutEffect(create, deps);\n}\nfunction useCallback(callback, deps) {\n  var dispatcher = resolveDispatcher();\n  return dispatcher.useCallback(callback, deps);\n}\nfunction useMemo(create, deps) {\n  var dispatcher = resolveDispatcher();\n  return dispatcher.useMemo(create, deps);\n}\nfunction useImperativeHandle(ref, create, deps) {\n  var dispatcher = resolveDispatcher();\n  return dispatcher.useImperativeHandle(ref, create, deps);\n}\nfunction useDebugValue(value, formatterFn) {\n  {\n    var dispatcher = resolveDispatcher();\n    return dispatcher.useDebugValue(value, formatterFn);\n  }\n}\nfunction useTransition() {\n  var dispatcher = resolveDispatcher();\n  return dispatcher.useTransition();\n}\nfunction useDeferredValue(value) {\n  var dispatcher = resolveDispatcher();\n  return dispatcher.useDeferredValue(value);\n}\nfunction useId() {\n  var dispatcher = resolveDispatcher();\n  return dispatcher.useId();\n}\nfunction useSyncExternalStore(subscribe, getSnapshot, getServerSnapshot) {\n  var dispatcher = resolveDispatcher();\n  return dispatcher.useSyncExternalStore(subscribe, getSnapshot, getServerSnapshot);\n}\n\n// Helpers to patch console.logs to avoid logging during side-effect free\n// replaying on render function. This currently only patches the object\n// lazily which won't cover if the log function was extracted eagerly.\n// We could also eagerly patch the method.\nvar disabledDepth = 0;\nvar prevLog;\nvar prevInfo;\nvar prevWarn;\nvar prevError;\nvar prevGroup;\nvar prevGroupCollapsed;\nvar prevGroupEnd;\n\nfunction disabledLog() {}\n\ndisabledLog.__reactDisabledLog = true;\nfunction disableLogs() {\n  {\n    if (disabledDepth === 0) {\n      /* eslint-disable react-internal/no-production-logging */\n      prevLog = console.log;\n      prevInfo = console.info;\n      prevWarn = console.warn;\n      prevError = console.error;\n      prevGroup = console.group;\n      prevGroupCollapsed = console.groupCollapsed;\n      prevGroupEnd = console.groupEnd; // https://github.com/facebook/react/issues/19099\n\n      var props = {\n        configurable: true,\n        enumerable: true,\n        value: disabledLog,\n        writable: true\n      }; // $FlowFixMe Flow thinks console is immutable.\n\n      Object.defineProperties(console, {\n        info: props,\n        log: props,\n        warn: props,\n        error: props,\n        group: props,\n        groupCollapsed: props,\n        groupEnd: props\n      });\n      /* eslint-enable react-internal/no-production-logging */\n    }\n\n    disabledDepth++;\n  }\n}\nfunction reenableLogs() {\n  {\n    disabledDepth--;\n\n    if (disabledDepth === 0) {\n      /* eslint-disable react-internal/no-production-logging */\n      var props = {\n        configurable: true,\n        enumerable: true,\n        writable: true\n      }; // $FlowFixMe Flow thinks console is immutable.\n\n      Object.defineProperties(console, {\n        log: assign({}, props, {\n          value: prevLog\n        }),\n        info: assign({}, props, {\n          value: prevInfo\n        }),\n        warn: assign({}, props, {\n          value: prevWarn\n        }),\n        error: assign({}, props, {\n          value: prevError\n        }),\n        group: assign({}, props, {\n          value: prevGroup\n        }),\n        groupCollapsed: assign({}, props, {\n          value: prevGroupCollapsed\n        }),\n        groupEnd: assign({}, props, {\n          value: prevGroupEnd\n        })\n      });\n      /* eslint-enable react-internal/no-production-logging */\n    }\n\n    if (disabledDepth < 0) {\n      error('disabledDepth fell below zero. ' + 'This is a bug in React. Please file an issue.');\n    }\n  }\n}\n\nvar ReactCurrentDispatcher$1 = ReactSharedInternals.ReactCurrentDispatcher;\nvar prefix;\nfunction describeBuiltInComponentFrame(name, source, ownerFn) {\n  {\n    if (prefix === undefined) {\n      // Extract the VM specific prefix used by each line.\n      try {\n        throw Error();\n      } catch (x) {\n        var match = x.stack.trim().match(/\\n( *(at )?)/);\n        prefix = match && match[1] || '';\n      }\n    } // We use the prefix to ensure our stacks line up with native stack frames.\n\n\n    return '\\n' + prefix + name;\n  }\n}\nvar reentry = false;\nvar componentFrameCache;\n\n{\n  var PossiblyWeakMap = typeof WeakMap === 'function' ? WeakMap : Map;\n  componentFrameCache = new PossiblyWeakMap();\n}\n\nfunction describeNativeComponentFrame(fn, construct) {\n  // If something asked for a stack inside a fake render, it should get ignored.\n  if ( !fn || reentry) {\n    return '';\n  }\n\n  {\n    var frame = componentFrameCache.get(fn);\n\n    if (frame !== undefined) {\n      return frame;\n    }\n  }\n\n  var control;\n  reentry = true;\n  var previousPrepareStackTrace = Error.prepareStackTrace; // $FlowFixMe It does accept undefined.\n\n  Error.prepareStackTrace = undefined;\n  var previousDispatcher;\n\n  {\n    previousDispatcher = ReactCurrentDispatcher$1.current; // Set the dispatcher in DEV because this might be call in the render function\n    // for warnings.\n\n    ReactCurrentDispatcher$1.current = null;\n    disableLogs();\n  }\n\n  try {\n    // This should throw.\n    if (construct) {\n      // Something should be setting the props in the constructor.\n      var Fake = function () {\n        throw Error();\n      }; // $FlowFixMe\n\n\n      Object.defineProperty(Fake.prototype, 'props', {\n        set: function () {\n          // We use a throwing setter instead of frozen or non-writable props\n          // because that won't throw in a non-strict mode function.\n          throw Error();\n        }\n      });\n\n      if (typeof Reflect === 'object' && Reflect.construct) {\n        // We construct a different control for this case to include any extra\n        // frames added by the construct call.\n        try {\n          Reflect.construct(Fake, []);\n        } catch (x) {\n          control = x;\n        }\n\n        Reflect.construct(fn, [], Fake);\n      } else {\n        try {\n          Fake.call();\n        } catch (x) {\n          control = x;\n        }\n\n        fn.call(Fake.prototype);\n      }\n    } else {\n      try {\n        throw Error();\n      } catch (x) {\n        control = x;\n      }\n\n      fn();\n    }\n  } catch (sample) {\n    // This is inlined manually because closure doesn't do it for us.\n    if (sample && control && typeof sample.stack === 'string') {\n      // This extracts the first frame from the sample that isn't also in the control.\n      // Skipping one frame that we assume is the frame that calls the two.\n      var sampleLines = sample.stack.split('\\n');\n      var controlLines = control.stack.split('\\n');\n      var s = sampleLines.length - 1;\n      var c = controlLines.length - 1;\n\n      while (s >= 1 && c >= 0 && sampleLines[s] !== controlLines[c]) {\n        // We expect at least one stack frame to be shared.\n        // Typically this will be the root most one. However, stack frames may be\n        // cut off due to maximum stack limits. In this case, one maybe cut off\n        // earlier than the other. We assume that the sample is longer or the same\n        // and there for cut off earlier. So we should find the root most frame in\n        // the sample somewhere in the control.\n        c--;\n      }\n\n      for (; s >= 1 && c >= 0; s--, c--) {\n        // Next we find the first one that isn't the same which should be the\n        // frame that called our sample function and the control.\n        if (sampleLines[s] !== controlLines[c]) {\n          // In V8, the first line is describing the message but other VMs don't.\n          // If we're about to return the first line, and the control is also on the same\n          // line, that's a pretty good indicator that our sample threw at same line as\n          // the control. I.e. before we entered the sample frame. So we ignore this result.\n          // This can happen if you passed a class to function component, or non-function.\n          if (s !== 1 || c !== 1) {\n            do {\n              s--;\n              c--; // We may still have similar intermediate frames from the construct call.\n              // The next one that isn't the same should be our match though.\n\n              if (c < 0 || sampleLines[s] !== controlLines[c]) {\n                // V8 adds a \"new\" prefix for native classes. Let's remove it to make it prettier.\n                var _frame = '\\n' + sampleLines[s].replace(' at new ', ' at '); // If our component frame is labeled \"<anonymous>\"\n                // but we have a user-provided \"displayName\"\n                // splice it in to make the stack more readable.\n\n\n                if (fn.displayName && _frame.includes('<anonymous>')) {\n                  _frame = _frame.replace('<anonymous>', fn.displayName);\n                }\n\n                {\n                  if (typeof fn === 'function') {\n                    componentFrameCache.set(fn, _frame);\n                  }\n                } // Return the line we found.\n\n\n                return _frame;\n              }\n            } while (s >= 1 && c >= 0);\n          }\n\n          break;\n        }\n      }\n    }\n  } finally {\n    reentry = false;\n\n    {\n      ReactCurrentDispatcher$1.current = previousDispatcher;\n      reenableLogs();\n    }\n\n    Error.prepareStackTrace = previousPrepareStackTrace;\n  } // Fallback to just using the name if we couldn't make it throw.\n\n\n  var name = fn ? fn.displayName || fn.name : '';\n  var syntheticFrame = name ? describeBuiltInComponentFrame(name) : '';\n\n  {\n    if (typeof fn === 'function') {\n      componentFrameCache.set(fn, syntheticFrame);\n    }\n  }\n\n  return syntheticFrame;\n}\nfunction describeFunctionComponentFrame(fn, source, ownerFn) {\n  {\n    return describeNativeComponentFrame(fn, false);\n  }\n}\n\nfunction shouldConstruct(Component) {\n  var prototype = Component.prototype;\n  return !!(prototype && prototype.isReactComponent);\n}\n\nfunction describeUnknownElementTypeFrameInDEV(type, source, ownerFn) {\n\n  if (type == null) {\n    return '';\n  }\n\n  if (typeof type === 'function') {\n    {\n      return describeNativeComponentFrame(type, shouldConstruct(type));\n    }\n  }\n\n  if (typeof type === 'string') {\n    return describeBuiltInComponentFrame(type);\n  }\n\n  switch (type) {\n    case REACT_SUSPENSE_TYPE:\n      return describeBuiltInComponentFrame('Suspense');\n\n    case REACT_SUSPENSE_LIST_TYPE:\n      return describeBuiltInComponentFrame('SuspenseList');\n  }\n\n  if (typeof type === 'object') {\n    switch (type.$$typeof) {\n      case REACT_FORWARD_REF_TYPE:\n        return describeFunctionComponentFrame(type.render);\n\n      case REACT_MEMO_TYPE:\n        // Memo may contain any component type so we recursively resolve it.\n        return describeUnknownElementTypeFrameInDEV(type.type, source, ownerFn);\n\n      case REACT_LAZY_TYPE:\n        {\n          var lazyComponent = type;\n          var payload = lazyComponent._payload;\n          var init = lazyComponent._init;\n\n          try {\n            // Lazy may contain any component type so we recursively resolve it.\n            return describeUnknownElementTypeFrameInDEV(init(payload), source, ownerFn);\n          } catch (x) {}\n        }\n    }\n  }\n\n  return '';\n}\n\nvar loggedTypeFailures = {};\nvar ReactDebugCurrentFrame$1 = ReactSharedInternals.ReactDebugCurrentFrame;\n\nfunction setCurrentlyValidatingElement(element) {\n  {\n    if (element) {\n      var owner = element._owner;\n      var stack = describeUnknownElementTypeFrameInDEV(element.type, element._source, owner ? owner.type : null);\n      ReactDebugCurrentFrame$1.setExtraStackFrame(stack);\n    } else {\n      ReactDebugCurrentFrame$1.setExtraStackFrame(null);\n    }\n  }\n}\n\nfunction checkPropTypes(typeSpecs, values, location, componentName, element) {\n  {\n    // $FlowFixMe This is okay but Flow doesn't know it.\n    var has = Function.call.bind(hasOwnProperty);\n\n    for (var typeSpecName in typeSpecs) {\n      if (has(typeSpecs, typeSpecName)) {\n        var error$1 = void 0; // Prop type validation may throw. In case they do, we don't want to\n        // fail the render phase where it didn't fail before. So we log it.\n        // After these have been cleaned up, we'll let them throw.\n\n        try {\n          // This is intentionally an invariant that gets caught. It's the same\n          // behavior as without this statement except with a better message.\n          if (typeof typeSpecs[typeSpecName] !== 'function') {\n            // eslint-disable-next-line react-internal/prod-error-codes\n            var err = Error((componentName || 'React class') + ': ' + location + ' type `' + typeSpecName + '` is invalid; ' + 'it must be a function, usually from the `prop-types` package, but received `' + typeof typeSpecs[typeSpecName] + '`.' + 'This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.');\n            err.name = 'Invariant Violation';\n            throw err;\n          }\n\n          error$1 = typeSpecs[typeSpecName](values, typeSpecName, componentName, location, null, 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED');\n        } catch (ex) {\n          error$1 = ex;\n        }\n\n        if (error$1 && !(error$1 instanceof Error)) {\n          setCurrentlyValidatingElement(element);\n\n          error('%s: type specification of %s' + ' `%s` is invalid; the type checker ' + 'function must return `null` or an `Error` but returned a %s. ' + 'You may have forgotten to pass an argument to the type checker ' + 'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and ' + 'shape all require an argument).', componentName || 'React class', location, typeSpecName, typeof error$1);\n\n          setCurrentlyValidatingElement(null);\n        }\n\n        if (error$1 instanceof Error && !(error$1.message in loggedTypeFailures)) {\n          // Only monitor this failure once because there tends to be a lot of the\n          // same error.\n          loggedTypeFailures[error$1.message] = true;\n          setCurrentlyValidatingElement(element);\n\n          error('Failed %s type: %s', location, error$1.message);\n\n          setCurrentlyValidatingElement(null);\n        }\n      }\n    }\n  }\n}\n\nfunction setCurrentlyValidatingElement$1(element) {\n  {\n    if (element) {\n      var owner = element._owner;\n      var stack = describeUnknownElementTypeFrameInDEV(element.type, element._source, owner ? owner.type : null);\n      setExtraStackFrame(stack);\n    } else {\n      setExtraStackFrame(null);\n    }\n  }\n}\n\nvar propTypesMisspellWarningShown;\n\n{\n  propTypesMisspellWarningShown = false;\n}\n\nfunction getDeclarationErrorAddendum() {\n  if (ReactCurrentOwner.current) {\n    var name = getComponentNameFromType(ReactCurrentOwner.current.type);\n\n    if (name) {\n      return '\\n\\nCheck the render method of `' + name + '`.';\n    }\n  }\n\n  return '';\n}\n\nfunction getSourceInfoErrorAddendum(source) {\n  if (source !== undefined) {\n    var fileName = source.fileName.replace(/^.*[\\\\\\/]/, '');\n    var lineNumber = source.lineNumber;\n    return '\\n\\nCheck your code at ' + fileName + ':' + lineNumber + '.';\n  }\n\n  return '';\n}\n\nfunction getSourceInfoErrorAddendumForProps(elementProps) {\n  if (elementProps !== null && elementProps !== undefined) {\n    return getSourceInfoErrorAddendum(elementProps.__source);\n  }\n\n  return '';\n}\n/**\n * Warn if there's no key explicitly set on dynamic arrays of children or\n * object keys are not valid. This allows us to keep track of children between\n * updates.\n */\n\n\nvar ownerHasKeyUseWarning = {};\n\nfunction getCurrentComponentErrorInfo(parentType) {\n  var info = getDeclarationErrorAddendum();\n\n  if (!info) {\n    var parentName = typeof parentType === 'string' ? parentType : parentType.displayName || parentType.name;\n\n    if (parentName) {\n      info = \"\\n\\nCheck the top-level render call using <\" + parentName + \">.\";\n    }\n  }\n\n  return info;\n}\n/**\n * Warn if the element doesn't have an explicit key assigned to it.\n * This element is in an array. The array could grow and shrink or be\n * reordered. All children that haven't already been validated are required to\n * have a \"key\" property assigned to it. Error statuses are cached so a warning\n * will only be shown once.\n *\n * @internal\n * @param {ReactElement} element Element that requires a key.\n * @param {*} parentType element's parent's type.\n */\n\n\nfunction validateExplicitKey(element, parentType) {\n  if (!element._store || element._store.validated || element.key != null) {\n    return;\n  }\n\n  element._store.validated = true;\n  var currentComponentErrorInfo = getCurrentComponentErrorInfo(parentType);\n\n  if (ownerHasKeyUseWarning[currentComponentErrorInfo]) {\n    return;\n  }\n\n  ownerHasKeyUseWarning[currentComponentErrorInfo] = true; // Usually the current owner is the offender, but if it accepts children as a\n  // property, it may be the creator of the child that's responsible for\n  // assigning it a key.\n\n  var childOwner = '';\n\n  if (element && element._owner && element._owner !== ReactCurrentOwner.current) {\n    // Give the component that originally created this child.\n    childOwner = \" It was passed a child from \" + getComponentNameFromType(element._owner.type) + \".\";\n  }\n\n  {\n    setCurrentlyValidatingElement$1(element);\n\n    error('Each child in a list should have a unique \"key\" prop.' + '%s%s See https://reactjs.org/link/warning-keys for more information.', currentComponentErrorInfo, childOwner);\n\n    setCurrentlyValidatingElement$1(null);\n  }\n}\n/**\n * Ensure that every element either is passed in a static location, in an\n * array with an explicit keys property defined, or in an object literal\n * with valid key property.\n *\n * @internal\n * @param {ReactNode} node Statically passed child of any type.\n * @param {*} parentType node's parent's type.\n */\n\n\nfunction validateChildKeys(node, parentType) {\n  if (typeof node !== 'object') {\n    return;\n  }\n\n  if (isArray(node)) {\n    for (var i = 0; i < node.length; i++) {\n      var child = node[i];\n\n      if (isValidElement(child)) {\n        validateExplicitKey(child, parentType);\n      }\n    }\n  } else if (isValidElement(node)) {\n    // This element was passed in a valid location.\n    if (node._store) {\n      node._store.validated = true;\n    }\n  } else if (node) {\n    var iteratorFn = getIteratorFn(node);\n\n    if (typeof iteratorFn === 'function') {\n      // Entry iterators used to provide implicit keys,\n      // but now we print a separate warning for them later.\n      if (iteratorFn !== node.entries) {\n        var iterator = iteratorFn.call(node);\n        var step;\n\n        while (!(step = iterator.next()).done) {\n          if (isValidElement(step.value)) {\n            validateExplicitKey(step.value, parentType);\n          }\n        }\n      }\n    }\n  }\n}\n/**\n * Given an element, validate that its props follow the propTypes definition,\n * provided by the type.\n *\n * @param {ReactElement} element\n */\n\n\nfunction validatePropTypes(element) {\n  {\n    var type = element.type;\n\n    if (type === null || type === undefined || typeof type === 'string') {\n      return;\n    }\n\n    var propTypes;\n\n    if (typeof type === 'function') {\n      propTypes = type.propTypes;\n    } else if (typeof type === 'object' && (type.$$typeof === REACT_FORWARD_REF_TYPE || // Note: Memo only checks outer props here.\n    // Inner props are checked in the reconciler.\n    type.$$typeof === REACT_MEMO_TYPE)) {\n      propTypes = type.propTypes;\n    } else {\n      return;\n    }\n\n    if (propTypes) {\n      // Intentionally inside to avoid triggering lazy initializers:\n      var name = getComponentNameFromType(type);\n      checkPropTypes(propTypes, element.props, 'prop', name, element);\n    } else if (type.PropTypes !== undefined && !propTypesMisspellWarningShown) {\n      propTypesMisspellWarningShown = true; // Intentionally inside to avoid triggering lazy initializers:\n\n      var _name = getComponentNameFromType(type);\n\n      error('Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?', _name || 'Unknown');\n    }\n\n    if (typeof type.getDefaultProps === 'function' && !type.getDefaultProps.isReactClassApproved) {\n      error('getDefaultProps is only used on classic React.createClass ' + 'definitions. Use a static property named `defaultProps` instead.');\n    }\n  }\n}\n/**\n * Given a fragment, validate that it can only be provided with fragment props\n * @param {ReactElement} fragment\n */\n\n\nfunction validateFragmentProps(fragment) {\n  {\n    var keys = Object.keys(fragment.props);\n\n    for (var i = 0; i < keys.length; i++) {\n      var key = keys[i];\n\n      if (key !== 'children' && key !== 'key') {\n        setCurrentlyValidatingElement$1(fragment);\n\n        error('Invalid prop `%s` supplied to `React.Fragment`. ' + 'React.Fragment can only have `key` and `children` props.', key);\n\n        setCurrentlyValidatingElement$1(null);\n        break;\n      }\n    }\n\n    if (fragment.ref !== null) {\n      setCurrentlyValidatingElement$1(fragment);\n\n      error('Invalid attribute `ref` supplied to `React.Fragment`.');\n\n      setCurrentlyValidatingElement$1(null);\n    }\n  }\n}\nfunction createElementWithValidation(type, props, children) {\n  var validType = isValidElementType(type); // We warn in this case but don't throw. We expect the element creation to\n  // succeed and there will likely be errors in render.\n\n  if (!validType) {\n    var info = '';\n\n    if (type === undefined || typeof type === 'object' && type !== null && Object.keys(type).length === 0) {\n      info += ' You likely forgot to export your component from the file ' + \"it's defined in, or you might have mixed up default and named imports.\";\n    }\n\n    var sourceInfo = getSourceInfoErrorAddendumForProps(props);\n\n    if (sourceInfo) {\n      info += sourceInfo;\n    } else {\n      info += getDeclarationErrorAddendum();\n    }\n\n    var typeString;\n\n    if (type === null) {\n      typeString = 'null';\n    } else if (isArray(type)) {\n      typeString = 'array';\n    } else if (type !== undefined && type.$$typeof === REACT_ELEMENT_TYPE) {\n      typeString = \"<\" + (getComponentNameFromType(type.type) || 'Unknown') + \" />\";\n      info = ' Did you accidentally export a JSX literal instead of a component?';\n    } else {\n      typeString = typeof type;\n    }\n\n    {\n      error('React.createElement: type is invalid -- expected a string (for ' + 'built-in components) or a class/function (for composite ' + 'components) but got: %s.%s', typeString, info);\n    }\n  }\n\n  var element = createElement.apply(this, arguments); // The result can be nullish if a mock or a custom function is used.\n  // TODO: Drop this when these are no longer allowed as the type argument.\n\n  if (element == null) {\n    return element;\n  } // Skip key warning if the type isn't valid since our key validation logic\n  // doesn't expect a non-string/function type and can throw confusing errors.\n  // We don't want exception behavior to differ between dev and prod.\n  // (Rendering will throw with a helpful message and as soon as the type is\n  // fixed, the key warnings will appear.)\n\n\n  if (validType) {\n    for (var i = 2; i < arguments.length; i++) {\n      validateChildKeys(arguments[i], type);\n    }\n  }\n\n  if (type === REACT_FRAGMENT_TYPE) {\n    validateFragmentProps(element);\n  } else {\n    validatePropTypes(element);\n  }\n\n  return element;\n}\nvar didWarnAboutDeprecatedCreateFactory = false;\nfunction createFactoryWithValidation(type) {\n  var validatedFactory = createElementWithValidation.bind(null, type);\n  validatedFactory.type = type;\n\n  {\n    if (!didWarnAboutDeprecatedCreateFactory) {\n      didWarnAboutDeprecatedCreateFactory = true;\n\n      warn('React.createFactory() is deprecated and will be removed in ' + 'a future major release. Consider using JSX ' + 'or use React.createElement() directly instead.');\n    } // Legacy hook: remove it\n\n\n    Object.defineProperty(validatedFactory, 'type', {\n      enumerable: false,\n      get: function () {\n        warn('Factory.type is deprecated. Access the class directly ' + 'before passing it to createFactory.');\n\n        Object.defineProperty(this, 'type', {\n          value: type\n        });\n        return type;\n      }\n    });\n  }\n\n  return validatedFactory;\n}\nfunction cloneElementWithValidation(element, props, children) {\n  var newElement = cloneElement.apply(this, arguments);\n\n  for (var i = 2; i < arguments.length; i++) {\n    validateChildKeys(arguments[i], newElement.type);\n  }\n\n  validatePropTypes(newElement);\n  return newElement;\n}\n\nfunction startTransition(scope, options) {\n  var prevTransition = ReactCurrentBatchConfig.transition;\n  ReactCurrentBatchConfig.transition = {};\n  var currentTransition = ReactCurrentBatchConfig.transition;\n\n  {\n    ReactCurrentBatchConfig.transition._updatedFibers = new Set();\n  }\n\n  try {\n    scope();\n  } finally {\n    ReactCurrentBatchConfig.transition = prevTransition;\n\n    {\n      if (prevTransition === null && currentTransition._updatedFibers) {\n        var updatedFibersCount = currentTransition._updatedFibers.size;\n\n        if (updatedFibersCount > 10) {\n          warn('Detected a large number of updates inside startTransition. ' + 'If this is due to a subscription please re-write it to use React provided hooks. ' + 'Otherwise concurrent mode guarantees are off the table.');\n        }\n\n        currentTransition._updatedFibers.clear();\n      }\n    }\n  }\n}\n\nvar didWarnAboutMessageChannel = false;\nvar enqueueTaskImpl = null;\nfunction enqueueTask(task) {\n  if (enqueueTaskImpl === null) {\n    try {\n      // read require off the module object to get around the bundlers.\n      // we don't want them to detect a require and bundle a Node polyfill.\n      var requireString = ('require' + Math.random()).slice(0, 7);\n      var nodeRequire = module && module[requireString]; // assuming we're in node, let's try to get node's\n      // version of setImmediate, bypassing fake timers if any.\n\n      enqueueTaskImpl = nodeRequire.call(module, 'timers').setImmediate;\n    } catch (_err) {\n      // we're in a browser\n      // we can't use regular timers because they may still be faked\n      // so we try MessageChannel+postMessage instead\n      enqueueTaskImpl = function (callback) {\n        {\n          if (didWarnAboutMessageChannel === false) {\n            didWarnAboutMessageChannel = true;\n\n            if (typeof MessageChannel === 'undefined') {\n              error('This browser does not have a MessageChannel implementation, ' + 'so enqueuing tasks via await act(async () => ...) will fail. ' + 'Please file an issue at https://github.com/facebook/react/issues ' + 'if you encounter this warning.');\n            }\n          }\n        }\n\n        var channel = new MessageChannel();\n        channel.port1.onmessage = callback;\n        channel.port2.postMessage(undefined);\n      };\n    }\n  }\n\n  return enqueueTaskImpl(task);\n}\n\nvar actScopeDepth = 0;\nvar didWarnNoAwaitAct = false;\nfunction act(callback) {\n  {\n    // `act` calls can be nested, so we track the depth. This represents the\n    // number of `act` scopes on the stack.\n    var prevActScopeDepth = actScopeDepth;\n    actScopeDepth++;\n\n    if (ReactCurrentActQueue.current === null) {\n      // This is the outermost `act` scope. Initialize the queue. The reconciler\n      // will detect the queue and use it instead of Scheduler.\n      ReactCurrentActQueue.current = [];\n    }\n\n    var prevIsBatchingLegacy = ReactCurrentActQueue.isBatchingLegacy;\n    var result;\n\n    try {\n      // Used to reproduce behavior of `batchedUpdates` in legacy mode. Only\n      // set to `true` while the given callback is executed, not for updates\n      // triggered during an async event, because this is how the legacy\n      // implementation of `act` behaved.\n      ReactCurrentActQueue.isBatchingLegacy = true;\n      result = callback(); // Replicate behavior of original `act` implementation in legacy mode,\n      // which flushed updates immediately after the scope function exits, even\n      // if it's an async function.\n\n      if (!prevIsBatchingLegacy && ReactCurrentActQueue.didScheduleLegacyUpdate) {\n        var queue = ReactCurrentActQueue.current;\n\n        if (queue !== null) {\n          ReactCurrentActQueue.didScheduleLegacyUpdate = false;\n          flushActQueue(queue);\n        }\n      }\n    } catch (error) {\n      popActScope(prevActScopeDepth);\n      throw error;\n    } finally {\n      ReactCurrentActQueue.isBatchingLegacy = prevIsBatchingLegacy;\n    }\n\n    if (result !== null && typeof result === 'object' && typeof result.then === 'function') {\n      var thenableResult = result; // The callback is an async function (i.e. returned a promise). Wait\n      // for it to resolve before exiting the current scope.\n\n      var wasAwaited = false;\n      var thenable = {\n        then: function (resolve, reject) {\n          wasAwaited = true;\n          thenableResult.then(function (returnValue) {\n            popActScope(prevActScopeDepth);\n\n            if (actScopeDepth === 0) {\n              // We've exited the outermost act scope. Recursively flush the\n              // queue until there's no remaining work.\n              recursivelyFlushAsyncActWork(returnValue, resolve, reject);\n            } else {\n              resolve(returnValue);\n            }\n          }, function (error) {\n            // The callback threw an error.\n            popActScope(prevActScopeDepth);\n            reject(error);\n          });\n        }\n      };\n\n      {\n        if (!didWarnNoAwaitAct && typeof Promise !== 'undefined') {\n          // eslint-disable-next-line no-undef\n          Promise.resolve().then(function () {}).then(function () {\n            if (!wasAwaited) {\n              didWarnNoAwaitAct = true;\n\n              error('You called act(async () => ...) without await. ' + 'This could lead to unexpected testing behaviour, ' + 'interleaving multiple act calls and mixing their ' + 'scopes. ' + 'You should - await act(async () => ...);');\n            }\n          });\n        }\n      }\n\n      return thenable;\n    } else {\n      var returnValue = result; // The callback is not an async function. Exit the current scope\n      // immediately, without awaiting.\n\n      popActScope(prevActScopeDepth);\n\n      if (actScopeDepth === 0) {\n        // Exiting the outermost act scope. Flush the queue.\n        var _queue = ReactCurrentActQueue.current;\n\n        if (_queue !== null) {\n          flushActQueue(_queue);\n          ReactCurrentActQueue.current = null;\n        } // Return a thenable. If the user awaits it, we'll flush again in\n        // case additional work was scheduled by a microtask.\n\n\n        var _thenable = {\n          then: function (resolve, reject) {\n            // Confirm we haven't re-entered another `act` scope, in case\n            // the user does something weird like await the thenable\n            // multiple times.\n            if (ReactCurrentActQueue.current === null) {\n              // Recursively flush the queue until there's no remaining work.\n              ReactCurrentActQueue.current = [];\n              recursivelyFlushAsyncActWork(returnValue, resolve, reject);\n            } else {\n              resolve(returnValue);\n            }\n          }\n        };\n        return _thenable;\n      } else {\n        // Since we're inside a nested `act` scope, the returned thenable\n        // immediately resolves. The outer scope will flush the queue.\n        var _thenable2 = {\n          then: function (resolve, reject) {\n            resolve(returnValue);\n          }\n        };\n        return _thenable2;\n      }\n    }\n  }\n}\n\nfunction popActScope(prevActScopeDepth) {\n  {\n    if (prevActScopeDepth !== actScopeDepth - 1) {\n      error('You seem to have overlapping act() calls, this is not supported. ' + 'Be sure to await previous act() calls before making a new one. ');\n    }\n\n    actScopeDepth = prevActScopeDepth;\n  }\n}\n\nfunction recursivelyFlushAsyncActWork(returnValue, resolve, reject) {\n  {\n    var queue = ReactCurrentActQueue.current;\n\n    if (queue !== null) {\n      try {\n        flushActQueue(queue);\n        enqueueTask(function () {\n          if (queue.length === 0) {\n            // No additional work was scheduled. Finish.\n            ReactCurrentActQueue.current = null;\n            resolve(returnValue);\n          } else {\n            // Keep flushing work until there's none left.\n            recursivelyFlushAsyncActWork(returnValue, resolve, reject);\n          }\n        });\n      } catch (error) {\n        reject(error);\n      }\n    } else {\n      resolve(returnValue);\n    }\n  }\n}\n\nvar isFlushing = false;\n\nfunction flushActQueue(queue) {\n  {\n    if (!isFlushing) {\n      // Prevent re-entrance.\n      isFlushing = true;\n      var i = 0;\n\n      try {\n        for (; i < queue.length; i++) {\n          var callback = queue[i];\n\n          do {\n            callback = callback(true);\n          } while (callback !== null);\n        }\n\n        queue.length = 0;\n      } catch (error) {\n        // If something throws, leave the remaining callbacks on the queue.\n        queue = queue.slice(i + 1);\n        throw error;\n      } finally {\n        isFlushing = false;\n      }\n    }\n  }\n}\n\nvar createElement$1 =  createElementWithValidation ;\nvar cloneElement$1 =  cloneElementWithValidation ;\nvar createFactory =  createFactoryWithValidation ;\nvar Children = {\n  map: mapChildren,\n  forEach: forEachChildren,\n  count: countChildren,\n  toArray: toArray,\n  only: onlyChild\n};\n\nexports.Children = Children;\nexports.Component = Component;\nexports.Fragment = REACT_FRAGMENT_TYPE;\nexports.Profiler = REACT_PROFILER_TYPE;\nexports.PureComponent = PureComponent;\nexports.StrictMode = REACT_STRICT_MODE_TYPE;\nexports.Suspense = REACT_SUSPENSE_TYPE;\nexports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED = ReactSharedInternals;\nexports.act = act;\nexports.cloneElement = cloneElement$1;\nexports.createContext = createContext;\nexports.createElement = createElement$1;\nexports.createFactory = createFactory;\nexports.createRef = createRef;\nexports.forwardRef = forwardRef;\nexports.isValidElement = isValidElement;\nexports.lazy = lazy;\nexports.memo = memo;\nexports.startTransition = startTransition;\nexports.unstable_act = act;\nexports.useCallback = useCallback;\nexports.useContext = useContext;\nexports.useDebugValue = useDebugValue;\nexports.useDeferredValue = useDeferredValue;\nexports.useEffect = useEffect;\nexports.useId = useId;\nexports.useImperativeHandle = useImperativeHandle;\nexports.useInsertionEffect = useInsertionEffect;\nexports.useLayoutEffect = useLayoutEffect;\nexports.useMemo = useMemo;\nexports.useReducer = useReducer;\nexports.useRef = useRef;\nexports.useState = useState;\nexports.useSyncExternalStore = useSyncExternalStore;\nexports.useTransition = useTransition;\nexports.version = ReactVersion;\n          /* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */\nif (\n  typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ !== 'undefined' &&\n  typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop ===\n    'function'\n) {\n  __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error());\n}\n        \n  })();\n}\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react.production.min.js');\n} else {\n  module.exports = require('./cjs/react.development.js');\n}\n","import { useLayoutEffect } from 'react';\n\nvar index = useLayoutEffect ;\n\nexport { index as default };\n","/**\n * @license React\n * use-sync-external-store-shim.development.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\n\"production\" !== process.env.NODE_ENV &&\n  (function () {\n    function is(x, y) {\n      return (x === y && (0 !== x || 1 / x === 1 / y)) || (x !== x && y !== y);\n    }\n    function useSyncExternalStore$2(subscribe, getSnapshot) {\n      didWarnOld18Alpha ||\n        void 0 === React.startTransition ||\n        ((didWarnOld18Alpha = !0),\n        console.error(\n          \"You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release.\"\n        ));\n      var value = getSnapshot();\n      if (!didWarnUncachedGetSnapshot) {\n        var cachedValue = getSnapshot();\n        objectIs(value, cachedValue) ||\n          (console.error(\n            \"The result of getSnapshot should be cached to avoid an infinite loop\"\n          ),\n          (didWarnUncachedGetSnapshot = !0));\n      }\n      cachedValue = useState({\n        inst: { value: value, getSnapshot: getSnapshot }\n      });\n      var inst = cachedValue[0].inst,\n        forceUpdate = cachedValue[1];\n      useLayoutEffect(\n        function () {\n          inst.value = value;\n          inst.getSnapshot = getSnapshot;\n          checkIfSnapshotChanged(inst) && forceUpdate({ inst: inst });\n        },\n        [subscribe, value, getSnapshot]\n      );\n      useEffect(\n        function () {\n          checkIfSnapshotChanged(inst) && forceUpdate({ inst: inst });\n          return subscribe(function () {\n            checkIfSnapshotChanged(inst) && forceUpdate({ inst: inst });\n          });\n        },\n        [subscribe]\n      );\n      useDebugValue(value);\n      return value;\n    }\n    function checkIfSnapshotChanged(inst) {\n      var latestGetSnapshot = inst.getSnapshot;\n      inst = inst.value;\n      try {\n        var nextValue = latestGetSnapshot();\n        return !objectIs(inst, nextValue);\n      } catch (error) {\n        return !0;\n      }\n    }\n    function useSyncExternalStore$1(subscribe, getSnapshot) {\n      return getSnapshot();\n    }\n    \"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&\n      \"function\" ===\n        typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart &&\n      __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());\n    var React = require(\"react\"),\n      objectIs = \"function\" === typeof Object.is ? Object.is : is,\n      useState = React.useState,\n      useEffect = React.useEffect,\n      useLayoutEffect = React.useLayoutEffect,\n      useDebugValue = React.useDebugValue,\n      didWarnOld18Alpha = !1,\n      didWarnUncachedGetSnapshot = !1,\n      shim =\n        \"undefined\" === typeof window ||\n        \"undefined\" === typeof window.document ||\n        \"undefined\" === typeof window.document.createElement\n          ? useSyncExternalStore$1\n          : useSyncExternalStore$2;\n    exports.useSyncExternalStore =\n      void 0 !== React.useSyncExternalStore ? React.useSyncExternalStore : shim;\n    \"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&\n      \"function\" ===\n        typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop &&\n      __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error());\n  })();\n","/**\n * @license React\n * use-sync-external-store-shim/with-selector.development.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\n\"production\" !== process.env.NODE_ENV &&\n  (function () {\n    function is(x, y) {\n      return (x === y && (0 !== x || 1 / x === 1 / y)) || (x !== x && y !== y);\n    }\n    \"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&\n      \"function\" ===\n        typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart &&\n      __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());\n    var React = require(\"react\"),\n      shim = require(\"use-sync-external-store/shim\"),\n      objectIs = \"function\" === typeof Object.is ? Object.is : is,\n      useSyncExternalStore = shim.useSyncExternalStore,\n      useRef = React.useRef,\n      useEffect = React.useEffect,\n      useMemo = React.useMemo,\n      useDebugValue = React.useDebugValue;\n    exports.useSyncExternalStoreWithSelector = function (\n      subscribe,\n      getSnapshot,\n      getServerSnapshot,\n      selector,\n      isEqual\n    ) {\n      var instRef = useRef(null);\n      if (null === instRef.current) {\n        var inst = { hasValue: !1, value: null };\n        instRef.current = inst;\n      } else inst = instRef.current;\n      instRef = useMemo(\n        function () {\n          function memoizedSelector(nextSnapshot) {\n            if (!hasMemo) {\n              hasMemo = !0;\n              memoizedSnapshot = nextSnapshot;\n              nextSnapshot = selector(nextSnapshot);\n              if (void 0 !== isEqual && inst.hasValue) {\n                var currentSelection = inst.value;\n                if (isEqual(currentSelection, nextSnapshot))\n                  return (memoizedSelection = currentSelection);\n              }\n              return (memoizedSelection = nextSnapshot);\n            }\n            currentSelection = memoizedSelection;\n            if (objectIs(memoizedSnapshot, nextSnapshot))\n              return currentSelection;\n            var nextSelection = selector(nextSnapshot);\n            if (void 0 !== isEqual && isEqual(currentSelection, nextSelection))\n              return (memoizedSnapshot = nextSnapshot), currentSelection;\n            memoizedSnapshot = nextSnapshot;\n            return (memoizedSelection = nextSelection);\n          }\n          var hasMemo = !1,\n            memoizedSnapshot,\n            memoizedSelection,\n            maybeGetServerSnapshot =\n              void 0 === getServerSnapshot ? null : getServerSnapshot;\n          return [\n            function () {\n              return memoizedSelector(getSnapshot());\n            },\n            null === maybeGetServerSnapshot\n              ? void 0\n              : function () {\n                  return memoizedSelector(maybeGetServerSnapshot());\n                }\n          ];\n        },\n        [getSnapshot, getServerSnapshot, selector, isEqual]\n      );\n      var value = useSyncExternalStore(subscribe, instRef[0], instRef[1]);\n      useEffect(\n        function () {\n          inst.hasValue = !0;\n          inst.value = value;\n        },\n        [value]\n      );\n      useDebugValue(value);\n      return value;\n    };\n    \"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&\n      \"function\" ===\n        typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop &&\n      __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error());\n  })();\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('../cjs/use-sync-external-store-shim.production.js');\n} else {\n  module.exports = require('../cjs/use-sync-external-store-shim.development.js');\n}\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('../cjs/use-sync-external-store-shim/with-selector.production.js');\n} else {\n  module.exports = require('../cjs/use-sync-external-store-shim/with-selector.development.js');\n}\n","import { __assign } from './_virtual/_tslib.js';\nimport { symbolObservable, toInvokeSource, mapContext, isMachine } from './utils.js';\nimport { provide } from './serviceScope.js';\n\nfunction createNullActor(id) {\n  var _a;\n\n  return _a = {\n    id: id,\n    send: function () {\n      return void 0;\n    },\n    subscribe: function () {\n      return {\n        unsubscribe: function () {\n          return void 0;\n        }\n      };\n    },\n    getSnapshot: function () {\n      return undefined;\n    },\n    toJSON: function () {\n      return {\n        id: id\n      };\n    }\n  }, _a[symbolObservable] = function () {\n    return this;\n  }, _a;\n}\n/**\r\n * Creates a deferred actor that is able to be invoked given the provided\r\n * invocation information in its `.meta` value.\r\n *\r\n * @param invokeDefinition The meta information needed to invoke the actor.\r\n */\n\nfunction createInvocableActor(invokeDefinition, machine, context, _event) {\n  var _a;\n\n  var invokeSrc = toInvokeSource(invokeDefinition.src);\n  var serviceCreator = (_a = machine === null || machine === void 0 ? void 0 : machine.options.services) === null || _a === void 0 ? void 0 : _a[invokeSrc.type];\n  var resolvedData = invokeDefinition.data ? mapContext(invokeDefinition.data, context, _event) : undefined;\n  var tempActor = serviceCreator ? createDeferredActor(serviceCreator, invokeDefinition.id, resolvedData) : createNullActor(invokeDefinition.id); // @ts-ignore\n\n  tempActor.meta = invokeDefinition;\n  return tempActor;\n}\nfunction createDeferredActor(entity, id, data) {\n  var tempActor = createNullActor(id); // @ts-ignore\n\n  tempActor.deferred = true;\n\n  if (isMachine(entity)) {\n    // \"mute\" the existing service scope so potential spawned actors within the `.initialState` stay deferred here\n    var initialState_1 = tempActor.state = provide(undefined, function () {\n      return (data ? entity.withContext(data) : entity).initialState;\n    });\n\n    tempActor.getSnapshot = function () {\n      return initialState_1;\n    };\n  }\n\n  return tempActor;\n}\nfunction isActor(item) {\n  try {\n    return typeof item.send === 'function';\n  } catch (e) {\n    return false;\n  }\n}\nfunction isSpawnedActor(item) {\n  return isActor(item) && 'id' in item;\n} // TODO: refactor the return type, this could be written in a better way but it's best to avoid unneccessary breaking changes now\n\nfunction toActorRef(actorRefLike) {\n  var _a;\n\n  return __assign((_a = {\n    subscribe: function () {\n      return {\n        unsubscribe: function () {\n          return void 0;\n        }\n      };\n    },\n    id: 'anonymous',\n    getSnapshot: function () {\n      return undefined;\n    }\n  }, _a[symbolObservable] = function () {\n    return this;\n  }, _a), actorRefLike);\n}\n\nexport { createDeferredActor, createInvocableActor, createNullActor, isActor, isSpawnedActor, toActorRef };\n","import { StateNode } from './StateNode.js';\nimport { IS_PRODUCTION } from './environment.js';\n\nvar warned = false;\nfunction Machine(config, options, initialContext) {\n  if (initialContext === void 0) {\n    initialContext = config.context;\n  }\n\n  return new StateNode(config, options, initialContext);\n}\nfunction createMachine(config, options) {\n  if (!IS_PRODUCTION && !('predictableActionArguments' in config) && !warned) {\n    warned = true;\n    console.warn('It is highly recommended to set `predictableActionArguments` to `true` when using `createMachine`. https://xstate.js.org/docs/guides/actions.html');\n  }\n\n  return new StateNode(config, options);\n}\n\nexport { Machine, createMachine };\n","import { __assign, __spreadArray, __read, __rest } from './_virtual/_tslib.js';\nimport { EMPTY_ACTIVITY_MAP } from './constants.js';\nimport { isString, matchesState, warn } from './utils.js';\nimport { getMeta, nextEvents } from './stateUtils.js';\nimport { initEvent } from './actions.js';\nimport { IS_PRODUCTION } from './environment.js';\n\nfunction stateValuesEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (a === undefined || b === undefined) {\n    return false;\n  }\n\n  if (isString(a) || isString(b)) {\n    return a === b;\n  }\n\n  var aKeys = Object.keys(a);\n  var bKeys = Object.keys(b);\n  return aKeys.length === bKeys.length && aKeys.every(function (key) {\n    return stateValuesEqual(a[key], b[key]);\n  });\n}\nfunction isStateConfig(state) {\n  if (typeof state !== 'object' || state === null) {\n    return false;\n  }\n\n  return 'value' in state && '_event' in state;\n}\n/**\r\n * @deprecated Use `isStateConfig(object)` or `state instanceof State` instead.\r\n */\n\nvar isState = isStateConfig;\nfunction bindActionToState(action, state) {\n  var exec = action.exec;\n\n  var boundAction = __assign(__assign({}, action), {\n    exec: exec !== undefined ? function () {\n      return exec(state.context, state.event, {\n        action: action,\n        state: state,\n        _event: state._event\n      });\n    } : undefined\n  });\n\n  return boundAction;\n}\n\nvar State =\n/*#__PURE__*/\n\n/** @class */\nfunction () {\n  /**\r\n   * Creates a new State instance.\r\n   * @param value The state value\r\n   * @param context The extended state\r\n   * @param historyValue The tree representing historical values of the state nodes\r\n   * @param history The previous state\r\n   * @param actions An array of action objects to execute as side-effects\r\n   * @param activities A mapping of activities and whether they are started (`true`) or stopped (`false`).\r\n   * @param meta\r\n   * @param events Internal event queue. Should be empty with run-to-completion semantics.\r\n   * @param configuration\r\n   */\n  function State(config) {\n    var _this = this;\n\n    var _a;\n\n    this.actions = [];\n    this.activities = EMPTY_ACTIVITY_MAP;\n    this.meta = {};\n    this.events = [];\n    this.value = config.value;\n    this.context = config.context;\n    this._event = config._event;\n    this._sessionid = config._sessionid;\n    this.event = this._event.data;\n    this.historyValue = config.historyValue;\n    this.history = config.history;\n    this.actions = config.actions || [];\n    this.activities = config.activities || EMPTY_ACTIVITY_MAP;\n    this.meta = getMeta(config.configuration);\n    this.events = config.events || [];\n    this.matches = this.matches.bind(this);\n    this.toStrings = this.toStrings.bind(this);\n    this.configuration = config.configuration;\n    this.transitions = config.transitions;\n    this.children = config.children;\n    this.done = !!config.done;\n    this.tags = (_a = Array.isArray(config.tags) ? new Set(config.tags) : config.tags) !== null && _a !== void 0 ? _a : new Set();\n    this.machine = config.machine;\n    Object.defineProperty(this, 'nextEvents', {\n      get: function () {\n        return nextEvents(_this.configuration);\n      }\n    });\n  }\n  /**\r\n   * Creates a new State instance for the given `stateValue` and `context`.\r\n   * @param stateValue\r\n   * @param context\r\n   */\n\n\n  State.from = function (stateValue, context) {\n    if (stateValue instanceof State) {\n      if (stateValue.context !== context) {\n        return new State({\n          value: stateValue.value,\n          context: context,\n          _event: stateValue._event,\n          _sessionid: null,\n          historyValue: stateValue.historyValue,\n          history: stateValue.history,\n          actions: [],\n          activities: stateValue.activities,\n          meta: {},\n          events: [],\n          configuration: [],\n          transitions: [],\n          children: {}\n        });\n      }\n\n      return stateValue;\n    }\n\n    var _event = initEvent;\n    return new State({\n      value: stateValue,\n      context: context,\n      _event: _event,\n      _sessionid: null,\n      historyValue: undefined,\n      history: undefined,\n      actions: [],\n      activities: undefined,\n      meta: undefined,\n      events: [],\n      configuration: [],\n      transitions: [],\n      children: {}\n    });\n  };\n  /**\r\n   * Creates a new State instance for the given `config`.\r\n   * @param config The state config\r\n   */\n\n\n  State.create = function (config) {\n    return new State(config);\n  };\n  /**\r\n   * Creates a new `State` instance for the given `stateValue` and `context` with no actions (side-effects).\r\n   * @param stateValue\r\n   * @param context\r\n   */\n\n\n  State.inert = function (stateValue, context) {\n    if (stateValue instanceof State) {\n      if (!stateValue.actions.length) {\n        return stateValue;\n      }\n\n      var _event = initEvent;\n      return new State({\n        value: stateValue.value,\n        context: context,\n        _event: _event,\n        _sessionid: null,\n        historyValue: stateValue.historyValue,\n        history: stateValue.history,\n        activities: stateValue.activities,\n        configuration: stateValue.configuration,\n        transitions: [],\n        children: {}\n      });\n    }\n\n    return State.from(stateValue, context);\n  };\n  /**\r\n   * Returns an array of all the string leaf state node paths.\r\n   * @param stateValue\r\n   * @param delimiter The character(s) that separate each subpath in the string state node path.\r\n   */\n\n\n  State.prototype.toStrings = function (stateValue, delimiter) {\n    var _this = this;\n\n    if (stateValue === void 0) {\n      stateValue = this.value;\n    }\n\n    if (delimiter === void 0) {\n      delimiter = '.';\n    }\n\n    if (isString(stateValue)) {\n      return [stateValue];\n    }\n\n    var valueKeys = Object.keys(stateValue);\n    return valueKeys.concat.apply(valueKeys, __spreadArray([], __read(valueKeys.map(function (key) {\n      return _this.toStrings(stateValue[key], delimiter).map(function (s) {\n        return key + delimiter + s;\n      });\n    })), false));\n  };\n\n  State.prototype.toJSON = function () {\n    var _a = this;\n        _a.configuration;\n        _a.transitions;\n        var tags = _a.tags;\n        _a.machine;\n        var jsonValues = __rest(_a, [\"configuration\", \"transitions\", \"tags\", \"machine\"]);\n\n    return __assign(__assign({}, jsonValues), {\n      tags: Array.from(tags)\n    });\n  };\n\n  State.prototype.matches = function (parentStateValue) {\n    return matchesState(parentStateValue, this.value);\n  };\n  /**\r\n   * Whether the current state configuration has a state node with the specified `tag`.\r\n   * @param tag\r\n   */\n\n\n  State.prototype.hasTag = function (tag) {\n    return this.tags.has(tag);\n  };\n  /**\r\n   * Determines whether sending the `event` will cause a non-forbidden transition\r\n   * to be selected, even if the transitions have no actions nor\r\n   * change the state value.\r\n   *\r\n   * @param event The event to test\r\n   * @returns Whether the event will cause a transition\r\n   */\n\n\n  State.prototype.can = function (event) {\n    var _a;\n\n    if (IS_PRODUCTION) {\n      warn(!!this.machine, \"state.can(...) used outside of a machine-created State object; this will always return false.\");\n    }\n\n    var transitionData = (_a = this.machine) === null || _a === void 0 ? void 0 : _a.getTransitionData(this, event);\n    return !!(transitionData === null || transitionData === void 0 ? void 0 : transitionData.transitions.length) && // Check that at least one transition is not forbidden\n    transitionData.transitions.some(function (t) {\n      return t.target !== undefined || t.actions.length;\n    });\n  };\n\n  return State;\n}();\n\nexport { State, bindActionToState, isState, isStateConfig, stateValuesEqual };\n","import { __assign, __spreadArray, __read, __values, __rest } from './_virtual/_tslib.js';\nimport { isFunction, mapValues, isArray, flatten, toArray, toStateValue, isString, getEventType, toSCXMLEvent, matchesState, path, evaluateGuard, mapContext, isRaisableAction, pathToStateValue, isBuiltInEvent, partition, updateHistoryValue, toStatePath, mapFilterValues, warn, toStatePaths, nestedPath, normalizeTarget, toGuard, toTransitionConfigArray, isMachine, createInvokeId } from './utils.js';\nimport { State, stateValuesEqual } from './State.js';\nimport { start as start$1, stop as stop$1, invoke, update, nullEvent } from './actionTypes.js';\nimport { done, start, toActionObjects, raise, stop, resolveActions, doneInvoke, error, toActionObject, toActivityDefinition, after, send, cancel, initEvent } from './actions.js';\nimport { IS_PRODUCTION } from './environment.js';\nimport { STATE_DELIMITER } from './constants.js';\nimport { getAllStateNodes, getConfiguration, isInFinalState, getTagsFromConfiguration, has, getChildren, getValue, isLeafNode, getAllChildren } from './stateUtils.js';\nimport { createInvocableActor } from './Actor.js';\nimport { toInvokeDefinition } from './invokeUtils.js';\n\nvar NULL_EVENT = '';\nvar STATE_IDENTIFIER = '#';\nvar WILDCARD = '*';\nvar EMPTY_OBJECT = {};\n\nvar isStateId = function (str) {\n  return str[0] === STATE_IDENTIFIER;\n};\n\nvar createDefaultOptions = function () {\n  return {\n    actions: {},\n    guards: {},\n    services: {},\n    activities: {},\n    delays: {}\n  };\n};\n\nvar validateArrayifiedTransitions = function (stateNode, event, transitions) {\n  var hasNonLastUnguardedTarget = transitions.slice(0, -1).some(function (transition) {\n    return !('cond' in transition) && !('in' in transition) && (isString(transition.target) || isMachine(transition.target));\n  });\n  var eventText = event === NULL_EVENT ? 'the transient event' : \"event '\".concat(event, \"'\");\n  warn(!hasNonLastUnguardedTarget, \"One or more transitions for \".concat(eventText, \" on state '\").concat(stateNode.id, \"' are unreachable. \") + \"Make sure that the default transition is the last one defined.\");\n};\n\nvar StateNode =\n/*#__PURE__*/\n\n/** @class */\nfunction () {\n  function StateNode(\n  /**\r\n   * The raw config used to create the machine.\r\n   */\n  config, options,\n  /**\r\n   * The initial extended state\r\n   */\n  _context, // TODO: this is unsafe, but we're removing it in v5 anyway\n  _stateInfo) {\n    if (_context === void 0) {\n      _context = 'context' in config ? config.context : undefined;\n    }\n\n    var _this = this;\n\n    var _a;\n\n    this.config = config;\n    this._context = _context;\n    /**\r\n     * The order this state node appears. Corresponds to the implicit SCXML document order.\r\n     */\n\n    this.order = -1;\n    this.__xstatenode = true;\n    this.__cache = {\n      events: undefined,\n      relativeValue: new Map(),\n      initialStateValue: undefined,\n      initialState: undefined,\n      on: undefined,\n      transitions: undefined,\n      candidates: {},\n      delayedTransitions: undefined\n    };\n    this.idMap = {};\n    this.tags = [];\n    this.options = Object.assign(createDefaultOptions(), options);\n    this.parent = _stateInfo === null || _stateInfo === void 0 ? void 0 : _stateInfo.parent;\n    this.key = this.config.key || (_stateInfo === null || _stateInfo === void 0 ? void 0 : _stateInfo.key) || this.config.id || '(machine)';\n    this.machine = this.parent ? this.parent.machine : this;\n    this.path = this.parent ? this.parent.path.concat(this.key) : [];\n    this.delimiter = this.config.delimiter || (this.parent ? this.parent.delimiter : STATE_DELIMITER);\n    this.id = this.config.id || __spreadArray([this.machine.key], __read(this.path), false).join(this.delimiter);\n    this.version = this.parent ? this.parent.version : this.config.version;\n    this.type = this.config.type || (this.config.parallel ? 'parallel' : this.config.states && Object.keys(this.config.states).length ? 'compound' : this.config.history ? 'history' : 'atomic');\n    this.schema = this.parent ? this.machine.schema : (_a = this.config.schema) !== null && _a !== void 0 ? _a : {};\n    this.description = this.config.description;\n\n    if (!IS_PRODUCTION) {\n      warn(!('parallel' in this.config), \"The \\\"parallel\\\" property is deprecated and will be removed in version 4.1. \".concat(this.config.parallel ? \"Replace with `type: 'parallel'`\" : \"Use `type: '\".concat(this.type, \"'`\"), \" in the config for state node '\").concat(this.id, \"' instead.\"));\n    }\n\n    this.initial = this.config.initial;\n    this.states = this.config.states ? mapValues(this.config.states, function (stateConfig, key) {\n      var _a;\n\n      var stateNode = new StateNode(stateConfig, {}, undefined, {\n        parent: _this,\n        key: key\n      });\n      Object.assign(_this.idMap, __assign((_a = {}, _a[stateNode.id] = stateNode, _a), stateNode.idMap));\n      return stateNode;\n    }) : EMPTY_OBJECT; // Document order\n\n    var order = 0;\n\n    function dfs(stateNode) {\n      var e_1, _a;\n\n      stateNode.order = order++;\n\n      try {\n        for (var _b = __values(getAllChildren(stateNode)), _c = _b.next(); !_c.done; _c = _b.next()) {\n          var child = _c.value;\n          dfs(child);\n        }\n      } catch (e_1_1) {\n        e_1 = {\n          error: e_1_1\n        };\n      } finally {\n        try {\n          if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        } finally {\n          if (e_1) throw e_1.error;\n        }\n      }\n    }\n\n    dfs(this); // History config\n\n    this.history = this.config.history === true ? 'shallow' : this.config.history || false;\n    this._transient = !!this.config.always || (!this.config.on ? false : Array.isArray(this.config.on) ? this.config.on.some(function (_a) {\n      var event = _a.event;\n      return event === NULL_EVENT;\n    }) : NULL_EVENT in this.config.on);\n    this.strict = !!this.config.strict; // TODO: deprecate (entry)\n\n    this.onEntry = toArray(this.config.entry || this.config.onEntry).map(function (action) {\n      return toActionObject(action);\n    }); // TODO: deprecate (exit)\n\n    this.onExit = toArray(this.config.exit || this.config.onExit).map(function (action) {\n      return toActionObject(action);\n    });\n    this.meta = this.config.meta;\n    this.doneData = this.type === 'final' ? this.config.data : undefined;\n    this.invoke = toArray(this.config.invoke).map(function (invokeConfig, i) {\n      var _a, _b;\n\n      if (isMachine(invokeConfig)) {\n        var invokeId = createInvokeId(_this.id, i);\n        _this.machine.options.services = __assign((_a = {}, _a[invokeId] = invokeConfig, _a), _this.machine.options.services);\n        return toInvokeDefinition({\n          src: invokeId,\n          id: invokeId\n        });\n      } else if (isString(invokeConfig.src)) {\n        var invokeId = invokeConfig.id || createInvokeId(_this.id, i);\n        return toInvokeDefinition(__assign(__assign({}, invokeConfig), {\n          id: invokeId,\n          src: invokeConfig.src\n        }));\n      } else if (isMachine(invokeConfig.src) || isFunction(invokeConfig.src)) {\n        var invokeId = invokeConfig.id || createInvokeId(_this.id, i);\n        _this.machine.options.services = __assign((_b = {}, _b[invokeId] = invokeConfig.src, _b), _this.machine.options.services);\n        return toInvokeDefinition(__assign(__assign({\n          id: invokeId\n        }, invokeConfig), {\n          src: invokeId\n        }));\n      } else {\n        var invokeSource = invokeConfig.src;\n        return toInvokeDefinition(__assign(__assign({\n          id: createInvokeId(_this.id, i)\n        }, invokeConfig), {\n          src: invokeSource\n        }));\n      }\n    });\n    this.activities = toArray(this.config.activities).concat(this.invoke).map(function (activity) {\n      return toActivityDefinition(activity);\n    });\n    this.transition = this.transition.bind(this);\n    this.tags = toArray(this.config.tags); // TODO: this is the real fix for initialization once\n    // state node getters are deprecated\n    // if (!this.parent) {\n    //   this._init();\n    // }\n  }\n\n  StateNode.prototype._init = function () {\n    if (this.__cache.transitions) {\n      return;\n    }\n\n    getAllStateNodes(this).forEach(function (stateNode) {\n      return stateNode.on;\n    });\n  };\n  /**\r\n   * Clones this state machine with custom options and context.\r\n   *\r\n   * @param options Options (actions, guards, activities, services) to recursively merge with the existing options.\r\n   * @param context Custom context (will override predefined context)\r\n   */\n\n\n  StateNode.prototype.withConfig = function (options, context) {\n    var _a = this.options,\n        actions = _a.actions,\n        activities = _a.activities,\n        guards = _a.guards,\n        services = _a.services,\n        delays = _a.delays;\n    return new StateNode(this.config, {\n      actions: __assign(__assign({}, actions), options.actions),\n      activities: __assign(__assign({}, activities), options.activities),\n      guards: __assign(__assign({}, guards), options.guards),\n      services: __assign(__assign({}, services), options.services),\n      delays: __assign(__assign({}, delays), options.delays)\n    }, context !== null && context !== void 0 ? context : this.context);\n  };\n  /**\r\n   * Clones this state machine with custom context.\r\n   *\r\n   * @param context Custom context (will override predefined context, not recursive)\r\n   */\n\n\n  StateNode.prototype.withContext = function (context) {\n    return new StateNode(this.config, this.options, context);\n  };\n\n  Object.defineProperty(StateNode.prototype, \"context\", {\n    get: function () {\n      return isFunction(this._context) ? this._context() : this._context;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(StateNode.prototype, \"definition\", {\n    /**\r\n     * The well-structured state node definition.\r\n     */\n    get: function () {\n      return {\n        id: this.id,\n        key: this.key,\n        version: this.version,\n        context: this.context,\n        type: this.type,\n        initial: this.initial,\n        history: this.history,\n        states: mapValues(this.states, function (state) {\n          return state.definition;\n        }),\n        on: this.on,\n        transitions: this.transitions,\n        entry: this.onEntry,\n        exit: this.onExit,\n        activities: this.activities || [],\n        meta: this.meta,\n        order: this.order || -1,\n        data: this.doneData,\n        invoke: this.invoke,\n        description: this.description,\n        tags: this.tags\n      };\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  StateNode.prototype.toJSON = function () {\n    return this.definition;\n  };\n\n  Object.defineProperty(StateNode.prototype, \"on\", {\n    /**\r\n     * The mapping of events to transitions.\r\n     */\n    get: function () {\n      if (this.__cache.on) {\n        return this.__cache.on;\n      }\n\n      var transitions = this.transitions;\n      return this.__cache.on = transitions.reduce(function (map, transition) {\n        map[transition.eventType] = map[transition.eventType] || [];\n        map[transition.eventType].push(transition);\n        return map;\n      }, {});\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(StateNode.prototype, \"after\", {\n    get: function () {\n      return this.__cache.delayedTransitions || (this.__cache.delayedTransitions = this.getDelayedTransitions(), this.__cache.delayedTransitions);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(StateNode.prototype, \"transitions\", {\n    /**\r\n     * All the transitions that can be taken from this state node.\r\n     */\n    get: function () {\n      return this.__cache.transitions || (this.__cache.transitions = this.formatTransitions(), this.__cache.transitions);\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  StateNode.prototype.getCandidates = function (eventName) {\n    if (this.__cache.candidates[eventName]) {\n      return this.__cache.candidates[eventName];\n    }\n\n    var transient = eventName === NULL_EVENT;\n    var candidates = this.transitions.filter(function (transition) {\n      var sameEventType = transition.eventType === eventName; // null events should only match against eventless transitions\n\n      return transient ? sameEventType : sameEventType || transition.eventType === WILDCARD;\n    });\n    this.__cache.candidates[eventName] = candidates;\n    return candidates;\n  };\n  /**\r\n   * All delayed transitions from the config.\r\n   */\n\n\n  StateNode.prototype.getDelayedTransitions = function () {\n    var _this = this;\n\n    var afterConfig = this.config.after;\n\n    if (!afterConfig) {\n      return [];\n    }\n\n    var mutateEntryExit = function (delay, i) {\n      var delayRef = isFunction(delay) ? \"\".concat(_this.id, \":delay[\").concat(i, \"]\") : delay;\n      var eventType = after(delayRef, _this.id);\n\n      _this.onEntry.push(send(eventType, {\n        delay: delay\n      }));\n\n      _this.onExit.push(cancel(eventType));\n\n      return eventType;\n    };\n\n    var delayedTransitions = isArray(afterConfig) ? afterConfig.map(function (transition, i) {\n      var eventType = mutateEntryExit(transition.delay, i);\n      return __assign(__assign({}, transition), {\n        event: eventType\n      });\n    }) : flatten(Object.keys(afterConfig).map(function (delay, i) {\n      var configTransition = afterConfig[delay];\n      var resolvedTransition = isString(configTransition) ? {\n        target: configTransition\n      } : configTransition;\n      var resolvedDelay = !isNaN(+delay) ? +delay : delay;\n      var eventType = mutateEntryExit(resolvedDelay, i);\n      return toArray(resolvedTransition).map(function (transition) {\n        return __assign(__assign({}, transition), {\n          event: eventType,\n          delay: resolvedDelay\n        });\n      });\n    }));\n    return delayedTransitions.map(function (delayedTransition) {\n      var delay = delayedTransition.delay;\n      return __assign(__assign({}, _this.formatTransition(delayedTransition)), {\n        delay: delay\n      });\n    });\n  };\n  /**\r\n   * Returns the state nodes represented by the current state value.\r\n   *\r\n   * @param state The state value or State instance\r\n   */\n\n\n  StateNode.prototype.getStateNodes = function (state) {\n    var _a;\n\n    var _this = this;\n\n    if (!state) {\n      return [];\n    }\n\n    var stateValue = state instanceof State ? state.value : toStateValue(state, this.delimiter);\n\n    if (isString(stateValue)) {\n      var initialStateValue = this.getStateNode(stateValue).initial;\n      return initialStateValue !== undefined ? this.getStateNodes((_a = {}, _a[stateValue] = initialStateValue, _a)) : [this, this.states[stateValue]];\n    }\n\n    var subStateKeys = Object.keys(stateValue);\n    var subStateNodes = [this];\n    subStateNodes.push.apply(subStateNodes, __spreadArray([], __read(flatten(subStateKeys.map(function (subStateKey) {\n      return _this.getStateNode(subStateKey).getStateNodes(stateValue[subStateKey]);\n    }))), false));\n    return subStateNodes;\n  };\n  /**\r\n   * Returns `true` if this state node explicitly handles the given event.\r\n   *\r\n   * @param event The event in question\r\n   */\n\n\n  StateNode.prototype.handles = function (event) {\n    var eventType = getEventType(event);\n    return this.events.includes(eventType);\n  };\n  /**\r\n   * Resolves the given `state` to a new `State` instance relative to this machine.\r\n   *\r\n   * This ensures that `.events` and `.nextEvents` represent the correct values.\r\n   *\r\n   * @param state The state to resolve\r\n   */\n\n\n  StateNode.prototype.resolveState = function (state) {\n    var stateFromConfig = state instanceof State ? state : State.create(state);\n    var configuration = Array.from(getConfiguration([], this.getStateNodes(stateFromConfig.value)));\n    return new State(__assign(__assign({}, stateFromConfig), {\n      value: this.resolve(stateFromConfig.value),\n      configuration: configuration,\n      done: isInFinalState(configuration, this),\n      tags: getTagsFromConfiguration(configuration),\n      machine: this.machine\n    }));\n  };\n\n  StateNode.prototype.transitionLeafNode = function (stateValue, state, _event) {\n    var stateNode = this.getStateNode(stateValue);\n    var next = stateNode.next(state, _event);\n\n    if (!next || !next.transitions.length) {\n      return this.next(state, _event);\n    }\n\n    return next;\n  };\n\n  StateNode.prototype.transitionCompoundNode = function (stateValue, state, _event) {\n    var subStateKeys = Object.keys(stateValue);\n    var stateNode = this.getStateNode(subStateKeys[0]);\n\n    var next = stateNode._transition(stateValue[subStateKeys[0]], state, _event);\n\n    if (!next || !next.transitions.length) {\n      return this.next(state, _event);\n    }\n\n    return next;\n  };\n\n  StateNode.prototype.transitionParallelNode = function (stateValue, state, _event) {\n    var e_2, _a;\n\n    var transitionMap = {};\n\n    try {\n      for (var _b = __values(Object.keys(stateValue)), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var subStateKey = _c.value;\n        var subStateValue = stateValue[subStateKey];\n\n        if (!subStateValue) {\n          continue;\n        }\n\n        var subStateNode = this.getStateNode(subStateKey);\n\n        var next = subStateNode._transition(subStateValue, state, _event);\n\n        if (next) {\n          transitionMap[subStateKey] = next;\n        }\n      }\n    } catch (e_2_1) {\n      e_2 = {\n        error: e_2_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_2) throw e_2.error;\n      }\n    }\n\n    var stateTransitions = Object.keys(transitionMap).map(function (key) {\n      return transitionMap[key];\n    });\n    var enabledTransitions = flatten(stateTransitions.map(function (st) {\n      return st.transitions;\n    }));\n    var willTransition = stateTransitions.some(function (st) {\n      return st.transitions.length > 0;\n    });\n\n    if (!willTransition) {\n      return this.next(state, _event);\n    }\n\n    var configuration = flatten(Object.keys(transitionMap).map(function (key) {\n      return transitionMap[key].configuration;\n    }));\n    return {\n      transitions: enabledTransitions,\n      exitSet: flatten(stateTransitions.map(function (t) {\n        return t.exitSet;\n      })),\n      configuration: configuration,\n      source: state,\n      actions: flatten(Object.keys(transitionMap).map(function (key) {\n        return transitionMap[key].actions;\n      }))\n    };\n  };\n\n  StateNode.prototype._transition = function (stateValue, state, _event) {\n    // leaf node\n    if (isString(stateValue)) {\n      return this.transitionLeafNode(stateValue, state, _event);\n    } // hierarchical node\n\n\n    if (Object.keys(stateValue).length === 1) {\n      return this.transitionCompoundNode(stateValue, state, _event);\n    } // orthogonal node\n\n\n    return this.transitionParallelNode(stateValue, state, _event);\n  };\n\n  StateNode.prototype.getTransitionData = function (state, event) {\n    return this._transition(state.value, state, toSCXMLEvent(event));\n  };\n\n  StateNode.prototype.next = function (state, _event) {\n    var e_3, _a;\n\n    var _this = this;\n\n    var eventName = _event.name;\n    var actions = [];\n    var nextStateNodes = [];\n    var selectedTransition;\n\n    try {\n      for (var _b = __values(this.getCandidates(eventName)), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var candidate = _c.value;\n        var cond = candidate.cond,\n            stateIn = candidate.in;\n        var resolvedContext = state.context;\n        var isInState = stateIn ? isString(stateIn) && isStateId(stateIn) ? // Check if in state by ID\n        state.matches(toStateValue(this.getStateNodeById(stateIn).path, this.delimiter)) : // Check if in state by relative grandparent\n        matchesState(toStateValue(stateIn, this.delimiter), path(this.path.slice(0, -2))(state.value)) : true;\n        var guardPassed = false;\n\n        try {\n          guardPassed = !cond || evaluateGuard(this.machine, cond, resolvedContext, _event, state);\n        } catch (err) {\n          throw new Error(\"Unable to evaluate guard '\".concat(cond.name || cond.type, \"' in transition for event '\").concat(eventName, \"' in state node '\").concat(this.id, \"':\\n\").concat(err.message));\n        }\n\n        if (guardPassed && isInState) {\n          if (candidate.target !== undefined) {\n            nextStateNodes = candidate.target;\n          }\n\n          actions.push.apply(actions, __spreadArray([], __read(candidate.actions), false));\n          selectedTransition = candidate;\n          break;\n        }\n      }\n    } catch (e_3_1) {\n      e_3 = {\n        error: e_3_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_3) throw e_3.error;\n      }\n    }\n\n    if (!selectedTransition) {\n      return undefined;\n    }\n\n    if (!nextStateNodes.length) {\n      return {\n        transitions: [selectedTransition],\n        exitSet: [],\n        configuration: state.value ? [this] : [],\n        source: state,\n        actions: actions\n      };\n    }\n\n    var allNextStateNodes = flatten(nextStateNodes.map(function (stateNode) {\n      return _this.getRelativeStateNodes(stateNode, state.historyValue);\n    }));\n    var isInternal = !!selectedTransition.internal;\n    return {\n      transitions: [selectedTransition],\n      exitSet: isInternal ? [] : flatten(nextStateNodes.map(function (targetNode) {\n        return _this.getPotentiallyReenteringNodes(targetNode);\n      })),\n      configuration: allNextStateNodes,\n      source: state,\n      actions: actions\n    };\n  }; // even though the name of this function mentions reentry nodes\n  // we are pushing its result into `exitSet`\n  // that's because what we exit might be reentered (it's an invariant of reentrancy)\n\n\n  StateNode.prototype.getPotentiallyReenteringNodes = function (targetNode) {\n    if (this.order < targetNode.order) {\n      return [this];\n    }\n\n    var nodes = [];\n    var marker = this;\n    var possibleAncestor = targetNode;\n\n    while (marker && marker !== possibleAncestor) {\n      nodes.push(marker);\n      marker = marker.parent;\n    }\n\n    if (marker !== possibleAncestor) {\n      // we never got to `possibleAncestor`, therefore the initial `marker` \"escapes\" it\n      // it's in a different part of the tree so no states will be reentered for such an external transition\n      return [];\n    }\n\n    nodes.push(possibleAncestor);\n    return nodes;\n  };\n\n  StateNode.prototype.getActions = function (resolvedConfig, isDone, transition, currentContext, _event, prevState, predictableExec) {\n    var e_4, _a, e_5, _b;\n\n    var _this = this;\n\n    var prevConfig = prevState ? getConfiguration([], this.getStateNodes(prevState.value)) : [];\n    var entrySet = new Set();\n\n    try {\n      for (var _c = __values(Array.from(resolvedConfig).sort(function (a, b) {\n        return a.order - b.order;\n      })), _d = _c.next(); !_d.done; _d = _c.next()) {\n        var sn = _d.value;\n\n        if (!has(prevConfig, sn) || has(transition.exitSet, sn) || sn.parent && entrySet.has(sn.parent)) {\n          entrySet.add(sn);\n        }\n      }\n    } catch (e_4_1) {\n      e_4 = {\n        error: e_4_1\n      };\n    } finally {\n      try {\n        if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n      } finally {\n        if (e_4) throw e_4.error;\n      }\n    }\n\n    try {\n      for (var prevConfig_1 = __values(prevConfig), prevConfig_1_1 = prevConfig_1.next(); !prevConfig_1_1.done; prevConfig_1_1 = prevConfig_1.next()) {\n        var sn = prevConfig_1_1.value;\n\n        if (!has(resolvedConfig, sn) || has(transition.exitSet, sn.parent)) {\n          transition.exitSet.push(sn);\n        }\n      }\n    } catch (e_5_1) {\n      e_5 = {\n        error: e_5_1\n      };\n    } finally {\n      try {\n        if (prevConfig_1_1 && !prevConfig_1_1.done && (_b = prevConfig_1.return)) _b.call(prevConfig_1);\n      } finally {\n        if (e_5) throw e_5.error;\n      }\n    }\n\n    transition.exitSet.sort(function (a, b) {\n      return b.order - a.order;\n    });\n    var entryStates = Array.from(entrySet).sort(function (a, b) {\n      return a.order - b.order;\n    });\n    var exitStates = new Set(transition.exitSet);\n    var doneEvents = flatten(entryStates.map(function (sn) {\n      var events = [];\n\n      if (sn.type !== 'final') {\n        return events;\n      }\n\n      var parent = sn.parent;\n\n      if (!parent.parent) {\n        return events;\n      }\n\n      events.push(done(sn.id, sn.doneData), // TODO: deprecate - final states should not emit done events for their own state.\n      done(parent.id, sn.doneData ? mapContext(sn.doneData, currentContext, _event) : undefined));\n      var grandparent = parent.parent;\n\n      if (grandparent.type === 'parallel') {\n        if (getChildren(grandparent).every(function (parentNode) {\n          return isInFinalState(transition.configuration, parentNode);\n        })) {\n          events.push(done(grandparent.id));\n        }\n      }\n\n      return events;\n    }));\n    var entryActions = entryStates.map(function (stateNode) {\n      var entryActions = stateNode.onEntry;\n      var invokeActions = stateNode.activities.map(function (activity) {\n        return start(activity);\n      });\n      return {\n        type: 'entry',\n        actions: toActionObjects(predictableExec ? __spreadArray(__spreadArray([], __read(entryActions), false), __read(invokeActions), false) : __spreadArray(__spreadArray([], __read(invokeActions), false), __read(entryActions), false), _this.machine.options.actions)\n      };\n    }).concat({\n      type: 'state_done',\n      actions: doneEvents.map(function (event) {\n        return raise(event);\n      })\n    });\n    var exitActions = Array.from(exitStates).map(function (stateNode) {\n      return {\n        type: 'exit',\n        actions: toActionObjects(__spreadArray(__spreadArray([], __read(stateNode.onExit), false), __read(stateNode.activities.map(function (activity) {\n          return stop(activity);\n        })), false), _this.machine.options.actions)\n      };\n    });\n    var actions = exitActions.concat({\n      type: 'transition',\n      actions: toActionObjects(transition.actions, this.machine.options.actions)\n    }).concat(entryActions);\n\n    if (isDone) {\n      var stopActions = toActionObjects(flatten(__spreadArray([], __read(resolvedConfig), false).sort(function (a, b) {\n        return b.order - a.order;\n      }).map(function (stateNode) {\n        return stateNode.onExit;\n      })), this.machine.options.actions).filter(function (action) {\n        return !isRaisableAction(action);\n      });\n      return actions.concat({\n        type: 'stop',\n        actions: stopActions\n      });\n    }\n\n    return actions;\n  };\n  /**\r\n   * Determines the next state given the current `state` and sent `event`.\r\n   *\r\n   * @param state The current State instance or state value\r\n   * @param event The event that was sent at the current state\r\n   * @param context The current context (extended state) of the current state\r\n   */\n\n\n  StateNode.prototype.transition = function (state, event, context, exec) {\n    if (state === void 0) {\n      state = this.initialState;\n    }\n\n    var _event = toSCXMLEvent(event);\n\n    var currentState;\n\n    if (state instanceof State) {\n      currentState = context === undefined ? state : this.resolveState(State.from(state, context));\n    } else {\n      var resolvedStateValue = isString(state) ? this.resolve(pathToStateValue(this.getResolvedPath(state))) : this.resolve(state);\n      var resolvedContext = context !== null && context !== void 0 ? context : this.machine.context;\n      currentState = this.resolveState(State.from(resolvedStateValue, resolvedContext));\n    }\n\n    if (!IS_PRODUCTION && _event.name === WILDCARD) {\n      throw new Error(\"An event cannot have the wildcard type ('\".concat(WILDCARD, \"')\"));\n    }\n\n    if (this.strict) {\n      if (!this.events.includes(_event.name) && !isBuiltInEvent(_event.name)) {\n        throw new Error(\"Machine '\".concat(this.id, \"' does not accept event '\").concat(_event.name, \"'\"));\n      }\n    }\n\n    var stateTransition = this._transition(currentState.value, currentState, _event) || {\n      transitions: [],\n      configuration: [],\n      exitSet: [],\n      source: currentState,\n      actions: []\n    };\n    var prevConfig = getConfiguration([], this.getStateNodes(currentState.value));\n    var resolvedConfig = stateTransition.configuration.length ? getConfiguration(prevConfig, stateTransition.configuration) : prevConfig;\n    stateTransition.configuration = __spreadArray([], __read(resolvedConfig), false);\n    return this.resolveTransition(stateTransition, currentState, currentState.context, exec, _event);\n  };\n\n  StateNode.prototype.resolveRaisedTransition = function (state, _event, originalEvent, predictableExec) {\n    var _a;\n\n    var currentActions = state.actions;\n    state = this.transition(state, _event, undefined, predictableExec); // Save original event to state\n    // TODO: this should be the raised event! Delete in V5 (breaking)\n\n    state._event = originalEvent;\n    state.event = originalEvent.data;\n\n    (_a = state.actions).unshift.apply(_a, __spreadArray([], __read(currentActions), false));\n\n    return state;\n  };\n\n  StateNode.prototype.resolveTransition = function (stateTransition, currentState, context, predictableExec, _event) {\n    var e_6, _a, e_7, _b;\n\n    var _this = this;\n\n    if (_event === void 0) {\n      _event = initEvent;\n    }\n\n    var configuration = stateTransition.configuration; // Transition will \"apply\" if:\n    // - this is the initial state (there is no current state)\n    // - OR there are transitions\n\n    var willTransition = !currentState || stateTransition.transitions.length > 0;\n    var resolvedConfiguration = willTransition ? stateTransition.configuration : currentState ? currentState.configuration : [];\n    var isDone = isInFinalState(resolvedConfiguration, this);\n    var resolvedStateValue = willTransition ? getValue(this.machine, configuration) : undefined;\n    var historyValue = currentState ? currentState.historyValue ? currentState.historyValue : stateTransition.source ? this.machine.historyValue(currentState.value) : undefined : undefined;\n    var actionBlocks = this.getActions(new Set(resolvedConfiguration), isDone, stateTransition, context, _event, currentState, predictableExec);\n    var activities = currentState ? __assign({}, currentState.activities) : {};\n\n    try {\n      for (var actionBlocks_1 = __values(actionBlocks), actionBlocks_1_1 = actionBlocks_1.next(); !actionBlocks_1_1.done; actionBlocks_1_1 = actionBlocks_1.next()) {\n        var block = actionBlocks_1_1.value;\n\n        try {\n          for (var _c = (e_7 = void 0, __values(block.actions)), _d = _c.next(); !_d.done; _d = _c.next()) {\n            var action = _d.value;\n\n            if (action.type === start$1) {\n              activities[action.activity.id || action.activity.type] = action;\n            } else if (action.type === stop$1) {\n              activities[action.activity.id || action.activity.type] = false;\n            }\n          }\n        } catch (e_7_1) {\n          e_7 = {\n            error: e_7_1\n          };\n        } finally {\n          try {\n            if (_d && !_d.done && (_b = _c.return)) _b.call(_c);\n          } finally {\n            if (e_7) throw e_7.error;\n          }\n        }\n      }\n    } catch (e_6_1) {\n      e_6 = {\n        error: e_6_1\n      };\n    } finally {\n      try {\n        if (actionBlocks_1_1 && !actionBlocks_1_1.done && (_a = actionBlocks_1.return)) _a.call(actionBlocks_1);\n      } finally {\n        if (e_6) throw e_6.error;\n      }\n    }\n\n    var _e = __read(resolveActions(this, currentState, context, _event, actionBlocks, predictableExec, this.machine.config.predictableActionArguments || this.machine.config.preserveActionOrder), 2),\n        resolvedActions = _e[0],\n        updatedContext = _e[1];\n\n    var _f = __read(partition(resolvedActions, isRaisableAction), 2),\n        raisedEvents = _f[0],\n        nonRaisedActions = _f[1];\n\n    var invokeActions = resolvedActions.filter(function (action) {\n      var _a;\n\n      return action.type === start$1 && ((_a = action.activity) === null || _a === void 0 ? void 0 : _a.type) === invoke;\n    });\n    var children = invokeActions.reduce(function (acc, action) {\n      acc[action.activity.id] = createInvocableActor(action.activity, _this.machine, updatedContext, _event);\n      return acc;\n    }, currentState ? __assign({}, currentState.children) : {});\n    var nextState = new State({\n      value: resolvedStateValue || currentState.value,\n      context: updatedContext,\n      _event: _event,\n      // Persist _sessionid between states\n      _sessionid: currentState ? currentState._sessionid : null,\n      historyValue: resolvedStateValue ? historyValue ? updateHistoryValue(historyValue, resolvedStateValue) : undefined : currentState ? currentState.historyValue : undefined,\n      history: !resolvedStateValue || stateTransition.source ? currentState : undefined,\n      actions: resolvedStateValue ? nonRaisedActions : [],\n      activities: resolvedStateValue ? activities : currentState ? currentState.activities : {},\n      events: [],\n      configuration: resolvedConfiguration,\n      transitions: stateTransition.transitions,\n      children: children,\n      done: isDone,\n      tags: getTagsFromConfiguration(resolvedConfiguration),\n      machine: this\n    });\n    var didUpdateContext = context !== updatedContext;\n    nextState.changed = _event.name === update || didUpdateContext; // Dispose of penultimate histories to prevent memory leaks\n\n    var history = nextState.history;\n\n    if (history) {\n      delete history.history;\n    } // There are transient transitions if the machine is not in a final state\n    // and if some of the state nodes have transient (\"always\") transitions.\n\n\n    var hasAlwaysTransitions = !isDone && (this._transient || configuration.some(function (stateNode) {\n      return stateNode._transient;\n    })); // If there are no enabled transitions, check if there are transient transitions.\n    // If there are transient transitions, continue checking for more transitions\n    // because an transient transition should be triggered even if there are no\n    // enabled transitions.\n    //\n    // If we're already working on an transient transition then stop to prevent an infinite loop.\n    //\n    // Otherwise, if there are no enabled nor transient transitions, we are done.\n\n    if (!willTransition && (!hasAlwaysTransitions || _event.name === NULL_EVENT)) {\n      return nextState;\n    }\n\n    var maybeNextState = nextState;\n\n    if (!isDone) {\n      if (hasAlwaysTransitions) {\n        maybeNextState = this.resolveRaisedTransition(maybeNextState, {\n          type: nullEvent\n        }, _event, predictableExec);\n      }\n\n      while (raisedEvents.length) {\n        var raisedEvent = raisedEvents.shift();\n        maybeNextState = this.resolveRaisedTransition(maybeNextState, raisedEvent._event, _event, predictableExec);\n      }\n    } // Detect if state changed\n\n\n    var changed = maybeNextState.changed || (history ? !!maybeNextState.actions.length || didUpdateContext || typeof history.value !== typeof maybeNextState.value || !stateValuesEqual(maybeNextState.value, history.value) : undefined);\n    maybeNextState.changed = changed; // Preserve original history after raised events\n\n    maybeNextState.history = history;\n    return maybeNextState;\n  };\n  /**\r\n   * Returns the child state node from its relative `stateKey`, or throws.\r\n   */\n\n\n  StateNode.prototype.getStateNode = function (stateKey) {\n    if (isStateId(stateKey)) {\n      return this.machine.getStateNodeById(stateKey);\n    }\n\n    if (!this.states) {\n      throw new Error(\"Unable to retrieve child state '\".concat(stateKey, \"' from '\").concat(this.id, \"'; no child states exist.\"));\n    }\n\n    var result = this.states[stateKey];\n\n    if (!result) {\n      throw new Error(\"Child state '\".concat(stateKey, \"' does not exist on '\").concat(this.id, \"'\"));\n    }\n\n    return result;\n  };\n  /**\r\n   * Returns the state node with the given `stateId`, or throws.\r\n   *\r\n   * @param stateId The state ID. The prefix \"#\" is removed.\r\n   */\n\n\n  StateNode.prototype.getStateNodeById = function (stateId) {\n    var resolvedStateId = isStateId(stateId) ? stateId.slice(STATE_IDENTIFIER.length) : stateId;\n\n    if (resolvedStateId === this.id) {\n      return this;\n    }\n\n    var stateNode = this.machine.idMap[resolvedStateId];\n\n    if (!stateNode) {\n      throw new Error(\"Child state node '#\".concat(resolvedStateId, \"' does not exist on machine '\").concat(this.id, \"'\"));\n    }\n\n    return stateNode;\n  };\n  /**\r\n   * Returns the relative state node from the given `statePath`, or throws.\r\n   *\r\n   * @param statePath The string or string array relative path to the state node.\r\n   */\n\n\n  StateNode.prototype.getStateNodeByPath = function (statePath) {\n    if (typeof statePath === 'string' && isStateId(statePath)) {\n      try {\n        return this.getStateNodeById(statePath.slice(1));\n      } catch (e) {// try individual paths\n        // throw e;\n      }\n    }\n\n    var arrayStatePath = toStatePath(statePath, this.delimiter).slice();\n    var currentStateNode = this;\n\n    while (arrayStatePath.length) {\n      var key = arrayStatePath.shift();\n\n      if (!key.length) {\n        break;\n      }\n\n      currentStateNode = currentStateNode.getStateNode(key);\n    }\n\n    return currentStateNode;\n  };\n  /**\r\n   * Resolves a partial state value with its full representation in this machine.\r\n   *\r\n   * @param stateValue The partial state value to resolve.\r\n   */\n\n\n  StateNode.prototype.resolve = function (stateValue) {\n    var _a;\n\n    var _this = this;\n\n    if (!stateValue) {\n      return this.initialStateValue || EMPTY_OBJECT; // TODO: type-specific properties\n    }\n\n    switch (this.type) {\n      case 'parallel':\n        return mapValues(this.initialStateValue, function (subStateValue, subStateKey) {\n          return subStateValue ? _this.getStateNode(subStateKey).resolve(stateValue[subStateKey] || subStateValue) : EMPTY_OBJECT;\n        });\n\n      case 'compound':\n        if (isString(stateValue)) {\n          var subStateNode = this.getStateNode(stateValue);\n\n          if (subStateNode.type === 'parallel' || subStateNode.type === 'compound') {\n            return _a = {}, _a[stateValue] = subStateNode.initialStateValue, _a;\n          }\n\n          return stateValue;\n        }\n\n        if (!Object.keys(stateValue).length) {\n          return this.initialStateValue || {};\n        }\n\n        return mapValues(stateValue, function (subStateValue, subStateKey) {\n          return subStateValue ? _this.getStateNode(subStateKey).resolve(subStateValue) : EMPTY_OBJECT;\n        });\n\n      default:\n        return stateValue || EMPTY_OBJECT;\n    }\n  };\n\n  StateNode.prototype.getResolvedPath = function (stateIdentifier) {\n    if (isStateId(stateIdentifier)) {\n      var stateNode = this.machine.idMap[stateIdentifier.slice(STATE_IDENTIFIER.length)];\n\n      if (!stateNode) {\n        throw new Error(\"Unable to find state node '\".concat(stateIdentifier, \"'\"));\n      }\n\n      return stateNode.path;\n    }\n\n    return toStatePath(stateIdentifier, this.delimiter);\n  };\n\n  Object.defineProperty(StateNode.prototype, \"initialStateValue\", {\n    get: function () {\n      var _a;\n\n      if (this.__cache.initialStateValue) {\n        return this.__cache.initialStateValue;\n      }\n\n      var initialStateValue;\n\n      if (this.type === 'parallel') {\n        initialStateValue = mapFilterValues(this.states, function (state) {\n          return state.initialStateValue || EMPTY_OBJECT;\n        }, function (stateNode) {\n          return !(stateNode.type === 'history');\n        });\n      } else if (this.initial !== undefined) {\n        if (!this.states[this.initial]) {\n          throw new Error(\"Initial state '\".concat(this.initial, \"' not found on '\").concat(this.key, \"'\"));\n        }\n\n        initialStateValue = isLeafNode(this.states[this.initial]) ? this.initial : (_a = {}, _a[this.initial] = this.states[this.initial].initialStateValue, _a);\n      } else {\n        // The finite state value of a machine without child states is just an empty object\n        initialStateValue = {};\n      }\n\n      this.__cache.initialStateValue = initialStateValue;\n      return this.__cache.initialStateValue;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  StateNode.prototype.getInitialState = function (stateValue, context) {\n    this._init(); // TODO: this should be in the constructor (see note in constructor)\n\n\n    var configuration = this.getStateNodes(stateValue);\n    return this.resolveTransition({\n      configuration: configuration,\n      exitSet: [],\n      transitions: [],\n      source: undefined,\n      actions: []\n    }, undefined, context !== null && context !== void 0 ? context : this.machine.context, undefined);\n  };\n\n  Object.defineProperty(StateNode.prototype, \"initialState\", {\n    /**\r\n     * The initial State instance, which includes all actions to be executed from\r\n     * entering the initial state.\r\n     */\n    get: function () {\n      var initialStateValue = this.initialStateValue;\n\n      if (!initialStateValue) {\n        throw new Error(\"Cannot retrieve initial state from simple state '\".concat(this.id, \"'.\"));\n      }\n\n      return this.getInitialState(initialStateValue);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(StateNode.prototype, \"target\", {\n    /**\r\n     * The target state value of the history state node, if it exists. This represents the\r\n     * default state value to transition to if no history value exists yet.\r\n     */\n    get: function () {\n      var target;\n\n      if (this.type === 'history') {\n        var historyConfig = this.config;\n\n        if (isString(historyConfig.target)) {\n          target = isStateId(historyConfig.target) ? pathToStateValue(this.machine.getStateNodeById(historyConfig.target).path.slice(this.path.length - 1)) : historyConfig.target;\n        } else {\n          target = historyConfig.target;\n        }\n      }\n\n      return target;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  /**\r\n   * Returns the leaf nodes from a state path relative to this state node.\r\n   *\r\n   * @param relativeStateId The relative state path to retrieve the state nodes\r\n   * @param history The previous state to retrieve history\r\n   * @param resolve Whether state nodes should resolve to initial child state nodes\r\n   */\n\n  StateNode.prototype.getRelativeStateNodes = function (relativeStateId, historyValue, resolve) {\n    if (resolve === void 0) {\n      resolve = true;\n    }\n\n    return resolve ? relativeStateId.type === 'history' ? relativeStateId.resolveHistory(historyValue) : relativeStateId.initialStateNodes : [relativeStateId];\n  };\n\n  Object.defineProperty(StateNode.prototype, \"initialStateNodes\", {\n    get: function () {\n      var _this = this;\n\n      if (isLeafNode(this)) {\n        return [this];\n      } // Case when state node is compound but no initial state is defined\n\n\n      if (this.type === 'compound' && !this.initial) {\n        if (!IS_PRODUCTION) {\n          warn(false, \"Compound state node '\".concat(this.id, \"' has no initial state.\"));\n        }\n\n        return [this];\n      }\n\n      var initialStateNodePaths = toStatePaths(this.initialStateValue);\n      return flatten(initialStateNodePaths.map(function (initialPath) {\n        return _this.getFromRelativePath(initialPath);\n      }));\n    },\n    enumerable: false,\n    configurable: true\n  });\n  /**\r\n   * Retrieves state nodes from a relative path to this state node.\r\n   *\r\n   * @param relativePath The relative path from this state node\r\n   * @param historyValue\r\n   */\n\n  StateNode.prototype.getFromRelativePath = function (relativePath) {\n    if (!relativePath.length) {\n      return [this];\n    }\n\n    var _a = __read(relativePath),\n        stateKey = _a[0],\n        childStatePath = _a.slice(1);\n\n    if (!this.states) {\n      throw new Error(\"Cannot retrieve subPath '\".concat(stateKey, \"' from node with no states\"));\n    }\n\n    var childStateNode = this.getStateNode(stateKey);\n\n    if (childStateNode.type === 'history') {\n      return childStateNode.resolveHistory();\n    }\n\n    if (!this.states[stateKey]) {\n      throw new Error(\"Child state '\".concat(stateKey, \"' does not exist on '\").concat(this.id, \"'\"));\n    }\n\n    return this.states[stateKey].getFromRelativePath(childStatePath);\n  };\n\n  StateNode.prototype.historyValue = function (relativeStateValue) {\n    if (!Object.keys(this.states).length) {\n      return undefined;\n    }\n\n    return {\n      current: relativeStateValue || this.initialStateValue,\n      states: mapFilterValues(this.states, function (stateNode, key) {\n        if (!relativeStateValue) {\n          return stateNode.historyValue();\n        }\n\n        var subStateValue = isString(relativeStateValue) ? undefined : relativeStateValue[key];\n        return stateNode.historyValue(subStateValue || stateNode.initialStateValue);\n      }, function (stateNode) {\n        return !stateNode.history;\n      })\n    };\n  };\n  /**\r\n   * Resolves to the historical value(s) of the parent state node,\r\n   * represented by state nodes.\r\n   *\r\n   * @param historyValue\r\n   */\n\n\n  StateNode.prototype.resolveHistory = function (historyValue) {\n    var _this = this;\n\n    if (this.type !== 'history') {\n      return [this];\n    }\n\n    var parent = this.parent;\n\n    if (!historyValue) {\n      var historyTarget = this.target;\n      return historyTarget ? flatten(toStatePaths(historyTarget).map(function (relativeChildPath) {\n        return parent.getFromRelativePath(relativeChildPath);\n      })) : parent.initialStateNodes;\n    }\n\n    var subHistoryValue = nestedPath(parent.path, 'states')(historyValue).current;\n\n    if (isString(subHistoryValue)) {\n      return [parent.getStateNode(subHistoryValue)];\n    }\n\n    return flatten(toStatePaths(subHistoryValue).map(function (subStatePath) {\n      return _this.history === 'deep' ? parent.getFromRelativePath(subStatePath) : [parent.states[subStatePath[0]]];\n    }));\n  };\n\n  Object.defineProperty(StateNode.prototype, \"stateIds\", {\n    /**\r\n     * All the state node IDs of this state node and its descendant state nodes.\r\n     */\n    get: function () {\n      var _this = this;\n\n      var childStateIds = flatten(Object.keys(this.states).map(function (stateKey) {\n        return _this.states[stateKey].stateIds;\n      }));\n      return [this.id].concat(childStateIds);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(StateNode.prototype, \"events\", {\n    /**\r\n     * All the event types accepted by this state node and its descendants.\r\n     */\n    get: function () {\n      var e_8, _a, e_9, _b;\n\n      if (this.__cache.events) {\n        return this.__cache.events;\n      }\n\n      var states = this.states;\n      var events = new Set(this.ownEvents);\n\n      if (states) {\n        try {\n          for (var _c = __values(Object.keys(states)), _d = _c.next(); !_d.done; _d = _c.next()) {\n            var stateId = _d.value;\n            var state = states[stateId];\n\n            if (state.states) {\n              try {\n                for (var _e = (e_9 = void 0, __values(state.events)), _f = _e.next(); !_f.done; _f = _e.next()) {\n                  var event_1 = _f.value;\n                  events.add(\"\".concat(event_1));\n                }\n              } catch (e_9_1) {\n                e_9 = {\n                  error: e_9_1\n                };\n              } finally {\n                try {\n                  if (_f && !_f.done && (_b = _e.return)) _b.call(_e);\n                } finally {\n                  if (e_9) throw e_9.error;\n                }\n              }\n            }\n          }\n        } catch (e_8_1) {\n          e_8 = {\n            error: e_8_1\n          };\n        } finally {\n          try {\n            if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n          } finally {\n            if (e_8) throw e_8.error;\n          }\n        }\n      }\n\n      return this.__cache.events = Array.from(events);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(StateNode.prototype, \"ownEvents\", {\n    /**\r\n     * All the events that have transitions directly from this state node.\r\n     *\r\n     * Excludes any inert events.\r\n     */\n    get: function () {\n      var events = new Set(this.transitions.filter(function (transition) {\n        return !(!transition.target && !transition.actions.length && transition.internal);\n      }).map(function (transition) {\n        return transition.eventType;\n      }));\n      return Array.from(events);\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  StateNode.prototype.resolveTarget = function (_target) {\n    var _this = this;\n\n    if (_target === undefined) {\n      // an undefined target signals that the state node should not transition from that state when receiving that event\n      return undefined;\n    }\n\n    return _target.map(function (target) {\n      if (!isString(target)) {\n        return target;\n      }\n\n      var isInternalTarget = target[0] === _this.delimiter; // If internal target is defined on machine,\n      // do not include machine key on target\n\n      if (isInternalTarget && !_this.parent) {\n        return _this.getStateNodeByPath(target.slice(1));\n      }\n\n      var resolvedTarget = isInternalTarget ? _this.key + target : target;\n\n      if (_this.parent) {\n        try {\n          var targetStateNode = _this.parent.getStateNodeByPath(resolvedTarget);\n\n          return targetStateNode;\n        } catch (err) {\n          throw new Error(\"Invalid transition definition for state node '\".concat(_this.id, \"':\\n\").concat(err.message));\n        }\n      } else {\n        return _this.getStateNodeByPath(resolvedTarget);\n      }\n    });\n  };\n\n  StateNode.prototype.formatTransition = function (transitionConfig) {\n    var _this = this;\n\n    var normalizedTarget = normalizeTarget(transitionConfig.target);\n    var internal = 'internal' in transitionConfig ? transitionConfig.internal : normalizedTarget ? normalizedTarget.some(function (_target) {\n      return isString(_target) && _target[0] === _this.delimiter;\n    }) : true;\n    var guards = this.machine.options.guards;\n    var target = this.resolveTarget(normalizedTarget);\n\n    var transition = __assign(__assign({}, transitionConfig), {\n      actions: toActionObjects(toArray(transitionConfig.actions)),\n      cond: toGuard(transitionConfig.cond, guards),\n      target: target,\n      source: this,\n      internal: internal,\n      eventType: transitionConfig.event,\n      toJSON: function () {\n        return __assign(__assign({}, transition), {\n          target: transition.target ? transition.target.map(function (t) {\n            return \"#\".concat(t.id);\n          }) : undefined,\n          source: \"#\".concat(_this.id)\n        });\n      }\n    });\n\n    return transition;\n  };\n\n  StateNode.prototype.formatTransitions = function () {\n    var e_10, _a;\n\n    var _this = this;\n\n    var onConfig;\n\n    if (!this.config.on) {\n      onConfig = [];\n    } else if (Array.isArray(this.config.on)) {\n      onConfig = this.config.on;\n    } else {\n      var _b = this.config.on,\n          _c = WILDCARD,\n          _d = _b[_c],\n          wildcardConfigs = _d === void 0 ? [] : _d,\n          strictTransitionConfigs_1 = __rest(_b, [typeof _c === \"symbol\" ? _c : _c + \"\"]);\n\n      onConfig = flatten(Object.keys(strictTransitionConfigs_1).map(function (key) {\n        if (!IS_PRODUCTION && key === NULL_EVENT) {\n          warn(false, \"Empty string transition configs (e.g., `{ on: { '': ... }}`) for transient transitions are deprecated. Specify the transition in the `{ always: ... }` property instead. \" + \"Please check the `on` configuration for \\\"#\".concat(_this.id, \"\\\".\"));\n        }\n\n        var transitionConfigArray = toTransitionConfigArray(key, strictTransitionConfigs_1[key]);\n\n        if (!IS_PRODUCTION) {\n          validateArrayifiedTransitions(_this, key, transitionConfigArray);\n        }\n\n        return transitionConfigArray;\n      }).concat(toTransitionConfigArray(WILDCARD, wildcardConfigs)));\n    }\n\n    var eventlessConfig = this.config.always ? toTransitionConfigArray('', this.config.always) : [];\n    var doneConfig = this.config.onDone ? toTransitionConfigArray(String(done(this.id)), this.config.onDone) : [];\n\n    if (!IS_PRODUCTION) {\n      warn(!(this.config.onDone && !this.parent), \"Root nodes cannot have an \\\".onDone\\\" transition. Please check the config of \\\"\".concat(this.id, \"\\\".\"));\n    }\n\n    var invokeConfig = flatten(this.invoke.map(function (invokeDef) {\n      var settleTransitions = [];\n\n      if (invokeDef.onDone) {\n        settleTransitions.push.apply(settleTransitions, __spreadArray([], __read(toTransitionConfigArray(String(doneInvoke(invokeDef.id)), invokeDef.onDone)), false));\n      }\n\n      if (invokeDef.onError) {\n        settleTransitions.push.apply(settleTransitions, __spreadArray([], __read(toTransitionConfigArray(String(error(invokeDef.id)), invokeDef.onError)), false));\n      }\n\n      return settleTransitions;\n    }));\n    var delayedTransitions = this.after;\n    var formattedTransitions = flatten(__spreadArray(__spreadArray(__spreadArray(__spreadArray([], __read(doneConfig), false), __read(invokeConfig), false), __read(onConfig), false), __read(eventlessConfig), false).map(function (transitionConfig) {\n      return toArray(transitionConfig).map(function (transition) {\n        return _this.formatTransition(transition);\n      });\n    }));\n\n    try {\n      for (var delayedTransitions_1 = __values(delayedTransitions), delayedTransitions_1_1 = delayedTransitions_1.next(); !delayedTransitions_1_1.done; delayedTransitions_1_1 = delayedTransitions_1.next()) {\n        var delayedTransition = delayedTransitions_1_1.value;\n        formattedTransitions.push(delayedTransition);\n      }\n    } catch (e_10_1) {\n      e_10 = {\n        error: e_10_1\n      };\n    } finally {\n      try {\n        if (delayedTransitions_1_1 && !delayedTransitions_1_1.done && (_a = delayedTransitions_1.return)) _a.call(delayedTransitions_1);\n      } finally {\n        if (e_10) throw e_10.error;\n      }\n    }\n\n    return formattedTransitions;\n  };\n\n  return StateNode;\n}();\n\nexport { StateNode };\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nfunction __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nfunction __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\n\nexport { __assign, __read, __rest, __spreadArray, __values };\n","import { ActionTypes } from './types.js';\n\nvar start = ActionTypes.Start;\nvar stop = ActionTypes.Stop;\nvar raise = ActionTypes.Raise;\nvar send = ActionTypes.Send;\nvar cancel = ActionTypes.Cancel;\nvar nullEvent = ActionTypes.NullEvent;\nvar assign = ActionTypes.Assign;\nvar after = ActionTypes.After;\nvar doneState = ActionTypes.DoneState;\nvar log = ActionTypes.Log;\nvar init = ActionTypes.Init;\nvar invoke = ActionTypes.Invoke;\nvar errorExecution = ActionTypes.ErrorExecution;\nvar errorPlatform = ActionTypes.ErrorPlatform;\nvar error = ActionTypes.ErrorCustom;\nvar update = ActionTypes.Update;\nvar choose = ActionTypes.Choose;\nvar pure = ActionTypes.Pure;\n\nexport { after, assign, cancel, choose, doneState, error, errorExecution, errorPlatform, init, invoke, log, nullEvent, pure, raise, send, start, stop, update };\n","import { __assign, __spreadArray, __read, __values } from './_virtual/_tslib.js';\nimport { SpecialTargets, ActionTypes } from './types.js';\nimport { init, raise as raise$1, send as send$1, update, log as log$1, cancel as cancel$1, assign as assign$1, error as error$1, stop as stop$1, pure as pure$1, choose as choose$1 } from './actionTypes.js';\nimport * as actionTypes from './actionTypes.js';\nexport { actionTypes };\nimport { toSCXMLEvent, isString, isFunction, toEventObject, getEventType, updateContext, flatten, isArray, toArray, toGuard, evaluateGuard, warn } from './utils.js';\nimport { IS_PRODUCTION } from './environment.js';\n\nvar initEvent = /*#__PURE__*/toSCXMLEvent({\n  type: init\n});\nfunction getActionFunction(actionType, actionFunctionMap) {\n  return actionFunctionMap ? actionFunctionMap[actionType] || undefined : undefined;\n}\nfunction toActionObject(action, actionFunctionMap) {\n  var actionObject;\n\n  if (isString(action) || typeof action === 'number') {\n    var exec = getActionFunction(action, actionFunctionMap);\n\n    if (isFunction(exec)) {\n      actionObject = {\n        type: action,\n        exec: exec\n      };\n    } else if (exec) {\n      actionObject = exec;\n    } else {\n      actionObject = {\n        type: action,\n        exec: undefined\n      };\n    }\n  } else if (isFunction(action)) {\n    actionObject = {\n      // Convert action to string if unnamed\n      type: action.name || action.toString(),\n      exec: action\n    };\n  } else {\n    var exec = getActionFunction(action.type, actionFunctionMap);\n\n    if (isFunction(exec)) {\n      actionObject = __assign(__assign({}, action), {\n        exec: exec\n      });\n    } else if (exec) {\n      var actionType = exec.type || action.type;\n      actionObject = __assign(__assign(__assign({}, exec), action), {\n        type: actionType\n      });\n    } else {\n      actionObject = action;\n    }\n  }\n\n  return actionObject;\n}\nvar toActionObjects = function (action, actionFunctionMap) {\n  if (!action) {\n    return [];\n  }\n\n  var actions = isArray(action) ? action : [action];\n  return actions.map(function (subAction) {\n    return toActionObject(subAction, actionFunctionMap);\n  });\n};\nfunction toActivityDefinition(action) {\n  var actionObject = toActionObject(action);\n  return __assign(__assign({\n    id: isString(action) ? action : actionObject.id\n  }, actionObject), {\n    type: actionObject.type\n  });\n}\n/**\r\n * Raises an event. This places the event in the internal event queue, so that\r\n * the event is immediately consumed by the machine in the current step.\r\n *\r\n * @param eventType The event to raise.\r\n */\n\nfunction raise(event, options) {\n  return {\n    type: raise$1,\n    event: typeof event === 'function' ? event : toEventObject(event),\n    delay: options ? options.delay : undefined,\n    id: options === null || options === void 0 ? void 0 : options.id\n  };\n}\nfunction resolveRaise(action, ctx, _event, delaysMap) {\n  var meta = {\n    _event: _event\n  };\n  var resolvedEvent = toSCXMLEvent(isFunction(action.event) ? action.event(ctx, _event.data, meta) : action.event);\n  var resolvedDelay;\n\n  if (isString(action.delay)) {\n    var configDelay = delaysMap && delaysMap[action.delay];\n    resolvedDelay = isFunction(configDelay) ? configDelay(ctx, _event.data, meta) : configDelay;\n  } else {\n    resolvedDelay = isFunction(action.delay) ? action.delay(ctx, _event.data, meta) : action.delay;\n  }\n\n  return __assign(__assign({}, action), {\n    type: raise$1,\n    _event: resolvedEvent,\n    delay: resolvedDelay\n  });\n}\n/**\r\n * Sends an event. This returns an action that will be read by an interpreter to\r\n * send the event in the next step, after the current step is finished executing.\r\n *\r\n * @deprecated Use the `sendTo(...)` action creator instead.\r\n *\r\n * @param event The event to send.\r\n * @param options Options to pass into the send event:\r\n *  - `id` - The unique send event identifier (used with `cancel()`).\r\n *  - `delay` - The number of milliseconds to delay the sending of the event.\r\n *  - `to` - The target of this event (by default, the machine the event was sent from).\r\n */\n\nfunction send(event, options) {\n  return {\n    to: options ? options.to : undefined,\n    type: send$1,\n    event: isFunction(event) ? event : toEventObject(event),\n    delay: options ? options.delay : undefined,\n    // TODO: don't auto-generate IDs here like that\n    // there is too big chance of the ID collision\n    id: options && options.id !== undefined ? options.id : isFunction(event) ? event.name : getEventType(event)\n  };\n}\nfunction resolveSend(action, ctx, _event, delaysMap) {\n  var meta = {\n    _event: _event\n  }; // TODO: helper function for resolving Expr\n\n  var resolvedEvent = toSCXMLEvent(isFunction(action.event) ? action.event(ctx, _event.data, meta) : action.event);\n  var resolvedDelay;\n\n  if (isString(action.delay)) {\n    var configDelay = delaysMap && delaysMap[action.delay];\n    resolvedDelay = isFunction(configDelay) ? configDelay(ctx, _event.data, meta) : configDelay;\n  } else {\n    resolvedDelay = isFunction(action.delay) ? action.delay(ctx, _event.data, meta) : action.delay;\n  }\n\n  var resolvedTarget = isFunction(action.to) ? action.to(ctx, _event.data, meta) : action.to;\n  return __assign(__assign({}, action), {\n    to: resolvedTarget,\n    _event: resolvedEvent,\n    event: resolvedEvent.data,\n    delay: resolvedDelay\n  });\n}\n/**\r\n * Sends an event to this machine's parent.\r\n *\r\n * @param event The event to send to the parent machine.\r\n * @param options Options to pass into the send event.\r\n */\n\nfunction sendParent(event, options) {\n  return send(event, __assign(__assign({}, options), {\n    to: SpecialTargets.Parent\n  }));\n}\n/**\r\n * Sends an event to an actor.\r\n *\r\n * @param actor The `ActorRef` to send the event to.\r\n * @param event The event to send, or an expression that evaluates to the event to send\r\n * @param options Send action options\r\n * @returns An XState send action object\r\n */\n\nfunction sendTo(actor, event, options) {\n  return send(event, __assign(__assign({}, options), {\n    to: actor\n  }));\n}\n/**\r\n * Sends an update event to this machine's parent.\r\n */\n\nfunction sendUpdate() {\n  return sendParent(update);\n}\n/**\r\n * Sends an event back to the sender of the original event.\r\n *\r\n * @param event The event to send back to the sender\r\n * @param options Options to pass into the send event\r\n */\n\nfunction respond(event, options) {\n  return send(event, __assign(__assign({}, options), {\n    to: function (_, __, _a) {\n      var _event = _a._event;\n      return _event.origin; // TODO: handle when _event.origin is undefined\n    }\n  }));\n}\n\nvar defaultLogExpr = function (context, event) {\n  return {\n    context: context,\n    event: event\n  };\n};\n/**\r\n *\r\n * @param expr The expression function to evaluate which will be logged.\r\n *  Takes in 2 arguments:\r\n *  - `ctx` - the current state context\r\n *  - `event` - the event that caused this action to be executed.\r\n * @param label The label to give to the logged expression.\r\n */\n\n\nfunction log(expr, label) {\n  if (expr === void 0) {\n    expr = defaultLogExpr;\n  }\n\n  return {\n    type: log$1,\n    label: label,\n    expr: expr\n  };\n}\nvar resolveLog = function (action, ctx, _event) {\n  return __assign(__assign({}, action), {\n    value: isString(action.expr) ? action.expr : action.expr(ctx, _event.data, {\n      _event: _event\n    })\n  });\n};\n/**\r\n * Cancels an in-flight `send(...)` action. A canceled sent action will not\r\n * be executed, nor will its event be sent, unless it has already been sent\r\n * (e.g., if `cancel(...)` is called after the `send(...)` action's `delay`).\r\n *\r\n * @param sendId The `id` of the `send(...)` action to cancel.\r\n */\n\nvar cancel = function (sendId) {\n  return {\n    type: cancel$1,\n    sendId: sendId\n  };\n};\n/**\r\n * Starts an activity.\r\n *\r\n * @param activity The activity to start.\r\n */\n\nfunction start(activity) {\n  var activityDef = toActivityDefinition(activity);\n  return {\n    type: ActionTypes.Start,\n    activity: activityDef,\n    exec: undefined\n  };\n}\n/**\r\n * Stops an activity.\r\n *\r\n * @param actorRef The activity to stop.\r\n */\n\nfunction stop(actorRef) {\n  var activity = isFunction(actorRef) ? actorRef : toActivityDefinition(actorRef);\n  return {\n    type: ActionTypes.Stop,\n    activity: activity,\n    exec: undefined\n  };\n}\nfunction resolveStop(action, context, _event) {\n  var actorRefOrString = isFunction(action.activity) ? action.activity(context, _event.data) : action.activity;\n  var resolvedActorRef = typeof actorRefOrString === 'string' ? {\n    id: actorRefOrString\n  } : actorRefOrString;\n  var actionObject = {\n    type: ActionTypes.Stop,\n    activity: resolvedActorRef\n  };\n  return actionObject;\n}\n/**\r\n * Updates the current context of the machine.\r\n *\r\n * @param assignment An object that represents the partial context to update.\r\n */\n\nvar assign = function (assignment) {\n  return {\n    type: assign$1,\n    assignment: assignment\n  };\n};\nfunction isActionObject(action) {\n  return typeof action === 'object' && 'type' in action;\n}\n/**\r\n * Returns an event type that represents an implicit event that\r\n * is sent after the specified `delay`.\r\n *\r\n * @param delayRef The delay in milliseconds\r\n * @param id The state node ID where this event is handled\r\n */\n\nfunction after(delayRef, id) {\n  var idSuffix = id ? \"#\".concat(id) : '';\n  return \"\".concat(ActionTypes.After, \"(\").concat(delayRef, \")\").concat(idSuffix);\n}\n/**\r\n * Returns an event that represents that a final state node\r\n * has been reached in the parent state node.\r\n *\r\n * @param id The final state node's parent state node `id`\r\n * @param data The data to pass into the event\r\n */\n\nfunction done(id, data) {\n  var type = \"\".concat(ActionTypes.DoneState, \".\").concat(id);\n  var eventObject = {\n    type: type,\n    data: data\n  };\n\n  eventObject.toString = function () {\n    return type;\n  };\n\n  return eventObject;\n}\n/**\r\n * Returns an event that represents that an invoked service has terminated.\r\n *\r\n * An invoked service is terminated when it has reached a top-level final state node,\r\n * but not when it is canceled.\r\n *\r\n * @param id The final state node ID\r\n * @param data The data to pass into the event\r\n */\n\nfunction doneInvoke(id, data) {\n  var type = \"\".concat(ActionTypes.DoneInvoke, \".\").concat(id);\n  var eventObject = {\n    type: type,\n    data: data\n  };\n\n  eventObject.toString = function () {\n    return type;\n  };\n\n  return eventObject;\n}\nfunction error(id, data) {\n  var type = \"\".concat(ActionTypes.ErrorPlatform, \".\").concat(id);\n  var eventObject = {\n    type: type,\n    data: data\n  };\n\n  eventObject.toString = function () {\n    return type;\n  };\n\n  return eventObject;\n}\nfunction pure(getActions) {\n  return {\n    type: ActionTypes.Pure,\n    get: getActions\n  };\n}\n/**\r\n * Forwards (sends) an event to a specified service.\r\n *\r\n * @param target The target service to forward the event to.\r\n * @param options Options to pass into the send action creator.\r\n */\n\nfunction forwardTo(target, options) {\n  if (!IS_PRODUCTION && (!target || typeof target === 'function')) {\n    var originalTarget_1 = target;\n\n    target = function () {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      var resolvedTarget = typeof originalTarget_1 === 'function' ? originalTarget_1.apply(void 0, __spreadArray([], __read(args), false)) : originalTarget_1;\n\n      if (!resolvedTarget) {\n        throw new Error(\"Attempted to forward event to undefined actor. This risks an infinite loop in the sender.\");\n      }\n\n      return resolvedTarget;\n    };\n  }\n\n  return send(function (_, event) {\n    return event;\n  }, __assign(__assign({}, options), {\n    to: target\n  }));\n}\n/**\r\n * Escalates an error by sending it as an event to this machine's parent.\r\n *\r\n * @param errorData The error data to send, or the expression function that\r\n * takes in the `context`, `event`, and `meta`, and returns the error data to send.\r\n * @param options Options to pass into the send action creator.\r\n */\n\nfunction escalate(errorData, options) {\n  return sendParent(function (context, event, meta) {\n    return {\n      type: error$1,\n      data: isFunction(errorData) ? errorData(context, event, meta) : errorData\n    };\n  }, __assign(__assign({}, options), {\n    to: SpecialTargets.Parent\n  }));\n}\nfunction choose(conds) {\n  return {\n    type: ActionTypes.Choose,\n    conds: conds\n  };\n}\n\nvar pluckAssigns = function (actionBlocks) {\n  var e_1, _a;\n\n  var assignActions = [];\n\n  try {\n    for (var actionBlocks_1 = __values(actionBlocks), actionBlocks_1_1 = actionBlocks_1.next(); !actionBlocks_1_1.done; actionBlocks_1_1 = actionBlocks_1.next()) {\n      var block = actionBlocks_1_1.value;\n      var i = 0;\n\n      while (i < block.actions.length) {\n        if (block.actions[i].type === assign$1) {\n          assignActions.push(block.actions[i]);\n          block.actions.splice(i, 1);\n          continue;\n        }\n\n        i++;\n      }\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (actionBlocks_1_1 && !actionBlocks_1_1.done && (_a = actionBlocks_1.return)) _a.call(actionBlocks_1);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n\n  return assignActions;\n};\n\nfunction resolveActions(machine, currentState, currentContext, _event, actionBlocks, predictableExec, preserveActionOrder) {\n  if (preserveActionOrder === void 0) {\n    preserveActionOrder = false;\n  }\n\n  var assignActions = preserveActionOrder ? [] : pluckAssigns(actionBlocks);\n  var updatedContext = assignActions.length ? updateContext(currentContext, _event, assignActions, currentState) : currentContext;\n  var preservedContexts = preserveActionOrder ? [currentContext] : undefined;\n  var deferredToBlockEnd = [];\n\n  function handleAction(blockType, actionObject) {\n    var _a;\n\n    switch (actionObject.type) {\n      case raise$1:\n        {\n          var raisedAction = resolveRaise(actionObject, updatedContext, _event, machine.options.delays);\n\n          if (predictableExec && typeof raisedAction.delay === 'number') {\n            predictableExec(raisedAction, updatedContext, _event);\n          }\n\n          return raisedAction;\n        }\n\n      case send$1:\n        var sendAction = resolveSend(actionObject, updatedContext, _event, machine.options.delays); // TODO: fix ActionTypes.Init\n\n        if (!IS_PRODUCTION) {\n          var configuredDelay = actionObject.delay; // warn after resolving as we can create better contextual message here\n\n          warn(!isString(configuredDelay) || typeof sendAction.delay === 'number', // tslint:disable-next-line:max-line-length\n          \"No delay reference for delay expression '\".concat(configuredDelay, \"' was found on machine '\").concat(machine.id, \"'\"));\n        }\n\n        if (predictableExec && sendAction.to !== SpecialTargets.Internal) {\n          if (blockType === 'entry') {\n            deferredToBlockEnd.push(sendAction);\n          } else {\n            predictableExec(sendAction, updatedContext, _event);\n          }\n        }\n\n        return sendAction;\n\n      case log$1:\n        {\n          var resolved = resolveLog(actionObject, updatedContext, _event);\n          predictableExec === null || predictableExec === void 0 ? void 0 : predictableExec(resolved, updatedContext, _event);\n          return resolved;\n        }\n\n      case choose$1:\n        {\n          var chooseAction = actionObject;\n          var matchedActions = (_a = chooseAction.conds.find(function (condition) {\n            var guard = toGuard(condition.cond, machine.options.guards);\n            return !guard || evaluateGuard(machine, guard, updatedContext, _event, !predictableExec ? currentState : undefined);\n          })) === null || _a === void 0 ? void 0 : _a.actions;\n\n          if (!matchedActions) {\n            return [];\n          }\n\n          var _b = __read(resolveActions(machine, currentState, updatedContext, _event, [{\n            type: blockType,\n            actions: toActionObjects(toArray(matchedActions), machine.options.actions)\n          }], predictableExec, preserveActionOrder), 2),\n              resolvedActionsFromChoose = _b[0],\n              resolvedContextFromChoose = _b[1];\n\n          updatedContext = resolvedContextFromChoose;\n          preservedContexts === null || preservedContexts === void 0 ? void 0 : preservedContexts.push(updatedContext);\n          return resolvedActionsFromChoose;\n        }\n\n      case pure$1:\n        {\n          var matchedActions = actionObject.get(updatedContext, _event.data);\n\n          if (!matchedActions) {\n            return [];\n          }\n\n          var _c = __read(resolveActions(machine, currentState, updatedContext, _event, [{\n            type: blockType,\n            actions: toActionObjects(toArray(matchedActions), machine.options.actions)\n          }], predictableExec, preserveActionOrder), 2),\n              resolvedActionsFromPure = _c[0],\n              resolvedContext = _c[1];\n\n          updatedContext = resolvedContext;\n          preservedContexts === null || preservedContexts === void 0 ? void 0 : preservedContexts.push(updatedContext);\n          return resolvedActionsFromPure;\n        }\n\n      case stop$1:\n        {\n          var resolved = resolveStop(actionObject, updatedContext, _event);\n          predictableExec === null || predictableExec === void 0 ? void 0 : predictableExec(resolved, currentContext, _event);\n          return resolved;\n        }\n\n      case assign$1:\n        {\n          updatedContext = updateContext(updatedContext, _event, [actionObject], !predictableExec ? currentState : undefined);\n          preservedContexts === null || preservedContexts === void 0 ? void 0 : preservedContexts.push(updatedContext);\n          break;\n        }\n\n      default:\n        var resolvedActionObject = toActionObject(actionObject, machine.options.actions);\n        var exec_1 = resolvedActionObject.exec;\n\n        if (predictableExec) {\n          predictableExec(resolvedActionObject, updatedContext, _event);\n        } else if (exec_1 && preservedContexts) {\n          var contextIndex_1 = preservedContexts.length - 1;\n\n          var wrapped = __assign(__assign({}, resolvedActionObject), {\n            exec: function (_ctx) {\n              var args = [];\n\n              for (var _i = 1; _i < arguments.length; _i++) {\n                args[_i - 1] = arguments[_i];\n              }\n\n              exec_1.apply(void 0, __spreadArray([preservedContexts[contextIndex_1]], __read(args), false));\n            }\n          });\n\n          resolvedActionObject = wrapped;\n        }\n\n        return resolvedActionObject;\n    }\n  }\n\n  function processBlock(block) {\n    var e_2, _a;\n\n    var resolvedActions = [];\n\n    try {\n      for (var _b = __values(block.actions), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var action = _c.value;\n        var resolved = handleAction(block.type, action);\n\n        if (resolved) {\n          resolvedActions = resolvedActions.concat(resolved);\n        }\n      }\n    } catch (e_2_1) {\n      e_2 = {\n        error: e_2_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_2) throw e_2.error;\n      }\n    }\n\n    deferredToBlockEnd.forEach(function (action) {\n      predictableExec(action, updatedContext, _event);\n    });\n    deferredToBlockEnd.length = 0;\n    return resolvedActions;\n  }\n\n  var resolvedActions = flatten(actionBlocks.map(processBlock));\n  return [resolvedActions, updatedContext];\n}\n\nexport { after, assign, cancel, choose, done, doneInvoke, error, escalate, forwardTo, getActionFunction, initEvent, isActionObject, log, pure, raise, resolveActions, resolveLog, resolveRaise, resolveSend, resolveStop, respond, send, sendParent, sendTo, sendUpdate, start, stop, toActionObject, toActionObjects, toActivityDefinition };\n","import { error, doneInvoke } from './actions.js';\nimport { toActorRef } from './Actor.js';\nimport { toObserver } from './utils.js';\n\n/**\r\n * Returns an actor behavior from a reducer and its initial state.\r\n *\r\n * @param transition The pure reducer that returns the next state given the current state and event.\r\n * @param initialState The initial state of the reducer.\r\n * @returns An actor behavior\r\n */\n\nfunction fromReducer(transition, initialState) {\n  return {\n    transition: transition,\n    initialState: initialState\n  };\n}\nfunction fromPromise(promiseFn) {\n  var initialState = {\n    error: undefined,\n    data: undefined,\n    status: 'pending'\n  };\n  return {\n    transition: function (state, event, _a) {\n      var parent = _a.parent,\n          id = _a.id,\n          observers = _a.observers;\n\n      switch (event.type) {\n        case 'fulfill':\n          parent === null || parent === void 0 ? void 0 : parent.send(doneInvoke(id, event.data));\n          return {\n            error: undefined,\n            data: event.data,\n            status: 'fulfilled'\n          };\n\n        case 'reject':\n          parent === null || parent === void 0 ? void 0 : parent.send(error(id, event.error));\n          observers.forEach(function (observer) {\n            observer.error(event.error);\n          });\n          return {\n            error: event.error,\n            data: undefined,\n            status: 'rejected'\n          };\n\n        default:\n          return state;\n      }\n    },\n    initialState: initialState,\n    start: function (_a) {\n      var self = _a.self;\n      promiseFn().then(function (data) {\n        self.send({\n          type: 'fulfill',\n          data: data\n        });\n      }, function (reason) {\n        self.send({\n          type: 'reject',\n          error: reason\n        });\n      });\n      return initialState;\n    }\n  };\n}\nfunction spawnBehavior(behavior, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var state = behavior.initialState;\n  var observers = new Set();\n  var mailbox = [];\n  var flushing = false;\n\n  var flush = function () {\n    if (flushing) {\n      return;\n    }\n\n    flushing = true;\n\n    while (mailbox.length > 0) {\n      var event_1 = mailbox.shift();\n      state = behavior.transition(state, event_1, actorCtx);\n      observers.forEach(function (observer) {\n        return observer.next(state);\n      });\n    }\n\n    flushing = false;\n  };\n\n  var actor = toActorRef({\n    id: options.id,\n    send: function (event) {\n      mailbox.push(event);\n      flush();\n    },\n    getSnapshot: function () {\n      return state;\n    },\n    subscribe: function (next, handleError, complete) {\n      var observer = toObserver(next, handleError, complete);\n      observers.add(observer);\n      observer.next(state);\n      return {\n        unsubscribe: function () {\n          observers.delete(observer);\n        }\n      };\n    }\n  });\n  var actorCtx = {\n    parent: options.parent,\n    self: actor,\n    id: options.id || 'anonymous',\n    observers: observers\n  };\n  state = behavior.start ? behavior.start(actorCtx) : state;\n  return actor;\n}\n\nexport { fromPromise, fromReducer, spawnBehavior };\n","var STATE_DELIMITER = '.';\nvar EMPTY_ACTIVITY_MAP = {};\nvar DEFAULT_GUARD_TYPE = 'xstate.guard';\nvar TARGETLESS_KEY = '';\n\nexport { DEFAULT_GUARD_TYPE, EMPTY_ACTIVITY_MAP, STATE_DELIMITER, TARGETLESS_KEY };\n","import { IS_PRODUCTION } from './environment.js';\n\nfunction getGlobal() {\n  if (typeof globalThis !== 'undefined') {\n    return globalThis;\n  }\n\n  if (typeof self !== 'undefined') {\n    return self;\n  }\n\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n\n  if (typeof global !== 'undefined') {\n    return global;\n  }\n\n  if (!IS_PRODUCTION) {\n    console.warn('XState could not find a global object in this environment. Please let the maintainers know and raise an issue here: https://github.com/statelyai/xstate/issues');\n  }\n}\n\nfunction getDevTools() {\n  var global = getGlobal();\n\n  if (global && '__xstate__' in global) {\n    return global.__xstate__;\n  }\n\n  return undefined;\n}\n\nfunction registerService(service) {\n  if (!getGlobal()) {\n    return;\n  }\n\n  var devTools = getDevTools();\n\n  if (devTools) {\n    devTools.register(service);\n  }\n}\n\nexport { getGlobal, registerService };\n","var IS_PRODUCTION = process.env.NODE_ENV === 'production';\n\nexport { IS_PRODUCTION };\n","import { assign as assign$1, cancel as cancel$1, send as send$1, sendTo as sendTo$1, sendParent as sendParent$1, sendUpdate as sendUpdate$1, forwardTo as forwardTo$1, doneInvoke as doneInvoke$1, raise as raise$1, log as log$1, pure as pure$1, choose as choose$1, stop as stop$1 } from './actions.js';\nimport * as actions from './actions.js';\nexport { actions };\nexport { toActorRef } from './Actor.js';\nexport { Interpreter, InterpreterStatus, interpret, spawn } from './interpreter.js';\nexport { Machine, createMachine } from './Machine.js';\nexport { mapState } from './mapState.js';\nexport { matchState } from './match.js';\nexport { createSchema, t } from './schema.js';\nexport { State } from './State.js';\nexport { StateNode } from './StateNode.js';\nexport { spawnBehavior } from './behaviors.js';\nexport { ActionTypes, SpecialTargets } from './types.js';\nexport { matchesState, toEventObject, toObserver, toSCXMLEvent } from './utils.js';\n\nvar assign = assign$1,\n    cancel = cancel$1,\n    send = send$1,\n    sendTo = sendTo$1,\n    sendParent = sendParent$1,\n    sendUpdate = sendUpdate$1,\n    forwardTo = forwardTo$1,\n    doneInvoke = doneInvoke$1,\n    raise = raise$1,\n    log = log$1,\n    pure = pure$1,\n    choose = choose$1,\n    stop = stop$1;\n\nexport { assign, cancel, choose, doneInvoke, forwardTo, log, pure, raise, send, sendParent, sendTo, sendUpdate, stop };\n","import { __values, __spreadArray, __read, __assign } from './_virtual/_tslib.js';\nimport { SpecialTargets, ActionTypes } from './types.js';\nimport { isStateConfig, State, bindActionToState } from './State.js';\nimport { errorPlatform, update, error as error$1, log, stop, start, cancel, send, raise } from './actionTypes.js';\nimport { initEvent, doneInvoke, toActionObjects, resolveActions, error, getActionFunction } from './actions.js';\nimport { IS_PRODUCTION } from './environment.js';\nimport { warn, mapContext, toObserver, isFunction, toSCXMLEvent, flatten, isRaisableAction, isPromiseLike, isObservable, isMachine, isBehavior, reportUnhandledExceptionOnInvocation, symbolObservable, isArray, toEventObject, isString, isActor, toInvokeSource, uniqueId } from './utils.js';\nimport { Scheduler } from './scheduler.js';\nimport { createDeferredActor, isSpawnedActor } from './Actor.js';\nimport { registry } from './registry.js';\nimport { getGlobal, registerService } from './devTools.js';\nimport { provide, consume } from './serviceScope.js';\nimport { spawnBehavior } from './behaviors.js';\n\nvar DEFAULT_SPAWN_OPTIONS = {\n  sync: false,\n  autoForward: false\n};\nvar InterpreterStatus;\n\n(function (InterpreterStatus) {\n  InterpreterStatus[InterpreterStatus[\"NotStarted\"] = 0] = \"NotStarted\";\n  InterpreterStatus[InterpreterStatus[\"Running\"] = 1] = \"Running\";\n  InterpreterStatus[InterpreterStatus[\"Stopped\"] = 2] = \"Stopped\";\n})(InterpreterStatus || (InterpreterStatus = {}));\n\nvar Interpreter =\n/*#__PURE__*/\n\n/** @class */\nfunction () {\n  /**\r\n   * Creates a new Interpreter instance (i.e., service) for the given machine with the provided options, if any.\r\n   *\r\n   * @param machine The machine to be interpreted\r\n   * @param options Interpreter options\r\n   */\n  function Interpreter(machine, options) {\n    if (options === void 0) {\n      options = Interpreter.defaultOptions;\n    }\n\n    var _this = this;\n\n    this.machine = machine;\n    this.delayedEventsMap = {};\n    this.listeners = new Set();\n    this.contextListeners = new Set();\n    this.stopListeners = new Set();\n    this.doneListeners = new Set();\n    this.eventListeners = new Set();\n    this.sendListeners = new Set();\n    /**\r\n     * Whether the service is started.\r\n     */\n\n    this.initialized = false;\n    this.status = InterpreterStatus.NotStarted;\n    this.children = new Map();\n    this.forwardTo = new Set();\n    this._outgoingQueue = [];\n    /**\r\n     * Alias for Interpreter.prototype.start\r\n     */\n\n    this.init = this.start;\n    /**\r\n     * Sends an event to the running interpreter to trigger a transition.\r\n     *\r\n     * An array of events (batched) can be sent as well, which will send all\r\n     * batched events to the running interpreter. The listeners will be\r\n     * notified only **once** when all events are processed.\r\n     *\r\n     * @param event The event(s) to send\r\n     */\n\n    this.send = function (event, payload) {\n      if (isArray(event)) {\n        _this.batch(event);\n\n        return _this.state;\n      }\n\n      var _event = toSCXMLEvent(toEventObject(event, payload));\n\n      if (_this.status === InterpreterStatus.Stopped) {\n        // do nothing\n        if (!IS_PRODUCTION) {\n          warn(false, \"Event \\\"\".concat(_event.name, \"\\\" was sent to stopped service \\\"\").concat(_this.machine.id, \"\\\". This service has already reached its final state, and will not transition.\\nEvent: \").concat(JSON.stringify(_event.data)));\n        }\n\n        return _this.state;\n      }\n\n      if (_this.status !== InterpreterStatus.Running && !_this.options.deferEvents) {\n        throw new Error(\"Event \\\"\".concat(_event.name, \"\\\" was sent to uninitialized service \\\"\").concat(_this.machine.id // tslint:disable-next-line:max-line-length\n        , \"\\\". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.\\nEvent: \").concat(JSON.stringify(_event.data)));\n      }\n\n      _this.scheduler.schedule(function () {\n        // Forward copy of event to child actors\n        _this.forward(_event);\n\n        var nextState = _this._nextState(_event);\n\n        _this.update(nextState, _event);\n      });\n\n      return _this._state; // TODO: deprecate (should return void)\n      // tslint:disable-next-line:semicolon\n    };\n\n    this.sendTo = function (event, to, immediate) {\n      var isParent = _this.parent && (to === SpecialTargets.Parent || _this.parent.id === to);\n      var target = isParent ? _this.parent : isString(to) ? to === SpecialTargets.Internal ? _this : _this.children.get(to) || registry.get(to) : isActor(to) ? to : undefined;\n\n      if (!target) {\n        if (!isParent) {\n          throw new Error(\"Unable to send event to child '\".concat(to, \"' from service '\").concat(_this.id, \"'.\"));\n        } // tslint:disable-next-line:no-console\n\n\n        if (!IS_PRODUCTION) {\n          warn(false, \"Service '\".concat(_this.id, \"' has no parent: unable to send event \").concat(event.type));\n        }\n\n        return;\n      }\n\n      if ('machine' in target) {\n        // perhaps those events should be rejected in the parent\n        // but atm it doesn't have easy access to all of the information that is required to do it reliably\n        if (_this.status !== InterpreterStatus.Stopped || _this.parent !== target || // we need to send events to the parent from exit handlers of a machine that reached its final state\n        _this.state.done) {\n          // Send SCXML events to machines\n          var scxmlEvent = __assign(__assign({}, event), {\n            name: event.name === error$1 ? \"\".concat(error(_this.id)) : event.name,\n            origin: _this.sessionId\n          });\n\n          if (!immediate && _this.machine.config.predictableActionArguments) {\n            _this._outgoingQueue.push([target, scxmlEvent]);\n          } else {\n            target.send(scxmlEvent);\n          }\n        }\n      } else {\n        // Send normal events to other targets\n        if (!immediate && _this.machine.config.predictableActionArguments) {\n          _this._outgoingQueue.push([target, event.data]);\n        } else {\n          target.send(event.data);\n        }\n      }\n    };\n\n    this._exec = function (action, context, _event, actionFunctionMap) {\n      if (actionFunctionMap === void 0) {\n        actionFunctionMap = _this.machine.options.actions;\n      }\n\n      var actionOrExec = action.exec || getActionFunction(action.type, actionFunctionMap);\n      var exec = isFunction(actionOrExec) ? actionOrExec : actionOrExec ? actionOrExec.exec : action.exec;\n\n      if (exec) {\n        try {\n          return exec(context, _event.data, !_this.machine.config.predictableActionArguments ? {\n            action: action,\n            state: _this.state,\n            _event: _event\n          } : {\n            action: action,\n            _event: _event\n          });\n        } catch (err) {\n          if (_this.parent) {\n            _this.parent.send({\n              type: 'xstate.error',\n              data: err\n            });\n          }\n\n          throw err;\n        }\n      }\n\n      switch (action.type) {\n        case raise:\n          {\n            // if raise action reached the interpreter then it's a delayed one\n            var sendAction_1 = action;\n\n            _this.defer(sendAction_1);\n\n            break;\n          }\n\n        case send:\n          var sendAction = action;\n\n          if (typeof sendAction.delay === 'number') {\n            _this.defer(sendAction);\n\n            return;\n          } else {\n            if (sendAction.to) {\n              _this.sendTo(sendAction._event, sendAction.to, _event === initEvent);\n            } else {\n              _this.send(sendAction._event);\n            }\n          }\n\n          break;\n\n        case cancel:\n          _this.cancel(action.sendId);\n\n          break;\n\n        case start:\n          {\n            if (_this.status !== InterpreterStatus.Running) {\n              return;\n            }\n\n            var activity = action.activity; // If the activity will be stopped right after it's started\n            // (such as in transient states)\n            // don't bother starting the activity.\n\n            if ( // in v4 with `predictableActionArguments` invokes are called eagerly when the `this.state` still points to the previous state\n            !_this.machine.config.predictableActionArguments && !_this.state.activities[activity.id || activity.type]) {\n              break;\n            } // Invoked services\n\n\n            if (activity.type === ActionTypes.Invoke) {\n              var invokeSource = toInvokeSource(activity.src);\n              var serviceCreator = _this.machine.options.services ? _this.machine.options.services[invokeSource.type] : undefined;\n              var id = activity.id,\n                  data = activity.data;\n\n              if (!IS_PRODUCTION) {\n                warn(!('forward' in activity), // tslint:disable-next-line:max-line-length\n                \"`forward` property is deprecated (found in invocation of '\".concat(activity.src, \"' in in machine '\").concat(_this.machine.id, \"'). \") + \"Please use `autoForward` instead.\");\n              }\n\n              var autoForward = 'autoForward' in activity ? activity.autoForward : !!activity.forward;\n\n              if (!serviceCreator) {\n                // tslint:disable-next-line:no-console\n                if (!IS_PRODUCTION) {\n                  warn(false, \"No service found for invocation '\".concat(activity.src, \"' in machine '\").concat(_this.machine.id, \"'.\"));\n                }\n\n                return;\n              }\n\n              var resolvedData = data ? mapContext(data, context, _event) : undefined;\n\n              if (typeof serviceCreator === 'string') {\n                // TODO: warn\n                return;\n              }\n\n              var source = isFunction(serviceCreator) ? serviceCreator(context, _event.data, {\n                data: resolvedData,\n                src: invokeSource,\n                meta: activity.meta\n              }) : serviceCreator;\n\n              if (!source) {\n                // TODO: warn?\n                return;\n              }\n\n              var options = void 0;\n\n              if (isMachine(source)) {\n                source = resolvedData ? source.withContext(resolvedData) : source;\n                options = {\n                  autoForward: autoForward\n                };\n              }\n\n              _this.spawn(source, id, options);\n            } else {\n              _this.spawnActivity(activity);\n            }\n\n            break;\n          }\n\n        case stop:\n          {\n            _this.stopChild(action.activity.id);\n\n            break;\n          }\n\n        case log:\n          var _a = action,\n              label = _a.label,\n              value = _a.value;\n\n          if (label) {\n            _this.logger(label, value);\n          } else {\n            _this.logger(value);\n          }\n\n          break;\n\n        default:\n          if (!IS_PRODUCTION) {\n            warn(false, \"No implementation found for action type '\".concat(action.type, \"'\"));\n          }\n\n          break;\n      }\n    };\n\n    var resolvedOptions = __assign(__assign({}, Interpreter.defaultOptions), options);\n\n    var clock = resolvedOptions.clock,\n        logger = resolvedOptions.logger,\n        parent = resolvedOptions.parent,\n        id = resolvedOptions.id;\n    var resolvedId = id !== undefined ? id : machine.id;\n    this.id = resolvedId;\n    this.logger = logger;\n    this.clock = clock;\n    this.parent = parent;\n    this.options = resolvedOptions;\n    this.scheduler = new Scheduler({\n      deferEvents: this.options.deferEvents\n    });\n    this.sessionId = registry.bookId();\n  }\n\n  Object.defineProperty(Interpreter.prototype, \"initialState\", {\n    get: function () {\n      var _this = this;\n\n      if (this._initialState) {\n        return this._initialState;\n      }\n\n      return provide(this, function () {\n        _this._initialState = _this.machine.initialState;\n        return _this._initialState;\n      });\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Interpreter.prototype, \"state\", {\n    /**\r\n     * @deprecated Use `.getSnapshot()` instead.\r\n     */\n    get: function () {\n      if (!IS_PRODUCTION) {\n        warn(this.status !== InterpreterStatus.NotStarted, \"Attempted to read state from uninitialized service '\".concat(this.id, \"'. Make sure the service is started first.\"));\n      }\n\n      return this._state;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  /**\r\n   * Executes the actions of the given state, with that state's `context` and `event`.\r\n   *\r\n   * @param state The state whose actions will be executed\r\n   * @param actionsConfig The action implementations to use\r\n   */\n\n  Interpreter.prototype.execute = function (state, actionsConfig) {\n    var e_1, _a;\n\n    try {\n      for (var _b = __values(state.actions), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var action = _c.value;\n        this.exec(action, state, actionsConfig);\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n  };\n\n  Interpreter.prototype.update = function (state, _event) {\n    var e_2, _a, e_3, _b, e_4, _c, e_5, _d;\n\n    var _this = this; // Attach session ID to state\n\n\n    state._sessionid = this.sessionId; // Update state\n\n    this._state = state; // Execute actions\n\n    if ((!this.machine.config.predictableActionArguments || // this is currently required to execute initial actions as the `initialState` gets cached\n    // we can't just recompute it (and execute actions while doing so) because we try to preserve identity of actors created within initial assigns\n    _event === initEvent) && this.options.execute) {\n      this.execute(this.state);\n    } else {\n      var item = void 0;\n\n      while (item = this._outgoingQueue.shift()) {\n        item[0].send(item[1]);\n      }\n    } // Update children\n\n\n    this.children.forEach(function (child) {\n      _this.state.children[child.id] = child;\n    }); // Dev tools\n\n    if (this.devTools) {\n      this.devTools.send(_event.data, state);\n    } // Execute listeners\n\n\n    if (state.event) {\n      try {\n        for (var _e = __values(this.eventListeners), _f = _e.next(); !_f.done; _f = _e.next()) {\n          var listener = _f.value;\n          listener(state.event);\n        }\n      } catch (e_2_1) {\n        e_2 = {\n          error: e_2_1\n        };\n      } finally {\n        try {\n          if (_f && !_f.done && (_a = _e.return)) _a.call(_e);\n        } finally {\n          if (e_2) throw e_2.error;\n        }\n      }\n    }\n\n    try {\n      for (var _g = __values(this.listeners), _h = _g.next(); !_h.done; _h = _g.next()) {\n        var listener = _h.value;\n        listener(state, state.event);\n      }\n    } catch (e_3_1) {\n      e_3 = {\n        error: e_3_1\n      };\n    } finally {\n      try {\n        if (_h && !_h.done && (_b = _g.return)) _b.call(_g);\n      } finally {\n        if (e_3) throw e_3.error;\n      }\n    }\n\n    try {\n      for (var _j = __values(this.contextListeners), _k = _j.next(); !_k.done; _k = _j.next()) {\n        var contextListener = _k.value;\n        contextListener(this.state.context, this.state.history ? this.state.history.context : undefined);\n      }\n    } catch (e_4_1) {\n      e_4 = {\n        error: e_4_1\n      };\n    } finally {\n      try {\n        if (_k && !_k.done && (_c = _j.return)) _c.call(_j);\n      } finally {\n        if (e_4) throw e_4.error;\n      }\n    }\n\n    if (this.state.done) {\n      // get final child state node\n      var finalChildStateNode = state.configuration.find(function (sn) {\n        return sn.type === 'final' && sn.parent === _this.machine;\n      });\n      var doneData = finalChildStateNode && finalChildStateNode.doneData ? mapContext(finalChildStateNode.doneData, state.context, _event) : undefined;\n      this._doneEvent = doneInvoke(this.id, doneData);\n\n      try {\n        for (var _l = __values(this.doneListeners), _m = _l.next(); !_m.done; _m = _l.next()) {\n          var listener = _m.value;\n          listener(this._doneEvent);\n        }\n      } catch (e_5_1) {\n        e_5 = {\n          error: e_5_1\n        };\n      } finally {\n        try {\n          if (_m && !_m.done && (_d = _l.return)) _d.call(_l);\n        } finally {\n          if (e_5) throw e_5.error;\n        }\n      }\n\n      this._stop();\n\n      this._stopChildren();\n\n      registry.free(this.sessionId);\n    }\n  };\n  /*\r\n   * Adds a listener that is notified whenever a state transition happens. The listener is called with\r\n   * the next state and the event object that caused the state transition.\r\n   *\r\n   * @param listener The state listener\r\n   */\n\n\n  Interpreter.prototype.onTransition = function (listener) {\n    this.listeners.add(listener); // Send current state to listener\n\n    if (this.status === InterpreterStatus.Running) {\n      listener(this.state, this.state.event);\n    }\n\n    return this;\n  };\n\n  Interpreter.prototype.subscribe = function (nextListenerOrObserver, _, // TODO: error listener\n  completeListener) {\n    var _this = this;\n\n    var observer = toObserver(nextListenerOrObserver, _, completeListener);\n    this.listeners.add(observer.next); // Send current state to listener\n\n    if (this.status !== InterpreterStatus.NotStarted) {\n      observer.next(this.state);\n    }\n\n    var completeOnce = function () {\n      _this.doneListeners.delete(completeOnce);\n\n      _this.stopListeners.delete(completeOnce);\n\n      observer.complete();\n    };\n\n    if (this.status === InterpreterStatus.Stopped) {\n      observer.complete();\n    } else {\n      this.onDone(completeOnce);\n      this.onStop(completeOnce);\n    }\n\n    return {\n      unsubscribe: function () {\n        _this.listeners.delete(observer.next);\n\n        _this.doneListeners.delete(completeOnce);\n\n        _this.stopListeners.delete(completeOnce);\n      }\n    };\n  };\n  /**\r\n   * Adds an event listener that is notified whenever an event is sent to the running interpreter.\r\n   * @param listener The event listener\r\n   */\n\n\n  Interpreter.prototype.onEvent = function (listener) {\n    this.eventListeners.add(listener);\n    return this;\n  };\n  /**\r\n   * Adds an event listener that is notified whenever a `send` event occurs.\r\n   * @param listener The event listener\r\n   */\n\n\n  Interpreter.prototype.onSend = function (listener) {\n    this.sendListeners.add(listener);\n    return this;\n  };\n  /**\r\n   * Adds a context listener that is notified whenever the state context changes.\r\n   * @param listener The context listener\r\n   */\n\n\n  Interpreter.prototype.onChange = function (listener) {\n    this.contextListeners.add(listener);\n    return this;\n  };\n  /**\r\n   * Adds a listener that is notified when the machine is stopped.\r\n   * @param listener The listener\r\n   */\n\n\n  Interpreter.prototype.onStop = function (listener) {\n    this.stopListeners.add(listener);\n    return this;\n  };\n  /**\r\n   * Adds a state listener that is notified when the statechart has reached its final state.\r\n   * @param listener The state listener\r\n   */\n\n\n  Interpreter.prototype.onDone = function (listener) {\n    if (this.status === InterpreterStatus.Stopped && this._doneEvent) {\n      listener(this._doneEvent);\n    } else {\n      this.doneListeners.add(listener);\n    }\n\n    return this;\n  };\n  /**\r\n   * Removes a listener.\r\n   * @param listener The listener to remove\r\n   */\n\n\n  Interpreter.prototype.off = function (listener) {\n    this.listeners.delete(listener);\n    this.eventListeners.delete(listener);\n    this.sendListeners.delete(listener);\n    this.stopListeners.delete(listener);\n    this.doneListeners.delete(listener);\n    this.contextListeners.delete(listener);\n    return this;\n  };\n  /**\r\n   * Starts the interpreter from the given state, or the initial state.\r\n   * @param initialState The state to start the statechart from\r\n   */\n\n\n  Interpreter.prototype.start = function (initialState) {\n    var _this = this;\n\n    if (this.status === InterpreterStatus.Running) {\n      // Do not restart the service if it is already started\n      return this;\n    } // yes, it's a hack but we need the related cache to be populated for some things to work (like delayed transitions)\n    // this is usually called by `machine.getInitialState` but if we rehydrate from a state we might bypass this call\n    // we also don't want to call this method here as it resolves the full initial state which might involve calling assign actions\n    // and that could potentially lead to some unwanted side-effects (even such as creating some rogue actors)\n\n\n    this.machine._init();\n\n    registry.register(this.sessionId, this);\n    this.initialized = true;\n    this.status = InterpreterStatus.Running;\n    var resolvedState = initialState === undefined ? this.initialState : provide(this, function () {\n      return isStateConfig(initialState) ? _this.machine.resolveState(initialState) : _this.machine.resolveState(State.from(initialState, _this.machine.context));\n    });\n\n    if (this.options.devTools) {\n      this.attachDev();\n    }\n\n    this.scheduler.initialize(function () {\n      _this.update(resolvedState, initEvent);\n    });\n    return this;\n  };\n\n  Interpreter.prototype._stopChildren = function () {\n    // TODO: think about converting those to actions\n    this.children.forEach(function (child) {\n      if (isFunction(child.stop)) {\n        child.stop();\n      }\n    });\n    this.children.clear();\n  };\n\n  Interpreter.prototype._stop = function () {\n    var e_6, _a, e_7, _b, e_8, _c, e_9, _d, e_10, _e;\n\n    try {\n      for (var _f = __values(this.listeners), _g = _f.next(); !_g.done; _g = _f.next()) {\n        var listener = _g.value;\n        this.listeners.delete(listener);\n      }\n    } catch (e_6_1) {\n      e_6 = {\n        error: e_6_1\n      };\n    } finally {\n      try {\n        if (_g && !_g.done && (_a = _f.return)) _a.call(_f);\n      } finally {\n        if (e_6) throw e_6.error;\n      }\n    }\n\n    try {\n      for (var _h = __values(this.stopListeners), _j = _h.next(); !_j.done; _j = _h.next()) {\n        var listener = _j.value; // call listener, then remove\n\n        listener();\n        this.stopListeners.delete(listener);\n      }\n    } catch (e_7_1) {\n      e_7 = {\n        error: e_7_1\n      };\n    } finally {\n      try {\n        if (_j && !_j.done && (_b = _h.return)) _b.call(_h);\n      } finally {\n        if (e_7) throw e_7.error;\n      }\n    }\n\n    try {\n      for (var _k = __values(this.contextListeners), _l = _k.next(); !_l.done; _l = _k.next()) {\n        var listener = _l.value;\n        this.contextListeners.delete(listener);\n      }\n    } catch (e_8_1) {\n      e_8 = {\n        error: e_8_1\n      };\n    } finally {\n      try {\n        if (_l && !_l.done && (_c = _k.return)) _c.call(_k);\n      } finally {\n        if (e_8) throw e_8.error;\n      }\n    }\n\n    try {\n      for (var _m = __values(this.doneListeners), _o = _m.next(); !_o.done; _o = _m.next()) {\n        var listener = _o.value;\n        this.doneListeners.delete(listener);\n      }\n    } catch (e_9_1) {\n      e_9 = {\n        error: e_9_1\n      };\n    } finally {\n      try {\n        if (_o && !_o.done && (_d = _m.return)) _d.call(_m);\n      } finally {\n        if (e_9) throw e_9.error;\n      }\n    }\n\n    if (!this.initialized) {\n      // Interpreter already stopped; do nothing\n      return this;\n    }\n\n    this.initialized = false;\n    this.status = InterpreterStatus.Stopped;\n    this._initialState = undefined;\n\n    try {\n      // we are going to stop within the current sync frame\n      // so we can safely just cancel this here as nothing async should be fired anyway\n      for (var _p = __values(Object.keys(this.delayedEventsMap)), _q = _p.next(); !_q.done; _q = _p.next()) {\n        var key = _q.value;\n        this.clock.clearTimeout(this.delayedEventsMap[key]);\n      }\n    } catch (e_10_1) {\n      e_10 = {\n        error: e_10_1\n      };\n    } finally {\n      try {\n        if (_q && !_q.done && (_e = _p.return)) _e.call(_p);\n      } finally {\n        if (e_10) throw e_10.error;\n      }\n    } // clear everything that might be enqueued\n\n\n    this.scheduler.clear();\n    this.scheduler = new Scheduler({\n      deferEvents: this.options.deferEvents\n    });\n  };\n  /**\r\n   * Stops the interpreter and unsubscribe all listeners.\r\n   *\r\n   * This will also notify the `onStop` listeners.\r\n   */\n\n\n  Interpreter.prototype.stop = function () {\n    // TODO: add warning for stopping non-root interpreters\n    var _this = this; // grab the current scheduler as it will be replaced in _stop\n\n\n    var scheduler = this.scheduler;\n\n    this._stop(); // let what is currently processed to be finished\n\n\n    scheduler.schedule(function () {\n      var _a;\n\n      if ((_a = _this._state) === null || _a === void 0 ? void 0 : _a.done) {\n        return;\n      } // it feels weird to handle this here but we need to handle this even slightly \"out of band\"\n\n\n      var _event = toSCXMLEvent({\n        type: 'xstate.stop'\n      });\n\n      var nextState = provide(_this, function () {\n        var exitActions = flatten(__spreadArray([], __read(_this.state.configuration), false).sort(function (a, b) {\n          return b.order - a.order;\n        }).map(function (stateNode) {\n          return toActionObjects(stateNode.onExit, _this.machine.options.actions);\n        }));\n\n        var _a = __read(resolveActions(_this.machine, _this.state, _this.state.context, _event, [{\n          type: 'exit',\n          actions: exitActions\n        }], _this.machine.config.predictableActionArguments ? _this._exec : undefined, _this.machine.config.predictableActionArguments || _this.machine.config.preserveActionOrder), 2),\n            resolvedActions = _a[0],\n            updatedContext = _a[1];\n\n        var newState = new State({\n          value: _this.state.value,\n          context: updatedContext,\n          _event: _event,\n          _sessionid: _this.sessionId,\n          historyValue: undefined,\n          history: _this.state,\n          actions: resolvedActions.filter(function (action) {\n            return !isRaisableAction(action);\n          }),\n          activities: {},\n          events: [],\n          configuration: [],\n          transitions: [],\n          children: {},\n          done: _this.state.done,\n          tags: _this.state.tags,\n          machine: _this.machine\n        });\n        newState.changed = true;\n        return newState;\n      });\n\n      _this.update(nextState, _event);\n\n      _this._stopChildren();\n\n      registry.free(_this.sessionId);\n    });\n    return this;\n  };\n\n  Interpreter.prototype.batch = function (events) {\n    var _this = this;\n\n    if (this.status === InterpreterStatus.NotStarted && this.options.deferEvents) {\n      // tslint:disable-next-line:no-console\n      if (!IS_PRODUCTION) {\n        warn(false, \"\".concat(events.length, \" event(s) were sent to uninitialized service \\\"\").concat(this.machine.id, \"\\\" and are deferred. Make sure .start() is called for this service.\\nEvent: \").concat(JSON.stringify(event)));\n      }\n    } else if (this.status !== InterpreterStatus.Running) {\n      throw new Error( // tslint:disable-next-line:max-line-length\n      \"\".concat(events.length, \" event(s) were sent to uninitialized service \\\"\").concat(this.machine.id, \"\\\". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.\"));\n    }\n\n    if (!events.length) {\n      return;\n    }\n\n    var exec = !!this.machine.config.predictableActionArguments && this._exec;\n    this.scheduler.schedule(function () {\n      var e_11, _a;\n\n      var nextState = _this.state;\n      var batchChanged = false;\n      var batchedActions = [];\n\n      var _loop_1 = function (event_1) {\n        var _event = toSCXMLEvent(event_1);\n\n        _this.forward(_event);\n\n        nextState = provide(_this, function () {\n          return _this.machine.transition(nextState, _event, undefined, exec || undefined);\n        });\n        batchedActions.push.apply(batchedActions, __spreadArray([], __read(_this.machine.config.predictableActionArguments ? nextState.actions : nextState.actions.map(function (a) {\n          return bindActionToState(a, nextState);\n        })), false));\n        batchChanged = batchChanged || !!nextState.changed;\n      };\n\n      try {\n        for (var events_1 = __values(events), events_1_1 = events_1.next(); !events_1_1.done; events_1_1 = events_1.next()) {\n          var event_1 = events_1_1.value;\n\n          _loop_1(event_1);\n        }\n      } catch (e_11_1) {\n        e_11 = {\n          error: e_11_1\n        };\n      } finally {\n        try {\n          if (events_1_1 && !events_1_1.done && (_a = events_1.return)) _a.call(events_1);\n        } finally {\n          if (e_11) throw e_11.error;\n        }\n      }\n\n      nextState.changed = batchChanged;\n      nextState.actions = batchedActions;\n\n      _this.update(nextState, toSCXMLEvent(events[events.length - 1]));\n    });\n  };\n  /**\r\n   * Returns a send function bound to this interpreter instance.\r\n   *\r\n   * @param event The event to be sent by the sender.\r\n   */\n\n\n  Interpreter.prototype.sender = function (event) {\n    return this.send.bind(this, event);\n  };\n\n  Interpreter.prototype._nextState = function (event, exec) {\n    var _this = this;\n\n    if (exec === void 0) {\n      exec = !!this.machine.config.predictableActionArguments && this._exec;\n    }\n\n    var _event = toSCXMLEvent(event);\n\n    if (_event.name.indexOf(errorPlatform) === 0 && !this.state.nextEvents.some(function (nextEvent) {\n      return nextEvent.indexOf(errorPlatform) === 0;\n    })) {\n      throw _event.data.data;\n    }\n\n    var nextState = provide(this, function () {\n      return _this.machine.transition(_this.state, _event, undefined, exec || undefined);\n    });\n    return nextState;\n  };\n  /**\r\n   * Returns the next state given the interpreter's current state and the event.\r\n   *\r\n   * This is a pure method that does _not_ update the interpreter's state.\r\n   *\r\n   * @param event The event to determine the next state\r\n   */\n\n\n  Interpreter.prototype.nextState = function (event) {\n    return this._nextState(event, false);\n  };\n\n  Interpreter.prototype.forward = function (event) {\n    var e_12, _a;\n\n    try {\n      for (var _b = __values(this.forwardTo), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var id = _c.value;\n        var child = this.children.get(id);\n\n        if (!child) {\n          throw new Error(\"Unable to forward event '\".concat(event, \"' from interpreter '\").concat(this.id, \"' to nonexistant child '\").concat(id, \"'.\"));\n        }\n\n        child.send(event);\n      }\n    } catch (e_12_1) {\n      e_12 = {\n        error: e_12_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_12) throw e_12.error;\n      }\n    }\n  };\n\n  Interpreter.prototype.defer = function (sendAction) {\n    var _this = this;\n\n    var timerId = this.clock.setTimeout(function () {\n      if ('to' in sendAction && sendAction.to) {\n        _this.sendTo(sendAction._event, sendAction.to, true);\n      } else {\n        _this.send(sendAction._event);\n      }\n    }, sendAction.delay);\n\n    if (sendAction.id) {\n      this.delayedEventsMap[sendAction.id] = timerId;\n    }\n  };\n\n  Interpreter.prototype.cancel = function (sendId) {\n    this.clock.clearTimeout(this.delayedEventsMap[sendId]);\n    delete this.delayedEventsMap[sendId];\n  };\n\n  Interpreter.prototype.exec = function (action, state, actionFunctionMap) {\n    if (actionFunctionMap === void 0) {\n      actionFunctionMap = this.machine.options.actions;\n    }\n\n    this._exec(action, state.context, state._event, actionFunctionMap);\n  };\n\n  Interpreter.prototype.removeChild = function (childId) {\n    var _a;\n\n    this.children.delete(childId);\n    this.forwardTo.delete(childId); // this.state might not exist at the time this is called,\n    // such as when a child is added then removed while initializing the state\n\n    (_a = this.state) === null || _a === void 0 ? true : delete _a.children[childId];\n  };\n\n  Interpreter.prototype.stopChild = function (childId) {\n    var child = this.children.get(childId);\n\n    if (!child) {\n      return;\n    }\n\n    this.removeChild(childId);\n\n    if (isFunction(child.stop)) {\n      child.stop();\n    }\n  };\n\n  Interpreter.prototype.spawn = function (entity, name, options) {\n    if (this.status !== InterpreterStatus.Running) {\n      return createDeferredActor(entity, name);\n    }\n\n    if (isPromiseLike(entity)) {\n      return this.spawnPromise(Promise.resolve(entity), name);\n    } else if (isFunction(entity)) {\n      return this.spawnCallback(entity, name);\n    } else if (isSpawnedActor(entity)) {\n      return this.spawnActor(entity, name);\n    } else if (isObservable(entity)) {\n      return this.spawnObservable(entity, name);\n    } else if (isMachine(entity)) {\n      return this.spawnMachine(entity, __assign(__assign({}, options), {\n        id: name\n      }));\n    } else if (isBehavior(entity)) {\n      return this.spawnBehavior(entity, name);\n    } else {\n      throw new Error(\"Unable to spawn entity \\\"\".concat(name, \"\\\" of type \\\"\").concat(typeof entity, \"\\\".\"));\n    }\n  };\n\n  Interpreter.prototype.spawnMachine = function (machine, options) {\n    var _this = this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    var childService = new Interpreter(machine, __assign(__assign({}, this.options), {\n      parent: this,\n      id: options.id || machine.id\n    }));\n\n    var resolvedOptions = __assign(__assign({}, DEFAULT_SPAWN_OPTIONS), options);\n\n    if (resolvedOptions.sync) {\n      childService.onTransition(function (state) {\n        _this.send(update, {\n          state: state,\n          id: childService.id\n        });\n      });\n    }\n\n    var actor = childService;\n    this.children.set(childService.id, actor);\n\n    if (resolvedOptions.autoForward) {\n      this.forwardTo.add(childService.id);\n    }\n\n    childService.onDone(function (doneEvent) {\n      _this.removeChild(childService.id);\n\n      _this.send(toSCXMLEvent(doneEvent, {\n        origin: childService.id\n      }));\n    }).start();\n    return actor;\n  };\n\n  Interpreter.prototype.spawnBehavior = function (behavior, id) {\n    var actorRef = spawnBehavior(behavior, {\n      id: id,\n      parent: this\n    });\n    this.children.set(id, actorRef);\n    return actorRef;\n  };\n\n  Interpreter.prototype.spawnPromise = function (promise, id) {\n    var _a;\n\n    var _this = this;\n\n    var canceled = false;\n    var resolvedData;\n    promise.then(function (response) {\n      if (!canceled) {\n        resolvedData = response;\n\n        _this.removeChild(id);\n\n        _this.send(toSCXMLEvent(doneInvoke(id, response), {\n          origin: id\n        }));\n      }\n    }, function (errorData) {\n      if (!canceled) {\n        _this.removeChild(id);\n\n        var errorEvent = error(id, errorData);\n\n        try {\n          // Send \"error.platform.id\" to this (parent).\n          _this.send(toSCXMLEvent(errorEvent, {\n            origin: id\n          }));\n        } catch (error) {\n          reportUnhandledExceptionOnInvocation(errorData, error, id);\n\n          if (_this.devTools) {\n            _this.devTools.send(errorEvent, _this.state);\n          }\n\n          if (_this.machine.strict) {\n            // it would be better to always stop the state machine if unhandled\n            // exception/promise rejection happens but because we don't want to\n            // break existing code so enforce it on strict mode only especially so\n            // because documentation says that onError is optional\n            _this.stop();\n          }\n        }\n      }\n    });\n    var actor = (_a = {\n      id: id,\n      send: function () {\n        return void 0;\n      },\n      subscribe: function (next, handleError, complete) {\n        var observer = toObserver(next, handleError, complete);\n        var unsubscribed = false;\n        promise.then(function (response) {\n          if (unsubscribed) {\n            return;\n          }\n\n          observer.next(response);\n\n          if (unsubscribed) {\n            return;\n          }\n\n          observer.complete();\n        }, function (err) {\n          if (unsubscribed) {\n            return;\n          }\n\n          observer.error(err);\n        });\n        return {\n          unsubscribe: function () {\n            return unsubscribed = true;\n          }\n        };\n      },\n      stop: function () {\n        canceled = true;\n      },\n      toJSON: function () {\n        return {\n          id: id\n        };\n      },\n      getSnapshot: function () {\n        return resolvedData;\n      }\n    }, _a[symbolObservable] = function () {\n      return this;\n    }, _a);\n    this.children.set(id, actor);\n    return actor;\n  };\n\n  Interpreter.prototype.spawnCallback = function (callback, id) {\n    var _a;\n\n    var _this = this;\n\n    var canceled = false;\n    var receivers = new Set();\n    var listeners = new Set();\n    var emitted;\n\n    var receive = function (e) {\n      emitted = e;\n      listeners.forEach(function (listener) {\n        return listener(e);\n      });\n\n      if (canceled) {\n        return;\n      }\n\n      _this.send(toSCXMLEvent(e, {\n        origin: id\n      }));\n    };\n\n    var callbackStop;\n\n    try {\n      callbackStop = callback(receive, function (newListener) {\n        receivers.add(newListener);\n      });\n    } catch (err) {\n      this.send(error(id, err));\n    }\n\n    if (isPromiseLike(callbackStop)) {\n      // it turned out to be an async function, can't reliably check this before calling `callback`\n      // because transpiled async functions are not recognizable\n      return this.spawnPromise(callbackStop, id);\n    }\n\n    var actor = (_a = {\n      id: id,\n      send: function (event) {\n        return receivers.forEach(function (receiver) {\n          return receiver(event);\n        });\n      },\n      subscribe: function (next) {\n        var observer = toObserver(next);\n        listeners.add(observer.next);\n        return {\n          unsubscribe: function () {\n            listeners.delete(observer.next);\n          }\n        };\n      },\n      stop: function () {\n        canceled = true;\n\n        if (isFunction(callbackStop)) {\n          callbackStop();\n        }\n      },\n      toJSON: function () {\n        return {\n          id: id\n        };\n      },\n      getSnapshot: function () {\n        return emitted;\n      }\n    }, _a[symbolObservable] = function () {\n      return this;\n    }, _a);\n    this.children.set(id, actor);\n    return actor;\n  };\n\n  Interpreter.prototype.spawnObservable = function (source, id) {\n    var _a;\n\n    var _this = this;\n\n    var emitted;\n    var subscription = source.subscribe(function (value) {\n      emitted = value;\n\n      _this.send(toSCXMLEvent(value, {\n        origin: id\n      }));\n    }, function (err) {\n      _this.removeChild(id);\n\n      _this.send(toSCXMLEvent(error(id, err), {\n        origin: id\n      }));\n    }, function () {\n      _this.removeChild(id);\n\n      _this.send(toSCXMLEvent(doneInvoke(id), {\n        origin: id\n      }));\n    });\n    var actor = (_a = {\n      id: id,\n      send: function () {\n        return void 0;\n      },\n      subscribe: function (next, handleError, complete) {\n        return source.subscribe(next, handleError, complete);\n      },\n      stop: function () {\n        return subscription.unsubscribe();\n      },\n      getSnapshot: function () {\n        return emitted;\n      },\n      toJSON: function () {\n        return {\n          id: id\n        };\n      }\n    }, _a[symbolObservable] = function () {\n      return this;\n    }, _a);\n    this.children.set(id, actor);\n    return actor;\n  };\n\n  Interpreter.prototype.spawnActor = function (actor, name) {\n    this.children.set(name, actor);\n    return actor;\n  };\n\n  Interpreter.prototype.spawnActivity = function (activity) {\n    var implementation = this.machine.options && this.machine.options.activities ? this.machine.options.activities[activity.type] : undefined;\n\n    if (!implementation) {\n      if (!IS_PRODUCTION) {\n        warn(false, \"No implementation found for activity '\".concat(activity.type, \"'\"));\n      } // tslint:disable-next-line:no-console\n\n\n      return;\n    } // Start implementation\n\n\n    var dispose = implementation(this.state.context, activity);\n    this.spawnEffect(activity.id, dispose);\n  };\n\n  Interpreter.prototype.spawnEffect = function (id, dispose) {\n    var _a;\n\n    this.children.set(id, (_a = {\n      id: id,\n      send: function () {\n        return void 0;\n      },\n      subscribe: function () {\n        return {\n          unsubscribe: function () {\n            return void 0;\n          }\n        };\n      },\n      stop: dispose || undefined,\n      getSnapshot: function () {\n        return undefined;\n      },\n      toJSON: function () {\n        return {\n          id: id\n        };\n      }\n    }, _a[symbolObservable] = function () {\n      return this;\n    }, _a));\n  };\n\n  Interpreter.prototype.attachDev = function () {\n    var global = getGlobal();\n\n    if (this.options.devTools && global) {\n      if (global.__REDUX_DEVTOOLS_EXTENSION__) {\n        var devToolsOptions = typeof this.options.devTools === 'object' ? this.options.devTools : undefined;\n        this.devTools = global.__REDUX_DEVTOOLS_EXTENSION__.connect(__assign(__assign({\n          name: this.id,\n          autoPause: true,\n          stateSanitizer: function (state) {\n            return {\n              value: state.value,\n              context: state.context,\n              actions: state.actions\n            };\n          }\n        }, devToolsOptions), {\n          features: __assign({\n            jump: false,\n            skip: false\n          }, devToolsOptions ? devToolsOptions.features : undefined)\n        }), this.machine);\n        this.devTools.init(this.state);\n      } // add XState-specific dev tooling hook\n\n\n      registerService(this);\n    }\n  };\n\n  Interpreter.prototype.toJSON = function () {\n    return {\n      id: this.id\n    };\n  };\n\n  Interpreter.prototype[symbolObservable] = function () {\n    return this;\n  };\n\n  Interpreter.prototype.getSnapshot = function () {\n    if (this.status === InterpreterStatus.NotStarted) {\n      return this.initialState;\n    }\n\n    return this._state;\n  };\n  /**\r\n   * The default interpreter options:\r\n   *\r\n   * - `clock` uses the global `setTimeout` and `clearTimeout` functions\r\n   * - `logger` uses the global `console.log()` method\r\n   */\n\n\n  Interpreter.defaultOptions = {\n    execute: true,\n    deferEvents: true,\n    clock: {\n      setTimeout: function (fn, ms) {\n        return setTimeout(fn, ms);\n      },\n      clearTimeout: function (id) {\n        return clearTimeout(id);\n      }\n    },\n    logger: /*#__PURE__*/console.log.bind(console),\n    devTools: false\n  };\n  Interpreter.interpret = interpret;\n  return Interpreter;\n}();\n\nvar resolveSpawnOptions = function (nameOrOptions) {\n  if (isString(nameOrOptions)) {\n    return __assign(__assign({}, DEFAULT_SPAWN_OPTIONS), {\n      name: nameOrOptions\n    });\n  }\n\n  return __assign(__assign(__assign({}, DEFAULT_SPAWN_OPTIONS), {\n    name: uniqueId()\n  }), nameOrOptions);\n};\n\nfunction spawn(entity, nameOrOptions) {\n  var resolvedOptions = resolveSpawnOptions(nameOrOptions);\n  return consume(function (service) {\n    if (!IS_PRODUCTION) {\n      var isLazyEntity = isMachine(entity) || isFunction(entity);\n      warn(!!service || isLazyEntity, \"Attempted to spawn an Actor (ID: \\\"\".concat(isMachine(entity) ? entity.id : 'undefined', \"\\\") outside of a service. This will have no effect.\"));\n    }\n\n    if (service) {\n      return service.spawn(entity, resolvedOptions.name, resolvedOptions);\n    } else {\n      return createDeferredActor(entity, resolvedOptions.name);\n    }\n  });\n}\n/**\r\n * Creates a new Interpreter instance for the given machine with the provided options, if any.\r\n *\r\n * @param machine The machine to interpret\r\n * @param options Interpreter options\r\n */\n\nfunction interpret(machine, options) {\n  var interpreter = new Interpreter(machine, options);\n  return interpreter;\n}\n\nexport { Interpreter, InterpreterStatus, interpret, spawn };\n","import { __assign, __rest } from './_virtual/_tslib.js';\nimport './types.js';\nimport { invoke } from './actionTypes.js';\nimport './utils.js';\nimport './environment.js';\n\nfunction toInvokeSource(src) {\n  if (typeof src === 'string') {\n    var simpleSrc = {\n      type: src\n    };\n\n    simpleSrc.toString = function () {\n      return src;\n    }; // v4 compat - TODO: remove in v5\n\n\n    return simpleSrc;\n  }\n\n  return src;\n}\nfunction toInvokeDefinition(invokeConfig) {\n  return __assign(__assign({\n    type: invoke\n  }, invokeConfig), {\n    toJSON: function () {\n      invokeConfig.onDone;\n          invokeConfig.onError;\n          var invokeDef = __rest(invokeConfig, [\"onDone\", \"onError\"]);\n\n      return __assign(__assign({}, invokeDef), {\n        type: invoke,\n        src: toInvokeSource(invokeConfig.src)\n      });\n    }\n  });\n}\n\nexport { toInvokeDefinition, toInvokeSource };\n","import { __values } from './_virtual/_tslib.js';\nimport { matchesState } from './utils.js';\n\nfunction mapState(stateMap, stateId) {\n  var e_1, _a;\n\n  var foundStateId;\n\n  try {\n    for (var _b = __values(Object.keys(stateMap)), _c = _b.next(); !_c.done; _c = _b.next()) {\n      var mappedStateId = _c.value;\n\n      if (matchesState(mappedStateId, stateId) && (!foundStateId || stateId.length > foundStateId.length)) {\n        foundStateId = mappedStateId;\n      }\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n\n  return stateMap[foundStateId];\n}\n\nexport { mapState };\n","import { __values, __read } from './_virtual/_tslib.js';\nimport { State } from './State.js';\n\nfunction matchState(state, patterns, defaultValue) {\n  var e_1, _a;\n\n  var resolvedState = State.from(state, state instanceof State ? state.context : undefined);\n\n  try {\n    for (var patterns_1 = __values(patterns), patterns_1_1 = patterns_1.next(); !patterns_1_1.done; patterns_1_1 = patterns_1.next()) {\n      var _b = __read(patterns_1_1.value, 2),\n          stateValue = _b[0],\n          getValue = _b[1];\n\n      if (resolvedState.matches(stateValue)) {\n        return getValue(resolvedState);\n      }\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (patterns_1_1 && !patterns_1_1.done && (_a = patterns_1.return)) _a.call(patterns_1);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n\n  return defaultValue(resolvedState);\n}\n\nexport { matchState };\n","var children = /*#__PURE__*/new Map();\nvar sessionIdIndex = 0;\nvar registry = {\n  bookId: function () {\n    return \"x:\".concat(sessionIdIndex++);\n  },\n  register: function (id, actor) {\n    children.set(id, actor);\n    return id;\n  },\n  get: function (id) {\n    return children.get(id);\n  },\n  free: function (id) {\n    children.delete(id);\n  }\n};\n\nexport { registry };\n","import { __assign } from './_virtual/_tslib.js';\n\nvar defaultOptions = {\n  deferEvents: false\n};\n\nvar Scheduler =\n/*#__PURE__*/\n\n/** @class */\nfunction () {\n  function Scheduler(options) {\n    this.processingEvent = false;\n    this.queue = [];\n    this.initialized = false;\n    this.options = __assign(__assign({}, defaultOptions), options);\n  }\n\n  Scheduler.prototype.initialize = function (callback) {\n    this.initialized = true;\n\n    if (callback) {\n      if (!this.options.deferEvents) {\n        this.schedule(callback);\n        return;\n      }\n\n      this.process(callback);\n    }\n\n    this.flushEvents();\n  };\n\n  Scheduler.prototype.schedule = function (task) {\n    if (!this.initialized || this.processingEvent) {\n      this.queue.push(task);\n      return;\n    }\n\n    if (this.queue.length !== 0) {\n      throw new Error('Event queue should be empty when it is not processing events');\n    }\n\n    this.process(task);\n    this.flushEvents();\n  };\n\n  Scheduler.prototype.clear = function () {\n    this.queue = [];\n  };\n\n  Scheduler.prototype.flushEvents = function () {\n    var nextCallback = this.queue.shift();\n\n    while (nextCallback) {\n      this.process(nextCallback);\n      nextCallback = this.queue.shift();\n    }\n  };\n\n  Scheduler.prototype.process = function (callback) {\n    this.processingEvent = true;\n\n    try {\n      callback();\n    } catch (e) {\n      // there is no use to keep the future events\n      // as the situation is not anymore the same\n      this.clear();\n      throw e;\n    } finally {\n      this.processingEvent = false;\n    }\n  };\n\n  return Scheduler;\n}();\n\nexport { Scheduler };\n","function createSchema(schema) {\n  return schema;\n}\nvar t = createSchema;\n\nexport { createSchema, t };\n","/**\r\n * Maintains a stack of the current service in scope.\r\n * This is used to provide the correct service to spawn().\r\n */\nvar serviceStack = [];\nvar provide = function (service, fn) {\n  serviceStack.push(service);\n  var result = fn(service);\n  serviceStack.pop();\n  return result;\n};\nvar consume = function (fn) {\n  return fn(serviceStack[serviceStack.length - 1]);\n};\n\nexport { consume, provide };\n","import { __values, __spreadArray, __read } from './_virtual/_tslib.js';\nimport { flatten } from './utils.js';\n\nvar isLeafNode = function (stateNode) {\n  return stateNode.type === 'atomic' || stateNode.type === 'final';\n};\nfunction getAllChildren(stateNode) {\n  return Object.keys(stateNode.states).map(function (key) {\n    return stateNode.states[key];\n  });\n}\nfunction getChildren(stateNode) {\n  return getAllChildren(stateNode).filter(function (sn) {\n    return sn.type !== 'history';\n  });\n}\nfunction getAllStateNodes(stateNode) {\n  var stateNodes = [stateNode];\n\n  if (isLeafNode(stateNode)) {\n    return stateNodes;\n  }\n\n  return stateNodes.concat(flatten(getChildren(stateNode).map(getAllStateNodes)));\n}\nfunction getConfiguration(prevStateNodes, stateNodes) {\n  var e_1, _a, e_2, _b, e_3, _c, e_4, _d;\n\n  var prevConfiguration = new Set(prevStateNodes);\n  var prevAdjList = getAdjList(prevConfiguration);\n  var configuration = new Set(stateNodes);\n\n  try {\n    // add all ancestors\n    for (var configuration_1 = __values(configuration), configuration_1_1 = configuration_1.next(); !configuration_1_1.done; configuration_1_1 = configuration_1.next()) {\n      var s = configuration_1_1.value;\n      var m = s.parent;\n\n      while (m && !configuration.has(m)) {\n        configuration.add(m);\n        m = m.parent;\n      }\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (configuration_1_1 && !configuration_1_1.done && (_a = configuration_1.return)) _a.call(configuration_1);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n\n  var adjList = getAdjList(configuration);\n\n  try {\n    // add descendants\n    for (var configuration_2 = __values(configuration), configuration_2_1 = configuration_2.next(); !configuration_2_1.done; configuration_2_1 = configuration_2.next()) {\n      var s = configuration_2_1.value; // if previously active, add existing child nodes\n\n      if (s.type === 'compound' && (!adjList.get(s) || !adjList.get(s).length)) {\n        if (prevAdjList.get(s)) {\n          prevAdjList.get(s).forEach(function (sn) {\n            return configuration.add(sn);\n          });\n        } else {\n          s.initialStateNodes.forEach(function (sn) {\n            return configuration.add(sn);\n          });\n        }\n      } else {\n        if (s.type === 'parallel') {\n          try {\n            for (var _e = (e_3 = void 0, __values(getChildren(s))), _f = _e.next(); !_f.done; _f = _e.next()) {\n              var child = _f.value;\n\n              if (!configuration.has(child)) {\n                configuration.add(child);\n\n                if (prevAdjList.get(child)) {\n                  prevAdjList.get(child).forEach(function (sn) {\n                    return configuration.add(sn);\n                  });\n                } else {\n                  child.initialStateNodes.forEach(function (sn) {\n                    return configuration.add(sn);\n                  });\n                }\n              }\n            }\n          } catch (e_3_1) {\n            e_3 = {\n              error: e_3_1\n            };\n          } finally {\n            try {\n              if (_f && !_f.done && (_c = _e.return)) _c.call(_e);\n            } finally {\n              if (e_3) throw e_3.error;\n            }\n          }\n        }\n      }\n    }\n  } catch (e_2_1) {\n    e_2 = {\n      error: e_2_1\n    };\n  } finally {\n    try {\n      if (configuration_2_1 && !configuration_2_1.done && (_b = configuration_2.return)) _b.call(configuration_2);\n    } finally {\n      if (e_2) throw e_2.error;\n    }\n  }\n\n  try {\n    // add all ancestors\n    for (var configuration_3 = __values(configuration), configuration_3_1 = configuration_3.next(); !configuration_3_1.done; configuration_3_1 = configuration_3.next()) {\n      var s = configuration_3_1.value;\n      var m = s.parent;\n\n      while (m && !configuration.has(m)) {\n        configuration.add(m);\n        m = m.parent;\n      }\n    }\n  } catch (e_4_1) {\n    e_4 = {\n      error: e_4_1\n    };\n  } finally {\n    try {\n      if (configuration_3_1 && !configuration_3_1.done && (_d = configuration_3.return)) _d.call(configuration_3);\n    } finally {\n      if (e_4) throw e_4.error;\n    }\n  }\n\n  return configuration;\n}\n\nfunction getValueFromAdj(baseNode, adjList) {\n  var childStateNodes = adjList.get(baseNode);\n\n  if (!childStateNodes) {\n    return {}; // todo: fix?\n  }\n\n  if (baseNode.type === 'compound') {\n    var childStateNode = childStateNodes[0];\n\n    if (childStateNode) {\n      if (isLeafNode(childStateNode)) {\n        return childStateNode.key;\n      }\n    } else {\n      return {};\n    }\n  }\n\n  var stateValue = {};\n  childStateNodes.forEach(function (csn) {\n    stateValue[csn.key] = getValueFromAdj(csn, adjList);\n  });\n  return stateValue;\n}\n\nfunction getAdjList(configuration) {\n  var e_5, _a;\n\n  var adjList = new Map();\n\n  try {\n    for (var configuration_4 = __values(configuration), configuration_4_1 = configuration_4.next(); !configuration_4_1.done; configuration_4_1 = configuration_4.next()) {\n      var s = configuration_4_1.value;\n\n      if (!adjList.has(s)) {\n        adjList.set(s, []);\n      }\n\n      if (s.parent) {\n        if (!adjList.has(s.parent)) {\n          adjList.set(s.parent, []);\n        }\n\n        adjList.get(s.parent).push(s);\n      }\n    }\n  } catch (e_5_1) {\n    e_5 = {\n      error: e_5_1\n    };\n  } finally {\n    try {\n      if (configuration_4_1 && !configuration_4_1.done && (_a = configuration_4.return)) _a.call(configuration_4);\n    } finally {\n      if (e_5) throw e_5.error;\n    }\n  }\n\n  return adjList;\n}\nfunction getValue(rootNode, configuration) {\n  var config = getConfiguration([rootNode], configuration);\n  return getValueFromAdj(rootNode, getAdjList(config));\n}\nfunction has(iterable, item) {\n  if (Array.isArray(iterable)) {\n    return iterable.some(function (member) {\n      return member === item;\n    });\n  }\n\n  if (iterable instanceof Set) {\n    return iterable.has(item);\n  }\n\n  return false; // TODO: fix\n}\nfunction nextEvents(configuration) {\n  return __spreadArray([], __read(new Set(flatten(__spreadArray([], __read(configuration.map(function (sn) {\n    return sn.ownEvents;\n  })), false)))), false);\n}\nfunction isInFinalState(configuration, stateNode) {\n  if (stateNode.type === 'compound') {\n    return getChildren(stateNode).some(function (s) {\n      return s.type === 'final' && has(configuration, s);\n    });\n  }\n\n  if (stateNode.type === 'parallel') {\n    return getChildren(stateNode).every(function (sn) {\n      return isInFinalState(configuration, sn);\n    });\n  }\n\n  return false;\n}\nfunction getMeta(configuration) {\n  if (configuration === void 0) {\n    configuration = [];\n  }\n\n  return configuration.reduce(function (acc, stateNode) {\n    if (stateNode.meta !== undefined) {\n      acc[stateNode.id] = stateNode.meta;\n    }\n\n    return acc;\n  }, {});\n}\nfunction getTagsFromConfiguration(configuration) {\n  return new Set(flatten(configuration.map(function (sn) {\n    return sn.tags;\n  })));\n}\n\nexport { getAdjList, getAllChildren, getAllStateNodes, getChildren, getConfiguration, getMeta, getTagsFromConfiguration, getValue, has, isInFinalState, isLeafNode, nextEvents };\n","var ActionTypes;\n\n(function (ActionTypes) {\n  ActionTypes[\"Start\"] = \"xstate.start\";\n  ActionTypes[\"Stop\"] = \"xstate.stop\";\n  ActionTypes[\"Raise\"] = \"xstate.raise\";\n  ActionTypes[\"Send\"] = \"xstate.send\";\n  ActionTypes[\"Cancel\"] = \"xstate.cancel\";\n  ActionTypes[\"NullEvent\"] = \"\";\n  ActionTypes[\"Assign\"] = \"xstate.assign\";\n  ActionTypes[\"After\"] = \"xstate.after\";\n  ActionTypes[\"DoneState\"] = \"done.state\";\n  ActionTypes[\"DoneInvoke\"] = \"done.invoke\";\n  ActionTypes[\"Log\"] = \"xstate.log\";\n  ActionTypes[\"Init\"] = \"xstate.init\";\n  ActionTypes[\"Invoke\"] = \"xstate.invoke\";\n  ActionTypes[\"ErrorExecution\"] = \"error.execution\";\n  ActionTypes[\"ErrorCommunication\"] = \"error.communication\";\n  ActionTypes[\"ErrorPlatform\"] = \"error.platform\";\n  ActionTypes[\"ErrorCustom\"] = \"xstate.error\";\n  ActionTypes[\"Update\"] = \"xstate.update\";\n  ActionTypes[\"Pure\"] = \"xstate.pure\";\n  ActionTypes[\"Choose\"] = \"xstate.choose\";\n})(ActionTypes || (ActionTypes = {}));\n\nvar SpecialTargets;\n\n(function (SpecialTargets) {\n  SpecialTargets[\"Parent\"] = \"#_parent\";\n  SpecialTargets[\"Internal\"] = \"#_internal\";\n})(SpecialTargets || (SpecialTargets = {}));\n\nexport { ActionTypes, SpecialTargets };\n","import { __values, __spreadArray, __read, __assign } from './_virtual/_tslib.js';\nimport { SpecialTargets } from './types.js';\nimport { raise, send } from './actionTypes.js';\nimport { DEFAULT_GUARD_TYPE, TARGETLESS_KEY, STATE_DELIMITER } from './constants.js';\nimport { IS_PRODUCTION } from './environment.js';\n\nvar _a;\nfunction keys(value) {\n  return Object.keys(value);\n}\nfunction matchesState(parentStateId, childStateId, delimiter) {\n  if (delimiter === void 0) {\n    delimiter = STATE_DELIMITER;\n  }\n\n  var parentStateValue = toStateValue(parentStateId, delimiter);\n  var childStateValue = toStateValue(childStateId, delimiter);\n\n  if (isString(childStateValue)) {\n    if (isString(parentStateValue)) {\n      return childStateValue === parentStateValue;\n    } // Parent more specific than child\n\n\n    return false;\n  }\n\n  if (isString(parentStateValue)) {\n    return parentStateValue in childStateValue;\n  }\n\n  return Object.keys(parentStateValue).every(function (key) {\n    if (!(key in childStateValue)) {\n      return false;\n    }\n\n    return matchesState(parentStateValue[key], childStateValue[key]);\n  });\n}\nfunction getEventType(event) {\n  try {\n    return isString(event) || typeof event === 'number' ? \"\".concat(event) : event.type;\n  } catch (e) {\n    throw new Error('Events must be strings or objects with a string event.type property.');\n  }\n}\nfunction getActionType(action) {\n  try {\n    return isString(action) || typeof action === 'number' ? \"\".concat(action) : isFunction(action) ? action.name : action.type;\n  } catch (e) {\n    throw new Error('Actions must be strings or objects with a string action.type property.');\n  }\n}\nfunction toStatePath(stateId, delimiter) {\n  try {\n    if (isArray(stateId)) {\n      return stateId;\n    }\n\n    return stateId.toString().split(delimiter);\n  } catch (e) {\n    throw new Error(\"'\".concat(stateId, \"' is not a valid state path.\"));\n  }\n}\nfunction isStateLike(state) {\n  return typeof state === 'object' && 'value' in state && 'context' in state && 'event' in state && '_event' in state;\n}\nfunction toStateValue(stateValue, delimiter) {\n  if (isStateLike(stateValue)) {\n    return stateValue.value;\n  }\n\n  if (isArray(stateValue)) {\n    return pathToStateValue(stateValue);\n  }\n\n  if (typeof stateValue !== 'string') {\n    return stateValue;\n  }\n\n  var statePath = toStatePath(stateValue, delimiter);\n  return pathToStateValue(statePath);\n}\nfunction pathToStateValue(statePath) {\n  if (statePath.length === 1) {\n    return statePath[0];\n  }\n\n  var value = {};\n  var marker = value;\n\n  for (var i = 0; i < statePath.length - 1; i++) {\n    if (i === statePath.length - 2) {\n      marker[statePath[i]] = statePath[i + 1];\n    } else {\n      marker[statePath[i]] = {};\n      marker = marker[statePath[i]];\n    }\n  }\n\n  return value;\n}\nfunction mapValues(collection, iteratee) {\n  var result = {};\n  var collectionKeys = Object.keys(collection);\n\n  for (var i = 0; i < collectionKeys.length; i++) {\n    var key = collectionKeys[i];\n    result[key] = iteratee(collection[key], key, collection, i);\n  }\n\n  return result;\n}\nfunction mapFilterValues(collection, iteratee, predicate) {\n  var e_1, _a;\n\n  var result = {};\n\n  try {\n    for (var _b = __values(Object.keys(collection)), _c = _b.next(); !_c.done; _c = _b.next()) {\n      var key = _c.value;\n      var item = collection[key];\n\n      if (!predicate(item)) {\n        continue;\n      }\n\n      result[key] = iteratee(item, key, collection);\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n\n  return result;\n}\n/**\r\n * Retrieves a value at the given path.\r\n * @param props The deep path to the prop of the desired value\r\n */\n\nvar path = function (props) {\n  return function (object) {\n    var e_2, _a;\n\n    var result = object;\n\n    try {\n      for (var props_1 = __values(props), props_1_1 = props_1.next(); !props_1_1.done; props_1_1 = props_1.next()) {\n        var prop = props_1_1.value;\n        result = result[prop];\n      }\n    } catch (e_2_1) {\n      e_2 = {\n        error: e_2_1\n      };\n    } finally {\n      try {\n        if (props_1_1 && !props_1_1.done && (_a = props_1.return)) _a.call(props_1);\n      } finally {\n        if (e_2) throw e_2.error;\n      }\n    }\n\n    return result;\n  };\n};\n/**\r\n * Retrieves a value at the given path via the nested accessor prop.\r\n * @param props The deep path to the prop of the desired value\r\n */\n\nfunction nestedPath(props, accessorProp) {\n  return function (object) {\n    var e_3, _a;\n\n    var result = object;\n\n    try {\n      for (var props_2 = __values(props), props_2_1 = props_2.next(); !props_2_1.done; props_2_1 = props_2.next()) {\n        var prop = props_2_1.value;\n        result = result[accessorProp][prop];\n      }\n    } catch (e_3_1) {\n      e_3 = {\n        error: e_3_1\n      };\n    } finally {\n      try {\n        if (props_2_1 && !props_2_1.done && (_a = props_2.return)) _a.call(props_2);\n      } finally {\n        if (e_3) throw e_3.error;\n      }\n    }\n\n    return result;\n  };\n}\nfunction toStatePaths(stateValue) {\n  if (!stateValue) {\n    return [[]];\n  }\n\n  if (isString(stateValue)) {\n    return [[stateValue]];\n  }\n\n  var result = flatten(Object.keys(stateValue).map(function (key) {\n    var subStateValue = stateValue[key];\n\n    if (typeof subStateValue !== 'string' && (!subStateValue || !Object.keys(subStateValue).length)) {\n      return [[key]];\n    }\n\n    return toStatePaths(stateValue[key]).map(function (subPath) {\n      return [key].concat(subPath);\n    });\n  }));\n  return result;\n}\nfunction pathsToStateValue(paths) {\n  var e_4, _a;\n\n  var result = {};\n\n  if (paths && paths.length === 1 && paths[0].length === 1) {\n    return paths[0][0];\n  }\n\n  try {\n    for (var paths_1 = __values(paths), paths_1_1 = paths_1.next(); !paths_1_1.done; paths_1_1 = paths_1.next()) {\n      var currentPath = paths_1_1.value;\n      var marker = result; // tslint:disable-next-line:prefer-for-of\n\n      for (var i = 0; i < currentPath.length; i++) {\n        var subPath = currentPath[i];\n\n        if (i === currentPath.length - 2) {\n          marker[subPath] = currentPath[i + 1];\n          break;\n        }\n\n        marker[subPath] = marker[subPath] || {};\n        marker = marker[subPath];\n      }\n    }\n  } catch (e_4_1) {\n    e_4 = {\n      error: e_4_1\n    };\n  } finally {\n    try {\n      if (paths_1_1 && !paths_1_1.done && (_a = paths_1.return)) _a.call(paths_1);\n    } finally {\n      if (e_4) throw e_4.error;\n    }\n  }\n\n  return result;\n}\nfunction flatten(array) {\n  var _a;\n\n  return (_a = []).concat.apply(_a, __spreadArray([], __read(array), false));\n}\nfunction toArrayStrict(value) {\n  if (isArray(value)) {\n    return value;\n  }\n\n  return [value];\n}\nfunction toArray(value) {\n  if (value === undefined) {\n    return [];\n  }\n\n  return toArrayStrict(value);\n}\nfunction mapContext(mapper, context, _event) {\n  var e_5, _a;\n\n  if (isFunction(mapper)) {\n    return mapper(context, _event.data);\n  }\n\n  var result = {};\n\n  try {\n    for (var _b = __values(Object.keys(mapper)), _c = _b.next(); !_c.done; _c = _b.next()) {\n      var key = _c.value;\n      var subMapper = mapper[key];\n\n      if (isFunction(subMapper)) {\n        result[key] = subMapper(context, _event.data);\n      } else {\n        result[key] = subMapper;\n      }\n    }\n  } catch (e_5_1) {\n    e_5 = {\n      error: e_5_1\n    };\n  } finally {\n    try {\n      if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n    } finally {\n      if (e_5) throw e_5.error;\n    }\n  }\n\n  return result;\n}\nfunction isBuiltInEvent(eventType) {\n  return /^(done|error)\\./.test(eventType);\n}\nfunction isPromiseLike(value) {\n  if (value instanceof Promise) {\n    return true;\n  } // Check if shape matches the Promise/A+ specification for a \"thenable\".\n\n\n  if (value !== null && (isFunction(value) || typeof value === 'object') && isFunction(value.then)) {\n    return true;\n  }\n\n  return false;\n}\nfunction isBehavior(value) {\n  return value !== null && typeof value === 'object' && 'transition' in value && typeof value.transition === 'function';\n}\nfunction partition(items, predicate) {\n  var e_6, _a;\n\n  var _b = __read([[], []], 2),\n      truthy = _b[0],\n      falsy = _b[1];\n\n  try {\n    for (var items_1 = __values(items), items_1_1 = items_1.next(); !items_1_1.done; items_1_1 = items_1.next()) {\n      var item = items_1_1.value;\n\n      if (predicate(item)) {\n        truthy.push(item);\n      } else {\n        falsy.push(item);\n      }\n    }\n  } catch (e_6_1) {\n    e_6 = {\n      error: e_6_1\n    };\n  } finally {\n    try {\n      if (items_1_1 && !items_1_1.done && (_a = items_1.return)) _a.call(items_1);\n    } finally {\n      if (e_6) throw e_6.error;\n    }\n  }\n\n  return [truthy, falsy];\n}\nfunction updateHistoryStates(hist, stateValue) {\n  return mapValues(hist.states, function (subHist, key) {\n    if (!subHist) {\n      return undefined;\n    }\n\n    var subStateValue = (isString(stateValue) ? undefined : stateValue[key]) || (subHist ? subHist.current : undefined);\n\n    if (!subStateValue) {\n      return undefined;\n    }\n\n    return {\n      current: subStateValue,\n      states: updateHistoryStates(subHist, subStateValue)\n    };\n  });\n}\nfunction updateHistoryValue(hist, stateValue) {\n  return {\n    current: stateValue,\n    states: updateHistoryStates(hist, stateValue)\n  };\n}\nfunction updateContext(context, _event, assignActions, state) {\n  if (!IS_PRODUCTION) {\n    warn(!!context, 'Attempting to update undefined context');\n  }\n\n  var updatedContext = context ? assignActions.reduce(function (acc, assignAction) {\n    var e_7, _a;\n\n    var assignment = assignAction.assignment;\n    var meta = {\n      state: state,\n      action: assignAction,\n      _event: _event\n    };\n    var partialUpdate = {};\n\n    if (isFunction(assignment)) {\n      partialUpdate = assignment(acc, _event.data, meta);\n    } else {\n      try {\n        for (var _b = __values(Object.keys(assignment)), _c = _b.next(); !_c.done; _c = _b.next()) {\n          var key = _c.value;\n          var propAssignment = assignment[key];\n          partialUpdate[key] = isFunction(propAssignment) ? propAssignment(acc, _event.data, meta) : propAssignment;\n        }\n      } catch (e_7_1) {\n        e_7 = {\n          error: e_7_1\n        };\n      } finally {\n        try {\n          if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        } finally {\n          if (e_7) throw e_7.error;\n        }\n      }\n    }\n\n    return Object.assign({}, acc, partialUpdate);\n  }, context) : context;\n  return updatedContext;\n} // tslint:disable-next-line:no-empty\n\nvar warn = function () {};\n\nif (!IS_PRODUCTION) {\n  warn = function (condition, message) {\n    var error = condition instanceof Error ? condition : undefined;\n\n    if (!error && condition) {\n      return;\n    }\n\n    if (console !== undefined) {\n      var args = [\"Warning: \".concat(message)];\n\n      if (error) {\n        args.push(error);\n      } // tslint:disable-next-line:no-console\n\n\n      console.warn.apply(console, args);\n    }\n  };\n}\nfunction isArray(value) {\n  return Array.isArray(value);\n} // tslint:disable-next-line:ban-types\n\nfunction isFunction(value) {\n  return typeof value === 'function';\n}\nfunction isString(value) {\n  return typeof value === 'string';\n}\nfunction toGuard(condition, guardMap) {\n  if (!condition) {\n    return undefined;\n  }\n\n  if (isString(condition)) {\n    return {\n      type: DEFAULT_GUARD_TYPE,\n      name: condition,\n      predicate: guardMap ? guardMap[condition] : undefined\n    };\n  }\n\n  if (isFunction(condition)) {\n    return {\n      type: DEFAULT_GUARD_TYPE,\n      name: condition.name,\n      predicate: condition\n    };\n  }\n\n  return condition;\n}\nfunction isObservable(value) {\n  try {\n    return 'subscribe' in value && isFunction(value.subscribe);\n  } catch (e) {\n    return false;\n  }\n}\nvar symbolObservable = /*#__PURE__*/function () {\n  return typeof Symbol === 'function' && Symbol.observable || '@@observable';\n}(); // TODO: to be removed in v5, left it out just to minimize the scope of the change and maintain compatibility with older versions of integration paackages\n\nvar interopSymbols = (_a = {}, _a[symbolObservable] = function () {\n  return this;\n}, _a[Symbol.observable] = function () {\n  return this;\n}, _a);\nfunction isMachine(value) {\n  return !!value && '__xstatenode' in value;\n}\nfunction isActor(value) {\n  return !!value && typeof value.send === 'function';\n}\nvar uniqueId = /*#__PURE__*/function () {\n  var currentId = 0;\n  return function () {\n    currentId++;\n    return currentId.toString(16);\n  };\n}();\nfunction toEventObject(event, payload // id?: TEvent['type']\n) {\n  if (isString(event) || typeof event === 'number') {\n    return __assign({\n      type: event\n    }, payload);\n  }\n\n  return event;\n}\nfunction toSCXMLEvent(event, scxmlEvent) {\n  if (!isString(event) && '$$type' in event && event.$$type === 'scxml') {\n    return event;\n  }\n\n  var eventObject = toEventObject(event);\n  return __assign({\n    name: eventObject.type,\n    data: eventObject,\n    $$type: 'scxml',\n    type: 'external'\n  }, scxmlEvent);\n}\nfunction toTransitionConfigArray(event, configLike) {\n  var transitions = toArrayStrict(configLike).map(function (transitionLike) {\n    if (typeof transitionLike === 'undefined' || typeof transitionLike === 'string' || isMachine(transitionLike)) {\n      return {\n        target: transitionLike,\n        event: event\n      };\n    }\n\n    return __assign(__assign({}, transitionLike), {\n      event: event\n    });\n  });\n  return transitions;\n}\nfunction normalizeTarget(target) {\n  if (target === undefined || target === TARGETLESS_KEY) {\n    return undefined;\n  }\n\n  return toArray(target);\n}\nfunction reportUnhandledExceptionOnInvocation(originalError, currentError, id) {\n  if (!IS_PRODUCTION) {\n    var originalStackTrace = originalError.stack ? \" Stacktrace was '\".concat(originalError.stack, \"'\") : '';\n\n    if (originalError === currentError) {\n      // tslint:disable-next-line:no-console\n      console.error(\"Missing onError handler for invocation '\".concat(id, \"', error was '\").concat(originalError, \"'.\").concat(originalStackTrace));\n    } else {\n      var stackTrace = currentError.stack ? \" Stacktrace was '\".concat(currentError.stack, \"'\") : ''; // tslint:disable-next-line:no-console\n\n      console.error(\"Missing onError handler and/or unhandled exception/promise rejection for invocation '\".concat(id, \"'. \") + \"Original error: '\".concat(originalError, \"'. \").concat(originalStackTrace, \" Current error is '\").concat(currentError, \"'.\").concat(stackTrace));\n    }\n  }\n}\nfunction evaluateGuard(machine, guard, context, _event, state) {\n  var guards = machine.options.guards;\n  var guardMeta = {\n    state: state,\n    cond: guard,\n    _event: _event\n  }; // TODO: do not hardcode!\n\n  if (guard.type === DEFAULT_GUARD_TYPE) {\n    return ((guards === null || guards === void 0 ? void 0 : guards[guard.name]) || guard.predicate)(context, _event.data, guardMeta);\n  }\n\n  var condFn = guards === null || guards === void 0 ? void 0 : guards[guard.type];\n\n  if (!condFn) {\n    throw new Error(\"Guard '\".concat(guard.type, \"' is not implemented on machine '\").concat(machine.id, \"'.\"));\n  }\n\n  return condFn(context, _event.data, guardMeta);\n}\nfunction toInvokeSource(src) {\n  if (typeof src === 'string') {\n    return {\n      type: src\n    };\n  }\n\n  return src;\n}\nfunction toObserver(nextHandler, errorHandler, completionHandler) {\n  var noop = function () {};\n\n  var isObserver = typeof nextHandler === 'object';\n  var self = isObserver ? nextHandler : null;\n  return {\n    next: ((isObserver ? nextHandler.next : nextHandler) || noop).bind(self),\n    error: ((isObserver ? nextHandler.error : errorHandler) || noop).bind(self),\n    complete: ((isObserver ? nextHandler.complete : completionHandler) || noop).bind(self)\n  };\n}\nfunction createInvokeId(stateNodeId, index) {\n  return \"\".concat(stateNodeId, \":invocation[\").concat(index, \"]\");\n}\nfunction isRaisableAction(action) {\n  return (action.type === raise || action.type === send && action.to === SpecialTargets.Internal) && typeof action.delay !== 'number';\n}\n\nexport { createInvokeId, evaluateGuard, flatten, getActionType, getEventType, interopSymbols, isActor, isArray, isBehavior, isBuiltInEvent, isFunction, isMachine, isObservable, isPromiseLike, isRaisableAction, isStateLike, isString, keys, mapContext, mapFilterValues, mapValues, matchesState, nestedPath, normalizeTarget, partition, path, pathToStateValue, pathsToStateValue, reportUnhandledExceptionOnInvocation, symbolObservable, toArray, toArrayStrict, toEventObject, toGuard, toInvokeSource, toObserver, toSCXMLEvent, toStatePath, toStatePaths, toStateValue, toTransitionConfigArray, uniqueId, updateContext, updateHistoryStates, updateHistoryValue, warn };\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var defineProperty = Object.defineProperty || function (obj, key, desc) { obj[key] = desc.value; };\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    defineProperty(generator, \"_invoke\", { value: makeInvokeMethod(innerFn, self, context) });\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\n  defineProperty(Gp, \"constructor\", { value: GeneratorFunctionPrototype, configurable: true });\n  defineProperty(\n    GeneratorFunctionPrototype,\n    \"constructor\",\n    { value: GeneratorFunction, configurable: true }\n  );\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    defineProperty(this, \"_invoke\", { value: enqueue });\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  });\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var methodName = context.method;\n    var method = delegate.iterator[methodName];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method, or a missing .next mehtod, always terminate the\n      // yield* loop.\n      context.delegate = null;\n\n      // Note: [\"return\"] must be used for ES3 parsing compatibility.\n      if (methodName === \"throw\" && delegate.iterator[\"return\"]) {\n        // If the delegate iterator has a return method, give it a\n        // chance to clean up.\n        context.method = \"return\";\n        context.arg = undefined;\n        maybeInvokeDelegate(delegate, context);\n\n        if (context.method === \"throw\") {\n          // If maybeInvokeDelegate(context) changed context.method from\n          // \"return\" to \"throw\", let that override the TypeError below.\n          return ContinueSentinel;\n        }\n      }\n      if (methodName !== \"return\") {\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a '\" + methodName + \"' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  define(Gp, iteratorSymbol, function() {\n    return this;\n  });\n\n  define(Gp, \"toString\", function() {\n    return \"[object Generator]\";\n  });\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(val) {\n    var object = Object(val);\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, in modern engines\n  // we can explicitly access globalThis. In older engines we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","export var COMPLETE_NOTIFICATION = (function () { return createNotification('C', undefined, undefined); })();\nexport function errorNotification(error) {\n    return createNotification('E', undefined, error);\n}\nexport function nextNotification(value) {\n    return createNotification('N', value, undefined);\n}\nexport function createNotification(kind, value, error) {\n    return {\n        kind: kind,\n        value: value,\n        error: error,\n    };\n}\n//# sourceMappingURL=NotificationFactories.js.map","import { SafeSubscriber, Subscriber } from './Subscriber';\nimport { isSubscription } from './Subscription';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\nimport { isFunction } from './util/isFunction';\nimport { errorContext } from './util/errorContext';\nvar Observable = (function () {\n    function Observable(subscribe) {\n        if (subscribe) {\n            this._subscribe = subscribe;\n        }\n    }\n    Observable.prototype.lift = function (operator) {\n        var observable = new Observable();\n        observable.source = this;\n        observable.operator = operator;\n        return observable;\n    };\n    Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n        var _this = this;\n        var subscriber = isSubscriber(observerOrNext) ? observerOrNext : new SafeSubscriber(observerOrNext, error, complete);\n        errorContext(function () {\n            var _a = _this, operator = _a.operator, source = _a.source;\n            subscriber.add(operator\n                ?\n                    operator.call(subscriber, source)\n                : source\n                    ?\n                        _this._subscribe(subscriber)\n                    :\n                        _this._trySubscribe(subscriber));\n        });\n        return subscriber;\n    };\n    Observable.prototype._trySubscribe = function (sink) {\n        try {\n            return this._subscribe(sink);\n        }\n        catch (err) {\n            sink.error(err);\n        }\n    };\n    Observable.prototype.forEach = function (next, promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var subscriber = new SafeSubscriber({\n                next: function (value) {\n                    try {\n                        next(value);\n                    }\n                    catch (err) {\n                        reject(err);\n                        subscriber.unsubscribe();\n                    }\n                },\n                error: reject,\n                complete: resolve,\n            });\n            _this.subscribe(subscriber);\n        });\n    };\n    Observable.prototype._subscribe = function (subscriber) {\n        var _a;\n        return (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber);\n    };\n    Observable.prototype[Symbol_observable] = function () {\n        return this;\n    };\n    Observable.prototype.pipe = function () {\n        var operations = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operations[_i] = arguments[_i];\n        }\n        return pipeFromArray(operations)(this);\n    };\n    Observable.prototype.toPromise = function (promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var value;\n            _this.subscribe(function (x) { return (value = x); }, function (err) { return reject(err); }, function () { return resolve(value); });\n        });\n    };\n    Observable.create = function (subscribe) {\n        return new Observable(subscribe);\n    };\n    return Observable;\n}());\nexport { Observable };\nfunction getPromiseCtor(promiseCtor) {\n    var _a;\n    return (_a = promiseCtor !== null && promiseCtor !== void 0 ? promiseCtor : config.Promise) !== null && _a !== void 0 ? _a : Promise;\n}\nfunction isObserver(value) {\n    return value && isFunction(value.next) && isFunction(value.error) && isFunction(value.complete);\n}\nfunction isSubscriber(value) {\n    return (value && value instanceof Subscriber) || (isObserver(value) && isSubscription(value));\n}\n//# sourceMappingURL=Observable.js.map","import { __extends } from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { isSubscription, Subscription } from './Subscription';\nimport { config } from './config';\nimport { reportUnhandledError } from './util/reportUnhandledError';\nimport { noop } from './util/noop';\nimport { nextNotification, errorNotification, COMPLETE_NOTIFICATION } from './NotificationFactories';\nimport { timeoutProvider } from './scheduler/timeoutProvider';\nimport { captureError } from './util/errorContext';\nvar Subscriber = (function (_super) {\n    __extends(Subscriber, _super);\n    function Subscriber(destination) {\n        var _this = _super.call(this) || this;\n        _this.isStopped = false;\n        if (destination) {\n            _this.destination = destination;\n            if (isSubscription(destination)) {\n                destination.add(_this);\n            }\n        }\n        else {\n            _this.destination = EMPTY_OBSERVER;\n        }\n        return _this;\n    }\n    Subscriber.create = function (next, error, complete) {\n        return new SafeSubscriber(next, error, complete);\n    };\n    Subscriber.prototype.next = function (value) {\n        if (this.isStopped) {\n            handleStoppedNotification(nextNotification(value), this);\n        }\n        else {\n            this._next(value);\n        }\n    };\n    Subscriber.prototype.error = function (err) {\n        if (this.isStopped) {\n            handleStoppedNotification(errorNotification(err), this);\n        }\n        else {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    Subscriber.prototype.complete = function () {\n        if (this.isStopped) {\n            handleStoppedNotification(COMPLETE_NOTIFICATION, this);\n        }\n        else {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (!this.closed) {\n            this.isStopped = true;\n            _super.prototype.unsubscribe.call(this);\n            this.destination = null;\n        }\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        try {\n            this.destination.error(err);\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    Subscriber.prototype._complete = function () {\n        try {\n            this.destination.complete();\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    return Subscriber;\n}(Subscription));\nexport { Subscriber };\nvar _bind = Function.prototype.bind;\nfunction bind(fn, thisArg) {\n    return _bind.call(fn, thisArg);\n}\nvar ConsumerObserver = (function () {\n    function ConsumerObserver(partialObserver) {\n        this.partialObserver = partialObserver;\n    }\n    ConsumerObserver.prototype.next = function (value) {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.next) {\n            try {\n                partialObserver.next(value);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    };\n    ConsumerObserver.prototype.error = function (err) {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.error) {\n            try {\n                partialObserver.error(err);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n        else {\n            handleUnhandledError(err);\n        }\n    };\n    ConsumerObserver.prototype.complete = function () {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.complete) {\n            try {\n                partialObserver.complete();\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    };\n    return ConsumerObserver;\n}());\nvar SafeSubscriber = (function (_super) {\n    __extends(SafeSubscriber, _super);\n    function SafeSubscriber(observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        var partialObserver;\n        if (isFunction(observerOrNext) || !observerOrNext) {\n            partialObserver = {\n                next: (observerOrNext !== null && observerOrNext !== void 0 ? observerOrNext : undefined),\n                error: error !== null && error !== void 0 ? error : undefined,\n                complete: complete !== null && complete !== void 0 ? complete : undefined,\n            };\n        }\n        else {\n            var context_1;\n            if (_this && config.useDeprecatedNextContext) {\n                context_1 = Object.create(observerOrNext);\n                context_1.unsubscribe = function () { return _this.unsubscribe(); };\n                partialObserver = {\n                    next: observerOrNext.next && bind(observerOrNext.next, context_1),\n                    error: observerOrNext.error && bind(observerOrNext.error, context_1),\n                    complete: observerOrNext.complete && bind(observerOrNext.complete, context_1),\n                };\n            }\n            else {\n                partialObserver = observerOrNext;\n            }\n        }\n        _this.destination = new ConsumerObserver(partialObserver);\n        return _this;\n    }\n    return SafeSubscriber;\n}(Subscriber));\nexport { SafeSubscriber };\nfunction handleUnhandledError(error) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        captureError(error);\n    }\n    else {\n        reportUnhandledError(error);\n    }\n}\nfunction defaultErrorHandler(err) {\n    throw err;\n}\nfunction handleStoppedNotification(notification, subscriber) {\n    var onStoppedNotification = config.onStoppedNotification;\n    onStoppedNotification && timeoutProvider.setTimeout(function () { return onStoppedNotification(notification, subscriber); });\n}\nexport var EMPTY_OBSERVER = {\n    closed: true,\n    next: noop,\n    error: defaultErrorHandler,\n    complete: noop,\n};\n//# sourceMappingURL=Subscriber.js.map","import { __read, __spreadArray, __values } from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\nimport { arrRemove } from './util/arrRemove';\nvar Subscription = (function () {\n    function Subscription(initialTeardown) {\n        this.initialTeardown = initialTeardown;\n        this.closed = false;\n        this._parentage = null;\n        this._finalizers = null;\n    }\n    Subscription.prototype.unsubscribe = function () {\n        var e_1, _a, e_2, _b;\n        var errors;\n        if (!this.closed) {\n            this.closed = true;\n            var _parentage = this._parentage;\n            if (_parentage) {\n                this._parentage = null;\n                if (Array.isArray(_parentage)) {\n                    try {\n                        for (var _parentage_1 = __values(_parentage), _parentage_1_1 = _parentage_1.next(); !_parentage_1_1.done; _parentage_1_1 = _parentage_1.next()) {\n                            var parent_1 = _parentage_1_1.value;\n                            parent_1.remove(this);\n                        }\n                    }\n                    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                    finally {\n                        try {\n                            if (_parentage_1_1 && !_parentage_1_1.done && (_a = _parentage_1.return)) _a.call(_parentage_1);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                    }\n                }\n                else {\n                    _parentage.remove(this);\n                }\n            }\n            var initialFinalizer = this.initialTeardown;\n            if (isFunction(initialFinalizer)) {\n                try {\n                    initialFinalizer();\n                }\n                catch (e) {\n                    errors = e instanceof UnsubscriptionError ? e.errors : [e];\n                }\n            }\n            var _finalizers = this._finalizers;\n            if (_finalizers) {\n                this._finalizers = null;\n                try {\n                    for (var _finalizers_1 = __values(_finalizers), _finalizers_1_1 = _finalizers_1.next(); !_finalizers_1_1.done; _finalizers_1_1 = _finalizers_1.next()) {\n                        var finalizer = _finalizers_1_1.value;\n                        try {\n                            execFinalizer(finalizer);\n                        }\n                        catch (err) {\n                            errors = errors !== null && errors !== void 0 ? errors : [];\n                            if (err instanceof UnsubscriptionError) {\n                                errors = __spreadArray(__spreadArray([], __read(errors)), __read(err.errors));\n                            }\n                            else {\n                                errors.push(err);\n                            }\n                        }\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (_finalizers_1_1 && !_finalizers_1_1.done && (_b = _finalizers_1.return)) _b.call(_finalizers_1);\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n            }\n            if (errors) {\n                throw new UnsubscriptionError(errors);\n            }\n        }\n    };\n    Subscription.prototype.add = function (teardown) {\n        var _a;\n        if (teardown && teardown !== this) {\n            if (this.closed) {\n                execFinalizer(teardown);\n            }\n            else {\n                if (teardown instanceof Subscription) {\n                    if (teardown.closed || teardown._hasParent(this)) {\n                        return;\n                    }\n                    teardown._addParent(this);\n                }\n                (this._finalizers = (_a = this._finalizers) !== null && _a !== void 0 ? _a : []).push(teardown);\n            }\n        }\n    };\n    Subscription.prototype._hasParent = function (parent) {\n        var _parentage = this._parentage;\n        return _parentage === parent || (Array.isArray(_parentage) && _parentage.includes(parent));\n    };\n    Subscription.prototype._addParent = function (parent) {\n        var _parentage = this._parentage;\n        this._parentage = Array.isArray(_parentage) ? (_parentage.push(parent), _parentage) : _parentage ? [_parentage, parent] : parent;\n    };\n    Subscription.prototype._removeParent = function (parent) {\n        var _parentage = this._parentage;\n        if (_parentage === parent) {\n            this._parentage = null;\n        }\n        else if (Array.isArray(_parentage)) {\n            arrRemove(_parentage, parent);\n        }\n    };\n    Subscription.prototype.remove = function (teardown) {\n        var _finalizers = this._finalizers;\n        _finalizers && arrRemove(_finalizers, teardown);\n        if (teardown instanceof Subscription) {\n            teardown._removeParent(this);\n        }\n    };\n    Subscription.EMPTY = (function () {\n        var empty = new Subscription();\n        empty.closed = true;\n        return empty;\n    })();\n    return Subscription;\n}());\nexport { Subscription };\nexport var EMPTY_SUBSCRIPTION = Subscription.EMPTY;\nexport function isSubscription(value) {\n    return (value instanceof Subscription ||\n        (value && 'closed' in value && isFunction(value.remove) && isFunction(value.add) && isFunction(value.unsubscribe)));\n}\nfunction execFinalizer(finalizer) {\n    if (isFunction(finalizer)) {\n        finalizer();\n    }\n    else {\n        finalizer.unsubscribe();\n    }\n}\n//# sourceMappingURL=Subscription.js.map","export var config = {\n    onUnhandledError: null,\n    onStoppedNotification: null,\n    Promise: undefined,\n    useDeprecatedSynchronousErrorHandling: false,\n    useDeprecatedNextContext: false,\n};\n//# sourceMappingURL=config.js.map","import { __read, __spreadArray } from \"tslib\";\nexport var timeoutProvider = {\n    setTimeout: function (handler, timeout) {\n        var args = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            args[_i - 2] = arguments[_i];\n        }\n        var delegate = timeoutProvider.delegate;\n        if (delegate === null || delegate === void 0 ? void 0 : delegate.setTimeout) {\n            return delegate.setTimeout.apply(delegate, __spreadArray([handler, timeout], __read(args)));\n        }\n        return setTimeout.apply(void 0, __spreadArray([handler, timeout], __read(args)));\n    },\n    clearTimeout: function (handle) {\n        var delegate = timeoutProvider.delegate;\n        return ((delegate === null || delegate === void 0 ? void 0 : delegate.clearTimeout) || clearTimeout)(handle);\n    },\n    delegate: undefined,\n};\n//# sourceMappingURL=timeoutProvider.js.map","export var observable = (function () { return (typeof Symbol === 'function' && Symbol.observable) || '@@observable'; })();\n//# sourceMappingURL=observable.js.map","import { createErrorClass } from './createErrorClass';\nexport var UnsubscriptionError = createErrorClass(function (_super) {\n    return function UnsubscriptionErrorImpl(errors) {\n        _super(this);\n        this.message = errors\n            ? errors.length + \" errors occurred during unsubscription:\\n\" + errors.map(function (err, i) { return i + 1 + \") \" + err.toString(); }).join('\\n  ')\n            : '';\n        this.name = 'UnsubscriptionError';\n        this.errors = errors;\n    };\n});\n//# sourceMappingURL=UnsubscriptionError.js.map","export function arrRemove(arr, item) {\n    if (arr) {\n        var index = arr.indexOf(item);\n        0 <= index && arr.splice(index, 1);\n    }\n}\n//# sourceMappingURL=arrRemove.js.map","export function createErrorClass(createImpl) {\n    var _super = function (instance) {\n        Error.call(instance);\n        instance.stack = new Error().stack;\n    };\n    var ctorFunc = createImpl(_super);\n    ctorFunc.prototype = Object.create(Error.prototype);\n    ctorFunc.prototype.constructor = ctorFunc;\n    return ctorFunc;\n}\n//# sourceMappingURL=createErrorClass.js.map","import { config } from '../config';\nvar context = null;\nexport function errorContext(cb) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        var isRoot = !context;\n        if (isRoot) {\n            context = { errorThrown: false, error: null };\n        }\n        cb();\n        if (isRoot) {\n            var _a = context, errorThrown = _a.errorThrown, error = _a.error;\n            context = null;\n            if (errorThrown) {\n                throw error;\n            }\n        }\n    }\n    else {\n        cb();\n    }\n}\nexport function captureError(err) {\n    if (config.useDeprecatedSynchronousErrorHandling && context) {\n        context.errorThrown = true;\n        context.error = err;\n    }\n}\n//# sourceMappingURL=errorContext.js.map","export function identity(x) {\n    return x;\n}\n//# sourceMappingURL=identity.js.map","export function isFunction(value) {\n    return typeof value === 'function';\n}\n//# sourceMappingURL=isFunction.js.map","export function noop() { }\n//# sourceMappingURL=noop.js.map","import { identity } from './identity';\nexport function pipe() {\n    var fns = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        fns[_i] = arguments[_i];\n    }\n    return pipeFromArray(fns);\n}\nexport function pipeFromArray(fns) {\n    if (fns.length === 0) {\n        return identity;\n    }\n    if (fns.length === 1) {\n        return fns[0];\n    }\n    return function piped(input) {\n        return fns.reduce(function (prev, fn) { return fn(prev); }, input);\n    };\n}\n//# sourceMappingURL=pipe.js.map","import { config } from '../config';\nimport { timeoutProvider } from '../scheduler/timeoutProvider';\nexport function reportUnhandledError(err) {\n    timeoutProvider.setTimeout(function () {\n        var onUnhandledError = config.onUnhandledError;\n        if (onUnhandledError) {\n            onUnhandledError(err);\n        }\n        else {\n            throw err;\n        }\n    });\n}\n//# sourceMappingURL=reportUnhandledError.js.map","// This file is autogenerated. It's used to publish ESM to npm.\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\n\n// https://github.com/bgrins/TinyColor\n// Brian Grinstead, MIT License\n\nvar trimLeft = /^\\s+/;\nvar trimRight = /\\s+$/;\nfunction tinycolor(color, opts) {\n  color = color ? color : \"\";\n  opts = opts || {};\n\n  // If input is already a tinycolor, return itself\n  if (color instanceof tinycolor) {\n    return color;\n  }\n  // If we are called as a function, call using new instead\n  if (!(this instanceof tinycolor)) {\n    return new tinycolor(color, opts);\n  }\n  var rgb = inputToRGB(color);\n  this._originalInput = color, this._r = rgb.r, this._g = rgb.g, this._b = rgb.b, this._a = rgb.a, this._roundA = Math.round(100 * this._a) / 100, this._format = opts.format || rgb.format;\n  this._gradientType = opts.gradientType;\n\n  // Don't let the range of [0,255] come back in [0,1].\n  // Potentially lose a little bit of precision here, but will fix issues where\n  // .5 gets interpreted as half of the total, instead of half of 1\n  // If it was supposed to be 128, this was already taken care of by `inputToRgb`\n  if (this._r < 1) this._r = Math.round(this._r);\n  if (this._g < 1) this._g = Math.round(this._g);\n  if (this._b < 1) this._b = Math.round(this._b);\n  this._ok = rgb.ok;\n}\ntinycolor.prototype = {\n  isDark: function isDark() {\n    return this.getBrightness() < 128;\n  },\n  isLight: function isLight() {\n    return !this.isDark();\n  },\n  isValid: function isValid() {\n    return this._ok;\n  },\n  getOriginalInput: function getOriginalInput() {\n    return this._originalInput;\n  },\n  getFormat: function getFormat() {\n    return this._format;\n  },\n  getAlpha: function getAlpha() {\n    return this._a;\n  },\n  getBrightness: function getBrightness() {\n    //http://www.w3.org/TR/AERT#color-contrast\n    var rgb = this.toRgb();\n    return (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1000;\n  },\n  getLuminance: function getLuminance() {\n    //http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n    var rgb = this.toRgb();\n    var RsRGB, GsRGB, BsRGB, R, G, B;\n    RsRGB = rgb.r / 255;\n    GsRGB = rgb.g / 255;\n    BsRGB = rgb.b / 255;\n    if (RsRGB <= 0.03928) R = RsRGB / 12.92;else R = Math.pow((RsRGB + 0.055) / 1.055, 2.4);\n    if (GsRGB <= 0.03928) G = GsRGB / 12.92;else G = Math.pow((GsRGB + 0.055) / 1.055, 2.4);\n    if (BsRGB <= 0.03928) B = BsRGB / 12.92;else B = Math.pow((BsRGB + 0.055) / 1.055, 2.4);\n    return 0.2126 * R + 0.7152 * G + 0.0722 * B;\n  },\n  setAlpha: function setAlpha(value) {\n    this._a = boundAlpha(value);\n    this._roundA = Math.round(100 * this._a) / 100;\n    return this;\n  },\n  toHsv: function toHsv() {\n    var hsv = rgbToHsv(this._r, this._g, this._b);\n    return {\n      h: hsv.h * 360,\n      s: hsv.s,\n      v: hsv.v,\n      a: this._a\n    };\n  },\n  toHsvString: function toHsvString() {\n    var hsv = rgbToHsv(this._r, this._g, this._b);\n    var h = Math.round(hsv.h * 360),\n      s = Math.round(hsv.s * 100),\n      v = Math.round(hsv.v * 100);\n    return this._a == 1 ? \"hsv(\" + h + \", \" + s + \"%, \" + v + \"%)\" : \"hsva(\" + h + \", \" + s + \"%, \" + v + \"%, \" + this._roundA + \")\";\n  },\n  toHsl: function toHsl() {\n    var hsl = rgbToHsl(this._r, this._g, this._b);\n    return {\n      h: hsl.h * 360,\n      s: hsl.s,\n      l: hsl.l,\n      a: this._a\n    };\n  },\n  toHslString: function toHslString() {\n    var hsl = rgbToHsl(this._r, this._g, this._b);\n    var h = Math.round(hsl.h * 360),\n      s = Math.round(hsl.s * 100),\n      l = Math.round(hsl.l * 100);\n    return this._a == 1 ? \"hsl(\" + h + \", \" + s + \"%, \" + l + \"%)\" : \"hsla(\" + h + \", \" + s + \"%, \" + l + \"%, \" + this._roundA + \")\";\n  },\n  toHex: function toHex(allow3Char) {\n    return rgbToHex(this._r, this._g, this._b, allow3Char);\n  },\n  toHexString: function toHexString(allow3Char) {\n    return \"#\" + this.toHex(allow3Char);\n  },\n  toHex8: function toHex8(allow4Char) {\n    return rgbaToHex(this._r, this._g, this._b, this._a, allow4Char);\n  },\n  toHex8String: function toHex8String(allow4Char) {\n    return \"#\" + this.toHex8(allow4Char);\n  },\n  toRgb: function toRgb() {\n    return {\n      r: Math.round(this._r),\n      g: Math.round(this._g),\n      b: Math.round(this._b),\n      a: this._a\n    };\n  },\n  toRgbString: function toRgbString() {\n    return this._a == 1 ? \"rgb(\" + Math.round(this._r) + \", \" + Math.round(this._g) + \", \" + Math.round(this._b) + \")\" : \"rgba(\" + Math.round(this._r) + \", \" + Math.round(this._g) + \", \" + Math.round(this._b) + \", \" + this._roundA + \")\";\n  },\n  toPercentageRgb: function toPercentageRgb() {\n    return {\n      r: Math.round(bound01(this._r, 255) * 100) + \"%\",\n      g: Math.round(bound01(this._g, 255) * 100) + \"%\",\n      b: Math.round(bound01(this._b, 255) * 100) + \"%\",\n      a: this._a\n    };\n  },\n  toPercentageRgbString: function toPercentageRgbString() {\n    return this._a == 1 ? \"rgb(\" + Math.round(bound01(this._r, 255) * 100) + \"%, \" + Math.round(bound01(this._g, 255) * 100) + \"%, \" + Math.round(bound01(this._b, 255) * 100) + \"%)\" : \"rgba(\" + Math.round(bound01(this._r, 255) * 100) + \"%, \" + Math.round(bound01(this._g, 255) * 100) + \"%, \" + Math.round(bound01(this._b, 255) * 100) + \"%, \" + this._roundA + \")\";\n  },\n  toName: function toName() {\n    if (this._a === 0) {\n      return \"transparent\";\n    }\n    if (this._a < 1) {\n      return false;\n    }\n    return hexNames[rgbToHex(this._r, this._g, this._b, true)] || false;\n  },\n  toFilter: function toFilter(secondColor) {\n    var hex8String = \"#\" + rgbaToArgbHex(this._r, this._g, this._b, this._a);\n    var secondHex8String = hex8String;\n    var gradientType = this._gradientType ? \"GradientType = 1, \" : \"\";\n    if (secondColor) {\n      var s = tinycolor(secondColor);\n      secondHex8String = \"#\" + rgbaToArgbHex(s._r, s._g, s._b, s._a);\n    }\n    return \"progid:DXImageTransform.Microsoft.gradient(\" + gradientType + \"startColorstr=\" + hex8String + \",endColorstr=\" + secondHex8String + \")\";\n  },\n  toString: function toString(format) {\n    var formatSet = !!format;\n    format = format || this._format;\n    var formattedString = false;\n    var hasAlpha = this._a < 1 && this._a >= 0;\n    var needsAlphaFormat = !formatSet && hasAlpha && (format === \"hex\" || format === \"hex6\" || format === \"hex3\" || format === \"hex4\" || format === \"hex8\" || format === \"name\");\n    if (needsAlphaFormat) {\n      // Special case for \"transparent\", all other non-alpha formats\n      // will return rgba when there is transparency.\n      if (format === \"name\" && this._a === 0) {\n        return this.toName();\n      }\n      return this.toRgbString();\n    }\n    if (format === \"rgb\") {\n      formattedString = this.toRgbString();\n    }\n    if (format === \"prgb\") {\n      formattedString = this.toPercentageRgbString();\n    }\n    if (format === \"hex\" || format === \"hex6\") {\n      formattedString = this.toHexString();\n    }\n    if (format === \"hex3\") {\n      formattedString = this.toHexString(true);\n    }\n    if (format === \"hex4\") {\n      formattedString = this.toHex8String(true);\n    }\n    if (format === \"hex8\") {\n      formattedString = this.toHex8String();\n    }\n    if (format === \"name\") {\n      formattedString = this.toName();\n    }\n    if (format === \"hsl\") {\n      formattedString = this.toHslString();\n    }\n    if (format === \"hsv\") {\n      formattedString = this.toHsvString();\n    }\n    return formattedString || this.toHexString();\n  },\n  clone: function clone() {\n    return tinycolor(this.toString());\n  },\n  _applyModification: function _applyModification(fn, args) {\n    var color = fn.apply(null, [this].concat([].slice.call(args)));\n    this._r = color._r;\n    this._g = color._g;\n    this._b = color._b;\n    this.setAlpha(color._a);\n    return this;\n  },\n  lighten: function lighten() {\n    return this._applyModification(_lighten, arguments);\n  },\n  brighten: function brighten() {\n    return this._applyModification(_brighten, arguments);\n  },\n  darken: function darken() {\n    return this._applyModification(_darken, arguments);\n  },\n  desaturate: function desaturate() {\n    return this._applyModification(_desaturate, arguments);\n  },\n  saturate: function saturate() {\n    return this._applyModification(_saturate, arguments);\n  },\n  greyscale: function greyscale() {\n    return this._applyModification(_greyscale, arguments);\n  },\n  spin: function spin() {\n    return this._applyModification(_spin, arguments);\n  },\n  _applyCombination: function _applyCombination(fn, args) {\n    return fn.apply(null, [this].concat([].slice.call(args)));\n  },\n  analogous: function analogous() {\n    return this._applyCombination(_analogous, arguments);\n  },\n  complement: function complement() {\n    return this._applyCombination(_complement, arguments);\n  },\n  monochromatic: function monochromatic() {\n    return this._applyCombination(_monochromatic, arguments);\n  },\n  splitcomplement: function splitcomplement() {\n    return this._applyCombination(_splitcomplement, arguments);\n  },\n  // Disabled until https://github.com/bgrins/TinyColor/issues/254\n  // polyad: function (number) {\n  //   return this._applyCombination(polyad, [number]);\n  // },\n  triad: function triad() {\n    return this._applyCombination(polyad, [3]);\n  },\n  tetrad: function tetrad() {\n    return this._applyCombination(polyad, [4]);\n  }\n};\n\n// If input is an object, force 1 into \"1.0\" to handle ratios properly\n// String input requires \"1.0\" as input, so 1 will be treated as 1\ntinycolor.fromRatio = function (color, opts) {\n  if (_typeof(color) == \"object\") {\n    var newColor = {};\n    for (var i in color) {\n      if (color.hasOwnProperty(i)) {\n        if (i === \"a\") {\n          newColor[i] = color[i];\n        } else {\n          newColor[i] = convertToPercentage(color[i]);\n        }\n      }\n    }\n    color = newColor;\n  }\n  return tinycolor(color, opts);\n};\n\n// Given a string or object, convert that input to RGB\n// Possible string inputs:\n//\n//     \"red\"\n//     \"#f00\" or \"f00\"\n//     \"#ff0000\" or \"ff0000\"\n//     \"#ff000000\" or \"ff000000\"\n//     \"rgb 255 0 0\" or \"rgb (255, 0, 0)\"\n//     \"rgb 1.0 0 0\" or \"rgb (1, 0, 0)\"\n//     \"rgba (255, 0, 0, 1)\" or \"rgba 255, 0, 0, 1\"\n//     \"rgba (1.0, 0, 0, 1)\" or \"rgba 1.0, 0, 0, 1\"\n//     \"hsl(0, 100%, 50%)\" or \"hsl 0 100% 50%\"\n//     \"hsla(0, 100%, 50%, 1)\" or \"hsla 0 100% 50%, 1\"\n//     \"hsv(0, 100%, 100%)\" or \"hsv 0 100% 100%\"\n//\nfunction inputToRGB(color) {\n  var rgb = {\n    r: 0,\n    g: 0,\n    b: 0\n  };\n  var a = 1;\n  var s = null;\n  var v = null;\n  var l = null;\n  var ok = false;\n  var format = false;\n  if (typeof color == \"string\") {\n    color = stringInputToObject(color);\n  }\n  if (_typeof(color) == \"object\") {\n    if (isValidCSSUnit(color.r) && isValidCSSUnit(color.g) && isValidCSSUnit(color.b)) {\n      rgb = rgbToRgb(color.r, color.g, color.b);\n      ok = true;\n      format = String(color.r).substr(-1) === \"%\" ? \"prgb\" : \"rgb\";\n    } else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.v)) {\n      s = convertToPercentage(color.s);\n      v = convertToPercentage(color.v);\n      rgb = hsvToRgb(color.h, s, v);\n      ok = true;\n      format = \"hsv\";\n    } else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.l)) {\n      s = convertToPercentage(color.s);\n      l = convertToPercentage(color.l);\n      rgb = hslToRgb(color.h, s, l);\n      ok = true;\n      format = \"hsl\";\n    }\n    if (color.hasOwnProperty(\"a\")) {\n      a = color.a;\n    }\n  }\n  a = boundAlpha(a);\n  return {\n    ok: ok,\n    format: color.format || format,\n    r: Math.min(255, Math.max(rgb.r, 0)),\n    g: Math.min(255, Math.max(rgb.g, 0)),\n    b: Math.min(255, Math.max(rgb.b, 0)),\n    a: a\n  };\n}\n\n// Conversion Functions\n// --------------------\n\n// `rgbToHsl`, `rgbToHsv`, `hslToRgb`, `hsvToRgb` modified from:\n// <http://mjijackson.com/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript>\n\n// `rgbToRgb`\n// Handle bounds / percentage checking to conform to CSS color spec\n// <http://www.w3.org/TR/css3-color/>\n// *Assumes:* r, g, b in [0, 255] or [0, 1]\n// *Returns:* { r, g, b } in [0, 255]\nfunction rgbToRgb(r, g, b) {\n  return {\n    r: bound01(r, 255) * 255,\n    g: bound01(g, 255) * 255,\n    b: bound01(b, 255) * 255\n  };\n}\n\n// `rgbToHsl`\n// Converts an RGB color value to HSL.\n// *Assumes:* r, g, and b are contained in [0, 255] or [0, 1]\n// *Returns:* { h, s, l } in [0,1]\nfunction rgbToHsl(r, g, b) {\n  r = bound01(r, 255);\n  g = bound01(g, 255);\n  b = bound01(b, 255);\n  var max = Math.max(r, g, b),\n    min = Math.min(r, g, b);\n  var h,\n    s,\n    l = (max + min) / 2;\n  if (max == min) {\n    h = s = 0; // achromatic\n  } else {\n    var d = max - min;\n    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n    switch (max) {\n      case r:\n        h = (g - b) / d + (g < b ? 6 : 0);\n        break;\n      case g:\n        h = (b - r) / d + 2;\n        break;\n      case b:\n        h = (r - g) / d + 4;\n        break;\n    }\n    h /= 6;\n  }\n  return {\n    h: h,\n    s: s,\n    l: l\n  };\n}\n\n// `hslToRgb`\n// Converts an HSL color value to RGB.\n// *Assumes:* h is contained in [0, 1] or [0, 360] and s and l are contained [0, 1] or [0, 100]\n// *Returns:* { r, g, b } in the set [0, 255]\nfunction hslToRgb(h, s, l) {\n  var r, g, b;\n  h = bound01(h, 360);\n  s = bound01(s, 100);\n  l = bound01(l, 100);\n  function hue2rgb(p, q, t) {\n    if (t < 0) t += 1;\n    if (t > 1) t -= 1;\n    if (t < 1 / 6) return p + (q - p) * 6 * t;\n    if (t < 1 / 2) return q;\n    if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n    return p;\n  }\n  if (s === 0) {\n    r = g = b = l; // achromatic\n  } else {\n    var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n    var p = 2 * l - q;\n    r = hue2rgb(p, q, h + 1 / 3);\n    g = hue2rgb(p, q, h);\n    b = hue2rgb(p, q, h - 1 / 3);\n  }\n  return {\n    r: r * 255,\n    g: g * 255,\n    b: b * 255\n  };\n}\n\n// `rgbToHsv`\n// Converts an RGB color value to HSV\n// *Assumes:* r, g, and b are contained in the set [0, 255] or [0, 1]\n// *Returns:* { h, s, v } in [0,1]\nfunction rgbToHsv(r, g, b) {\n  r = bound01(r, 255);\n  g = bound01(g, 255);\n  b = bound01(b, 255);\n  var max = Math.max(r, g, b),\n    min = Math.min(r, g, b);\n  var h,\n    s,\n    v = max;\n  var d = max - min;\n  s = max === 0 ? 0 : d / max;\n  if (max == min) {\n    h = 0; // achromatic\n  } else {\n    switch (max) {\n      case r:\n        h = (g - b) / d + (g < b ? 6 : 0);\n        break;\n      case g:\n        h = (b - r) / d + 2;\n        break;\n      case b:\n        h = (r - g) / d + 4;\n        break;\n    }\n    h /= 6;\n  }\n  return {\n    h: h,\n    s: s,\n    v: v\n  };\n}\n\n// `hsvToRgb`\n// Converts an HSV color value to RGB.\n// *Assumes:* h is contained in [0, 1] or [0, 360] and s and v are contained in [0, 1] or [0, 100]\n// *Returns:* { r, g, b } in the set [0, 255]\nfunction hsvToRgb(h, s, v) {\n  h = bound01(h, 360) * 6;\n  s = bound01(s, 100);\n  v = bound01(v, 100);\n  var i = Math.floor(h),\n    f = h - i,\n    p = v * (1 - s),\n    q = v * (1 - f * s),\n    t = v * (1 - (1 - f) * s),\n    mod = i % 6,\n    r = [v, q, p, p, t, v][mod],\n    g = [t, v, v, q, p, p][mod],\n    b = [p, p, t, v, v, q][mod];\n  return {\n    r: r * 255,\n    g: g * 255,\n    b: b * 255\n  };\n}\n\n// `rgbToHex`\n// Converts an RGB color to hex\n// Assumes r, g, and b are contained in the set [0, 255]\n// Returns a 3 or 6 character hex\nfunction rgbToHex(r, g, b, allow3Char) {\n  var hex = [pad2(Math.round(r).toString(16)), pad2(Math.round(g).toString(16)), pad2(Math.round(b).toString(16))];\n\n  // Return a 3 character hex if possible\n  if (allow3Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1)) {\n    return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0);\n  }\n  return hex.join(\"\");\n}\n\n// `rgbaToHex`\n// Converts an RGBA color plus alpha transparency to hex\n// Assumes r, g, b are contained in the set [0, 255] and\n// a in [0, 1]. Returns a 4 or 8 character rgba hex\nfunction rgbaToHex(r, g, b, a, allow4Char) {\n  var hex = [pad2(Math.round(r).toString(16)), pad2(Math.round(g).toString(16)), pad2(Math.round(b).toString(16)), pad2(convertDecimalToHex(a))];\n\n  // Return a 4 character hex if possible\n  if (allow4Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1) && hex[3].charAt(0) == hex[3].charAt(1)) {\n    return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0) + hex[3].charAt(0);\n  }\n  return hex.join(\"\");\n}\n\n// `rgbaToArgbHex`\n// Converts an RGBA color to an ARGB Hex8 string\n// Rarely used, but required for \"toFilter()\"\nfunction rgbaToArgbHex(r, g, b, a) {\n  var hex = [pad2(convertDecimalToHex(a)), pad2(Math.round(r).toString(16)), pad2(Math.round(g).toString(16)), pad2(Math.round(b).toString(16))];\n  return hex.join(\"\");\n}\n\n// `equals`\n// Can be called with any tinycolor input\ntinycolor.equals = function (color1, color2) {\n  if (!color1 || !color2) return false;\n  return tinycolor(color1).toRgbString() == tinycolor(color2).toRgbString();\n};\ntinycolor.random = function () {\n  return tinycolor.fromRatio({\n    r: Math.random(),\n    g: Math.random(),\n    b: Math.random()\n  });\n};\n\n// Modification Functions\n// ----------------------\n// Thanks to less.js for some of the basics here\n// <https://github.com/cloudhead/less.js/blob/master/lib/less/functions.js>\n\nfunction _desaturate(color, amount) {\n  amount = amount === 0 ? 0 : amount || 10;\n  var hsl = tinycolor(color).toHsl();\n  hsl.s -= amount / 100;\n  hsl.s = clamp01(hsl.s);\n  return tinycolor(hsl);\n}\nfunction _saturate(color, amount) {\n  amount = amount === 0 ? 0 : amount || 10;\n  var hsl = tinycolor(color).toHsl();\n  hsl.s += amount / 100;\n  hsl.s = clamp01(hsl.s);\n  return tinycolor(hsl);\n}\nfunction _greyscale(color) {\n  return tinycolor(color).desaturate(100);\n}\nfunction _lighten(color, amount) {\n  amount = amount === 0 ? 0 : amount || 10;\n  var hsl = tinycolor(color).toHsl();\n  hsl.l += amount / 100;\n  hsl.l = clamp01(hsl.l);\n  return tinycolor(hsl);\n}\nfunction _brighten(color, amount) {\n  amount = amount === 0 ? 0 : amount || 10;\n  var rgb = tinycolor(color).toRgb();\n  rgb.r = Math.max(0, Math.min(255, rgb.r - Math.round(255 * -(amount / 100))));\n  rgb.g = Math.max(0, Math.min(255, rgb.g - Math.round(255 * -(amount / 100))));\n  rgb.b = Math.max(0, Math.min(255, rgb.b - Math.round(255 * -(amount / 100))));\n  return tinycolor(rgb);\n}\nfunction _darken(color, amount) {\n  amount = amount === 0 ? 0 : amount || 10;\n  var hsl = tinycolor(color).toHsl();\n  hsl.l -= amount / 100;\n  hsl.l = clamp01(hsl.l);\n  return tinycolor(hsl);\n}\n\n// Spin takes a positive or negative amount within [-360, 360] indicating the change of hue.\n// Values outside of this range will be wrapped into this range.\nfunction _spin(color, amount) {\n  var hsl = tinycolor(color).toHsl();\n  var hue = (hsl.h + amount) % 360;\n  hsl.h = hue < 0 ? 360 + hue : hue;\n  return tinycolor(hsl);\n}\n\n// Combination Functions\n// ---------------------\n// Thanks to jQuery xColor for some of the ideas behind these\n// <https://github.com/infusion/jQuery-xcolor/blob/master/jquery.xcolor.js>\n\nfunction _complement(color) {\n  var hsl = tinycolor(color).toHsl();\n  hsl.h = (hsl.h + 180) % 360;\n  return tinycolor(hsl);\n}\nfunction polyad(color, number) {\n  if (isNaN(number) || number <= 0) {\n    throw new Error(\"Argument to polyad must be a positive number\");\n  }\n  var hsl = tinycolor(color).toHsl();\n  var result = [tinycolor(color)];\n  var step = 360 / number;\n  for (var i = 1; i < number; i++) {\n    result.push(tinycolor({\n      h: (hsl.h + i * step) % 360,\n      s: hsl.s,\n      l: hsl.l\n    }));\n  }\n  return result;\n}\nfunction _splitcomplement(color) {\n  var hsl = tinycolor(color).toHsl();\n  var h = hsl.h;\n  return [tinycolor(color), tinycolor({\n    h: (h + 72) % 360,\n    s: hsl.s,\n    l: hsl.l\n  }), tinycolor({\n    h: (h + 216) % 360,\n    s: hsl.s,\n    l: hsl.l\n  })];\n}\nfunction _analogous(color, results, slices) {\n  results = results || 6;\n  slices = slices || 30;\n  var hsl = tinycolor(color).toHsl();\n  var part = 360 / slices;\n  var ret = [tinycolor(color)];\n  for (hsl.h = (hsl.h - (part * results >> 1) + 720) % 360; --results;) {\n    hsl.h = (hsl.h + part) % 360;\n    ret.push(tinycolor(hsl));\n  }\n  return ret;\n}\nfunction _monochromatic(color, results) {\n  results = results || 6;\n  var hsv = tinycolor(color).toHsv();\n  var h = hsv.h,\n    s = hsv.s,\n    v = hsv.v;\n  var ret = [];\n  var modification = 1 / results;\n  while (results--) {\n    ret.push(tinycolor({\n      h: h,\n      s: s,\n      v: v\n    }));\n    v = (v + modification) % 1;\n  }\n  return ret;\n}\n\n// Utility Functions\n// ---------------------\n\ntinycolor.mix = function (color1, color2, amount) {\n  amount = amount === 0 ? 0 : amount || 50;\n  var rgb1 = tinycolor(color1).toRgb();\n  var rgb2 = tinycolor(color2).toRgb();\n  var p = amount / 100;\n  var rgba = {\n    r: (rgb2.r - rgb1.r) * p + rgb1.r,\n    g: (rgb2.g - rgb1.g) * p + rgb1.g,\n    b: (rgb2.b - rgb1.b) * p + rgb1.b,\n    a: (rgb2.a - rgb1.a) * p + rgb1.a\n  };\n  return tinycolor(rgba);\n};\n\n// Readability Functions\n// ---------------------\n// <http://www.w3.org/TR/2008/REC-WCAG20-20081211/#contrast-ratiodef (WCAG Version 2)\n\n// `contrast`\n// Analyze the 2 colors and returns the color contrast defined by (WCAG Version 2)\ntinycolor.readability = function (color1, color2) {\n  var c1 = tinycolor(color1);\n  var c2 = tinycolor(color2);\n  return (Math.max(c1.getLuminance(), c2.getLuminance()) + 0.05) / (Math.min(c1.getLuminance(), c2.getLuminance()) + 0.05);\n};\n\n// `isReadable`\n// Ensure that foreground and background color combinations meet WCAG2 guidelines.\n// The third argument is an optional Object.\n//      the 'level' property states 'AA' or 'AAA' - if missing or invalid, it defaults to 'AA';\n//      the 'size' property states 'large' or 'small' - if missing or invalid, it defaults to 'small'.\n// If the entire object is absent, isReadable defaults to {level:\"AA\",size:\"small\"}.\n\n// *Example*\n//    tinycolor.isReadable(\"#000\", \"#111\") => false\n//    tinycolor.isReadable(\"#000\", \"#111\",{level:\"AA\",size:\"large\"}) => false\ntinycolor.isReadable = function (color1, color2, wcag2) {\n  var readability = tinycolor.readability(color1, color2);\n  var wcag2Parms, out;\n  out = false;\n  wcag2Parms = validateWCAG2Parms(wcag2);\n  switch (wcag2Parms.level + wcag2Parms.size) {\n    case \"AAsmall\":\n    case \"AAAlarge\":\n      out = readability >= 4.5;\n      break;\n    case \"AAlarge\":\n      out = readability >= 3;\n      break;\n    case \"AAAsmall\":\n      out = readability >= 7;\n      break;\n  }\n  return out;\n};\n\n// `mostReadable`\n// Given a base color and a list of possible foreground or background\n// colors for that base, returns the most readable color.\n// Optionally returns Black or White if the most readable color is unreadable.\n// *Example*\n//    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:false}).toHexString(); // \"#112255\"\n//    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:true}).toHexString();  // \"#ffffff\"\n//    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"large\"}).toHexString(); // \"#faf3f3\"\n//    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"small\"}).toHexString(); // \"#ffffff\"\ntinycolor.mostReadable = function (baseColor, colorList, args) {\n  var bestColor = null;\n  var bestScore = 0;\n  var readability;\n  var includeFallbackColors, level, size;\n  args = args || {};\n  includeFallbackColors = args.includeFallbackColors;\n  level = args.level;\n  size = args.size;\n  for (var i = 0; i < colorList.length; i++) {\n    readability = tinycolor.readability(baseColor, colorList[i]);\n    if (readability > bestScore) {\n      bestScore = readability;\n      bestColor = tinycolor(colorList[i]);\n    }\n  }\n  if (tinycolor.isReadable(baseColor, bestColor, {\n    level: level,\n    size: size\n  }) || !includeFallbackColors) {\n    return bestColor;\n  } else {\n    args.includeFallbackColors = false;\n    return tinycolor.mostReadable(baseColor, [\"#fff\", \"#000\"], args);\n  }\n};\n\n// Big List of Colors\n// ------------------\n// <https://www.w3.org/TR/css-color-4/#named-colors>\nvar names = tinycolor.names = {\n  aliceblue: \"f0f8ff\",\n  antiquewhite: \"faebd7\",\n  aqua: \"0ff\",\n  aquamarine: \"7fffd4\",\n  azure: \"f0ffff\",\n  beige: \"f5f5dc\",\n  bisque: \"ffe4c4\",\n  black: \"000\",\n  blanchedalmond: \"ffebcd\",\n  blue: \"00f\",\n  blueviolet: \"8a2be2\",\n  brown: \"a52a2a\",\n  burlywood: \"deb887\",\n  burntsienna: \"ea7e5d\",\n  cadetblue: \"5f9ea0\",\n  chartreuse: \"7fff00\",\n  chocolate: \"d2691e\",\n  coral: \"ff7f50\",\n  cornflowerblue: \"6495ed\",\n  cornsilk: \"fff8dc\",\n  crimson: \"dc143c\",\n  cyan: \"0ff\",\n  darkblue: \"00008b\",\n  darkcyan: \"008b8b\",\n  darkgoldenrod: \"b8860b\",\n  darkgray: \"a9a9a9\",\n  darkgreen: \"006400\",\n  darkgrey: \"a9a9a9\",\n  darkkhaki: \"bdb76b\",\n  darkmagenta: \"8b008b\",\n  darkolivegreen: \"556b2f\",\n  darkorange: \"ff8c00\",\n  darkorchid: \"9932cc\",\n  darkred: \"8b0000\",\n  darksalmon: \"e9967a\",\n  darkseagreen: \"8fbc8f\",\n  darkslateblue: \"483d8b\",\n  darkslategray: \"2f4f4f\",\n  darkslategrey: \"2f4f4f\",\n  darkturquoise: \"00ced1\",\n  darkviolet: \"9400d3\",\n  deeppink: \"ff1493\",\n  deepskyblue: \"00bfff\",\n  dimgray: \"696969\",\n  dimgrey: \"696969\",\n  dodgerblue: \"1e90ff\",\n  firebrick: \"b22222\",\n  floralwhite: \"fffaf0\",\n  forestgreen: \"228b22\",\n  fuchsia: \"f0f\",\n  gainsboro: \"dcdcdc\",\n  ghostwhite: \"f8f8ff\",\n  gold: \"ffd700\",\n  goldenrod: \"daa520\",\n  gray: \"808080\",\n  green: \"008000\",\n  greenyellow: \"adff2f\",\n  grey: \"808080\",\n  honeydew: \"f0fff0\",\n  hotpink: \"ff69b4\",\n  indianred: \"cd5c5c\",\n  indigo: \"4b0082\",\n  ivory: \"fffff0\",\n  khaki: \"f0e68c\",\n  lavender: \"e6e6fa\",\n  lavenderblush: \"fff0f5\",\n  lawngreen: \"7cfc00\",\n  lemonchiffon: \"fffacd\",\n  lightblue: \"add8e6\",\n  lightcoral: \"f08080\",\n  lightcyan: \"e0ffff\",\n  lightgoldenrodyellow: \"fafad2\",\n  lightgray: \"d3d3d3\",\n  lightgreen: \"90ee90\",\n  lightgrey: \"d3d3d3\",\n  lightpink: \"ffb6c1\",\n  lightsalmon: \"ffa07a\",\n  lightseagreen: \"20b2aa\",\n  lightskyblue: \"87cefa\",\n  lightslategray: \"789\",\n  lightslategrey: \"789\",\n  lightsteelblue: \"b0c4de\",\n  lightyellow: \"ffffe0\",\n  lime: \"0f0\",\n  limegreen: \"32cd32\",\n  linen: \"faf0e6\",\n  magenta: \"f0f\",\n  maroon: \"800000\",\n  mediumaquamarine: \"66cdaa\",\n  mediumblue: \"0000cd\",\n  mediumorchid: \"ba55d3\",\n  mediumpurple: \"9370db\",\n  mediumseagreen: \"3cb371\",\n  mediumslateblue: \"7b68ee\",\n  mediumspringgreen: \"00fa9a\",\n  mediumturquoise: \"48d1cc\",\n  mediumvioletred: \"c71585\",\n  midnightblue: \"191970\",\n  mintcream: \"f5fffa\",\n  mistyrose: \"ffe4e1\",\n  moccasin: \"ffe4b5\",\n  navajowhite: \"ffdead\",\n  navy: \"000080\",\n  oldlace: \"fdf5e6\",\n  olive: \"808000\",\n  olivedrab: \"6b8e23\",\n  orange: \"ffa500\",\n  orangered: \"ff4500\",\n  orchid: \"da70d6\",\n  palegoldenrod: \"eee8aa\",\n  palegreen: \"98fb98\",\n  paleturquoise: \"afeeee\",\n  palevioletred: \"db7093\",\n  papayawhip: \"ffefd5\",\n  peachpuff: \"ffdab9\",\n  peru: \"cd853f\",\n  pink: \"ffc0cb\",\n  plum: \"dda0dd\",\n  powderblue: \"b0e0e6\",\n  purple: \"800080\",\n  rebeccapurple: \"663399\",\n  red: \"f00\",\n  rosybrown: \"bc8f8f\",\n  royalblue: \"4169e1\",\n  saddlebrown: \"8b4513\",\n  salmon: \"fa8072\",\n  sandybrown: \"f4a460\",\n  seagreen: \"2e8b57\",\n  seashell: \"fff5ee\",\n  sienna: \"a0522d\",\n  silver: \"c0c0c0\",\n  skyblue: \"87ceeb\",\n  slateblue: \"6a5acd\",\n  slategray: \"708090\",\n  slategrey: \"708090\",\n  snow: \"fffafa\",\n  springgreen: \"00ff7f\",\n  steelblue: \"4682b4\",\n  tan: \"d2b48c\",\n  teal: \"008080\",\n  thistle: \"d8bfd8\",\n  tomato: \"ff6347\",\n  turquoise: \"40e0d0\",\n  violet: \"ee82ee\",\n  wheat: \"f5deb3\",\n  white: \"fff\",\n  whitesmoke: \"f5f5f5\",\n  yellow: \"ff0\",\n  yellowgreen: \"9acd32\"\n};\n\n// Make it easy to access colors via `hexNames[hex]`\nvar hexNames = tinycolor.hexNames = flip(names);\n\n// Utilities\n// ---------\n\n// `{ 'name1': 'val1' }` becomes `{ 'val1': 'name1' }`\nfunction flip(o) {\n  var flipped = {};\n  for (var i in o) {\n    if (o.hasOwnProperty(i)) {\n      flipped[o[i]] = i;\n    }\n  }\n  return flipped;\n}\n\n// Return a valid alpha value [0,1] with all invalid values being set to 1\nfunction boundAlpha(a) {\n  a = parseFloat(a);\n  if (isNaN(a) || a < 0 || a > 1) {\n    a = 1;\n  }\n  return a;\n}\n\n// Take input from [0, n] and return it as [0, 1]\nfunction bound01(n, max) {\n  if (isOnePointZero(n)) n = \"100%\";\n  var processPercent = isPercentage(n);\n  n = Math.min(max, Math.max(0, parseFloat(n)));\n\n  // Automatically convert percentage into number\n  if (processPercent) {\n    n = parseInt(n * max, 10) / 100;\n  }\n\n  // Handle floating point rounding errors\n  if (Math.abs(n - max) < 0.000001) {\n    return 1;\n  }\n\n  // Convert into [0, 1] range if it isn't already\n  return n % max / parseFloat(max);\n}\n\n// Force a number between 0 and 1\nfunction clamp01(val) {\n  return Math.min(1, Math.max(0, val));\n}\n\n// Parse a base-16 hex value into a base-10 integer\nfunction parseIntFromHex(val) {\n  return parseInt(val, 16);\n}\n\n// Need to handle 1.0 as 100%, since once it is a number, there is no difference between it and 1\n// <http://stackoverflow.com/questions/7422072/javascript-how-to-detect-number-as-a-decimal-including-1-0>\nfunction isOnePointZero(n) {\n  return typeof n == \"string\" && n.indexOf(\".\") != -1 && parseFloat(n) === 1;\n}\n\n// Check to see if string passed in is a percentage\nfunction isPercentage(n) {\n  return typeof n === \"string\" && n.indexOf(\"%\") != -1;\n}\n\n// Force a hex value to have 2 characters\nfunction pad2(c) {\n  return c.length == 1 ? \"0\" + c : \"\" + c;\n}\n\n// Replace a decimal with it's percentage value\nfunction convertToPercentage(n) {\n  if (n <= 1) {\n    n = n * 100 + \"%\";\n  }\n  return n;\n}\n\n// Converts a decimal to a hex value\nfunction convertDecimalToHex(d) {\n  return Math.round(parseFloat(d) * 255).toString(16);\n}\n// Converts a hex value to a decimal\nfunction convertHexToDecimal(h) {\n  return parseIntFromHex(h) / 255;\n}\nvar matchers = function () {\n  // <http://www.w3.org/TR/css3-values/#integers>\n  var CSS_INTEGER = \"[-\\\\+]?\\\\d+%?\";\n\n  // <http://www.w3.org/TR/css3-values/#number-value>\n  var CSS_NUMBER = \"[-\\\\+]?\\\\d*\\\\.\\\\d+%?\";\n\n  // Allow positive/negative integer/number.  Don't capture the either/or, just the entire outcome.\n  var CSS_UNIT = \"(?:\" + CSS_NUMBER + \")|(?:\" + CSS_INTEGER + \")\";\n\n  // Actual matching.\n  // Parentheses and commas are optional, but not required.\n  // Whitespace can take the place of commas or opening paren\n  var PERMISSIVE_MATCH3 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\n  var PERMISSIVE_MATCH4 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\n  return {\n    CSS_UNIT: new RegExp(CSS_UNIT),\n    rgb: new RegExp(\"rgb\" + PERMISSIVE_MATCH3),\n    rgba: new RegExp(\"rgba\" + PERMISSIVE_MATCH4),\n    hsl: new RegExp(\"hsl\" + PERMISSIVE_MATCH3),\n    hsla: new RegExp(\"hsla\" + PERMISSIVE_MATCH4),\n    hsv: new RegExp(\"hsv\" + PERMISSIVE_MATCH3),\n    hsva: new RegExp(\"hsva\" + PERMISSIVE_MATCH4),\n    hex3: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n    hex6: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,\n    hex4: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n    hex8: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/\n  };\n}();\n\n// `isValidCSSUnit`\n// Take in a single string / number and check to see if it looks like a CSS unit\n// (see `matchers` above for definition).\nfunction isValidCSSUnit(color) {\n  return !!matchers.CSS_UNIT.exec(color);\n}\n\n// `stringInputToObject`\n// Permissive string parsing.  Take in a number of formats, and output an object\n// based on detected format.  Returns `{ r, g, b }` or `{ h, s, l }` or `{ h, s, v}`\nfunction stringInputToObject(color) {\n  color = color.replace(trimLeft, \"\").replace(trimRight, \"\").toLowerCase();\n  var named = false;\n  if (names[color]) {\n    color = names[color];\n    named = true;\n  } else if (color == \"transparent\") {\n    return {\n      r: 0,\n      g: 0,\n      b: 0,\n      a: 0,\n      format: \"name\"\n    };\n  }\n\n  // Try to match string input using regular expressions.\n  // Keep most of the number bounding out of this function - don't worry about [0,1] or [0,100] or [0,360]\n  // Just return an object and let the conversion functions handle that.\n  // This way the result will be the same whether the tinycolor is initialized with string or object.\n  var match;\n  if (match = matchers.rgb.exec(color)) {\n    return {\n      r: match[1],\n      g: match[2],\n      b: match[3]\n    };\n  }\n  if (match = matchers.rgba.exec(color)) {\n    return {\n      r: match[1],\n      g: match[2],\n      b: match[3],\n      a: match[4]\n    };\n  }\n  if (match = matchers.hsl.exec(color)) {\n    return {\n      h: match[1],\n      s: match[2],\n      l: match[3]\n    };\n  }\n  if (match = matchers.hsla.exec(color)) {\n    return {\n      h: match[1],\n      s: match[2],\n      l: match[3],\n      a: match[4]\n    };\n  }\n  if (match = matchers.hsv.exec(color)) {\n    return {\n      h: match[1],\n      s: match[2],\n      v: match[3]\n    };\n  }\n  if (match = matchers.hsva.exec(color)) {\n    return {\n      h: match[1],\n      s: match[2],\n      v: match[3],\n      a: match[4]\n    };\n  }\n  if (match = matchers.hex8.exec(color)) {\n    return {\n      r: parseIntFromHex(match[1]),\n      g: parseIntFromHex(match[2]),\n      b: parseIntFromHex(match[3]),\n      a: convertHexToDecimal(match[4]),\n      format: named ? \"name\" : \"hex8\"\n    };\n  }\n  if (match = matchers.hex6.exec(color)) {\n    return {\n      r: parseIntFromHex(match[1]),\n      g: parseIntFromHex(match[2]),\n      b: parseIntFromHex(match[3]),\n      format: named ? \"name\" : \"hex\"\n    };\n  }\n  if (match = matchers.hex4.exec(color)) {\n    return {\n      r: parseIntFromHex(match[1] + \"\" + match[1]),\n      g: parseIntFromHex(match[2] + \"\" + match[2]),\n      b: parseIntFromHex(match[3] + \"\" + match[3]),\n      a: convertHexToDecimal(match[4] + \"\" + match[4]),\n      format: named ? \"name\" : \"hex8\"\n    };\n  }\n  if (match = matchers.hex3.exec(color)) {\n    return {\n      r: parseIntFromHex(match[1] + \"\" + match[1]),\n      g: parseIntFromHex(match[2] + \"\" + match[2]),\n      b: parseIntFromHex(match[3] + \"\" + match[3]),\n      format: named ? \"name\" : \"hex\"\n    };\n  }\n  return false;\n}\nfunction validateWCAG2Parms(parms) {\n  // return valid WCAG2 parms for isReadable.\n  // If input parms are invalid, return {\"level\":\"AA\", \"size\":\"small\"}\n  var level, size;\n  parms = parms || {\n    level: \"AA\",\n    size: \"small\"\n  };\n  level = (parms.level || \"AA\").toUpperCase();\n  size = (parms.size || \"small\").toLowerCase();\n  if (level !== \"AA\" && level !== \"AAA\") {\n    level = \"AA\";\n  }\n  if (size !== \"small\" && size !== \"large\") {\n    size = \"small\";\n  }\n  return {\n    level: level,\n    size: size\n  };\n}\n\nexport { tinycolor as default };\n","/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n  return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\n  function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nvar ownKeys = function(o) {\n  ownKeys = Object.getOwnPropertyNames || function (o) {\n    var ar = [];\n    for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n    return ar;\n  };\n  return ownKeys(o);\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose, inner;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n      if (async) inner = dispose;\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  var r, s = 0;\n  function next() {\n    while (r = env.stack.pop()) {\n      try {\n        if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\n        if (r.dispose) {\n          var result = r.dispose.call(r.value);\n          if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n        }\n        else s |= 1;\n      }\n      catch (e) {\n        fail(e);\n      }\n    }\n    if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport function __rewriteRelativeImportExtension(path, preserveJsx) {\n  if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\n      return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\n          return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\n      });\n  }\n  return path;\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __esDecorate,\n  __runInitializers,\n  __propKey,\n  __setFunctionName,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n  __rewriteRelativeImportExtension,\n};\n","import {Observable, Subscriber} from 'rxjs';\n\nexport type WindowKeyDownKeyObserverDefinition = {\n    (\n        listenerReturn: { (eventListener: { (event: KeyboardEvent): void }): void },\n        preventDefault: boolean\n    ): Observable<string>\n};\n\n/**\n * Check if the event target is within an input-selector field or is an editable element\n * @param event - The keyboard event to check\n * @returns true if target is an input-selector field or editable element\n */\nfunction isInputSelectorField(event: KeyboardEvent): boolean {\n    const target = event.target as HTMLElement;\n    if (!target) return false;\n\n    // Check if target is an input or textarea element\n    const tagName = target.tagName?.toLowerCase();\n    if (tagName === 'input' || tagName === 'textarea') {\n        return true;\n    }\n\n    // Check if target has contenteditable attribute\n    if (target.hasAttribute?.('contenteditable') && target.getAttribute('contenteditable') !== 'false') {\n        return true;\n    }\n\n    // Check for input-selector specific IDs\n    if (target.id === 'selectorInput' || target.id === 'selector-text-input') {\n        return true;\n    }\n\n    // Check for input-selector specific classes\n    if (target.classList?.contains('selector-text-input')) {\n        return true;\n    }\n\n    // Check if target is within an element with selector-input classes\n    let current: HTMLElement | null = target;\n    while (current) {\n        if (current.classList?.contains('selector-input-editing') || \n            current.classList?.contains('selector-input-section')) {\n            return true;\n        }\n        current = current.parentElement;\n    }\n\n    return false;\n}\n\n/**\n * a keydown event listener returning an [Observable<string>] of [event.key]\n * @param listenerReturn probably YAGNI but a function to return the closure scoped event listener \\\n *    so you can extract the listener from the listenerReturn lambda and call [window.removeEventListener()] \\\n *    maybe just return a [Pair<>] idk\n * @param preventDefault calls event.preventDefault() optionally a key is detected, useful for scanning, bad for shortcuts\n */\nexport const WindowKeyDownKey: WindowKeyDownKeyObserverDefinition = (listenerReturn: {(eventListener: {(event: KeyboardEvent): void}): void},\n                                                                     preventDefault = true): Observable<string> => {\n    return new Observable((subscriber: Subscriber<string>) => {\n        const listener = (event: KeyboardEvent) => {\n            if (event.defaultPrevented) {\n                return; // Should do nothing if the default action has been cancelled\n            }\n\n            if (event.key) {\n                // Skip preventDefault if target is an input-selector field\n                // This allows normal typing in input fields\n                if (isInputSelectorField(event)) {\n                    // Emit the key but don't prevent default - allow normal typing\n                    subscriber.next(event.key);\n                    return;\n                }\n\n                // Handle the event with KeyboardEvent.key\n                subscriber.next(event.key);\n                if (preventDefault) event.preventDefault();\n            }\n        };\n        listenerReturn(listener);\n        window.addEventListener(\n            \"keydown\",\n            listener,\n            true,\n        );\n    });\n}\n\n\n/**\n * Normalize a key name to a standard format\n * @param key - The key name from event.key\n * @returns Normalized key name or null if invalid\n */\nexport function normalizeKey(key: string): string | null {\n    if (!key) return null;\n    \n    // Filter out invalid keys\n    const invalidKeys = ['Dead', 'Unidentified'];\n    if (invalidKeys.includes(key)) {\n        return null;\n    }\n    \n    // Normalize modifier keys\n    const normalized = key.trim();\n    \n    // Map common variations to standard names\n    const keyMap: { [key: string]: string } = {\n        'Control': 'Ctrl',\n        'Meta': 'Meta', // Keep Meta as is, but we'll filter it if it appears alone\n        'Shift': 'Shift',\n        'Alt': 'Alt',\n        'AltGraph': 'Alt',\n    };\n    \n    // Check if it's a known modifier key mapping\n    const mapped = keyMap[normalized];\n    if (mapped) {\n        return mapped;\n    }\n    \n    // Return the key as-is (capitalized first letter for consistency)\n    return normalized.length > 0 \n        ? normalized.charAt(0).toUpperCase() + normalized.slice(1).toLowerCase()\n        : normalized;\n}\n\n/**\n * Filter and normalize a keychord, removing invalid keys\n * @param keyChord - The keychord to filter and normalize\n * @returns Filtered and normalized keychord\n */\nexport function filterAndNormalizeKeyChord(keyChord: KeyChord): KeyChord {\n    return keyChord\n        .map(key => normalizeKey(key))\n        .filter((key): key is string => key !== null && key !== undefined);\n}\n\n/**\n * Sort and normalize a keychord for comparison\n * Modifier keys come first, then regular keys, both sorted alphabetically\n * @param keyChord - The keychord to sort\n * @returns Sorted and normalized keychord\n */\nexport function sortKeyChord(keyChord: KeyChord): KeyChord {\n    const normalized = filterAndNormalizeKeyChord(keyChord);\n    \n    // Define modifier key order (alphabetical within modifiers)\n    const modifierKeys = ['Alt', 'Ctrl', 'Meta', 'Shift'];\n    const isModifier = (key: string) => modifierKeys.includes(key);\n    \n    // Separate modifiers and regular keys\n    const modifiers = normalized.filter(isModifier).sort();\n    const regularKeys = normalized.filter(key => !isModifier(key)).sort();\n    \n    // Return modifiers first, then regular keys\n    return [...modifiers, ...regularKeys];\n}\n\n/**\n * Compare two keychords for equality (order-independent, normalized)\n * @param chord1 - First keychord\n * @param chord2 - Second keychord\n * @returns True if keychords match\n */\nexport function compareKeyChords(chord1: KeyChord, chord2: KeyChord): boolean {\n    const sorted1 = sortKeyChord(chord1);\n    const sorted2 = sortKeyChord(chord2);\n    \n    if (sorted1.length !== sorted2.length) {\n        return false;\n    }\n    \n    return sorted1.every((key, index) => key.toLowerCase() === sorted2[index].toLowerCase());\n}\n\n/**\n * a 1-4ish length array of keys\n */\nexport type KeyChord = string[]\n/**\n * Observes keyboard key events and returns an Observable that calls next(true) if the shortcut is matched\n * Calls, next(false) if not\n * @param shortcut\n * @param keysObservable\n * @param stop\n * @constructor\n */\nexport const FollowKeyChordObserver = (shortcut: KeyChord,\n                                       keysObservable: Observable<string>,\n                                       stop: {(): boolean}): Observable<boolean> => {\n    return new Observable((subscriber: Subscriber<boolean>) => {\n        let typed: KeyChord = []\n        let complete = false;\n        \n        // Normalize and sort the target shortcut once\n        const normalizedShortcut = sortKeyChord(shortcut);\n        \n        keysObservable.subscribe((key: string) => {\n            if (stop()) {\n                if (!complete) {\n                    complete = true;\n                    subscriber.complete()\n                }\n                return;\n            }\n\n            // Normalize and filter the incoming key\n            const normalizedKey = normalizeKey(key);\n            \n            // Skip invalid keys (like \"Dead\", \"Unidentified\")\n            if (!normalizedKey) {\n                subscriber.next(false);\n                return;\n            }\n\n            // typed.unshift(key);\n            // todo: review: should shift, meta, and control reduce to 1 and stick until keyup?\n            //        so you can hold shift, and toggle with 'w'\n            typed = [normalizedKey].concat(typed).slice(0, shortcut.length)\n\n            // Compare using normalized, sorted keychords\n            const matches = compareKeyChords(typed, normalizedShortcut);\n            \n            if (matches) {\n                subscriber.next(true);\n            } else {\n                subscriber.next(false);\n            }\n        })\n    });\n}\n","import { LogViewContentSystemTomes } from './log-view-content-system-tome';\nimport { LogViewShadowSystemTomes } from './log-view-shadow-system-tome';\nimport { ContentSystemDOMService } from '../services/content-system-dom-service';\nimport { ContentSystemMessageService } from '../services/content-system-message-service';\nimport { MLSettingsService } from '../services/ml-settings-service';\nimport { SelectorHierarchy } from '../services/selector-hierarchy';\nimport { SimpleColorServiceAdapter } from '../services/simple-color-service';\nimport Options from '../models/options';\nimport { initializeKeyChordService, cleanupKeyChordService, setToggleCallback } from '../services/keychord-content-integration';\n\n/**\n * Integrated Content System with Proxy State Machine\n * \n * This system integrates the main content system with the shadow system proxy,\n * providing a unified message routing architecture that can connect Tomes structurally.\n */\nexport class LogViewContentSystemIntegrated {\n  private contentTome: any;\n  private shadowTome: any;\n  private domService: ContentSystemDOMService;\n  private messageService: ContentSystemMessageService;\n  private mlService: MLSettingsService;\n  private selectorService: SelectorHierarchy;\n  private colorService: SimpleColorServiceAdapter;\n  \n  private going: boolean = false;\n  private latestOptions: Options | undefined;\n  private sessionId: string;\n  private messageHistory: any[] = [];\n  private proxyState: 'idle' | 'active' | 'shadow-active' | 'both-active' = 'idle';\n\n  constructor() {\n    console.log(\" Creating Log-View-Machine Integrated Content System...\");\n    \n    // Generate session ID first\n    this.sessionId = `integrated-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n    \n    // Initialize services\n    this.colorService = new SimpleColorServiceAdapter();\n    this.selectorService = new SelectorHierarchy(this.colorService);\n    this.mlService = new MLSettingsService();\n    this.domService = new ContentSystemDOMService();\n    this.messageService = new ContentSystemMessageService(this.sessionId);\n    \n    // Initialize Tomes by calling create() to get actual instances\n    this.contentTome = LogViewContentSystemTomes.create({});\n    this.shadowTome = LogViewShadowSystemTomes.create({});\n    \n    // Start the Tomes\n    this.contentTome.start();\n    this.shadowTome.start();\n    \n    // Initialize the system\n    this.init();\n    \n    // Set up message listeners\n    this.setupMessageListeners();\n    \n    console.log(\" Log-View-Machine Integrated Content System initialized successfully\");\n  }\n\n  private init() {\n    // Wait for document.body to be available\n    if (!document.body) {\n      setTimeout(() => this.init(), 100);\n      return;\n    }\n\n    // Initialize DOM service\n    this.domService.initialize();\n    \n    // Set up message routing\n    this.setupMessageRouting();\n    \n    // Initialize keyboard shortcut service\n    this.setupKeyboardShortcuts();\n    \n    // Log system initialization\n    this.logMessage('system-init', 'Integrated content system initialized successfully');\n  }\n\n  private async setupKeyboardShortcuts() {\n    console.log(' Integrated System: Setting up keyboard shortcuts');\n    \n    // Initialize KeyChordService with toggle callback that uses integrated system's handleToggle\n    await initializeKeyChordService(() => {\n      console.log(' Integrated System: Keyboard shortcut triggered, calling handleToggle');\n      // Use the integrated system's toggle handler which properly routes to start/stop\n      this.handleToggle({\n        name: 'toggle',\n        from: 'keyboard-shortcut',\n        timestamp: Date.now(),\n        options: this.latestOptions // Include current options if available\n      });\n    });\n  }\n\n  private setupMessageRouting() {\n    // Set up routing between content and shadow Tomes\n    this.contentTome.subscribe((state: any) => {\n      console.log(\" Integrated System: Content Tome state changed\", state);\n      this.handleContentTomeStateChange(state);\n    });\n\n    this.shadowTome.subscribe((state: any) => {\n      console.log(\" Integrated System: Shadow Tome state changed\", state);\n      this.handleShadowTomeStateChange(state);\n    });\n  }\n\n  private setupMessageListeners() {\n    // Listen for messages from the popup and background\n    if (typeof chrome !== 'undefined' && chrome.runtime) {\n      chrome.runtime.onMessage.addListener((message, sender, sendResponse) => {\n        this.handleRuntimeMessage(message, sender, sendResponse);\n        return true; // Keep message channel open\n      });\n    }\n\n    // Listen for window.postMessage from background script\n    window.addEventListener('message', (event) => {\n      if (event.data?.source === 'wave-reader-extension') {\n        this.handleWindowMessage(event.data.message);\n      }\n    });\n  }\n\n  private handleRuntimeMessage(message: any, sender: any, sendResponse: any) {\n    console.log(\" Integrated System: Handling runtime message\", message);\n    \n    // Coalesce nested message objects - check if message has an embedded message property\n    let normalizedMessage = message;\n    if (message && typeof message === 'object' && message.message && typeof message.message === 'object') {\n      // Extract the inner message and merge with outer properties (like source)\n      normalizedMessage = {\n        ...message.message,\n        // Preserve outer properties like source if they exist and aren't in inner message\n        source: message.source || message.message.source,\n        from: message.from || message.message.from || message.source\n      };\n      console.log(\" Integrated System: Coalesced nested message:\", normalizedMessage);\n    }\n    \n    // Normalize message name: handle both 'type' and 'name' fields, and convert to lowercase\n    if (!normalizedMessage.name && normalizedMessage.type) {\n      normalizedMessage.name = normalizedMessage.type.toLowerCase();\n    } else if (normalizedMessage.name && typeof normalizedMessage.name === 'string') {\n      normalizedMessage.name = normalizedMessage.name.toLowerCase();\n    }\n    \n    // Ensure 'from' field is set\n    if (!normalizedMessage.from) {\n      normalizedMessage.from = normalizedMessage.source || sender?.id ? 'background' : 'unknown';\n    }\n    \n    console.log(\" Integrated System: Normalized message name:\", normalizedMessage.name, \"from:\", normalizedMessage.from);\n    \n    try {\n      switch (normalizedMessage.name) {\n        case 'start':\n          this.handleStart(normalizedMessage).then(() => {\n            sendResponse({ success: true, state: this.proxyState });\n          }).catch((error: any) => {\n            console.error(\" Integrated System: Error in handleStart\", error);\n            sendResponse({ success: false, error: error.message });\n          });\n          break;\n        case 'stop':\n          try {\n            this.handleStop(normalizedMessage);\n            sendResponse({ success: true, state: this.proxyState });\n          } catch (error: any) {\n            console.error(\" Integrated System: Error in handleStop\", error);\n            sendResponse({ success: false, error: error.message });\n          }\n          break;\n        case 'toggle':\n        case 'toggle-wave-reader':\n          try {\n            this.handleToggle(normalizedMessage);\n            sendResponse({ success: true, state: this.proxyState });\n          } catch (error: any) {\n            console.error(\" Integrated System: Error in handleToggle\", error);\n            sendResponse({ success: false, error: error.message });\n          }\n          break;\n        case 'ping':\n          this.handlePing(normalizedMessage);\n          sendResponse({ success: true, state: this.proxyState });\n          break;\n        case 'get-status':\n          this.handleGetStatus(normalizedMessage);\n          sendResponse({ success: true, status: this.getCurrentState() });\n          break;\n        default:\n          console.log(\" Integrated System: Unknown runtime message type:\", normalizedMessage.name);\n          sendResponse({ success: false, error: 'Unknown message type' });\n      }\n    } catch (error: any) {\n      console.error(\" Integrated System: Error handling runtime message:\", error);\n      sendResponse({ success: false, error: error.message });\n    }\n  }\n\n  private handleWindowMessage(message: any) {\n    console.log(\" Integrated System: Handling window message\", message);\n    \n    // Coalesce nested message objects - check if message has an embedded message property\n    let normalizedMessage = message;\n    if (message && typeof message === 'object' && message.message && typeof message.message === 'object') {\n      // Extract the inner message and merge with outer properties (like source)\n      normalizedMessage = {\n        ...message.message,\n        // Preserve outer properties like source if they exist and aren't in inner message\n        source: message.source || message.message.source,\n        from: message.from || message.message.from || message.source\n      };\n      console.log(\" Integrated System: Coalesced nested window message:\", normalizedMessage);\n    }\n    \n    try {\n      switch (normalizedMessage.name) {\n        case 'start':\n          this.handleStart(normalizedMessage).catch((error: any) => {\n            console.error(\" Integrated System: Error in handleStart (window)\", error);\n          });\n          break;\n        case 'stop':\n          this.handleStop(normalizedMessage);\n          break;\n        case 'toggle':\n        case 'toggle-wave-reader':\n          this.handleToggle(normalizedMessage);\n          break;\n        case 'ping':\n          this.handlePing(normalizedMessage);\n          break;\n        default:\n          console.log(\" Integrated System: Unknown window message type:\", normalizedMessage.name);\n      }\n    } catch (error: any) {\n      console.error(\" Integrated System: Error handling window message:\", error);\n    }\n  }\n\n  private async handleStart(message: any) {\n    console.log(\" Integrated System: Handling start message\", { \n      message, \n      hasOptions: !!message.options \n    });\n    \n    this.going = true;\n    \n    // Extract options from the start message\n    if (message.options) {\n      this.latestOptions = message.options;\n      console.log(\" Integrated System: Options extracted and set\", { \n        latestOptions: this.latestOptions,\n        hasWave: !!this.latestOptions?.wave \n      });\n    } else {\n      console.warn(\" Integrated System: No options found in start message, loading defaults\");\n      this.messageService.logMessage('start-warning', 'No options in start message, using defaults');\n      \n      // Load default options if none provided\n      try {\n        const Options = (await import('../models/options')).default;\n        this.latestOptions = Options.getDefaultOptions();\n        console.log(\" Integrated System: Using default options\", this.latestOptions);\n      } catch (error: any) {\n        console.error(\" Integrated System: Failed to load default options\", error);\n        // Try to load from Chrome storage as fallback\n        if (typeof chrome !== 'undefined' && chrome.storage) {\n          try {\n            const result = await chrome.storage.local.get(['waveReaderSettings']);\n            if (result.waveReaderSettings) {\n              this.latestOptions = result.waveReaderSettings;\n              console.log(\" Integrated System: Loaded options from Chrome storage\", this.latestOptions);\n            }\n          } catch (storageError) {\n            console.error(\" Integrated System: Failed to load from storage\", storageError);\n          }\n        }\n      }\n    }\n    \n    // Route message to both Tomes\n    this.routeMessageToTomes('start', message);\n    \n    // Apply wave animation\n    this.applyWaveAnimation();\n    \n    // Update proxy state\n    this.updateProxyState();\n    \n    // Sync state with background script\n    this.syncGoingStateWithBackground();\n    \n    this.messageService.logMessage('start', 'Integrated system started');\n    this.logMessage('start', 'Integrated system started');\n  }\n\n  private handleStop(message: any) {\n    console.log(\" Integrated System: Handling stop message\");\n    \n    this.going = false;\n    \n    // Route message to both Tomes\n    this.routeMessageToTomes('stop', message);\n    \n    // Remove wave animation\n    this.removeWaveAnimation();\n    \n    // Update proxy state\n    this.updateProxyState();\n    \n    // Sync state with background script\n    this.syncGoingStateWithBackground();\n    \n    this.messageService.logMessage('stop', 'Integrated system stopped');\n    this.logMessage('stop', 'Integrated system stopped');\n  }\n\n  private handleToggle(message: any) {\n    console.log(\" Integrated System: Handling toggle message\");\n    \n    if (this.going) {\n      this.handleStop(message);\n    } else {\n      this.handleStart(message);\n    }\n  }\n\n  private handlePing(message: any) {\n    console.log(\" Integrated System: Handling ping message\");\n    \n    // Route ping to both Tomes\n    this.routeMessageToTomes('ping', message);\n    \n    // Send pong response\n    if (typeof chrome !== 'undefined' && chrome.runtime) {\n      chrome.runtime.sendMessage({\n        from: 'integrated-content-system',\n        name: 'pong',\n        timestamp: Date.now(),\n        sessionId: this.sessionId,\n        proxyState: this.proxyState\n      });\n    }\n    \n    this.messageService.logMessage('ping', 'Ping responded with pong');\n    this.logMessage('ping', 'Ping responded with pong');\n  }\n\n  private handleGetStatus(message: any) {\n    console.log(\" Integrated System: Handling get-status message\");\n    this.logMessage('status-requested', 'Status requested from integrated system');\n  }\n\n  private routeMessageToTomes(messageName: string, messageData: any) {\n    console.log(\" Integrated System: Routing message to Tomes\", { messageName, messageData });\n    \n    try {\n      // Send to content Tome\n      this.contentTome.send(messageName, messageData);\n      \n      // Send to shadow Tome\n      this.shadowTome.send(messageName, messageData);\n      \n      console.log(\" Integrated System: Message routed to both Tomes successfully\");\n    } catch (error: any) {\n      console.error(\" Integrated System: Error routing message to Tomes:\", error);\n    }\n  }\n\n  private handleContentTomeStateChange(state: any) {\n    console.log(\" Integrated System: Content Tome state changed\", state);\n    \n    // Handle content Tome state changes\n    if (state.value === 'active') {\n      console.log(\" Integrated System: Content Tome is now active\");\n    }\n    \n    // Update proxy state\n    this.updateProxyState();\n  }\n\n  private handleShadowTomeStateChange(state: any) {\n    console.log(\" Integrated System: Shadow Tome state changed\", state);\n    \n    // Handle shadow Tome state changes\n    if (state.value === 'waving') {\n      console.log(\" Integrated System: Shadow Tome is now waving\");\n    }\n    \n    // Update proxy state\n    this.updateProxyState();\n  }\n\n  private updateProxyState() {\n    const contentState = this.contentTome.getState().value;\n    const shadowState = this.shadowTome.getState().value;\n    \n    if (contentState === 'active' && shadowState === 'waving') {\n      this.proxyState = 'both-active';\n    } else if (contentState === 'active') {\n      this.proxyState = 'active';\n    } else if (shadowState === 'waving') {\n      this.proxyState = 'shadow-active';\n    } else {\n      this.proxyState = 'idle';\n    }\n    \n    console.log(\" Integrated System: Proxy state updated\", {\n      proxyState: this.proxyState,\n      contentState,\n      shadowState\n    });\n  }\n\n  private syncGoingStateWithBackground() {\n    console.log(\" Integrated System: Syncing going state with background\", { going: this.going });\n    \n    if (typeof chrome !== 'undefined' && chrome.runtime) {\n      chrome.runtime.sendMessage({\n        from: 'integrated-content-system',\n        name: 'update-going-state',\n        going: this.going,\n        timestamp: Date.now(),\n        sessionId: this.sessionId\n      }, (response) => {\n        if (chrome.runtime.lastError) {\n          console.warn(\" Integrated System: Failed to sync going state with background:\", chrome.runtime.lastError.message);\n        }\n      });\n    }\n  }\n\n  private applyWaveAnimation() {\n    console.log(\" Integrated System: Applying wave animation\", {\n      hasOptions: !!this.latestOptions,\n      hasWave: !!this.latestOptions?.wave,\n      wave: this.latestOptions?.wave\n    });\n\n    if (!this.latestOptions?.wave) {\n      console.warn(\" Integrated System: No wave options available for animation\");\n      this.messageService.logMessage('wave-animation-failed', 'No wave options available');\n      return;\n    }\n\n    const wave = this.latestOptions.wave;\n    const css = wave.cssTemplate;\n\n    console.log(\" Integrated System: Wave CSS template\", {\n      css,\n      cssLength: css ? css.length : 0,\n      cssPreview: css ? css.substring(0, 200) + '...' : 'NO_CSS'\n    });\n\n    if (css) {\n      console.log(\" Integrated System: Calling DOM service to apply CSS animation...\");\n      this.domService.applyWaveAnimation(css);\n      this.messageService.logMessage('wave-animation-applied', 'Wave animation applied');\n      console.log(\" Integrated System: Wave animation CSS applied to DOM\");\n    } else {\n      console.warn(\" Integrated System: No CSS template available in wave\");\n      this.messageService.logMessage('wave-animation-failed', 'No CSS template available');\n    }\n  }\n\n  private removeWaveAnimation() {\n    console.log(\" Integrated System: Removing wave animation\");\n    this.domService.removeWaveAnimation();\n    this.messageService.logMessage('wave-animation-removed', 'Wave animation removed');\n  }\n\n  private logMessage(type: string, message: string, data?: any) {\n    const logEntry = {\n      type,\n      message,\n      data,\n      timestamp: Date.now(),\n      sessionId: this.sessionId,\n      url: window.location.href,\n      proxyState: this.proxyState,\n      contentState: this.contentTome.getState().value,\n      shadowState: this.shadowTome.getState().value\n    };\n    \n    this.messageHistory.push(logEntry);\n    console.log(` Integrated System [${type}]:`, message, data);\n  }\n\n  // Public methods for external access\n  public getCurrentState() {\n    return {\n      proxyState: this.proxyState,\n      contentState: this.contentTome.getState().value,\n      shadowState: this.shadowTome.getState().value,\n      going: this.going\n    };\n  }\n\n  public getSessionId() {\n    return this.sessionId;\n  }\n\n  public getMessageHistory() {\n    return this.messageHistory;\n  }\n\n  public isActive() {\n    return this.going;\n  }\n\n  public getTomeStates() {\n    return {\n      content: this.contentTome.getState(),\n      shadow: this.shadowTome.getState()\n    };\n  }\n\n  public destroy() {\n    console.log(\" Integrated System: Destroying system...\");\n    \n    // Clean up keyboard shortcuts\n    cleanupKeyChordService();\n    \n    // Clean up Tomes\n    if (this.contentTome) {\n      this.contentTome.stop();\n    }\n    if (this.shadowTome) {\n      this.shadowTome.stop();\n    }\n    \n    // Clean up services\n    this.domService.cleanup();\n    \n    this.logMessage('system-destroyed', 'Integrated system destroyed');\n  }\n}\n\n// Initialize the integrated system when the script loads\nconsole.log(\" Log-View-Machine: Initializing integrated content system...\");\n\n// Wait for DOM to be ready\nif (document.readyState === 'loading') {\n  document.addEventListener('DOMContentLoaded', () => {\n    new LogViewContentSystemIntegrated();\n  });\n} else {\n  new LogViewContentSystemIntegrated();\n}\n\n// Export for testing\nexport default LogViewContentSystemIntegrated;\n","import { createViewStateMachine } from 'log-view-machine';\nimport { createComponentTomeWithMetadata, ComponentTomeMetadata } from '../types/tome-metadata';\nimport { initializeKeyChordService, cleanupKeyChordService, setToggleCallback } from '../services/keychord-content-integration';\n\n/**\n * Log View Content System Tome\n * \n * Manages the state and behavior of the content system component\n * using log-view-machine for state management and logging.\n */\n\nexport interface ContentSystemModel {\n  // System state\n  isActive: boolean;\n  currentState: string;\n  going: boolean;\n  latestOptions: any;\n  \n  // DOM state\n  shadowDOM: {\n    isInitialized: boolean;\n    containerId: string | null;\n    shadowRoot: any;\n  };\n  \n  // Wave animation state\n  waveAnimation: {\n    isActive: boolean;\n    options: any;\n    cssTemplate: string | null;\n    lastApplied: number | null;\n  };\n  \n  // Selector UI state\n  selectorUI: {\n    isVisible: boolean;\n    currentSelector: string | null;\n    selectorMode: boolean;\n  };\n  \n  // Services state\n  services: {\n    hierarchySelector: {\n      isInitialized: boolean;\n      currentSelector: string | null;\n    };\n    mlService: {\n      isInitialized: boolean;\n      lastRecommendation: any;\n    };\n    colorService: {\n      isInitialized: boolean;\n    };\n  };\n  \n  // Message system\n  messageSystem: {\n    messageHistory: any[];\n    lastMessage: any;\n    messageQueue: any[];\n  };\n  \n  // Session and metadata\n  sessionId: string;\n  stateHistory: any[];\n  error: any;\n  timestamp: number;\n}\n\n// Tome configuration\nconst tomeConfig = {\n  machineId: 'log-view-content-system',\n  xstateConfig: {\n    id: 'log-view-content-system',\n    initial: 'idle',\n    context: {\n      model: {} as ContentSystemModel\n    },\n    states: {\n      idle: {\n        on: {\n          INITIALIZE: { target: 'initializing', actions: ['initializeSystem'] },\n          START: { target: 'starting', actions: ['prepareStart'] },\n          ERROR: { target: 'error', actions: ['handleError'] }\n        }\n      },\n      initializing: {\n        on: {\n          INITIALIZATION_COMPLETE: { target: 'ready', actions: ['markInitialized'] },\n          INITIALIZATION_FAILED: { target: 'error', actions: ['handleInitError'] }\n        }\n      },\n      ready: {\n        on: {\n          START: { target: 'starting', actions: ['prepareStart'] },\n          STOP: { target: 'stopping', actions: ['prepareStop'] },\n          TOGGLE: { target: 'toggling', actions: ['prepareToggle'] },\n          'SELECTION-MADE': { target: 'selection-mode', actions: ['showSelectorUI'] },\n          'ML-RECOMMENDATION': { target: 'processing-ml', actions: ['processMLRecommendation'] },\n          'WAVE-READER-START': { target: 'component-initializing', actions: ['initializeComponents'] },\n          'WAVE-READER-STOP': { target: 'component-cleaning', actions: ['cleanupComponents'] },\n          ERROR: { target: 'error', actions: ['handleError'] }\n        }\n      },\n      starting: {\n        on: {\n          START_COMPLETE: { target: 'waving', actions: ['startWaveAnimation'] },\n          START_FAILED: { target: 'error', actions: ['handleStartError'] }\n        }\n      },\n      waving: {\n        on: {\n          STOP: { target: 'stopping', actions: ['prepareStop'] },\n          TOGGLE: { target: 'stopping', actions: ['prepareStop'] },\n          'SELECTION-MADE': { target: 'selection-mode', actions: ['showSelectorUI'] },\n          'WAVE-ERROR': { target: 'error', actions: ['handleWaveError'] },\n          'WAVE-READER-STOP': { target: 'component-cleaning', actions: ['cleanupComponents'] }\n        }\n      },\n      stopping: {\n        on: {\n          STOP_COMPLETE: { target: 'ready', actions: ['stopWaveAnimation'] },\n          STOP_FAILED: { target: 'error', actions: ['handleStopError'] }\n        }\n      },\n      toggling: {\n        on: {\n          TOGGLE_COMPLETE: { target: 'ready', actions: ['completeToggle'] }\n        }\n      },\n      'selection-mode': {\n        on: {\n          'SELECTION-MADE': { target: 'ready', actions: ['showSelectorUI', 'disableSelectionMode'] },\n          'END-SELECTION': { target: 'ready', actions: ['disableSelectionMode'] },\n          CANCEL: { target: 'ready', actions: ['cancelSelection', 'disableSelectionMode'] }\n        }\n      },\n      'processing-ml': {\n        on: {\n          'ML-PROCESSED': { target: 'ready', actions: ['updateMLRecommendation'] },\n          'ML-FAILED': { target: 'error', actions: ['handleMLError'] }\n        }\n      },\n      'component-initializing': {\n        on: {\n          'COMPONENTS-READY': { target: 'ready', actions: ['markComponentsReady'] },\n          'COMPONENTS-FAILED': { target: 'error', actions: ['handleComponentError'] }\n        }\n      },\n      'component-cleaning': {\n        on: {\n          'COMPONENTS-CLEANED': { target: 'ready', actions: ['markComponentsCleaned'] },\n          'COMPONENTS-CLEANUP-FAILED': { target: 'error', actions: ['handleCleanupError'] }\n        }\n      },\n      error: {\n        on: {\n          RESET: { target: 'idle', actions: ['resetToIdle'] },\n          RETRY: { target: 'ready', actions: ['retryOperation'] }\n        }\n      }\n    }\n  }\n};\n\n// Log states for view rendering\nconst logStates = {\n  idle: async (context: any) => {\n    await context.log('Content system in idle state - ready for initialization');\n    return context.view(renderIdleView(context));\n  },\n  \n  initializing: async (context: any) => {\n    await context.log('Content system initializing - setting up DOM and services');\n    return context.view(renderInitializingView(context));\n  },\n  \n  ready: async (context: any) => {\n    await context.log('Content system ready - wave reader available');\n    return context.view(renderReadyView(context));\n  },\n  \n  starting: async (context: any) => {\n    await context.log('Content system starting - preparing wave animation');\n    return context.view(renderStartingView(context));\n  },\n  \n  waving: async (context: any) => {\n    await context.log('Content system waving - animation active');\n    return context.view(renderWavingView(context));\n  },\n  \n  stopping: async (context: any) => {\n    await context.log('Content system stopping - cleaning up animation');\n    return context.view(renderStoppingView(context));\n  },\n  \n  toggling: async (context: any) => {\n    await context.log('Content system toggling - switching states');\n    return context.view(renderTogglingView(context));\n  },\n  \n  'selection-mode': async (context: any) => {\n    await context.log('Content system in selection mode - choose elements');\n    return context.view(renderSelectionModeView(context));\n  },\n  \n  'processing-ml': async (context: any) => {\n    await context.log('Content system processing ML recommendation');\n    return context.view(renderProcessingMLView(context));\n  },\n  \n  'component-initializing': async (context: any) => {\n    await context.log('Content system initializing components');\n    return context.view(renderComponentInitializingView(context));\n  },\n  \n  'component-cleaning': async (context: any) => {\n    await context.log('Content system cleaning up components');\n    return context.view(renderComponentCleaningView(context));\n  },\n  \n  error: async (context: any) => {\n    await context.log('Content system error - needs attention');\n    return context.view(renderErrorView(context));\n  }\n};\n\n// Create function for the Tome\nconst createTome = (initialModel: Partial<ContentSystemModel> = {}) => {\n  const defaultModel: ContentSystemModel = {\n    // System state\n    isActive: false,\n    currentState: 'idle',\n    going: false,\n    latestOptions: null,\n    \n    // DOM state\n    shadowDOM: {\n      isInitialized: false,\n      containerId: null,\n      shadowRoot: null\n    },\n    \n    // Wave animation state\n    waveAnimation: {\n      isActive: false,\n      options: null,\n      cssTemplate: null,\n      lastApplied: null\n    },\n    \n    // Selector UI state\n    selectorUI: {\n      isVisible: false,\n      currentSelector: null,\n      selectorMode: false\n    },\n    \n    // Services state\n    services: {\n      hierarchySelector: {\n        isInitialized: false,\n        currentSelector: null\n      },\n      mlService: {\n        isInitialized: false,\n        lastRecommendation: null\n      },\n      colorService: {\n        isInitialized: false\n      }\n    },\n    \n    // Message system\n    messageSystem: {\n      messageHistory: [],\n      lastMessage: null,\n      messageQueue: []\n    },\n    \n    // Session and metadata\n    sessionId: `content-system-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n    stateHistory: [],\n    error: null,\n    timestamp: Date.now()\n  };\n\n  return createViewStateMachine({\n    machineId: tomeConfig.machineId,\n    xstateConfig: {\n      ...tomeConfig.xstateConfig,\n      context: {\n        ...tomeConfig.xstateConfig.context,\n        model: { ...defaultModel, ...initialModel }\n      }\n    },\n    logStates\n  });\n};\n\n// Create the Tome with metadata using the spread operator\nexport const LogViewContentSystemTomes = createComponentTomeWithMetadata(\n  {\n    // Spread the metadata header\n    id: 'log-view-content-system-tome',\n    name: 'Log-View-Machine Content System Tome',\n    description: 'State management for content system with wave animations and DOM interactions',\n    version: '1.0.0',\n    dependencies: ['log-view-machine'],\n    \n    // Component-specific metadata\n    componentType: 'system',\n    author: 'Wave Reader Team',\n    createdAt: '2024-01-01',\n    lastModified: new Date().toISOString().split('T')[0],\n    tags: ['content-system', 'wave-animation', 'dom-management', 'state-management'],\n    priority: 'high',\n    stability: 'stable',\n    \n    // Performance metadata\n    performance: {\n      memoryUsage: 2.5,\n      initTime: 150,\n      supportsLazyLoading: true\n    },\n    \n    // Security metadata\n    security: {\n      requiresElevatedPermissions: false,\n      handlesSensitiveData: false,\n      level: 'low'\n    },\n    \n    // Testing metadata\n    testing: {\n      coverage: 85,\n      hasUnitTests: true,\n      hasIntegrationTests: true,\n      testSuite: 'src/test/content-scripts/'\n    },\n    \n    // Deployment metadata\n    deployment: {\n      enabledByDefault: true,\n      canBeDisabled: false,\n      supportsHotReload: true,\n      environments: ['development', 'staging', 'production']\n    },\n    \n         // Service-specific metadata\n     service: {\n       category: 'integration',\n       isStateful: true,\n       isPersistent: true,\n       lifecycle: 'singleton'\n     },\n    \n    // Custom metadata\n    custom: {\n      waveAnimationSupport: true,\n      shadowDOMSupport: true,\n      messageRouting: true,\n      mlIntegration: true\n    }\n  },\n  tomeConfig,\n  createTome\n);\n\n// View rendering functions\nfunction renderIdleView(context: any) {\n  const { model } = context;\n  return {\n    type: 'content',\n    component: 'ContentSystemStatus',\n    props: {\n      status: 'idle',\n      message: 'Content system idle - ready for initialization',\n      systems: {\n        content: model.isActive,\n        shadow: model.shadowDOM.isInitialized,\n        services: model.services\n      }\n    },\n    priority: 1,\n    timestamp: model.timestamp\n  };\n}\n\nfunction renderInitializingView(context: any) {\n  const { model } = context;\n  return {\n    type: 'content',\n    component: 'ContentSystemInitializing',\n    props: {\n      status: 'initializing',\n      message: 'Setting up DOM and services',\n      progress: {\n        shadowDOM: model.shadowDOM.isInitialized,\n        services: Object.values(model.services).some((s: any) => s.isInitialized)\n      }\n    },\n    priority: 2,\n    timestamp: model.timestamp\n  };\n}\n\nfunction renderReadyView(context: any) {\n  const { model } = context;\n  return {\n    type: 'content',\n    component: 'ContentSystemReady',\n    props: {\n      status: 'ready',\n      message: 'Wave reader ready for operation',\n      waveAnimation: model.waveAnimation,\n      selectorUI: model.selectorUI,\n      going: model.going\n    },\n    priority: 2,\n    timestamp: model.timestamp\n  };\n}\n\nfunction renderStartingView(context: any) {\n  const { model } = context;\n  return {\n    type: 'content',\n    component: 'ContentSystemStarting',\n    props: {\n      status: 'starting',\n      message: 'Preparing wave animation',\n      options: model.latestOptions\n    },\n    priority: 3,\n    timestamp: model.timestamp\n  };\n}\n\nfunction renderWavingView(context: any) {\n  const { model } = context;\n  return {\n    type: 'content',\n    component: 'ContentSystemWaving',\n    props: {\n      status: 'waving',\n      message: 'Wave animation active',\n      waveAnimation: model.waveAnimation,\n      options: model.latestOptions\n    },\n    priority: 4,\n    timestamp: model.timestamp\n  };\n}\n\nfunction renderStoppingView(context: any) {\n  const { model } = context;\n  return {\n    type: 'content',\n    component: 'ContentSystemStopping',\n    props: {\n      status: 'stopping',\n      message: 'Cleaning up wave animation'\n    },\n    priority: 3,\n    timestamp: model.timestamp\n  };\n}\n\nfunction renderTogglingView(context: any) {\n  const { model } = context;\n  return {\n    type: 'content',\n    component: 'ContentSystemToggling',\n    props: {\n      status: 'toggling',\n      message: 'Switching system states'\n    },\n    priority: 2,\n    timestamp: model.timestamp\n  };\n}\n\nfunction renderSelectionModeView(context: any) {\n  const { model } = context;\n  return {\n    type: 'overlay',\n    component: 'ContentSystemSelectionMode',\n    props: {\n      status: 'selection-mode',\n      message: 'Choose elements to read',\n      selectorUI: model.selectorUI\n    },\n    priority: 5,\n    timestamp: model.timestamp\n  };\n}\n\nfunction renderProcessingMLView(context: any) {\n  const { model } = context;\n  return {\n    type: 'content',\n    component: 'ContentSystemProcessingML',\n    props: {\n      status: 'processing-ml',\n      message: 'Processing ML recommendation',\n      mlService: model.services.mlService\n    },\n    priority: 3,\n    timestamp: model.timestamp\n  };\n}\n\nfunction renderComponentInitializingView(context: any) {\n  const { model } = context;\n  return {\n    type: 'content',\n    component: 'ContentSystemComponentInitializing',\n    props: {\n      status: 'component-initializing',\n      message: 'Initializing wave reader components',\n      services: model.services\n    },\n    priority: 3,\n    timestamp: model.timestamp\n  };\n}\n\nfunction renderComponentCleaningView(context: any) {\n  const { model } = context;\n  return {\n    type: 'content',\n    component: 'ContentSystemComponentCleaning',\n    props: {\n      status: 'component-cleaning',\n      message: 'Cleaning up wave reader components'\n    },\n    priority: 3,\n    timestamp: model.timestamp\n  };\n}\n\nfunction renderErrorView(context: any) {\n  const { model } = context;\n  return {\n    type: 'notification',\n    component: 'ContentSystemError',\n    props: {\n      status: 'error',\n      message: 'Content system error - check logs',\n      error: model.error || 'Unknown error'\n    },\n    priority: 6,\n    timestamp: model.timestamp\n  };\n}\n\n// Export for testing\nexport default LogViewContentSystemTomes;\n","import { createViewStateMachine } from 'log-view-machine';\nimport { createComponentTomeWithMetadata, ComponentTomeMetadata } from '../types/tome-metadata';\n\n// Shadow System Model Interface\nexport interface ShadowSystemModel {\n  shadowRoot: ShadowRoot | null;\n  shadowStyleElement: HTMLStyleElement | null;\n  selectorUiRoot: HTMLDivElement | null;\n  going: boolean;\n  latestOptions: any;\n  mouseX: number;\n  mouseY: number;\n  mouseFollowInterval: any;\n  lastCss: string;\n  lastMouseX: number;\n  lastMouseY: number;\n  lastMouseTime: number;\n  currentAnimationDuration: number | null;\n  sessionId: string;\n  messageHistory: any[];\n}\n\n// Shadow System States\nconst shadowStates = {\n  base: {\n    on: {\n      start: 'waving',\n      stop: 'stopped',\n      toggle: 'toggling',\n      'mouse-move': 'tracking',\n      'selection-mode': 'selecting'\n    }\n  },\n  waving: {\n    on: {\n      stop: 'stopped',\n      'mouse-move': 'tracking',\n      'selection-mode': 'selecting'\n    }\n  },\n  stopped: {\n    on: {\n      start: 'waving',\n      toggle: 'toggling',\n      'selection-mode': 'selecting'\n    }\n  },\n  tracking: {\n    on: {\n      'mouse-stop': 'waving',\n      stop: 'stopped',\n      'selection-mode': 'selecting'\n    }\n  },\n  selecting: {\n    on: {\n      'selection-made': 'waving',\n      cancel: 'waving'\n    }\n  },\n  toggling: {\n    on: {\n      'toggle-complete': 'waving'\n    }\n  }\n};\n\n// Shadow System Tome Configuration\nconst tomeConfig = {\n  machineId: 'shadow-system-tome',\n  xstateConfig: {\n    id: 'shadow-system-tome',\n    initial: 'base',\n    states: shadowStates,\n    context: {\n      shadowRoot: null,\n      shadowStyleElement: null,\n      selectorUiRoot: null,\n      going: false,\n      latestOptions: null,\n      mouseX: 0,\n      mouseY: 0,\n      mouseFollowInterval: null,\n      lastCss: '',\n      lastMouseX: 0,\n      lastMouseY: 0,\n      lastMouseTime: Date.now(),\n      currentAnimationDuration: null,\n      sessionId: '',\n      messageHistory: []\n    }\n  }\n};\n\n// Shadow System Tome Creation Function\nconst createShadowSystemTome = (initialModel: Partial<ShadowSystemModel> = {}) => {\n  const model: ShadowSystemModel = {\n    shadowRoot: null,\n    shadowStyleElement: null,\n    selectorUiRoot: null,\n    going: false,\n    latestOptions: null,\n    mouseX: 0,\n    mouseY: 0,\n    mouseFollowInterval: null,\n    lastCss: '',\n    lastMouseX: 0,\n    lastMouseY: 0,\n    lastMouseTime: Date.now(),\n    currentAnimationDuration: null,\n    sessionId: `shadow-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n    messageHistory: [],\n    ...initialModel\n  };\n\n  return createViewStateMachine(tomeConfig);\n};\n\n// Shadow System Tome with Metadata\nexport const LogViewShadowSystemTomes = createComponentTomeWithMetadata(\n  {\n    id: 'log-view-shadow-system-tome',\n    name: 'Log-View-Machine Shadow System Tome',\n    description: 'State management for shadow DOM system with mouse tracking and wave animations',\n    version: '1.0.0',\n    dependencies: ['log-view-machine'],\n    componentType: 'system',\n    author: 'Wave Reader Team',\n    createdAt: '2024-01-01',\n    lastModified: new Date().toISOString().split('T')[0],\n    tags: ['shadow-dom', 'mouse-tracking', 'wave-animation', 'state-management'],\n    priority: 'high',\n    stability: 'stable',\n    performance: {\n      memoryUsage: 1024,\n      initTime: 100,\n      supportsLazyLoading: true\n    },\n    security: {\n      requiresElevatedPermissions: false,\n      handlesSensitiveData: false,\n      level: 'low'\n    },\n    testing: {\n      coverage: 90,\n      hasUnitTests: true,\n      hasIntegrationTests: true,\n      testSuite: 'jest'\n    },\n    deployment: {\n      enabledByDefault: true,\n      canBeDisabled: true,\n      supportsHotReload: true,\n      environments: ['development', 'production']\n    },\n    service: {\n      category: 'integration',\n      isStateful: true,\n      isPersistent: true,\n      lifecycle: 'singleton'\n    },\n    custom: {\n      shadowDomEnabled: true,\n      mouseTrackingEnabled: true,\n      waveAnimationEnabled: true,\n      selectorHierarchyEnabled: true\n    }\n  },\n  tomeConfig,\n  createShadowSystemTome\n);\n\nexport default LogViewShadowSystemTomes;\n","import Wave from \"./wave\";\n\n\nexport const enum WaveAnimationControl {\n    CSS,\n    MOUSE\n}\n\nexport const KeyChordDefaultFactory = () => [\"f\", \"Shift\"]\nexport const WaveAnimationControlDefault: WaveAnimationControl = WaveAnimationControl.CSS;\nexport const ShowNotificationsDefault = true\nexport const GoingDefault = false\nexport const WaveDefaultFactory = () => Wave.getDefaultWave()\nexport const SelectorDefault: string = \"*\" /* \"p,h2,h3,h4,h5,h6,h7,h8,article,section,aside,figcaption,pre,div\" */\nexport const SelectorsDefaultFactory = () => [SelectorDefault]\nexport const WindowDocumentWidth = 600","import AttributeConstructor from \"../util/attribute-constructor\";\n// Removed state dependency - using simplified approach\n\nexport interface MessageInterface {\n    getName(): string;\n    getFrom(): string;\n    getClientId(): string;\n}\n\nexport default abstract class Message<T> extends AttributeConstructor<T> implements MessageInterface {\n    name: string;\n    from: string;\n    clientId?: string;\n\n    protected constructor(name: string, from: string, attributes?: Partial<T>, requireAllAssigned: boolean = true, clientId = undefined) {\n        super(attributes, requireAllAssigned)\n\n        this.name = name;\n        this.from = from;\n        this.clientId = clientId;\n    }\n\n    /**\n     * Returns clientId\n     */\n    getFrom(): string {\n        return this.from\n    }\n\n    getName(): string {\n        return this.name;\n    }\n\n    getClientId(): string {\n        if (!this.clientId) console.log(\"clientId is missing from message: \" + this.name + \", from, \" + this.from)\n        return this.clientId || \"no-id\";\n    }\n}\n","import Message from \"../message\";\nimport Options from \"../options\";\n\n// Simplified message system for the new Tome-based architecture\n\nexport class StartMessage extends Message<StartMessage> {\n    options?: Options;\n\n    constructor(attributes: Partial<StartMessage> = {\n        options: new Options()\n    }) {\n        super('start', 'popup', attributes);\n    }\n}\n\nexport class StopMessage extends Message<StopMessage> {\n    constructor(attributes: Partial<StopMessage> = {}) {\n        super('stop', 'popup', attributes);\n    }\n}\n\nexport class ToggleMessage extends Message<ToggleMessage> {\n    constructor(attributes: Partial<ToggleMessage> = {}) {\n        super('toggle', 'popup', attributes);\n    }\n}\n\nexport class PingMessage extends Message<PingMessage> {\n    constructor(attributes: Partial<PingMessage> = {}) {\n        super('ping', 'system', attributes);\n    }\n}\n\nexport class PongMessage extends Message<PongMessage> {\n    constructor(attributes: Partial<PongMessage> = {}) {\n        super('pong', 'system', attributes);\n    }\n}\n\nexport class InitializeMessage extends Message<InitializeMessage> {\n    sessionId?: string;\n    \n    constructor(attributes: Partial<InitializeMessage> = {}) {\n        super('initialize', 'popup', attributes);\n    }\n}\n\nexport class SelectionMadeMessage extends Message<SelectionMadeMessage> {\n    selector?: string;\n    \n    constructor(attributes: Partial<SelectionMadeMessage> = {}) {\n        super('selection-made', 'content', attributes);\n    }\n}\n\nexport class MLRecommendationMessage extends Message<MLRecommendationMessage> {\n    recommendation?: any;\n    \n    constructor(attributes: Partial<MLRecommendationMessage> = {}) {\n        super('ml-recommendation', 'system', attributes);\n    }\n}\n\n// Message factory for creating messages\nexport class MessageFactory {\n    static createMessage(name: string, from: string, data: any = {}) {\n        switch (name) {\n            case 'start':\n                return new StartMessage(data);\n            case 'stop':\n                return new StopMessage(data);\n            case 'toggle':\n                return new ToggleMessage(data);\n            case 'ping':\n                return new PingMessage(data);\n            case 'pong':\n                return new PongMessage(data);\n            case 'initialize':\n                return new InitializeMessage(data);\n            case 'selection-made':\n                return new SelectionMadeMessage(data);\n            case 'ml-recommendation':\n                return new MLRecommendationMessage(data);\n            default:\n                // Create a generic message for unknown types\n                const genericMessage = new (class extends Message<any> {\n                    constructor(name: string, from: string, data: any) {\n                        super(name, from, data);\n                    }\n                })(name, from, data);\n                return genericMessage;\n        }\n    }\n}\n\n// Simple message utility for routing\nexport class MessageUtility {\n    static routeMessage(from: string, to: string, message: any, sessionId: string) {\n        return {\n            from,\n            to,\n            message,\n            sessionId,\n            timestamp: Date.now()\n        };\n    }\n}\n","import AttributeConstructor from \"../util/attribute-constructor\";\nimport Wave from \"./wave\";\nimport { KeyChord } from \"../components/util/user-input\";\nimport {\n    WaveAnimationControlDefault,\n    ShowNotificationsDefault,\n    GoingDefault,\n    WaveAnimationControl,\n    WaveDefaultFactory,\n    KeyChordDefaultFactory,\n    SelectorsDefaultFactory\n} from \"./defaults\"\n// Removed state dependency - using simplified approach\n\nexport class WaveToggleConfig extends AttributeConstructor<WaveToggleConfig> {\n    // a 1-4ish length array of keys\n    keyChord: KeyChord = KeyChordDefaultFactory()\n\n    public constructor(attributes: Partial<WaveToggleConfig> = {}) {\n        super(attributes);\n        this.keyChord = attributes.keyChord || this.keyChord\n    }\n\n    static getDefaultConfig(): WaveToggleConfig {\n        return new WaveToggleConfig()\n    }\n}\n\nexport const DeepEquals = (a: unknown, b: unknown): boolean => {\n    if (typeof a !== 'object' && a === b) {\n        return true;\n    }\n\n    const aString = JSON.stringify(a);\n    const bString = JSON.stringify(b);\n\n    const aObj = JSON.parse(aString);\n    const bObj = JSON.parse(bString);\n\n    if (typeof a !== typeof b) {\n        console.log(\"array mismatch for property: aString: \" + aString + \", bString: \" + bString);\n        \n        return false;\n    }\n\n    if ((typeof a === \"boolean\" || typeof a === \"number\" || typeof a === \"string\") && a !== b) {\n        console.log(\"array mismatch for property: aString: \" + aString + \", bString: \" + bString);\n        return false;\n    }\n\n    if (Array.isArray(aObj) && ((Array.isArray(aObj) != Array.isArray(bObj))\n        || Object.keys(aObj).find(prop => !(prop in bObj)) ||\n           Object.keys(bObj).find(prop => !(prop in aObj)))) {\n        console.log(\"array mismatch for property: aString: \" + aString + \", bString: \" + bString);\n        return false;\n    }\n\n    for (const prop in aObj) {\n        if (Array.isArray(aObj[prop]) || Array.isArray(bObj[prop])) {\n            if (aObj[prop].find((ap: any, i: number) => Array.isArray(bObj[prop]) && !Object.is(ap, bObj[prop][i]))) {\n                console.log(\" array mismatch for property: \" + prop);\n                return false;\n            }\n        } else {\n            if (!DeepEquals(aObj[prop], bObj[prop])) {\n                console.log(\" array mismatch for property: \" + prop);\n                return false;\n            }\n        }\n    }\n\n    return true;\n}\n\n// Domain/path-specific settings interface\nexport interface DomainPathSettings {\n    domain: string;\n    path: string;\n    settings: Partial<Options>;\n    lastUpdated: number;\n    usageCount: number;\n    userRating: number;\n}\n\nexport default class Options extends AttributeConstructor<Options> {\n    defaultSettings: boolean = false;\n    // Removed state dependency - using simplified approach\n    state: any = undefined;\n    showNotifications: boolean = ShowNotificationsDefault;\n    going: boolean = GoingDefault;\n    waveAnimationControl: WaveAnimationControl = WaveAnimationControlDefault;\n    wave: Wave = WaveDefaultFactory();\n    toggleKeys: WaveToggleConfig = WaveToggleConfig.getDefaultConfig();\n    selectors: string[] = SelectorsDefaultFactory();\n    domainPathSettings: Map<string, DomainPathSettings> = new Map();\n\n    constructor(props: Partial<Options> = {}) {\n        super(undefined);\n        // typescript auto-fills defaults here, if this is the desired behavior\n        super.assign(props);\n        // rehydrate the wave property as it surprisingly loses type after deserialization\n        this.wave = new Wave(this.wave);\n    }\n\n    public static getDefaultOptions(): Options {\n        return new Options();\n    }\n\n    public static OptionsEqual(a: Options, b: Options) {\n        return DeepEquals(a, b);\n    }\n\n    /**\n     * Get or create domain/path-specific settings\n     */\n    public getDomainPathSettings(domain: string, path: string): Partial<Options> {\n        const key = this.generateDomainPathKey(domain, path);\n        const existing = this.domainPathSettings.get(key);\n        \n        if (existing) {\n            // Increment usage count\n            existing.usageCount++;\n            existing.lastUpdated = Date.now();\n            return existing.settings;\n        }\n        \n        // Return default settings if none exist\n        return {};\n    }\n\n    /**\n     * Set domain/path-specific settings\n     */\n    public setDomainPathSettings(domain: string, path: string, settings: Partial<Options>): void {\n        const key = this.generateDomainPathKey(domain, path);\n        const existing = this.domainPathSettings.get(key);\n        \n        if (existing) {\n            // Update existing settings\n            existing.settings = { ...existing.settings, ...settings };\n            existing.lastUpdated = Date.now();\n            existing.usageCount++;\n        } else {\n            // Create new domain/path settings\n            this.domainPathSettings.set(key, {\n                domain,\n                path,\n                settings: { ...settings },\n                lastUpdated: Date.now(),\n                usageCount: 1,\n                userRating: 5 // Default high rating for new settings\n            });\n        }\n    }\n\n    /**\n     * Generate a unique key for domain/path combination\n     */\n    private generateDomainPathKey(domain: string, path: string): string {\n        return `${domain}${path}`;\n    }\n\n    /**\n     * Get all domain/path settings\n     */\n    public getAllDomainPathSettings(): DomainPathSettings[] {\n        return Array.from(this.domainPathSettings.values());\n    }\n\n    /**\n     * Remove domain/path settings\n     */\n    public removeDomainPathSettings(domain: string, path: string): boolean {\n        const key = this.generateDomainPathKey(domain, path);\n        return this.domainPathSettings.delete(key);\n    }\n\n    /**\n     * Update user rating for domain/path settings\n     */\n    public updateDomainPathRating(domain: string, path: string, rating: number): void {\n        const key = this.generateDomainPathKey(domain, path);\n        const existing = this.domainPathSettings.get(key);\n        \n        if (existing) {\n            existing.userRating = Math.max(1, Math.min(5, rating)); // Clamp between 1-5\n            existing.lastUpdated = Date.now();\n        }\n    }\n}\n","import AttributeConstructor from \"../util/attribute-constructor\";\n\nexport default class Text extends AttributeConstructor<Text> {\n    size?: string;\n    color?: string;\n\n    constructor(attributes: Partial<Text> = {\n        size: 'initial',\n        color: 'initial'\n    }) {\n        super(attributes);\n        this.assign(attributes);\n    }\n}","\nimport Text from '../models/text';\nimport AttributeConstructor from \"../util/attribute-constructor\";\nimport {SelectorDefault} from \"./defaults\";\n\nexport const defaultCssTemplate = (options: Wave, cssGenerationMode: 'template' | 'hardcoded' = 'hardcoded') => {\n  const mode = cssGenerationMode || 'hardcoded';\n  \n  if (mode === 'template') {\n    // Template mode: Use TEMPLATE variables that get replaced at runtime\n    return `\n@-webkit-keyframes wobble {\n  0% { transform: translateX(0%); rotateY(0deg); }\n  25% { transform: translateX(TRANSLATE_X_MIN%) rotateY(ROTATE_Y_MINdeg); }\n  50% { transform: translateX(0%); rotateY(ROTATE_Y_MAXdeg); }\n  75% { transform: translateX(TRANSLATE_X_MAX%) rotateY(ROTATE_Y_MINdeg); }\n  100% { transform: translateX(0%); rotateY(0deg); }\n}\n\n${options.selector || '.wave-reader__text'} {\n  font-size: ${options.text?.size || 'inherit'};\n  -webkit-animation-name: wobble;\n  animation-name: wobble;\n  -webkit-animation-duration: ${options.waveSpeed}s;\n  animation-duration: ${options.waveSpeed}s;\n  -webkit-animation-fill-mode: both;\n  animation-fill-mode: both;\n  animation-iteration-count: infinite;\n}\n`;\n  } else {\n    // Hardcoded mode: Use actual values (current behavior)\n    return `\n@-webkit-keyframes wobble {\n  0% { transform: translateX(0%); rotateY(0deg); }\n  25% { transform: translateX(${options.axisTranslateAmountXMin}%); rotateY(${options.axisRotationAmountYMin}deg); }\n  50% { transform: translateX(0%); rotateY(${options.axisRotationAmountYMax}deg); }\n  75% { transform: translateX(${options.axisTranslateAmountXMax}%); rotateY(${options.axisRotationAmountYMin}deg); }\n  100% { transform: translateX(0%); rotateY(0deg); }\n}\n\n${options.selector || '.wave-reader__text'} {\n  font-size: ${options.text?.size || 'inherit'};\n  -webkit-animation-name: wobble;\n  animation-name: wobble;\n  -webkit-animation-duration: ${options.waveSpeed}s;\n  animation-duration: ${options.waveSpeed}s;\n  -webkit-animation-fill-mode: both;\n  animation-fill-mode: both;\n  animation-iteration-count: infinite;\n}\n`;\n  }\n};\n\n// Direct positioning template - no keyframes, just direct transforms\nexport const defaultCssMouseTemplate = (options: Wave, cssGenerationMode: 'template' | 'hardcoded' = 'template') => {\n  const mode = cssGenerationMode || 'template';\n  \n  if (mode === 'template') {\n    // Template mode: Use TEMPLATE variables (current behavior)\n    return `\n${options.selector || '.wave-reader__text'} {\n  font-size: ${options.text?.size || 'inherit'};\n  transform: translateX(TRANSLATE_X%) rotateY(ROTATE_Ydeg);\n  transition: transform ANIMATION_DURATIONs ease-out;\n}\n`;\n  } else {\n    // Hardcoded mode: Use actual values (for consistency with CSS template)\n    // Note: For mouse template, hardcoded mode is less useful since values change dynamically,\n    // but we provide it for consistency\n    return `\n${options.selector || '.wave-reader__text'} {\n  font-size: ${options.text?.size || 'inherit'};\n  transform: translateX(0%) rotateY(0deg);\n  transition: transform ${options.waveSpeed || 2}s ease-out;\n}\n`;\n  }\n};\n\nconst TRANSLATE_X = \"TRANSLATE_X\";\nconst ROTATE_Y = \"ROTATE_Y\";\nconst ANIMATION_DURATION = \"ANIMATION_DURATION\";\nconst TRANSLATE_X_MIN = \"TRANSLATE_X_MIN\";\nconst TRANSLATE_X_MAX = \"TRANSLATE_X_MAX\";\nconst ROTATE_Y_MIN = \"ROTATE_Y_MIN\";\nconst ROTATE_Y_MAX = \"ROTATE_Y_MAX\";\n\nexport const replaceAnimationVariables = (wave: Wave, translateX: string, rotateY: string): string => {\n    return (wave.cssMouseTemplate || \"\")\n        .replaceAll(TRANSLATE_X, translateX)\n        .replaceAll(ROTATE_Y, rotateY);\n}\n\nexport const replaceAnimationVariablesWithDuration = (wave: Wave, translateX: string, rotateY: string, duration: number): string => {\n    let css = wave.cssMouseTemplate || \"\";\n    css = css.replaceAll(TRANSLATE_X, translateX);\n    css = css.replaceAll(ROTATE_Y, rotateY);\n    css = css.replaceAll(ANIMATION_DURATION, duration.toString());\n    return css;\n}\n\nconst enum WaveShape {\n    AUTO, // based on the wave shape options, choose best fit\n    F_SHAPED, // left to right (per orientation, like an ocean wave\n    LAYER_CAKE, // a swirl, broadly based on headers\n    F_SHAPED_STOP // the f-shaped wave, but stops horizontally at each horizontal page break, animating,\n    // offset each stop by a small degree, slightly more exagerated maybe but could really help those that spend a lot of\n    // their time scanning losely collected pages like personal shoppers, or people addicted to pinterest etc\n\n    // todo: perhaps a WaveRecommendationService, as we could pass in the result from the user selector choice,\n    //  then suggest a preset or a custom\n    // todo: research whether or not, layer cake or f-shaped scanning is:\n    //  - user preference (nurture)\n    //  - innate brain stuff (nature)\n    //  - a combination (both)\n    //  hypothesis: combination, based on the alignment of the page - more grid like, layer cake, more article like, f-shaped\n    //   https://www.nngroup.com/articles/layer-cake-pattern-scanning/\n    //  theory: the more evenly spaced the page, the more we should apply swirl animation to each stop\n    //       similar to the needleman-wunsch algorithm, we want to calculate a spread from expected average position\n    //  theory: (of my own behavior), spread(set, h, w, n, count) = <set[n].x - n * w/count, set[n].y - n * h/count>\n    //       if the avg sum of widths for horizontal and vertical is less than 1 standard deviation for each axis\n    //          then we have relatively evenly spread grid, and should use layer cake pattern for this selection\n    //       if the avg width sum of widths for horizontal and vertical is greater than 1 standard deviation for each axis\n    //          then we have an oblong shaped article, and should use an F-shaped pattern\n    //       todo: research:\n    //          if we choose layer-cake, we should check to see if each horizontal stop resembles an F-shaped, or layer cake pattern\n    //             then if we're still layer-caked, we stay with swirl, if not, we use hybrid or combination\n}\n\nexport default class Wave extends AttributeConstructor<Wave>{\n    text: Text = new Text();\n    selector?: string;\n    cssTemplate?: string;\n    cssMouseTemplate?: string;\n    waveSpeed?: number;\n    shape: WaveShape = WaveShape.F_SHAPED\n    axisTranslateAmountXMax?: number;\n    axisTranslateAmountXMin?: number;\n    axisRotationAmountYMax?: number;\n    axisRotationAmountYMin?: number;\n    mouseFollowInterval?: number;\n    cssGenerationMode?: 'template' | 'hardcoded';\n\n    constructor(attributes: Partial<Wave> = Wave.getDefaultWave()) {\n        super(attributes);\n        // Always generate CSS templates from current parameters (shader-like approach)\n        // Use the attributes directly to ensure we have the correct values\n        const waveWithAttributes = { ...this, ...attributes };\n        const cssGenerationMode = attributes.cssGenerationMode || 'hardcoded';\n        this.cssGenerationMode = cssGenerationMode;\n        this.cssTemplate = defaultCssTemplate(waveWithAttributes, cssGenerationMode);\n        this.cssMouseTemplate = defaultCssMouseTemplate(waveWithAttributes, cssGenerationMode);\n    }\n\n    // Always regenerate CSS templates from current parameters\n    public update(): Wave {\n        const cssGenerationMode = this.cssGenerationMode || 'hardcoded';\n        this.cssTemplate = defaultCssTemplate(this, cssGenerationMode);\n        this.cssMouseTemplate = defaultCssMouseTemplate(this, cssGenerationMode);\n        return this\n    }\n\n    public static getDefaultWave(): Wave {\n        return new Wave({\n            selector: SelectorDefault,\n            waveSpeed: 4,\n            shape: WaveShape.F_SHAPED,\n            axisTranslateAmountXMax: 0,\n            axisTranslateAmountXMin: -1,\n            axisRotationAmountYMin: -2,\n            axisRotationAmountYMax: 2,\n            mouseFollowInterval: 100,\n            text: new Text({\n                size: 'initial',\n                color: 'initial'\n            })\n        });\n    }\n}","/**\n * Content System DOM Service\n * \n * Manages DOM operations for the content system including:\n * - Shadow DOM creation and management\n * - Style element management\n * - DOM cleanup and disposal\n */\n\nexport interface DOMElementState {\n  shadowRoot: ShadowRoot | null;\n  shadowStyleElement: HTMLStyleElement | null;\n  mainDocumentStyleElement: HTMLStyleElement | null;\n  selectorUiRoot: HTMLDivElement | null;\n  containerId: string;\n}\n\nexport interface StyleTemplate {\n  shadowStyles: string;\n  mainStyles: string;\n  selectorUIStyles: string;\n}\n\nexport class ContentSystemDOMService {\n  private state: DOMElementState;\n  private isInitialized: boolean = false;\n\n  constructor() {\n    this.state = {\n      shadowRoot: null,\n      shadowStyleElement: null,\n      mainDocumentStyleElement: null,\n      selectorUiRoot: null,\n      containerId: `wave-reader-log-view-container-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`\n    };\n  }\n\n  /**\n   * Initialize the DOM service and create necessary elements\n   */\n  public initialize(): DOMElementState {\n    if (this.isInitialized) {\n      console.warn(\" ContentSystemDOMService: Already initialized\");\n      return this.state;\n    }\n\n    try {\n      // Create shadow DOM container\n      const container = this.createShadowContainer();\n      \n      // Create style elements\n      this.createStyleElements();\n      \n      // Create selector UI root\n      this.createSelectorUIRoot();\n      \n      this.isInitialized = true;\n      console.log(\" ContentSystemDOMService: Initialized successfully\");\n      \n      return this.state;\n    } catch (error) {\n      console.error(\" ContentSystemDOMService: Initialization failed:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Create the shadow DOM container\n   */\n  private createShadowContainer(): HTMLDivElement {\n    const container = document.createElement('div');\n    container.id = this.state.containerId;\n    container.style.cssText = `\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 0;\n      height: 0;\n      pointer-events: none;\n      z-index: 2147483647;\n    `;\n    \n    document.body.appendChild(container);\n    this.state.shadowRoot = container.attachShadow({ mode: 'open' });\n\n    if (!this.state.shadowRoot) {\n      throw new Error(\"Failed to create shadow root\");\n    }\n\n    return container;\n  }\n\n  /**\n   * Create style elements for shadow and main document\n   */\n  private createStyleElements(): void {\n    // Shadow DOM styles\n    this.state.shadowStyleElement = document.createElement('style');\n    this.state.shadowStyleElement.textContent = this.getDefaultShadowStyles();\n    this.state.shadowRoot!.appendChild(this.state.shadowStyleElement);\n\n    // Main document styles\n    this.state.mainDocumentStyleElement = document.createElement('style');\n    this.state.mainDocumentStyleElement.id = `wave-reader-log-view-styles-${this.state.containerId}`;\n    this.state.mainDocumentStyleElement.textContent = this.getDefaultMainStyles();\n    document.head.appendChild(this.state.mainDocumentStyleElement);\n  }\n\n  /**\n   * Create selector UI root element\n   */\n  private createSelectorUIRoot(): void {\n    this.state.selectorUiRoot = document.createElement('div');\n    this.state.selectorUiRoot.id = `wave-reader-selector-ui-${this.state.containerId}`;\n    this.state.selectorUiRoot.style.cssText = `\n      position: fixed;\n      top: 20px;\n      right: 20px;\n      background: rgba(0, 0, 0, 0.8);\n      color: white;\n      padding: 10px;\n      border-radius: 5px;\n      font-size: 12px;\n      z-index: 2147483646;\n      display: none;\n    `;\n    \n    document.body.appendChild(this.state.selectorUiRoot);\n  }\n\n  /**\n   * Get default shadow DOM styles\n   */\n  private getDefaultShadowStyles(): string {\n    return `\n      .wave-reader__text {\n        font-size: initial;\n        font-family: inherit;\n        line-height: inherit;\n        color: inherit;\n        background: inherit;\n        border: inherit;\n        padding: inherit;\n        margin: inherit;\n        text-decoration: inherit;\n        font-weight: inherit;\n        font-style: inherit;\n        text-transform: inherit;\n        letter-spacing: inherit;\n        word-spacing: inherit;\n        white-space: inherit;\n        vertical-align: inherit;\n        text-align: inherit;\n        text-indent: inherit;\n        text-shadow: inherit;\n        box-shadow: inherit;\n        transform: inherit;\n        transition: inherit;\n        animation: inherit;\n        filter: inherit;\n        backdrop-filter: inherit;\n        perspective: inherit;\n        perspective-origin: inherit;\n        transform-style: inherit;\n        backface-visibility: inherit;\n        transform-origin: inherit;\n        transition-property: inherit;\n        transition-duration: inherit;\n        transition-timing-function: inherit;\n        transition-delay: inherit;\n        animation-name: inherit;\n        animation-duration: inherit;\n        animation-timing-function: inherit;\n        animation-delay: inherit;\n        animation-iteration-count: inherit;\n        animation-direction: inherit;\n        animation-fill-mode: inherit;\n        animation-play-state: inherit;\n      }\n    `;\n  }\n\n  /**\n   * Get default main document styles\n   */\n  private getDefaultMainStyles(): string {\n    return `\n      /* Wave reader main document styles */\n      .wave-reader__text {\n        /* Animation will be injected here */\n      }\n    `;\n  }\n\n  /**\n   * Apply wave animation styles to main document\n   */\n  public applyWaveAnimation(cssTemplate: string): void {\n    console.log(\" ContentSystemDOMService: applyWaveAnimation called with CSS template\", {\n      hasCssTemplate: !!cssTemplate,\n      cssLength: cssTemplate ? cssTemplate.length : 0,\n      cssPreview: cssTemplate ? cssTemplate.substring(0, 200) + '...' : 'NO_CSS',\n      hasMainDocumentStyleElement: !!this.state.mainDocumentStyleElement,\n      stateKeys: Object.keys(this.state)\n    });\n    \n    if (!this.state.mainDocumentStyleElement) {\n      console.warn(\" ContentSystemDOMService: Main document style element not available\");\n      return;\n    }\n\n    try {\n      console.log(\" ContentSystemDOMService: Setting style element textContent...\");\n      this.state.mainDocumentStyleElement.textContent = cssTemplate;\n      console.log(\" ContentSystemDOMService: Wave animation styles applied successfully\");\n      console.log(\" ContentSystemDOMService: Style element now contains:\", {\n        textContentLength: this.state.mainDocumentStyleElement.textContent?.length || 0,\n        textContentPreview: this.state.mainDocumentStyleElement.textContent?.substring(0, 200) + '...' || 'EMPTY'\n      });\n    } catch (error) {\n      console.error(\" ContentSystemDOMService: Failed to apply wave animation:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Remove wave animation styles\n   */\n  public removeWaveAnimation(): void {\n    if (this.state.mainDocumentStyleElement) {\n      this.state.mainDocumentStyleElement.textContent = this.getDefaultMainStyles();\n      console.log(\" ContentSystemDOMService: Wave animation styles removed\");\n    }\n  }\n\n  /**\n   * Apply styles to shadow DOM\n   */\n  public applyShadowStyles(styles: string): void {\n    if (!this.state.shadowStyleElement) {\n      console.warn(\" ContentSystemDOMService: Shadow style element not available\");\n      return;\n    }\n\n    try {\n      this.state.shadowStyleElement.textContent = this.getDefaultShadowStyles() + styles;\n      console.log(\" ContentSystemDOMService: Shadow styles applied\");\n    } catch (error) {\n      console.error(\" ContentSystemDOMService: Failed to apply shadow styles:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Show selector UI with message\n   */\n  public showSelectorUI(message: string): void {\n    if (!this.state.selectorUiRoot) {\n      console.warn(\" ContentSystemDOMService: Selector UI root not available\");\n      return;\n    }\n\n    try {\n      this.state.selectorUiRoot.innerHTML = `<div>${message}</div>`;\n      this.state.selectorUiRoot.style.display = 'block';\n      console.log(\" ContentSystemDOMService: Selector UI shown\");\n    } catch (error) {\n      console.error(\" ContentSystemDOMService: Failed to show selector UI:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Hide selector UI\n   */\n  public hideSelectorUI(): void {\n    if (this.state.selectorUiRoot) {\n      this.state.selectorUiRoot.style.display = 'none';\n      console.log(\" ContentSystemDOMService: Selector UI hidden\");\n    }\n  }\n\n  /**\n   * Get current DOM state\n   */\n  public getState(): DOMElementState {\n    return { ...this.state };\n  }\n\n  /**\n   * Check if service is initialized\n   */\n  public getInitialized(): boolean {\n    return this.isInitialized;\n  }\n\n  /**\n   * Clean up DOM elements\n   */\n  public cleanup(): void {\n    try {\n      // Remove selector UI\n      if (this.state.selectorUiRoot) {\n        this.state.selectorUiRoot.remove();\n        this.state.selectorUiRoot = null;\n      }\n\n      // Remove main document styles\n      if (this.state.mainDocumentStyleElement) {\n        this.state.mainDocumentStyleElement.remove();\n        this.state.mainDocumentStyleElement = null;\n      }\n\n      // Remove shadow container (this removes shadow root and styles)\n      if (this.state.shadowRoot?.host) {\n        this.state.shadowRoot.host.remove();\n        this.state.shadowRoot = null;\n      }\n\n      this.isInitialized = false;\n      console.log(\" ContentSystemDOMService: Cleanup completed\");\n    } catch (error) {\n      console.error(\" ContentSystemDOMService: Cleanup failed:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Reset service to initial state\n   */\n  public reset(): void {\n    this.cleanup();\n    this.state = {\n      shadowRoot: null,\n      shadowStyleElement: null,\n      mainDocumentStyleElement: null,\n      selectorUiRoot: null,\n      containerId: `wave-reader-log-view-container-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`\n    };\n  }\n}\n\nexport default ContentSystemDOMService;\n","/**\n * Content System Message Service\n * \n * Manages message handling for the content system including:\n * - Message routing between popup, background, and content scripts\n * - Message validation and transformation\n * - Message history and logging\n */\n\nimport { MessageUtility } from '../models/messages/simplified-messages';\nimport { MessageFactory } from '../models/messages/simplified-messages';\n\nexport interface MessageData {\n  name: string;\n  from: string;\n  source?: string;\n  target?: string;\n  payload?: any;\n  timestamp: number;\n  sessionId?: string;\n}\n\nexport interface MessageRoute {\n  source: string;\n  target: string;\n  message: any;\n  sessionId: string;\n}\n\nexport interface MessageHandler {\n  name: string;\n  handler: (message: any, route: any) => Promise<void> | void;\n  priority: number;\n}\n\nexport interface MessageHistoryEntry {\n  timestamp: number;\n  type: string;\n  message: string;\n  data?: any;\n  sessionId: string;\n  url: string;\n  state?: string;\n}\n\nexport class ContentSystemMessageService {\n  private messageHistory: MessageHistoryEntry[] = [];\n  private messageHandlers: Map<string, MessageHandler> = new Map();\n  private sessionId: string;\n  private isInitialized: boolean = false;\n\n  constructor(sessionId: string) {\n    this.sessionId = sessionId;\n  }\n\n  /**\n   * Initialize the message service\n   */\n  public initialize(): void {\n    if (this.isInitialized) {\n      console.warn(\" ContentSystemMessageService: Already initialized\");\n      return;\n    }\n\n    try {\n      this.setupMessageListeners();\n      this.isInitialized = true;\n      console.log(\" ContentSystemMessageService: Initialized successfully\");\n    } catch (error) {\n      console.error(\" ContentSystemMessageService: Initialization failed:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Set up message listeners for extension and popup messages\n   */\n  private setupMessageListeners(): void {\n    // Listen for messages from the extension\n    window.addEventListener('message', (event) => {\n      if (event.source !== window) return;\n      if (event.data?.source !== 'wave-reader-extension') return;\n\n      const messageData = event.data.message;\n      this.handleExtensionMessage(messageData);\n    });\n\n    // Listen for messages from the popup\n    if (typeof chrome !== 'undefined' && chrome.runtime) {\n      chrome.runtime.onMessage.addListener((message, sender, sendResponse) => {\n        this.handlePopupMessage(message, sender, sendResponse);\n        return true; // Keep message channel open\n      });\n    }\n  }\n\n  /**\n   * Handle extension messages\n   */\n  private handleExtensionMessage(messageData: any): void {\n    console.log(\" ContentSystemMessageService: Received extension message:\", messageData);\n    \n    try {\n      // Create a proper message using our factory\n      const message = MessageFactory.createMessage(messageData.name, messageData.from, messageData);\n      \n      // Log the message\n      this.logMessage('extension-message', `Received ${messageData.name} from ${messageData.from}`);\n      \n      // Route the message through our message system\n      const route = MessageUtility.routeMessage(\n        messageData.from, \n        'content-script', \n        message, \n        this.sessionId\n      );\n      \n      // Process the message\n      this.processMessage(message, route);\n    } catch (error) {\n      console.error(\" ContentSystemMessageService: Error handling extension message:\", error);\n      this.logMessage('message-error', `Error handling extension message: ${error}`);\n    }\n  }\n\n  /**\n   * Handle popup messages\n   */\n  private handlePopupMessage(message: any, sender: any, sendResponse: any): void {\n    console.log(\" ContentSystemMessageService: Received popup message:\", message);\n    \n    try {\n      // Create a proper message using our factory\n      const popupMessage = MessageFactory.createMessage(message.name, message.from, message);\n      \n      // Log the message\n      this.logMessage('popup-message', `Received ${message.name} from popup`);\n      \n      // Route the message through our message system\n      const route = MessageUtility.routeMessage(\n        'popup', \n        'content-script', \n        popupMessage, \n        this.sessionId\n      );\n      \n      // Process the message\n      this.processMessage(popupMessage, route);\n      \n      // Send response back to popup\n      sendResponse({ success: true, sessionId: this.sessionId });\n    } catch (error) {\n      console.error(\" ContentSystemMessageService: Error handling popup message:\", error);\n      this.logMessage('message-error', `Error handling popup message: ${error}`);\n      sendResponse({ success: false, error: error instanceof Error ? error.message : String(error) });\n    }\n  }\n\n  /**\n   * Process a message using registered handlers\n   */\n  private processMessage(message: any, route: any): void {\n    const messageName = message.name;\n    \n    try {\n      // Find and execute the appropriate handler\n      const handler = this.messageHandlers.get(messageName);\n      if (handler) {\n        handler.handler(message, route);\n      } else {\n        console.log(` ContentSystemMessageService: No handler found for message type: ${messageName}`);\n        this.logMessage('unknown-message', `Unknown message type: ${messageName}`);\n      }\n    } catch (error) {\n      console.error(` ContentSystemMessageService: Error processing message ${messageName}:`, error);\n      this.logMessage('message-error', `Error processing ${messageName}: ${error instanceof Error ? error.message : 'Unknown error'}`);\n    }\n  }\n\n  /**\n   * Register a message handler\n   */\n  public registerHandler(handler: MessageHandler): void {\n    if (this.messageHandlers.has(handler.name)) {\n      console.warn(` ContentSystemMessageService: Handler for ${handler.name} already exists, overwriting`);\n    }\n    \n    this.messageHandlers.set(handler.name, handler);\n    console.log(` ContentSystemMessageService: Registered handler for ${handler.name}`);\n  }\n\n  /**\n   * Unregister a message handler\n   */\n  public unregisterHandler(name: string): boolean {\n    const removed = this.messageHandlers.delete(name);\n    if (removed) {\n      console.log(` ContentSystemMessageService: Unregistered handler for ${name}`);\n    } else {\n      console.warn(` ContentSystemMessageService: No handler found for ${name}`);\n    }\n    return removed;\n  }\n\n  /**\n   * Get all registered handlers\n   */\n  public getHandlers(): Map<string, MessageHandler> {\n    return new Map(this.messageHandlers);\n  }\n\n  /**\n   * Check if a handler exists for a message type\n   */\n  public hasHandler(name: string): boolean {\n    return this.messageHandlers.has(name);\n  }\n\n  /**\n   * Send a message to the tome system\n   */\n  public sendToTome(message: any, tome: any): void {\n    // Map message names to tome events\n    const messageToTomeEvent: { [key: string]: string } = {\n      'start': 'START',\n      'stop': 'STOP',\n      'toggle-wave-reader': 'TOGGLE',\n      'selection-made': 'SELECTION-MADE',\n      'ml-recommendation': 'ML-RECOMMENDATION',\n      'settings-reset': 'SETTINGS-RESET',\n      'wave-reader-start': 'WAVE-READER-START',\n      'wave-reader-stop': 'WAVE-READER-STOP',\n      'analytics': 'ANALYTICS',\n      'health-check': 'HEALTH-CHECK'\n    };\n\n    const tomeEvent = messageToTomeEvent[message.name];\n    if (tomeEvent && tome) {\n      tome.send({ type: tomeEvent, payload: message }).then(() => {\n        console.log(` ContentSystemMessageService: Tome received event: ${tomeEvent}`);\n      }).catch((error: any) => {\n        console.error(` ContentSystemMessageService: Tome event failed: ${tomeEvent}`, error);\n      });\n    }\n  }\n\n  /**\n   * Log a message to the history\n   */\n  public logMessage(type: string, message: string, data?: any, state?: string): void {\n    const logEntry: MessageHistoryEntry = {\n      timestamp: Date.now(),\n      type,\n      message,\n      data,\n      sessionId: this.sessionId,\n      url: window.location.href,\n      state\n    };\n    \n    this.messageHistory.push(logEntry);\n    \n    // Keep only last 1000 messages\n    if (this.messageHistory.length > 1000) {\n      this.messageHistory = this.messageHistory.slice(-1000);\n    }\n    \n    // Log to console in development\n    if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {\n      console.log(` ContentSystemMessageService [${type}]:`, message, data || '');\n    }\n  }\n\n  /**\n   * Get message history\n   */\n  public getMessageHistory(): MessageHistoryEntry[] {\n    return [...this.messageHistory];\n  }\n\n  /**\n   * Get message history by type\n   */\n  public getMessageHistoryByType(type: string): MessageHistoryEntry[] {\n    return this.messageHistory.filter(entry => entry.type === type);\n  }\n\n  /**\n   * Clear message history\n   */\n  public clearMessageHistory(): void {\n    this.messageHistory = [];\n    console.log(\" ContentSystemMessageService: Message history cleared\");\n  }\n\n  /**\n   * Get session ID\n   */\n  public getSessionId(): string {\n    return this.sessionId;\n  }\n\n  /**\n   * Check if service is initialized\n   */\n  public getInitialized(): boolean {\n    return this.isInitialized;\n  }\n\n  /**\n   * Clean up the message service\n   */\n  public cleanup(): void {\n    try {\n      // Remove event listeners\n      window.removeEventListener('message', this.handleExtensionMessage.bind(this));\n      \n      if (typeof chrome !== 'undefined' && chrome.runtime) {\n        chrome.runtime.onMessage.removeListener(this.handlePopupMessage.bind(this));\n      }\n      \n      // Clear handlers and history\n      this.messageHandlers.clear();\n      this.messageHistory = [];\n      \n      this.isInitialized = false;\n      console.log(\" ContentSystemMessageService: Cleanup completed\");\n    } catch (error) {\n      console.error(\" ContentSystemMessageService: Cleanup failed:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Reset service to initial state\n   */\n  public reset(): void {\n    this.cleanup();\n    this.sessionId = `content-system-message-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n  }\n}\n\nexport default ContentSystemMessageService;\n","import { KeyChordService } from './keychord-service';\nimport { KeyChord } from '../components/util/user-input';\n\n/**\n * KeyChord Content Integration\n * \n * Sets up keyboard shortcuts for content scripts\n * Integrates with content system tomes to handle toggle actions\n */\n\nlet keyChordService: KeyChordService | null = null;\nlet settingsCleanup: (() => void) | null = null;\n\n/**\n * Initialize keyboard shortcut service for content scripts\n * \n * @param onToggle - Optional callback when toggle shortcut is pressed\n *                   If not provided, sends message to background script\n */\nexport async function initializeKeyChordService(\n    onToggle?: () => void\n): Promise<void> {\n    console.log(' KeyChordContentIntegration: Initializing keyboard shortcut service');\n    \n    // Stop existing service if any\n    if (keyChordService) {\n        cleanupKeyChordService();\n    }\n\n    // Load key chord from storage\n    const keyChord = await KeyChordService.loadKeyChordFromStorage();\n    \n    // Create service\n    keyChordService = new KeyChordService(keyChord, onToggle || (() => {\n        // Default: send toggle message to background\n        sendToggleToBackground();\n    }));\n\n    // Start the service\n    keyChordService.start();\n\n    // Set up settings change listener\n    settingsCleanup = KeyChordService.setupSettingsListener((newKeyChord: KeyChord) => {\n        console.log(' KeyChordContentIntegration: Settings changed, updating keyboard shortcut');\n        if (keyChordService) {\n            keyChordService.updateKeyChord(newKeyChord);\n        }\n    });\n\n    console.log(' KeyChordContentIntegration: Keyboard shortcut service initialized with:', keyChord.join(' + '));\n}\n\n/**\n * Send toggle message to background script\n */\nasync function sendToggleToBackground(): Promise<void> {\n    if (typeof chrome === 'undefined' || !chrome.runtime) {\n        console.warn(' KeyChordContentIntegration: Chrome runtime not available');\n        return;\n    }\n\n    try {\n        const response = await chrome.runtime.sendMessage({\n            name: 'toggle',\n            from: 'content-script',\n            source: 'keychord-service',\n            timestamp: Date.now()\n        });\n\n        console.log(' KeyChordContentIntegration: Toggle message sent to background, response:', response);\n    } catch (error: any) {\n        console.error(' KeyChordContentIntegration: Failed to send toggle message:', error);\n    }\n}\n\n/**\n * Update the toggle callback\n */\nexport function setToggleCallback(onToggle: () => void): void {\n    if (keyChordService) {\n        keyChordService.setOnToggle(onToggle);\n    }\n}\n\n/**\n * Cleanup keyboard shortcut service\n */\nexport function cleanupKeyChordService(): void {\n    console.log(' KeyChordContentIntegration: Cleaning up keyboard shortcut service');\n    \n    if (keyChordService) {\n        keyChordService.cleanup();\n        keyChordService = null;\n    }\n\n    if (settingsCleanup) {\n        settingsCleanup();\n        settingsCleanup = null;\n    }\n}\n\n/**\n * Get current key chord\n */\nexport function getCurrentKeyChord(): string[] {\n    if (keyChordService) {\n        return keyChordService.getCurrentKeyChord();\n    }\n    return ['Ctrl', 'Shift', 'W'];\n}\n\n/**\n * Check if service is active\n */\nexport function isKeyChordServiceActive(): boolean {\n    return keyChordService?.getIsActive() || false;\n}\n\n","import { Observable, Subscription } from 'rxjs';\nimport { \n    KeyChord, \n    WindowKeyDownKey,\n    normalizeKey,\n    sortKeyChord,\n    compareKeyChords\n} from '../components/util/user-input';\n\n/**\n * KeyChord Service\n * \n * Manages keyboard shortcut detection using KeyChord pattern\n * Listens for keyboard events and triggers toggle when shortcut is pressed\n * Can be updated with new shortcuts from settings\n */\nexport class KeyChordService {\n    private subscription: Subscription | null = null;\n    private listener: ((event: KeyboardEvent) => void) | null = null;\n    private currentKeyChord: KeyChord = [];\n    private isActive: boolean = false;\n    private onToggle: (() => void) | null = null;\n    private debounceId: any = undefined;\n    private activeKeys: Set<string> = new Set();\n    private keyupListener: ((event: KeyboardEvent) => void) | null = null;\n    private blurListener: (() => void) | null = null;\n    private static readonly MODIFIER_KEYS = new Set(['Alt', 'Ctrl', 'Shift', 'Meta']);\n\n    constructor(\n        initialKeyChord: KeyChord = ['Shift', 'F'],\n        onToggleCallback?: () => void\n    ) {\n        // Normalize the keychord when setting it\n        this.currentKeyChord = sortKeyChord(initialKeyChord);\n        this.onToggle = onToggleCallback || null;\n    }\n\n    /**\n     * Start listening for keyboard shortcuts\n     */\n    start(): void {\n        if (this.isActive) {\n            console.warn(' KeyChordService: Already active, stopping first');\n            this.stop();\n        }\n\n        console.log(' KeyChordService: Starting keyboard shortcut listener for:', this.currentKeyChord.join(' + '));\n        \n        this.isActive = true;\n        this.resetActiveKeys();\n        let keysSubscription: Subscription | null = null;\n        \n        // Create keyboard observer\n        // WindowKeyDownKey attaches its own listener, but we need to intercept events first\n        // So we'll attach our listener directly and manually call WindowKeyDownKey's listener when needed\n        let internalListener: ((event: KeyboardEvent) => void) | null = null;\n        \n        // Create our wrapper listener that handles keychord matching synchronously\n        // This will be attached directly to window\n        this.listener = (event: KeyboardEvent) => {\n            // Skip if event is already prevented\n            if (event.defaultPrevented) {\n                if (internalListener) internalListener(event);\n                return;\n            }\n            \n            // Skip if in input-selector field\n            if (this.isInputSelectorField(event)) {\n                if (internalListener) internalListener(event);\n                return;\n            }\n            \n            // Normalize and filter the incoming key\n            const normalizedKey = normalizeKey(event.key);\n            \n            // Skip invalid keys (like \"Dead\", \"Unidentified\")\n            if (!normalizedKey) {\n                if (internalListener) internalListener(event);\n                return;\n            }\n            \n            // Filter out Meta if it's not part of the target keychord\n            // (Some browsers emit Meta unexpectedly when only modifier keys are pressed)\n            if (normalizedKey === 'Meta' && !this.currentKeyChord.includes('Meta')) {\n                if (internalListener) internalListener(event);\n                return;\n            }\n            \n            if (event.repeat && this.activeKeys.has(normalizedKey)) {\n                if (internalListener) internalListener(event);\n                return;\n            }\n\n            this.activeKeys.add(normalizedKey);\n            this.scheduleActiveKeysReset();\n\n            const isCompleted = this.isActiveKeyChordMatch();\n            \n            // Handle keychord match synchronously on keydown\n            if (isCompleted) {\n                // Prevent default synchronously when keychord matches\n                event.preventDefault();\n                event.stopPropagation();\n                console.log(' KeyChordService: Shortcut matched!', this.currentKeyChord.join(' + '));\n                this.handleToggle();\n                this.resetActiveKeys();\n                // Don't call internalListener for matched shortcuts to avoid emitting the key\n                return;\n            }\n            \n            // If keychord not completed, emit the key normally through the internal listener\n            if (internalListener) internalListener(event);\n        };\n        \n        // Attach our listener directly to window (capture phase, runs first)\n        window.addEventListener('keydown', this.listener, true);\n\n        this.keyupListener = (event: KeyboardEvent) => {\n            const normalizedKey = normalizeKey(event.key);\n            if (!normalizedKey) {\n                return;\n            }\n\n            if (this.activeKeys.has(normalizedKey)) {\n                this.activeKeys.delete(normalizedKey);\n            }\n        };\n\n        window.addEventListener('keyup', this.keyupListener, true);\n\n        this.blurListener = () => {\n            this.resetActiveKeys();\n        };\n\n        window.addEventListener('blur', this.blurListener, true);\n        \n        // Create the observable - it will create and attach its own listener\n        // Our listener runs first (capture phase), so we intercept events before WindowKeyDownKey's listener\n        const keysObservable = WindowKeyDownKey(\n            (listenerFn: (event: KeyboardEvent) => void) => {\n                // Store the internal listener that WindowKeyDownKey creates\n                // We'll call it from our listener when the keychord doesn't match\n                internalListener = listenerFn;\n            },\n            false // Don't prevent default here - we handle it manually when keychord matches\n        );\n\n        // Store keys subscription for cleanup - we track keys in the listener above\n        // The observable subscription is needed to keep the listener active\n        keysSubscription = keysObservable.subscribe({\n            next: (key: string) => {\n                // Keys are processed synchronously in the listener above\n                // This subscription keeps the observable active\n            },\n            error: (error: any) => {\n                console.error(' KeyChordService: Error in keys observable:', error);\n            },\n            complete: () => {\n                console.log(' KeyChordService: Keys observable completed');\n            }\n        });\n\n        // Store the keys subscription as the main subscription for cleanup\n        this.subscription = keysSubscription;\n    }\n\n    /**\n     * Check if the event target is within an input-selector field or is an editable element\n     * @param event - The keyboard event to check\n     * @returns true if target is an input-selector field or editable element\n     */\n    private isInputSelectorField(event: KeyboardEvent): boolean {\n        const target = event.target as HTMLElement;\n        if (!target) return false;\n\n        // Check if target is an input or textarea element\n        const tagName = target.tagName?.toLowerCase();\n        if (tagName === 'input' || tagName === 'textarea') {\n            return true;\n        }\n\n        // Check if target has contenteditable attribute\n        if (target.hasAttribute?.('contenteditable') && target.getAttribute('contenteditable') !== 'false') {\n            return true;\n        }\n\n        // Check for input-selector specific IDs\n        if (target.id === 'selectorInput' || target.id === 'selector-text-input') {\n            return true;\n        }\n\n        // Check for input-selector specific classes\n        if (target.classList?.contains('selector-text-input')) {\n            return true;\n        }\n\n        // Check if target is within an element with selector-input classes\n        let current: HTMLElement | null = target;\n        while (current) {\n            if (current.classList?.contains('selector-input-editing') || \n                current.classList?.contains('selector-input-section')) {\n                return true;\n            }\n            current = current.parentElement;\n        }\n\n        return false;\n    }\n\n    private scheduleActiveKeysReset(): void {\n        if (this.debounceId) {\n            clearTimeout(this.debounceId);\n        }\n\n        this.debounceId = setTimeout(() => {\n            this.resetActiveKeys();\n        }, 5000);\n    }\n\n    private resetActiveKeys(): void {\n        this.activeKeys.clear();\n\n        if (this.debounceId) {\n            clearTimeout(this.debounceId);\n            this.debounceId = undefined;\n        }\n    }\n\n    private isActiveKeyChordMatch(): boolean {\n        if (this.currentKeyChord.length === 0) {\n            return false;\n        }\n\n        const hasNonModifier = this.currentKeyChord.some(key => !KeyChordService.MODIFIER_KEYS.has(key));\n\n        if (!hasNonModifier) {\n            return false;\n        }\n\n        if (this.activeKeys.size !== this.currentKeyChord.length) {\n            return false;\n        }\n\n        return compareKeyChords(Array.from(this.activeKeys), this.currentKeyChord);\n    }\n\n    /**\n     * Stop listening for keyboard shortcuts\n     */\n    stop(): void {\n        if (!this.isActive) {\n            return;\n        }\n\n        console.log(' KeyChordService: Stopping keyboard shortcut listener');\n        \n        this.isActive = false;\n\n        if (this.subscription) {\n            this.subscription.unsubscribe();\n            this.subscription = null;\n        }\n\n        if (this.listener) {\n            window.removeEventListener('keydown', this.listener, true);\n            this.listener = null;\n        }\n\n        if (this.keyupListener) {\n            window.removeEventListener('keyup', this.keyupListener, true);\n            this.keyupListener = null;\n        }\n\n        if (this.blurListener) {\n            window.removeEventListener('blur', this.blurListener, true);\n            this.blurListener = null;\n        }\n\n        this.resetActiveKeys();\n    }\n\n    /**\n     * Update the keyboard shortcut and restart listener\n     */\n    updateKeyChord(newKeyChord: KeyChord): void {\n        console.log(' KeyChordService: Updating keyboard shortcut from', \n            this.currentKeyChord.join(' + '), 'to', newKeyChord.join(' + '));\n        \n        // Normalize the new keychord\n        const normalizedNewKeyChord = sortKeyChord(newKeyChord);\n        \n        // Check if the keychord actually changed\n        if (compareKeyChords(this.currentKeyChord, normalizedNewKeyChord)) {\n            console.log(' KeyChordService: Keychord unchanged, skipping update');\n            return;\n        }\n        \n        const wasActive = this.isActive;\n        \n        // Stop the current listener completely - ensure it's fully stopped\n        if (wasActive) {\n            console.log(' KeyChordService: Stopping current listener before update');\n            this.stop();\n            \n            // Double-check that we're actually stopped\n            if (this.isActive) {\n                console.warn(' KeyChordService: Service still active after stop(), forcing cleanup');\n                this.stop();\n            }\n        }\n        \n        // Update the keychord\n        this.currentKeyChord = normalizedNewKeyChord;\n        this.resetActiveKeys();\n\n        // Restart if it was active before\n        if (wasActive) {\n            console.log(' KeyChordService: Restarting listener with new keychord:', normalizedNewKeyChord.join(' + '));\n            this.start();\n        }\n    }\n\n    /**\n     * Handle toggle action when shortcut is pressed\n     */\n    private handleToggle(): void {\n        console.log(' KeyChordService: Toggle triggered by keyboard shortcut');\n        \n        if (this.onToggle) {\n            this.onToggle();\n        } else {\n            // Default behavior: send message to background script\n            this.sendToggleMessage();\n        }\n    }\n\n    /**\n     * Send toggle message to background script\n     */\n    private async sendToggleMessage(): Promise<void> {\n        if (typeof chrome === 'undefined' || !chrome.runtime) {\n            console.warn(' KeyChordService: Chrome runtime not available');\n            return;\n        }\n\n        try {\n            const response = await chrome.runtime.sendMessage({\n                name: 'toggle',\n                from: 'content-script',\n                source: 'keychord-service',\n                timestamp: Date.now()\n            });\n\n            console.log(' KeyChordService: Toggle message sent, response:', response);\n        } catch (error: any) {\n            console.error(' KeyChordService: Failed to send toggle message:', error);\n        }\n    }\n\n    /**\n     * Set the toggle callback\n     */\n    setOnToggle(callback: () => void): void {\n        this.onToggle = callback;\n    }\n\n    /**\n     * Get current key chord\n     */\n    getCurrentKeyChord(): KeyChord {\n        return [...this.currentKeyChord];\n    }\n\n    /**\n     * Check if service is active\n     */\n    getIsActive(): boolean {\n        return this.isActive;\n    }\n\n    /**\n     * Load key chord from Chrome storage\n     */\n    static async loadKeyChordFromStorage(): Promise<KeyChord> {\n        const defaultKeyChord: KeyChord = ['Ctrl', 'Shift', 'W'];\n        \n        if (typeof chrome === 'undefined' || !chrome.storage) {\n            return defaultKeyChord;\n        }\n\n        try {\n            const result = await chrome.storage.local.get(['waveReaderSettings']);\n            \n            if (result.waveReaderSettings?.toggleKeys?.keyChord) {\n                const keyChord = result.waveReaderSettings.toggleKeys.keyChord;\n                console.log(' KeyChordService: Loaded key chord from storage:', keyChord);\n                return keyChord;\n            }\n            \n            // Also check sync storage\n            const syncResult = await chrome.storage.sync.get(['waveReaderSettings']);\n            if (syncResult.waveReaderSettings?.toggleKeys?.keyChord) {\n                const keyChord = syncResult.waveReaderSettings.toggleKeys.keyChord;\n                console.log(' KeyChordService: Loaded key chord from sync storage:', keyChord);\n                return keyChord;\n            }\n        } catch (error) {\n            console.warn(' KeyChordService: Failed to load key chord from storage:', error);\n        }\n\n        return defaultKeyChord;\n    }\n\n    /**\n     * Set up listener for settings changes in Chrome storage\n     */\n    static setupSettingsListener(onKeyChordChange: (newKeyChord: KeyChord) => void): (() => void) | null {\n        if (typeof chrome === 'undefined' || !chrome.storage || !chrome.storage.onChanged) {\n            return null;\n        }\n\n        const listener = (changes: { [key: string]: chrome.storage.StorageChange }, areaName: string) => {\n            if (areaName === 'local' || areaName === 'sync') {\n                if (changes.waveReaderSettings) {\n                    const newValue = changes.waveReaderSettings.newValue;\n                    if (newValue?.toggleKeys?.keyChord) {\n                        console.log(' KeyChordService: Settings changed, updating key chord:', newValue.toggleKeys.keyChord);\n                        onKeyChordChange(newValue.toggleKeys.keyChord);\n                    }\n                }\n            }\n        };\n\n        chrome.storage.onChanged.addListener(listener);\n\n        // Return cleanup function\n        return () => {\n            chrome.storage.onChanged.removeListener(listener);\n        };\n    }\n\n    /**\n     * Cleanup resources\n     */\n    cleanup(): void {\n        this.stop();\n        this.onToggle = null;\n    }\n}\n\n","import Options from '../models/options';\nimport Wave from '../models/wave';\n\nexport interface UserBehaviorPattern {\n    timestamp: number;\n    domain: string;\n    path: string;\n    selector: string;\n    settings: Partial<Options>;\n    success: boolean;\n    duration: number;\n    userRating: number;\n}\n\nexport interface MLSettingsRecommendation {\n    confidence: number;\n    settings: Partial<Options>;\n    reasoning: string[];\n    similarPatterns: number;\n    isDefault: boolean;\n    respectsUserSettings: boolean;\n}\n\nexport interface StatisticalBounds {\n    waveSpeed: { mean: number; stdDev: number; min: number; max: number };\n    axisTranslateAmountXMax: { mean: number; stdDev: number; min: number; max: number };\n    axisTranslateAmountXMin: { mean: number; stdDev: number; min: number; max: number };\n    axisRotationAmountYMax: { mean: number; stdDev: number; min: number; max: number };\n    axisRotationAmountYMin: { mean: number; stdDev: number; min: number; max: number };\n    mouseFollowInterval: { mean: number; stdDev: number; min: number; max: number };\n}\n\nexport class MLSettingsService {\n    private behaviorPatterns: UserBehaviorPattern[] = [];\n    private artificialWeightMultiplier = 3; // Heavily weight artificial defaults\n    private maxStandardDeviations = 2; // Limit recommendations to within 2 standard deviations\n    private defaultSettings!: Partial<Options>;\n    private statisticalBounds!: StatisticalBounds;\n\n    constructor() {\n        this.initializeDefaultSettings();\n        this.initializeArtificialDefaults();\n        this.calculateStatisticalBounds();\n    }\n\n    /**\n     * Scrub query parameters to remove potential PII\n     * @param url The URL to scrub\n     * @returns Cleaned URL without sensitive query parameters\n     */\n    private scrubQueryParameters(url: string): string {\n        try {\n            const urlObj = new URL(url);\n            const searchParams = urlObj.searchParams;\n            \n            // List of potentially sensitive query parameter names\n            const sensitiveParams = [\n                'token', 'auth', 'key', 'secret', 'password', 'passwd', 'pwd',\n                'session', 'sid', 'id', 'user', 'email', 'phone', 'mobile',\n                'tracking', 'utm_', 'fbclid', 'gclid', 'msclkid',\n                'ref', 'referrer', 'source', 'campaign',\n                'signature', 'hash', 'checksum', 'nonce',\n                'state', 'code', 'verification', 'confirm'\n            ];\n            \n            // Remove sensitive parameters\n            sensitiveParams.forEach(param => {\n                if (searchParams.has(param)) {\n                    searchParams.delete(param);\n                }\n            });\n            \n            // Remove any parameters that look like hashes or tokens (long alphanumeric strings)\n            const paramsToRemove: string[] = [];\n            searchParams.forEach((value, key) => {\n                // Check for long alphanumeric strings that might be tokens\n                if (value.length > 20 && /^[a-zA-Z0-9]+$/.test(value)) {\n                    paramsToRemove.push(key);\n                }\n                // Check for base64-like strings\n                if (value.length > 20 && /^[A-Za-z0-9+/=]+$/.test(value)) {\n                    paramsToRemove.push(key);\n                }\n            });\n            \n            paramsToRemove.forEach(param => searchParams.delete(param));\n            \n            return urlObj.toString();\n        } catch (error) {\n            // If URL parsing fails, return original URL\n            console.warn('Failed to parse URL for PII scrubbing:', error);\n            return url;\n        }\n    }\n\n    /**\n     * Clean a path by removing query parameters and scrubbing sensitive data\n     * @param path The path to clean\n     * @returns Cleaned path without sensitive query parameters\n     */\n    private cleanPath(path: string): string {\n        if (!path.includes('?')) {\n            return path;\n        }\n        \n        // Extract just the path part before query parameters\n        const pathOnly = path.split('?')[0];\n        \n        // If there are query parameters, scrub them\n        if (path.includes('?')) {\n            const fullUrl = `https://example.com${path}`;\n            const scrubbedUrl = this.scrubQueryParameters(fullUrl);\n            const scrubbedPath = scrubbedUrl.replace('https://example.com', '');\n            return scrubbedPath;\n        }\n        \n        return pathOnly;\n    }\n\n    private initializeDefaultSettings(): void {\n        this.defaultSettings = {\n            wave: new Wave({\n                selector: 'p, h1, h2, h3, .content, .article-body',\n                waveSpeed: 3,\n                axisTranslateAmountXMax: 1,\n                axisTranslateAmountXMin: -1,\n                axisRotationAmountYMax: 2,\n                axisRotationAmountYMin: -2,\n                mouseFollowInterval: 80\n            }),\n            showNotifications: true,\n            selectors: ['p', 'h1', 'h2', 'h3', '.content', '.article-body']\n        };\n    }\n\n    private initializeArtificialDefaults(): void {\n        const artificialPatterns: UserBehaviorPattern[] = [\n            {\n                timestamp: Date.now(),\n                domain: 'news.example.com',\n                path: '/article',\n                selector: 'p, h1, h2, h3, .content, .article-body',\n                settings: {\n                    wave: new Wave({\n                        selector: 'p, h1, h2, h3, .content, .article-body',\n                        waveSpeed: 3,\n                        axisTranslateAmountXMax: 1,\n                        axisTranslateAmountXMin: -1,\n                        axisRotationAmountYMax: 2,\n                        axisRotationAmountYMin: -2,\n                        mouseFollowInterval: 80\n                    }),\n                    showNotifications: true,\n                    selectors: ['p', 'h1', 'h2', 'h3', '.content', '.article-body']\n                },\n                success: true,\n                duration: 5000,\n                userRating: 5\n            },\n            {\n                timestamp: Date.now(),\n                domain: 'blog.example.com',\n                path: '/post',\n                selector: 'article p, .post-content, .entry-content',\n                settings: {\n                    wave: new Wave({\n                        selector: 'article p, .post-content, .entry-content',\n                        waveSpeed: 2.5,\n                        axisTranslateAmountXMax: 0.8,\n                        axisTranslateAmountXMin: -0.8,\n                        axisRotationAmountYMax: 1.5,\n                        axisRotationAmountYMin: -1.5,\n                        mouseFollowInterval: 100\n                    }),\n                    showNotifications: true,\n                    selectors: ['article p', '.post-content', '.entry-content']\n                },\n                success: true,\n                duration: 4000,\n                userRating: 4\n            },\n            {\n                timestamp: Date.now(),\n                domain: 'docs.example.com',\n                path: '/manual',\n                selector: 'p, li, .documentation, .guide',\n                settings: {\n                    wave: new Wave({\n                        selector: 'p, li, .documentation, .guide',\n                        waveSpeed: 4,\n                        axisTranslateAmountXMax: 1.2,\n                        axisTranslateAmountXMin: -1.2,\n                        axisRotationAmountYMax: 2.5,\n                        axisRotationAmountYMin: -2.5,\n                        mouseFollowInterval: 60\n                    }),\n                    showNotifications: false,\n                    selectors: ['p', 'li', '.documentation', '.guide']\n                },\n                success: true,\n                duration: 6000,\n                userRating: 5\n            },\n            {\n                timestamp: Date.now(),\n                domain: 'ecommerce.example.com',\n                path: '/product',\n                selector: '.product-description, .details, .specs',\n                settings: {\n                    wave: new Wave({\n                        selector: '.product-description, .details, .specs',\n                        waveSpeed: 2,\n                        axisTranslateAmountXMax: 0.6,\n                        axisTranslateAmountXMin: -0.6,\n                        axisRotationAmountYMax: 1.8,\n                        axisRotationAmountYMin: -1.8,\n                        mouseFollowInterval: 120\n                    }),\n                    showNotifications: true,\n                    selectors: ['.product-description', '.details', '.specs']\n                },\n                success: true,\n                duration: 3500,\n                userRating: 4\n            },\n            {\n                timestamp: Date.now(),\n                domain: 'social.example.com',\n                path: '/feed',\n                selector: '.post, .tweet, .status, .update',\n                settings: {\n                    wave: new Wave({\n                        selector: '.post, .tweet, .status, .update',\n                        waveSpeed: 1.8,\n                        axisTranslateAmountXMax: 0.5,\n                        axisTranslateAmountXMin: -0.5,\n                        axisRotationAmountYMax: 1.2,\n                        axisRotationAmountYMin: -1.2,\n                        mouseFollowInterval: 150\n                    }),\n                    showNotifications: true,\n                    selectors: ['.post', '.tweet', '.status', '.update']\n                },\n                success: true,\n                duration: 3000,\n                userRating: 3\n            }\n        ];\n\n        // Heavily weight artificial defaults by adding them multiple times\n        artificialPatterns.forEach(pattern => {\n            for (let i = 0; i < this.artificialWeightMultiplier; i++) {\n                this.behaviorPatterns.push({\n                    ...pattern,\n                    timestamp: pattern.timestamp + i * 1000\n                });\n            }\n        });\n    }\n\n    private calculateStatisticalBounds(): void {\n        const waveSettings = this.behaviorPatterns\n            .map(pattern => pattern.settings.wave)\n            .filter(Boolean) as Wave[];\n\n        if (waveSettings.length === 0) {\n            // Use default bounds if no patterns exist\n            this.statisticalBounds = {\n                waveSpeed: { mean: 3, stdDev: 1, min: 1, max: 5 },\n                axisTranslateAmountXMax: { mean: 1, stdDev: 0.5, min: 0, max: 2 },\n                axisTranslateAmountXMin: { mean: -1, stdDev: 0.5, min: -2, max: 0 },\n                axisRotationAmountYMax: { mean: 2, stdDev: 1, min: 0, max: 4 },\n                axisRotationAmountYMin: { mean: -2, stdDev: 1, min: -4, max: 0 },\n                mouseFollowInterval: { mean: 80, stdDev: 20, min: 40, max: 120 }\n            };\n            return;\n        }\n\n        // Calculate statistical bounds for each wave property\n        this.statisticalBounds = {\n            waveSpeed: this.calculatePropertyBounds(waveSettings.map(w => w.waveSpeed).filter((v): v is number => v !== undefined)),\n            axisTranslateAmountXMax: this.calculatePropertyBounds(waveSettings.map(w => w.axisTranslateAmountXMax).filter((v): v is number => v !== undefined)),\n            axisTranslateAmountXMin: this.calculatePropertyBounds(waveSettings.map(w => w.axisTranslateAmountXMin).filter((v): v is number => v !== undefined)),\n            axisRotationAmountYMax: this.calculatePropertyBounds(waveSettings.map(w => w.axisRotationAmountYMax).filter((v): v is number => v !== undefined)),\n            axisRotationAmountYMin: this.calculatePropertyBounds(waveSettings.map(w => w.axisRotationAmountYMin).filter((v): v is number => v !== undefined)),\n            mouseFollowInterval: this.calculatePropertyBounds(waveSettings.map(w => w.mouseFollowInterval).filter((v): v is number => v !== undefined))\n        };\n    }\n\n    private calculatePropertyBounds(values: number[]): { mean: number; stdDev: number; min: number; max: number } {\n        const mean = this.average(values);\n        const variance = this.average(values.map(v => Math.pow(v - mean, 2)));\n        const stdDev = Math.sqrt(variance);\n        \n        return {\n            mean,\n            stdDev,\n            min: mean - (this.maxStandardDeviations * stdDev),\n            max: mean + (this.maxStandardDeviations * stdDev)\n        };\n    }\n\n    private isWithinBounds(value: number, property: keyof StatisticalBounds): boolean {\n        const bounds = this.statisticalBounds[property];\n        return value >= bounds.min && value <= bounds.max;\n    }\n\n    private constrainToBounds(value: number, property: keyof StatisticalBounds): number {\n        const bounds = this.statisticalBounds[property];\n        return Math.max(bounds.min, Math.min(bounds.max, value));\n    }\n\n    async getSettingsRecommendations(\n        domain: string,\n        path: string = '/',\n        selector: string = 'p',\n        existingSettings?: Partial<Options>,\n        forceReset: boolean = false\n    ): Promise<MLSettingsRecommendation[]> {\n        try {\n            // Clean path to remove potential PII\n            const cleanPath = this.cleanPath(path);\n            \n            // Check for domain/path-specific settings first\n            if (existingSettings && !forceReset) {\n                const domainPathSettings = existingSettings.getDomainPathSettings?.(domain, cleanPath);\n                if (domainPathSettings && Object.keys(domainPathSettings).length > 0) {\n                    // Return domain/path-specific settings as high-confidence recommendation\n                    return [{\n                        confidence: 0.95,\n                        settings: domainPathSettings,\n                        reasoning: [`Using saved settings for ${domain}${cleanPath}`],\n                        similarPatterns: 1,\n                        isDefault: false,\n                        respectsUserSettings: true\n                    }];\n                }\n            }\n            \n            // Record this behavior pattern\n            const newPattern: UserBehaviorPattern = {\n                timestamp: Date.now(),\n                domain,\n                path: cleanPath,\n                selector,\n                settings: existingSettings || {},\n                success: true,\n                duration: 0,\n                userRating: 0\n            };\n            this.behaviorPatterns.push(newPattern);\n\n            // Find similar patterns\n            const similarPatterns = this.findSimilarPatterns(domain, path, selector);\n            \n            if (similarPatterns.length === 0) {\n                return [this.getFallbackRecommendation(domain, path, selector)];\n            }\n\n            // Group patterns by settings similarity\n            const groupedPatterns = this.groupPatternsBySettings(similarPatterns);\n            \n            // Generate recommendations\n            const recommendations: MLSettingsRecommendation[] = [];\n            \n            for (const [settingsKey, patterns] of Array.from(groupedPatterns.entries())) {\n                const confidence = this.calculateConfidence(patterns);\n                const averageSettings = this.averageSettings(patterns);\n                \n                // Apply statistical bounds to ensure recommendations don't deviate too much\n                const constrainedSettings = this.applyStatisticalBounds(averageSettings);\n                \n                const reasoning = this.generateReasoning(patterns, domain, path);\n                \n                // Check if this recommendation respects user settings\n                const respectsUserSettings = existingSettings && !forceReset ? \n                    this.respectsUserSettings(constrainedSettings, existingSettings) : true;\n                \n                recommendations.push({\n                    confidence,\n                    settings: constrainedSettings,\n                    reasoning,\n                    similarPatterns: patterns.length,\n                    isDefault: false,\n                    respectsUserSettings\n                });\n            }\n\n            // Sort by confidence and respect for user settings\n            recommendations.sort((a, b) => {\n                if (a.respectsUserSettings && !b.respectsUserSettings) return -1;\n                if (!a.respectsUserSettings && b.respectsUserSettings) return 1;\n                return b.confidence - a.confidence;\n            });\n\n            return recommendations;\n\n        } catch (error) {\n            console.error('Error getting ML settings recommendations:', error);\n            return [this.getFallbackRecommendation(domain, path, selector)];\n        }\n    }\n\n    private findSimilarPatterns(domain: string, path: string, selector: string): UserBehaviorPattern[] {\n        // Clean the input path for comparison\n        const cleanPath = this.cleanPath(path);\n        \n        return this.behaviorPatterns\n            .filter(pattern => pattern.success && pattern.userRating >= 3)\n            .sort((a, b) => {\n                const similarityA = this.calculateSimilarity(domain, cleanPath, selector, a);\n                const similarityB = this.calculateSimilarity(domain, cleanPath, selector, b);\n                return similarityB - similarityA;\n            })\n            .slice(0, 10); // Top 10 most similar patterns\n    }\n\n    private calculateSimilarity(domain: string, path: string, selector: string, pattern: UserBehaviorPattern): number {\n        const domainSimilarity = this.calculateDomainSimilarity(domain, pattern.domain);\n        const pathSimilarity = this.calculatePathSimilarity(path, pattern.path);\n        const selectorSimilarity = this.calculateSelectorSimilarity(selector, pattern.selector);\n        \n        // Weight domain similarity highest, then path, then selector\n        return (domainSimilarity * 0.5) + (pathSimilarity * 0.3) + (selectorSimilarity * 0.2);\n    }\n\n    private calculateDomainSimilarity(domain1: string, domain2: string): number {\n        if (domain1 === domain2) return 1.0;\n        \n        const parts1 = domain1.split('.');\n        const parts2 = domain2.split('.');\n        \n        // Check if they share the same TLD and main domain\n        if (parts1.length >= 2 && parts2.length >= 2) {\n            if (parts1[parts1.length - 1] === parts2[parts2.length - 1] && \n                parts1[parts1.length - 2] === parts2[parts2.length - 2]) {\n                return 0.8;\n            }\n        }\n        \n        // Check if they share the same main domain\n        if (parts1.length >= 2 && parts2.length >= 2) {\n            if (parts1[parts1.length - 2] === parts2[parts2.length - 2]) {\n                return 0.6;\n            }\n        }\n        \n        return 0.0;\n    }\n\n    private calculatePathSimilarity(path1: string, path2: string): number {\n        if (path1 === path2) return 1.0;\n        \n        const segments1 = path1.split('/').filter(s => s.length > 0);\n        const segments2 = path2.split('/').filter(s => s.length > 0);\n        \n        if (segments1.length === 0 && segments2.length === 0) return 1.0;\n        if (segments1.length === 0 || segments2.length === 0) return 0.0;\n        \n        const commonSegments = segments1.filter(s => segments2.includes(s));\n        return commonSegments.length / Math.max(segments1.length, segments2.length);\n    }\n\n    private calculateSelectorSimilarity(selector1: string, selector2: string): number {\n        if (selector1 === selector2) return 1.0;\n        \n        const selectors1 = selector1.split(',').map(s => s.trim());\n        const selectors2 = selector2.split(',').map(s => s.trim());\n        \n        const commonSelectors = selectors1.filter(s => selectors2.includes(s));\n        return commonSelectors.length / Math.max(selectors1.length, selectors2.length);\n    }\n\n    private groupPatternsBySettings(patterns: UserBehaviorPattern[]): Map<string, UserBehaviorPattern[]> {\n        const groups = new Map<string, UserBehaviorPattern[]>();\n        \n        patterns.forEach(pattern => {\n            const key = this.generateSettingsKey(pattern.settings);\n            if (!groups.has(key)) {\n                groups.set(key, []);\n            }\n            groups.get(key)!.push(pattern);\n        });\n        \n        return groups;\n    }\n\n    private generateSettingsKey(settings: Partial<Options>): string {\n        const wave = settings.wave;\n        if (!wave) return 'default';\n        \n        return [\n            wave.waveSpeed?.toFixed(1) || '0',\n            wave.axisTranslateAmountXMax?.toFixed(1) || '0',\n            wave.axisTranslateAmountXMin?.toFixed(1) || '0',\n            wave.axisRotationAmountYMax?.toFixed(1) || '0',\n            wave.axisRotationAmountYMin?.toFixed(1) || '0',\n            wave.mouseFollowInterval?.toString() || '0'\n        ].join('|');\n    }\n\n    private areSettingsSimilar(settings1: Partial<Options>, settings2: Partial<Options>): boolean {\n        const wave1 = settings1.wave;\n        const wave2 = settings2.wave;\n        \n        if (!wave1 || !wave2) return false;\n        \n        const tolerance = 0.5;\n        \n        if (Math.abs((wave1.waveSpeed || 0) - (wave2.waveSpeed || 0)) > tolerance) return false;\n        if (Math.abs((wave1.axisTranslateAmountXMax || 0) - (wave2.axisTranslateAmountXMax || 0)) > tolerance) return false;\n        if (Math.abs((wave1.axisTranslateAmountXMin || 0) - (wave2.axisTranslateAmountXMin || 0)) > tolerance) return false;\n        if (Math.abs((wave1.axisRotationAmountYMax || 0) - (wave2.axisRotationAmountYMax || 0)) > tolerance) return false;\n        if (Math.abs((wave1.axisRotationAmountYMin || 0) - (wave2.axisRotationAmountYMin || 0)) > tolerance) return false;\n        if (Math.abs((wave1.mouseFollowInterval || 0) - (wave2.mouseFollowInterval || 0)) > 10) return false;\n        \n        return true;\n    }\n\n    private calculateConfidence(patterns: UserBehaviorPattern[]): number {\n        if (patterns.length === 0) return 0;\n        \n        const avgRating = patterns.reduce((sum, p) => sum + p.userRating, 0) / patterns.length;\n        const avgDuration = patterns.reduce((sum, p) => sum + p.duration, 0) / patterns.length;\n        const successRate = patterns.filter(p => p.success).length / patterns.length;\n        \n        // Normalize values\n        const normalizedRating = avgRating / 5;\n        const normalizedDuration = Math.min(avgDuration / 10000, 1); // Cap at 10 seconds\n        const normalizedSuccess = successRate;\n        \n        // Weight factors\n        const ratingWeight = 0.4;\n        const durationWeight = 0.3;\n        const successWeight = 0.3;\n        \n        return (normalizedRating * ratingWeight) + \n               (normalizedDuration * durationWeight) + \n               (normalizedSuccess * successWeight);\n    }\n\n    private averageSettings(patterns: UserBehaviorPattern[]): Partial<Options> {\n        if (patterns.length === 0) return {};\n        \n        const waveSettings = patterns.map(p => p.settings.wave).filter(Boolean) as Partial<Wave>[];\n        \n        if (waveSettings.length === 0) return {};\n        \n        const avgSettings: Partial<Options> = {\n            wave: new Wave({\n                waveSpeed: this.average(waveSettings.map(w => w.waveSpeed).filter(Boolean) as number[]),\n                axisTranslateAmountXMax: this.average(waveSettings.map(w => w.axisTranslateAmountXMax).filter(Boolean) as number[]),\n                axisTranslateAmountXMin: this.average(waveSettings.map(w => w.axisTranslateAmountXMin).filter(Boolean) as number[]),\n                axisRotationAmountYMax: this.average(waveSettings.map(w => w.axisRotationAmountYMax).filter(Boolean) as number[]),\n                axisRotationAmountYMin: this.average(waveSettings.map(w => w.axisRotationAmountYMin).filter(Boolean) as number[]),\n                mouseFollowInterval: this.average(waveSettings.map(w => w.mouseFollowInterval).filter(Boolean) as number[])\n            }),\n            showNotifications: this.mostCommon(patterns.map(p => p.settings.showNotifications).filter(Boolean) as boolean[]),\n            selectors: this.mostCommon(patterns.map(p => p.settings.selectors).filter(Boolean) as string[][])\n        };\n        \n        return avgSettings;\n    }\n\n    private average(numbers: number[]): number {\n        if (numbers.length === 0) return 0;\n        return numbers.reduce((sum, n) => sum + n, 0) / numbers.length;\n    }\n\n    private mostCommon<T>(items: T[]): T | undefined {\n        if (items.length === 0) return undefined;\n        \n        const counts = new Map<T, number>();\n        items.forEach(item => {\n            counts.set(item, (counts.get(item) || 0) + 1);\n        });\n        \n        let mostCommon: T | undefined;\n        let maxCount = 0;\n        \n        counts.forEach((count, item) => {\n            if (count > maxCount) {\n                maxCount = count;\n                mostCommon = item;\n            }\n        });\n        \n        return mostCommon;\n    }\n\n    private generateReasoning(patterns: UserBehaviorPattern[], domain: string, path: string): string[] {\n        const reasons: string[] = [];\n        \n        if (patterns.length > 0) {\n            reasons.push(`Based on ${patterns.length} similar usage patterns`);\n            \n            const avgRating = patterns.reduce((sum, p) => sum + p.userRating, 0) / patterns.length;\n            if (avgRating >= 4) {\n                reasons.push('High user satisfaction with similar settings');\n            }\n            \n            const domainPatterns = patterns.filter(p => this.calculateDomainSimilarity(domain, p.domain) > 0.8);\n            if (domainPatterns.length > 0) {\n                reasons.push(`Settings optimized for similar domains (${domainPatterns.length} patterns)`);\n            }\n        }\n        \n        return reasons;\n    }\n\n    private respectsUserSettings(mlSettings: Partial<Options>, userSettings: Partial<Options>): boolean {\n        const wave1 = mlSettings.wave;\n        const wave2 = userSettings.wave;\n        \n        if (!wave1 || !wave2) return true;\n        \n        // Check if ML settings are significantly different from user settings\n        if (Math.abs((wave1.waveSpeed || 0) - (wave2.waveSpeed || 0)) > 0.5) {\n            return false;\n        }\n        \n        if (Math.abs((wave1.axisTranslateAmountXMax || 0) - (wave2.axisTranslateAmountXMax || 0)) > 0.3) {\n            return false;\n        }\n        \n        if (Math.abs((wave1.axisRotationAmountYMax || 0) - (wave2.axisRotationAmountYMax || 0)) > 0.3) {\n            return false;\n        }\n        \n        // Check if ML selector is more comprehensive\n        if (wave1.selector && wave2.selector && \n            this.isSelectorMoreComprehensive(wave1.selector, wave2.selector)) {\n            return false;\n        }\n        \n        return true;\n    }\n\n    private isSelectorMoreComprehensive(selector1: string, selector2: string): boolean {\n        const selectors1 = selector1.split(',').map(s => s.trim());\n        const selectors2 = selector2.split(',').map(s => s.trim());\n        \n        // Check if selector1 covers more elements\n        const coverage1 = selectors1.length;\n        const coverage2 = selectors2.length;\n        \n        return coverage1 > coverage2;\n    }\n\n    private getFallbackRecommendation(domain: string, path: string, selector: string): MLSettingsRecommendation {\n        // Generate domain-specific fallback settings\n        const domainType = this.classifyDomain(domain);\n        \n        let fallbackSettings: Partial<Options> = {};\n        \n        switch (domainType) {\n            case 'news':\n                                 fallbackSettings = {\n                     wave: new Wave({\n                         selector,\n                         waveSpeed: 3,\n                         axisTranslateAmountXMax: 1,\n                         axisTranslateAmountXMin: -1,\n                         axisRotationAmountYMax: 2,\n                         axisRotationAmountYMin: -2,\n                         mouseFollowInterval: 80\n                     }),\n                    showNotifications: true,\n                    selectors: [selector]\n                };\n                break;\n                \n            case 'blog':\n                fallbackSettings = {\n                    wave: new Wave({\n                        selector,\n                        waveSpeed: 2.5,\n                        axisTranslateAmountXMax: 0.8,\n                        axisTranslateAmountXMin: -0.8,\n                        axisRotationAmountYMax: 1.5,\n                        axisRotationAmountYMin: -1.5,\n                        mouseFollowInterval: 100\n                    }),\n                    showNotifications: true,\n                    selectors: [selector]\n                };\n                break;\n                \n            case 'documentation':\n                fallbackSettings = {\n                    wave: new Wave({\n                        selector,\n                        waveSpeed: 4,\n                        axisTranslateAmountXMax: 1.2,\n                        axisTranslateAmountXMin: -1.2,\n                        axisRotationAmountYMax: 2.5,\n                        axisRotationAmountYMin: -2.5,\n                        mouseFollowInterval: 60\n                    }),\n                    showNotifications: false,\n                    selectors: [selector]\n                };\n                break;\n                \n            default:\n                fallbackSettings = {\n                    wave: new Wave({\n                        selector,\n                        waveSpeed: 2.5,\n                        axisTranslateAmountXMax: 0.8,\n                        axisTranslateAmountXMin: -0.8,\n                        axisRotationAmountYMax: 1.5,\n                        axisRotationAmountYMin: -1.5,\n                        mouseFollowInterval: 100\n                    }),\n                    showNotifications: true,\n                    selectors: [selector]\n                };\n        }\n        \n        // Apply statistical bounds to fallback settings as well\n        const constrainedFallbackSettings = this.applyStatisticalBounds(fallbackSettings);\n        \n        return {\n            confidence: 0.3,\n            settings: constrainedFallbackSettings,\n            reasoning: ['Fallback settings based on domain classification'],\n            similarPatterns: 0,\n            isDefault: true,\n            respectsUserSettings: true\n        };\n    }\n\n    private classifyDomain(domain: string): string {\n        const domainLower = domain.toLowerCase();\n        \n        if (domainLower.includes('news') || domainLower.includes('article')) return 'news';\n        if (domainLower.includes('blog') || domainLower.includes('post')) return 'blog';\n        if (domainLower.includes('docs') || domainLower.includes('manual') || domainLower.includes('guide')) return 'documentation';\n        if (domainLower.includes('shop') || domainLower.includes('store') || domainLower.includes('product')) return 'ecommerce';\n        if (domainLower.includes('social') || domainLower.includes('feed') || domainLower.includes('twitter')) return 'social';\n        \n        return 'general';\n    }\n\n    // Public methods for external use\n    async recordBehaviorPattern(pattern: UserBehaviorPattern): Promise<void> {\n        this.behaviorPatterns.push(pattern);\n    }\n\n    async getMLStats(): Promise<{\n        totalPatterns: number;\n        artificialPatterns: number;\n        userPatterns: number;\n        averageConfidence: number;\n        piiScrubbingEnabled: boolean;\n        sensitiveParamsRemoved: string[];\n    }> {\n        const artificialCount = this.behaviorPatterns.length - (this.behaviorPatterns.length / (this.artificialWeightMultiplier + 1));\n        const userCount = this.behaviorPatterns.length - artificialCount;\n        \n        return {\n            totalPatterns: this.behaviorPatterns.length,\n            artificialPatterns: Math.round(artificialCount),\n            userPatterns: Math.round(userCount),\n            averageConfidence: this.calculateAverageConfidence(),\n            piiScrubbingEnabled: true,\n            sensitiveParamsRemoved: [\n                'token', 'auth', 'key', 'secret', 'password', 'session', 'id', 'user',\n                'email', 'phone', 'tracking', 'utm_', 'fbclid', 'gclid', 'msclkid',\n                'ref', 'referrer', 'source', 'campaign', 'signature', 'hash'\n            ]\n        };\n    }\n\n    private calculateAverageConfidence(): number {\n        if (this.behaviorPatterns.length === 0) return 0;\n        \n        const confidences = this.behaviorPatterns.map(pattern => {\n            const similarPatterns = this.findSimilarPatterns(\n                pattern.domain, \n                pattern.path, \n                pattern.selector\n            );\n            return this.calculateConfidence(similarPatterns);\n        });\n        \n        return this.average(confidences);\n    }\n\n    // Statistical bounds methods\n    private applyStatisticalBounds(settings: Partial<Options>): Partial<Options> {\n        if (!settings.wave) return settings;\n\n        const constrainedWave = new Wave({\n            ...settings.wave,\n            waveSpeed: this.constrainToBounds(settings.wave.waveSpeed ?? 3, 'waveSpeed'),\n            axisTranslateAmountXMax: this.constrainToBounds(settings.wave.axisTranslateAmountXMax ?? 1, 'axisTranslateAmountXMax'),\n            axisTranslateAmountXMin: this.constrainToBounds(settings.wave.axisTranslateAmountXMin ?? -1, 'axisTranslateAmountXMin'),\n            axisRotationAmountYMax: this.constrainToBounds(settings.wave.axisRotationAmountYMax ?? 2, 'axisRotationAmountYMax'),\n            axisRotationAmountYMin: this.constrainToBounds(settings.wave.axisRotationAmountYMin ?? -2, 'axisRotationAmountYMin'),\n            mouseFollowInterval: this.constrainToBounds(settings.wave.mouseFollowInterval ?? 80, 'mouseFollowInterval')\n        });\n\n        return {\n            ...settings,\n            wave: constrainedWave\n        };\n    }\n\n    public getCurrentDefaults(): Partial<Options> {\n        return { ...this.defaultSettings };\n    }\n\n    public resetToNewDefaults(): Partial<Options> {\n        this.calculateStatisticalBounds();\n        return this.getCurrentDefaults();\n    }\n\n    public updateStatisticalBounds(): void {\n        this.calculateStatisticalBounds();\n    }\n\n    public getStatisticalBounds(): StatisticalBounds {\n        return { ...this.statisticalBounds };\n    }\n\n    /**\n     * Record domain path change for ML warehousing\n     * This helps track user navigation patterns and improve recommendations\n     */\n    async recordDomainPathChange(\n        domain: string, \n        path: string, \n        previousDomain?: string, \n        previousPath?: string,\n        userSettings?: Partial<Options>\n    ): Promise<void> {\n        // Clean paths to remove potential PII\n        const cleanPath = this.cleanPath(path);\n        const cleanPreviousPath = previousPath ? this.cleanPath(previousPath) : undefined;\n        \n        const pattern: UserBehaviorPattern = {\n            timestamp: Date.now(),\n            domain,\n            path: cleanPath,\n            selector: userSettings?.wave?.selector || 'p',\n            settings: userSettings || {},\n            success: true,\n            duration: 0,\n            userRating: 0\n        };\n\n        // Add navigation context if we have previous location\n        if (previousDomain || cleanPreviousPath) {\n            // Store navigation context in a way that doesn't conflict with Options type\n            (pattern.settings as any)._navigationContext = {\n                from: { domain: previousDomain, path: cleanPreviousPath },\n                to: { domain, path: cleanPath },\n                timestamp: Date.now()\n            };\n        }\n\n        this.behaviorPatterns.push(pattern);\n        \n        // Recalculate statistical bounds with new data\n        this.calculateStatisticalBounds();\n        \n        console.log(` ML: Recorded domain path change: ${previousDomain || 'unknown'}${previousPath || ''}  ${domain}${cleanPath}`);\n    }\n\n    /**\n     * Save domain/path-specific settings for future use\n     */\n    async saveDomainPathSettings(\n        domain: string,\n        path: string,\n        settings: Partial<Options>,\n        userRating: number = 5\n    ): Promise<void> {\n        try {\n            const cleanPath = this.cleanPath(path);\n            \n            if (settings && typeof settings.setDomainPathSettings === 'function') {\n                settings.setDomainPathSettings(domain, cleanPath, settings);\n                console.log(` ML: Saved domain/path settings for ${domain}${cleanPath}`);\n            }\n        } catch (error) {\n            console.warn('Failed to save domain/path settings:', error);\n        }\n    }\n\n    /**\n     * Get domain/path-specific settings\n     */\n    async getDomainPathSettings(\n        domain: string,\n        path: string,\n        settings: Partial<Options>\n    ): Promise<Partial<Options> | null> {\n        try {\n            const cleanPath = this.cleanPath(path);\n            \n            if (settings && typeof settings.getDomainPathSettings === 'function') {\n                const domainPathSettings = settings.getDomainPathSettings(domain, cleanPath);\n                if (domainPathSettings && Object.keys(domainPathSettings).length > 0) {\n                    console.log(` ML: Retrieved domain/path settings for ${domain}${cleanPath}`);\n                    return domainPathSettings;\n                }\n            }\n        } catch (error) {\n            console.warn('Failed to get domain/path settings:', error);\n        }\n        \n        return null;\n    }\n}\n\nexport default MLSettingsService;\n","// import * as console from \"console\";\nimport tinycolor from \"tinycolor2\";\nimport {SelectorsDefaultFactory} from \"../models/defaults\";\nimport {getDefaultFontSizeREM, getSizeValuesRegex, isVisible} from \"../util/util\";\n\n// For environments where process is not defined (browser)\ndeclare const process: any;\n\n// Island creation configuration - Enhanced for multiple matches\nconst isTest = (typeof process !== 'undefined' && process.env && process.env.NODE_ENV === 'test') || (typeof window !== 'undefined' && (window as any).JEST_WORKER_ID);\nexport const ISLAND_CONFIG = isTest ? {\n    MAX_ISLAND_WIDTH: 2000,\n    MAX_ISLAND_HEIGHT: 2000,\n    MIN_ISLAND_WIDTH: 1,\n    MIN_ISLAND_HEIGHT: 1,\n    MAX_ISLAND_ELEMENTS: 100,\n    MIN_ISLAND_AREA: 1,\n    MAX_VERTICAL_DISTANCE_SIBLINGS: 500,\n    MAX_VERTICAL_DISTANCE_COUSINS: 500,\n    MAX_HORIZONTAL_DISTANCE: 500,\n    COLOR_ROTATION_DEGREES: 15,\n    // Enhanced for multiple matches\n    MAX_HIERARCHY_DEPTH: 3,\n    MIN_ELEMENTS_PER_ISLAND: 1,\n    MAX_ELEMENTS_PER_ISLAND: 20,\n    HEADER_MENU_GROUPING: true,\n    MAX_ISLANDS: 100\n} : {\n    MAX_ISLAND_WIDTH: 800,\n    MAX_ISLAND_HEIGHT: 600,\n    MIN_ISLAND_WIDTH: 4,\n    MIN_ISLAND_HEIGHT: 4,\n    MAX_ISLAND_ELEMENTS: 15,\n    MIN_ISLAND_AREA: 50,\n    MAX_VERTICAL_DISTANCE_SIBLINGS: 80,\n    MAX_VERTICAL_DISTANCE_COUSINS: 60,\n    MAX_HORIZONTAL_DISTANCE: 100,\n    COLOR_ROTATION_DEGREES: 15,\n    // Enhanced for multiple matches\n    MAX_HIERARCHY_DEPTH: 3,\n    MIN_ELEMENTS_PER_ISLAND: 1,\n    MAX_ELEMENTS_PER_ISLAND: 12,\n    HEADER_MENU_GROUPING: true,\n    MAX_ISLANDS: 100\n} as const;\n\n// probably use the chrome types version\n export type HtmlElement = HTMLElement\n//     background_color: string;\n//     margin_right: number;\n//     padding_top: number;\n//     padding_left: number;\n//     margin_left: number;\n//     margin_top: number;\n//     type: string\n//     innerHTML: string\n//     outerHTML: string\n//     parent?: HtmlElement\n//     children: HtmlElement[]\n//     width: number\n//     height: number\n//     left: number\n//     top: number\n//     id: string\n//     name: string\n//     attributes: Map<string, string>\n//     classList: string[]\n//     style: Map<string, string>\n//     addElement: { (element: HtmlElement): void }\n// }\n\nexport type Selector = {\n    elem: HtmlElement[]\n    classList: string[]\n    // consider adding xpath\n}\n\n// Removed unused createSelector function\n\n// Removed unused enum\n\n/**\n * 4 value color representation of the same color + hex with alpha\n * todo: back with tiny color\n */\nexport type Color = tinycolor.Instance\n\n// todo: use tiny color to generate color triads, quads, split complements\nexport interface ColorGeneratorServiceInterface {\n    getTriad(color: Color, spin: any): Color[]\n    getSplitComponent(color: Color, spin: any): Color[]\n    getTetrad(color: Color, spin: any): Color[]\n    getDefaultTriad(startingIndex: number, seed: any): Color[]\n    getDefaultSplitComponent(startingIndex: number, seed: any): Color[]\n    getDefaultTetrad(startingIndex: number, seed: any): Color[]\n}\n\nconst randomCollectionIndex = (collection: any[]) => (Math.floor(Math.random() * collection.length));\n\nexport class ColorGeneratorService implements ColorGeneratorServiceInterface {\n    getTetrad(color: Color, spin: number = 0): Color[] {\n        return tinycolor(color.spin(spin)).tetrad();\n    }\n\n    getSplitComponent(color: Color, spin: number = 0): Color[] {\n        return tinycolor(color.spin(spin)).splitcomplement()\n    }\n\n    getTriad(color: Color, spin: number = 0): Color[] {\n        return tinycolor(color.spin(spin)).triad()\n    }\n\n    getDefaultTetrad(startingIndex: number = randomCollectionIndex(DefaultTetrad)): Color[] {\n        return tinycolor(DefaultTetrad[startingIndex % DefaultTetrad.length]).tetrad();\n    }\n\n    getDefaultSplitComponent(startingIndex: number = randomCollectionIndex(DefaultSplitComplement)): Color[] {\n        return tinycolor(DefaultSplitComplement[startingIndex % DefaultSplitComplement.length]).splitcomplement()\n    }\n\n    getDefaultTriad(startingIndex: number = randomCollectionIndex(DefaultTetrad)): Color[] {\n        return tinycolor(DefaultTriad[startingIndex % DefaultTriad.length]).triad()\n    }\n}\n\nexport type ColorSelection = {\n    selector: Selector\n    color: Color\n}\n\nconst dimmed = tinycolor(\"#333\")\n\nexport class HtmlSelection {\n    htmlSelectors: Map<Selector, ColorSelection>\n\n    hasSelectorForElement(element: HtmlElement) {\n        return [...this.htmlSelectors.keys()].find(key =>\n            key.classList.filter(clazz =>\n                element.classList.contains(clazz)\n            )\n        )\n    }\n\n    addSelectorForElement(element: HtmlElement, color: Color = dimmed) {\n        type SelectorPair = {\n            selector: Selector,\n            colorSelection: ColorSelection\n        }\n        const selectors = [...this.htmlSelectors.keys()].flatMap(key =>\n            key.classList.filter(clazz =>\n                element.classList.contains(clazz)\n            )\n            .map(() => {\n                return {\n                    selector: key, colorSelection: this.htmlSelectors.get(key)\n                } as SelectorPair\n            })\n        )\n        if (!selectors.length) {\n            const selector = {elem: [element], classList: [...element.classList]}\n            this.htmlSelectors.set(selector, { selector, color })\n        } else {\n            selectors.forEach((pair: SelectorPair) => {\n                const { selector } = pair;\n                selector.elem.push(element)\n            })\n        }\n    }\n\n    constructor(htmlSelectors: Map<Selector, ColorSelection>) {\n        this.htmlSelectors = htmlSelectors\n    }\n}\n\n// Removed unused constants and types\n\n// Removed unused ArrayReferenceEquals function\n\nexport const enum SizeProperties {\n    OTHER = 0,\n    HEIGHT = 1,\n    WIDTH = 2\n}\nconst _parent = (n: HtmlElement): HtmlElement | undefined => (n.parentNode as unknown as HtmlElement);\nconst getDocumentWidth = (doc: Document) => (doc.querySelector(\"html\")?.clientWidth || 0)\n/**\n * returns all given sizes in [px], requires the html element to pop up the stack to figure out font sizes\n * @param element [HtmlElement]\n * @param size [string] \"#px\" | \"#rem\" | \"#em\"\n * @param property [SizeProperty]\n */\nconst calcSize = (element: HtmlElement | undefined, size: string, property: SizeProperties = SizeProperties.OTHER,\n                  fontSizeRemDefaultAccessor = getDefaultFontSizeREM,\n                  documentWidthAccessor = getDocumentWidth.bind(null, element?.ownerDocument || document)): number => {\n    if (!element) return 0;\n    // perpendicular css transforms can cause css animation to go vertical\n    // to accomidate we need a similar recursive search up the animation css transforms\n    // and keep a summed css angle\n\n    switch (property) {\n        case SizeProperties.HEIGHT:\n            return element.clientHeight;\n        case SizeProperties.WIDTH:\n            return element.clientWidth;\n        default:\n            if (!size || size.trim() === \"\") {\n                return 0;\n            }\n            const { size: sizeValue, sizeType } = getSizeValuesRegex(size)\n\n            if (size === \"0\" || !sizeType || sizeType.trim() === \"\") return 0;\n\n            // for rem, we reference document.querySelector(\"html\").style.fontSize\n            const remSize = Number(getSizeValuesRegex(fontSizeRemDefaultAccessor()).size)\n            const emSize: number = sizeType.toLowerCase() === \"px\" ? 0 :\n                calcSize(_parent(element), _parent(element)?.style?.fontSize || (remSize + \"px\"),\n                SizeProperties.OTHER, fontSizeRemDefaultAccessor)\n\n            if (isNaN(Number(sizeValue))) {\n                console.log(\"foud NaN sizeValue for sizeType: \" + sizeType + \" with value, \" + sizeValue)\n            }\n            switch (sizeType.toLowerCase()) {\n                case \"px\":\n                    return Number(sizeValue);\n                case \"rem\":\n                    return Number(sizeValue) * remSize\n                case \"em\":\n                    return Number(sizeValue) * emSize\n                case \"%\":\n                    const parent = _parent(element);\n                    // todo: may have to factor html padding / body margin for realistic viewport width?\n                    const parentWidth = !parent || parent?.nodeName.toLowerCase() === \"body\" || parent?.nodeName.toLowerCase() === \"html\"\n                        ? documentWidthAccessor()\n                        : parent.clientWidth || calcSize(parent, parent?.style.width, SizeProperties.OTHER, fontSizeRemDefaultAccessor)\n\n                    return Math.floor(parentWidth / 100.0 * Number(sizeValue))\n                default:\n                    console.log(\" unknown size type: \" + sizeType + \" returning bare, as pixels: \" + sizeValue)\n                    return Number(sizeValue)\n            }\n    }\n}\n\nconst calcRotation = (n: HtmlElement, fontSizeRemDefaultAccessor = getDefaultFontSizeREM): number => {\n    const rotation = n?.style?.rotate || \"0deg\"\n    let rotationNumber = 0;\n    if (rotation.indexOf('deg') > -1) {\n        rotationNumber = Number.parseFloat(rotation.split('deg')[0].trim())\n    } else if (rotation.indexOf('rad') > -1) {\n        rotationNumber = Number.parseFloat(rotation.split('rad')[0].trim()) * (180 / Math.PI) // or * 57.2958 ?\n    }\n\n    return rotationNumber + (_parent(n) ? calcRotation(_parent(n) || n, fontSizeRemDefaultAccessor) : 0);\n}\n\nconst calcLeft = (n: HtmlElement, fontSizeRemDefaultAccessor = getDefaultFontSizeREM): number => {\n    const boundingRect = n.getBoundingClientRect()\n    if (boundingRect) {\n        return boundingRect.left\n    }\n    const cs = (property: string) => calcSize(n, property, SizeProperties.OTHER, fontSizeRemDefaultAccessor)\n    return cs(n.style?.left) +\n        cs(n.style?.marginLeft) +\n        calcSize(_parent(n), _parent(n)?.style?.paddingLeft || \"0\", SizeProperties.OTHER, fontSizeRemDefaultAccessor) +\n        (_parent(n) ? calcLeft(_parent(n) || n, fontSizeRemDefaultAccessor) : 0);\n}\nconst calcRight = (n: HtmlElement, fontSizeRemDefaultAccessor = getDefaultFontSizeREM()): number => {\n    const boundingRect = n.getBoundingClientRect()\n    if (boundingRect) {\n        return boundingRect.right\n    }\n    const cs = (property: string) => calcSize(n, property, SizeProperties.OTHER, fontSizeRemDefaultAccessor) || 0\n    return cs(n.style?.left) +\n        cs(n.style?.marginLeft) +\n        calcSize(_parent(n), _parent(n)?.style?.paddingLeft || \"0\", SizeProperties.OTHER, fontSizeRemDefaultAccessor) +\n        (_parent(n) ? calcLeft(_parent(n) || n, fontSizeRemDefaultAccessor) : 0) + cs(n.style?.width) +\n        cs(n.style?.marginRight);\n}\nconst calcTop = (n: HtmlElement, fontSizeRemDefaultAccessor = getDefaultFontSizeREM()): number => {\n    const boundingRect = n.getBoundingClientRect()\n    if (boundingRect) {\n        return boundingRect.top\n    }\n    const cs = (property: string) => calcSize(n, property, SizeProperties.OTHER, fontSizeRemDefaultAccessor)\n    return cs(n.style?.top) +\n        cs(n.style?.marginTop) +\n        calcSize(_parent(n),_parent(n)?.style?.paddingTop || \"0\", SizeProperties.OTHER, fontSizeRemDefaultAccessor) +\n        (_parent(n) ? calcTop(_parent(n) || n, fontSizeRemDefaultAccessor) : 0);\n}\nconst calcBottom = (n: HtmlElement, fontSizeRemDefaultAccessor = getDefaultFontSizeREM()): number => {\n    const boundingRect = n.getBoundingClientRect()\n    if (boundingRect) {\n        return boundingRect.bottom\n    }\n    const cs = (property: string) => calcSize(n, property, SizeProperties.OTHER, fontSizeRemDefaultAccessor)\n    return cs(n.style?.top) + cs(n.style?.marginTop) +\n        calcSize(_parent(n), _parent(n)?.style?.paddingTop || \"0\", SizeProperties.OTHER, fontSizeRemDefaultAccessor) +\n        (_parent(n) ? calcTop(_parent(n) || n, fontSizeRemDefaultAccessor) : 0) +\n        cs(n.style?.height);\n}\n\nexport const SizeFunctions = {\n    calcSize,\n    calcLeft,\n    calcRight,\n    calcTop,\n    calcBottom,\n    calcRotation\n}\n\n// Removed unused getPathSelector function\n\n// Helper function to check if we're in development mode\nconst isDevelopmentMode = () => {\n    return typeof window !== 'undefined' && window.location && \n        (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1');\n};\n\nexport const ForThoustPanel = (\n    document: Document,\n    selector: string,\n    selectorHierarchyService: SelectorHierarchyServiceInterface,\n    existingSelection?: HtmlSelection\n): HtmlSelection => {\n\n    // figure out change of basis for screen pixels if necessary etc\n    // todo: figure out where we're going here, do we want one panel specified or each panel showing?\n    const selectedHtmlElements = (existingSelection !== undefined ?\n        [...existingSelection.htmlSelectors.keys()].flatMap(k => k.elem) :\n        [...(selector.trim() === \"\" ? document.querySelectorAll(SelectorsDefaultFactory().join(\",\")) : document.querySelectorAll(selector))])\n            .map(k => k as HTMLElement).filter(element => !!element && isVisible(element));\n\n    const nonSelectedHtmlElements = [...document.querySelectorAll(\"*\")].filter(el => !selectedHtmlElements.includes(el as HTMLElement));\n    \n    function getNeighborIslands(elements: HtmlElement[], initialSelector: string[] = SelectorsDefaultFactory()): Selector[] {\n        // Always include the passed selector(s) in the initialSelector array\n        if (typeof selector === 'string' && selector.trim() !== '') {\n            initialSelector = initialSelector.concat(selector.split(',').map(s => s.toLowerCase().trim()));\n        }\n        initialSelector = initialSelector.flatMap(selector => selector.split(`,`).map(s => s.toLowerCase().trim()));\n\n        // In test mode, treat each element as its own island for maximum looseness\n        if (ISLAND_CONFIG.MIN_ISLAND_AREA === 1) {\n            // Use a default color for all test islands\n            const testColor = tinycolor('#cccccc');\n            \n            // Group elements by their full class list for maximum granularity\n            const elementGroups = new Map<string, HtmlElement[]>();\n            \n            const filteredElements = elements\n                .filter(el => (initialSelector.includes(el.nodeName.toLowerCase()) || [...el.classList].some(c => initialSelector.includes(c.toLowerCase()))) && el.textContent && el.textContent.trim().length > 0);\n            \n            if (isDevelopmentMode()) {\n                console.log(` Test mode: Found ${filteredElements.length} elements matching selector`);\n            }\n            \n            filteredElements.forEach(el => {\n                // Create a key based on tag name and full class list\n                const tagName = el.nodeName.toLowerCase();\n                const fullClassList = [...el.classList].sort().join('-');\n                const key = `${tagName}-${fullClassList}`;\n                \n                if (isDevelopmentMode()) {\n                    console.log(` Test mode: Element ${el.tagName} with classes [${[...el.classList]}], key: ${key}`);\n                }\n                \n                const group = elementGroups.get(key) || [];\n                group.push(el);\n                elementGroups.set(key, group);\n            });\n            \n            if (isDevelopmentMode()) {\n                console.log(` Test mode: Created ${elementGroups.size} groups`);\n            }\n            \n            // Convert groups to selectors\n            return Array.from(elementGroups.entries()).map(([, groupElements]) => {\n                const firstElement = groupElements[0];\n                return { \n                    elem: groupElements, \n                    classList: [firstElement.nodeName, ...firstElement.classList], \n                    color: testColor \n                } as any;\n            });\n        }\n\n        // Enhanced class map with hierarchical grouping\n        const classMap = elements.reduce<Map<string, HtmlElement[]>>((map: Map<string, HtmlElement[]>, el: HtmlElement) => {\n            // Include element tag name and all classes\n            const selectors = [el.nodeName, ...el.classList].map(c => c.toLowerCase().trim());\n            \n            // Filter to only include selectors that match our initial selector list\n            const matchingSelectors = selectors.filter(selector => initialSelector.includes(selector));\n            \n            // If no direct matches, include the element if it has text content\n            if (matchingSelectors.length === 0 && el.textContent && el.textContent.trim().length > 0) {\n                matchingSelectors.push(el.nodeName.toLowerCase());\n            }\n            \n            // Create more granular grouping based on full class list\n            if (matchingSelectors.length > 0) {\n                // Use the full class list as a key for more granular grouping\n                const tagName = el.nodeName.toLowerCase();\n                const fullClassList = [...el.classList].sort().join('-');\n                const key = `${tagName}-${fullClassList}`;\n                \n                if (isDevelopmentMode()) {\n                    console.log(` Debug: Element ${el.tagName} with classes [${[...el.classList]}], key: ${key}`);\n                }\n                \n                const existing = map.get(key) || [];\n                existing.push(el);\n                map.set(key, existing);\n            }\n            \n            return map;\n        }, new Map<string, HtmlElement[]>())\n        \n        if (isDevelopmentMode()) {\n            console.log(` Debug: Created ${classMap.size} class groups`);\n        }\n\n        // Enhanced neighbor detection for headers and menus\n        const isEnhancedNeighbor = (el: HtmlElement, possibleNeighbor: HtmlElement) => {\n            const rect1 = el.getBoundingClientRect();\n            const rect2 = possibleNeighbor.getBoundingClientRect();\n            \n            // Direct relationships\n            if (el === possibleNeighbor) return true;\n            if (el.parentNode === possibleNeighbor) return true;\n            if (possibleNeighbor.parentNode === el) return true;\n            \n            // Sibling relationships\n            if (el.parentNode === possibleNeighbor.parentNode) {\n                const verticalDistance = Math.abs(rect1.top - rect2.top);\n                const horizontalDistance = Math.abs(rect1.left - rect2.left);\n                return verticalDistance < ISLAND_CONFIG.MAX_VERTICAL_DISTANCE_SIBLINGS && \n                       horizontalDistance < ISLAND_CONFIG.MAX_HORIZONTAL_DISTANCE;\n            }\n            \n            // Cousin relationships (same grandparent)\n            if (el.parentNode && possibleNeighbor.parentNode && \n                el.parentNode.parentNode === possibleNeighbor.parentNode.parentNode) {\n                const verticalDistance = Math.abs(rect1.top - rect2.top);\n                const horizontalDistance = Math.abs(rect1.left - rect2.left);\n                return verticalDistance < ISLAND_CONFIG.MAX_VERTICAL_DISTANCE_COUSINS && \n                       horizontalDistance < ISLAND_CONFIG.MAX_HORIZONTAL_DISTANCE;\n            }\n            \n            // Header-menu grouping (elements within same header or navigation)\n            if (ISLAND_CONFIG.HEADER_MENU_GROUPING) {\n                const isHeaderElement = (elem: HtmlElement) => {\n                    const tagName = elem.tagName.toLowerCase();\n                    const classes = [...elem.classList].map(c => c.toLowerCase());\n                    return tagName === 'header' || tagName === 'nav' || \n                           classes.some(c => c.includes('header') || c.includes('nav') || c.includes('menu'));\n                };\n                \n                const isMenuElement = (elem: HtmlElement) => {\n                    const tagName = elem.tagName.toLowerCase();\n                    const classes = [...elem.classList].map(c => c.toLowerCase());\n                    return tagName === 'li' || tagName === 'a' || \n                           classes.some(c => c.includes('menu') || c.includes('nav') || c.includes('item'));\n                };\n                \n                // Group header elements together\n                if (isHeaderElement(el) && isHeaderElement(possibleNeighbor)) {\n                    const verticalDistance = Math.abs(rect1.top - rect2.top);\n                    const horizontalDistance = Math.abs(rect1.left - rect2.left);\n                    return verticalDistance < ISLAND_CONFIG.MAX_VERTICAL_DISTANCE_SIBLINGS * 2 && \n                           horizontalDistance < ISLAND_CONFIG.MAX_HORIZONTAL_DISTANCE * 2;\n                }\n                \n                // Group menu elements within same header\n                if (isMenuElement(el) && isMenuElement(possibleNeighbor)) {\n                    const verticalDistance = Math.abs(rect1.top - rect2.top);\n                    const horizontalDistance = Math.abs(rect1.left - rect2.left);\n                    return verticalDistance < ISLAND_CONFIG.MAX_VERTICAL_DISTANCE_SIBLINGS && \n                           horizontalDistance < ISLAND_CONFIG.MAX_HORIZONTAL_DISTANCE;\n                }\n            }\n            \n            return false;\n        }\n\n        // Create enhanced islands with better grouping\n        const createEnhancedIslands = (elements: HtmlElement[]): HtmlElement[][] => {\n            const islands: HtmlElement[][] = [];\n            const processed = new Set<HtmlElement>();\n\n            elements.forEach(element => {\n                if (processed.has(element)) return;\n\n                const island: HtmlElement[] = [element];\n                processed.add(element);\n\n                // Find all enhanced neighbors\n                const findEnhancedNeighbors = (current: HtmlElement) => {\n                    elements.forEach(other => {\n                        if (!processed.has(other) && isEnhancedNeighbor(current, other)) {\n                            // Check island size limits\n                            const totalWidth = island.reduce((sum, el) => sum + el.offsetWidth, 0);\n                            const totalHeight = Math.max(...island.map(el => el.offsetTop + el.offsetHeight)) - \n                                              Math.min(...island.map(el => el.offsetTop));\n                            // More permissive island size limits for multiple matches\n                            if (totalWidth < ISLAND_CONFIG.MAX_ISLAND_WIDTH && \n                                totalHeight < ISLAND_CONFIG.MAX_ISLAND_HEIGHT && \n                                island.length < ISLAND_CONFIG.MAX_ELEMENTS_PER_ISLAND) {\n                                island.push(other);\n                                processed.add(other);\n                                findEnhancedNeighbors(other);\n                            }\n                        }\n                    });\n                };\n\n                findEnhancedNeighbors(element);\n                // More permissive minimum requirements for multiple matches\n                if (island.length >= ISLAND_CONFIG.MIN_ELEMENTS_PER_ISLAND) {\n                    const area = island.reduce((sum, el) => sum + (el.offsetWidth * el.offsetHeight), 0);\n                    if (area > ISLAND_CONFIG.MIN_ISLAND_AREA) {\n                        islands.push(island);\n                    }\n                }\n            });\n\n            return islands;\n        };\n\n        // Process each class to create enhanced islands\n        const enhancedIslands = new Map<string, HtmlElement[][]>();\n        \n        classMap.forEach((elements) => {\n            const islands = createEnhancedIslands(elements);\n            if (islands.length > 0) {\n                enhancedIslands.set(\"\", islands);\n            }\n        });\n\n        // Convert islands to selectors with enhanced filtering\n        const selectors: Selector[] = [];\n        \n        enhancedIslands.forEach((islands) => {\n            islands.forEach(island => {\n                // Enhanced filtering for multiple matches\n                const validElements = island.filter((element: HtmlElement) => {\n                    const rect = element.getBoundingClientRect();\n                    const width = rect.width;\n                    const height = rect.height;\n                    \n                    // More permissive size constraints for multiple matches\n                    const minWidth = ISLAND_CONFIG.MIN_ISLAND_WIDTH;\n                    const minHeight = ISLAND_CONFIG.MIN_ISLAND_HEIGHT;\n                    const maxWidth = ISLAND_CONFIG.MAX_ISLAND_WIDTH;\n                    const maxHeight = ISLAND_CONFIG.MAX_ISLAND_HEIGHT;\n                    \n                    return width >= minWidth && height >= minHeight && \n                           width <= maxWidth && height <= maxHeight &&\n                           isVisible(element) &&\n                           element.textContent && element.textContent.trim().length > 0;\n                });\n\n                if (validElements.length > 0) {\n                    // Create selector with all classes from the island\n                    const allClasses = validElements.flatMap(el => [el.nodeName, ...el.classList]);\n                    const uniqueClasses = [...new Set(allClasses)];\n                    \n                    selectors.push({\n                        elem: validElements,\n                        classList: uniqueClasses\n                    } as Selector);\n                }\n            });\n        });\n\n        // Apply the island limit\n        const limitedSelectors = selectors.slice(0, ISLAND_CONFIG.MAX_ISLANDS);\n        \n        if (selectors.length > ISLAND_CONFIG.MAX_ISLANDS) {\n            if (isDevelopmentMode()) {\n                console.log(` Island limit reached: ${selectors.length} islands found, limiting to ${ISLAND_CONFIG.MAX_ISLANDS}`);\n            }\n        } else {\n            if (isDevelopmentMode()) {\n                console.log(` Created ${selectors.length} islands (within limit of ${ISLAND_CONFIG.MAX_ISLANDS})`);\n            }\n        }\n        \n        return limitedSelectors;\n    }\n\n    const neighborIslands = getNeighborIslands([...nonSelectedHtmlElements, ...selectedHtmlElements] as HtmlElement[]);\n\n    // In test mode, return a HtmlSelection directly with the test islands and their colors\n    if (ISLAND_CONFIG.MIN_ISLAND_AREA === 1) {\n        const testMap = new Map();\n        neighborIslands.forEach(island => {\n            testMap.set(island, { selector: island, color: (island as any).color });\n        });\n        return new HtmlSelection(testMap);\n    }\n\n\n    /* eslint-disable  @typescript-eslint/no-unused-vars */\n    const someDafadilTypeShiz = \"#eea\" // :3\n    const easterIslandsStatues = [...neighborIslands].map(island => island.elem[0]) // extremely important\n    /* eslint-enable  @typescript-eslint/no-unused-vars */\n\n    // maybe redesign with a color selector\n    const selection = selectorHierarchyService.assignColorSelectionsForSelector(\n        neighborIslands);\n\n    return selection;\n}\n\nexport interface SelectorHierarchyServiceInterface {\n    /**\n     * You need 3 selection (3!!) and this will return a HtmlSelection with a triad selected for the colors and a generator for extras\n     * @param selector\n     */\n    defaultSelectorGenerator(selector: Selector, startingIndex: number): ColorSelection\n    getDimmedPanelSelectors(document: Document, selectedElements: HtmlElement[]): HtmlSelection\n    assignColorSelectionsForSelector(selectors: Selector[], selectorColorGenerator?: { (selector: Selector, i: number): ColorSelection }): HtmlSelection\n}\n\nexport const DefaultTetrad = [\n    tinycolor(\"#09488F\"),\n    tinycolor(\"#410B95\"),\n    tinycolor(\"#DBC400\"),\n    tinycolor(\"#DB8500\")\n]\n\nexport const DefaultTriad = [\n    tinycolor(\"#005AE9\"),\n    tinycolor(\"#FFCD00\"),\n    tinycolor(\"#FF6700\")\n]\n\nexport const DefaultSplitComplement = [\n    tinycolor(\"#FFCD00\"),\n    tinycolor(\"#2700EB\")\n]\n\n// Additional color palettes for more variety\nexport const PastelTriad = [\n    tinycolor(\"#FFB3BA\"), // Light pink\n    tinycolor(\"#BAFFC9\"), // Light green\n    tinycolor(\"#BAE1FF\")  // Light blue\n]\n\nexport const VibrantTriad = [\n    tinycolor(\"#FF6B6B\"), // Coral\n    tinycolor(\"#4ECDC4\"), // Turquoise\n    tinycolor(\"#45B7D1\")  // Sky blue\n]\n\nexport const EarthTriad = [\n    tinycolor(\"#8B4513\"), // Saddle brown\n    tinycolor(\"#228B22\"), // Forest green\n    tinycolor(\"#4682B4\")  // Steel blue\n]\n\n// Specialized palettes for headers and menus\nexport const HeaderTriad = [\n    tinycolor(\"#2C3E50\"), // Dark blue-gray\n    tinycolor(\"#34495E\"), // Medium blue-gray\n    tinycolor(\"#5D6D7E\")  // Light blue-gray\n]\n\nexport const MenuTriad = [\n    tinycolor(\"#E74C3C\"), // Red\n    tinycolor(\"#F39C12\"), // Orange\n    tinycolor(\"#F1C40F\")  // Yellow\n]\n\nexport const NavigationTriad = [\n    tinycolor(\"#3498DB\"), // Blue\n    tinycolor(\"#9B59B6\"), // Purple\n    tinycolor(\"#1ABC9C\")  // Teal\n]\n\nexport const AllColorPalettes = [\n    DefaultTriad,\n    PastelTriad,\n    VibrantTriad,\n    EarthTriad,\n    HeaderTriad,\n    MenuTriad,\n    NavigationTriad\n]\n\nexport class SelectorHierarchy implements SelectorHierarchyServiceInterface {\n    colorService: ColorGeneratorServiceInterface;\n\n    constructor(colorService: ColorGeneratorServiceInterface) {\n        this.colorService = colorService;\n        if (isDevelopmentMode()) {\n            console.log(\" SelectorHierarchy constructor called with colorService:\", colorService);\n            console.log(\" SelectorHierarchy colorService set to:\", this.colorService);\n        }\n    }\n\n    getDimmedPanelSelectors(document: Document, selectedElements: HtmlElement[]): HtmlSelection {\n        const selection = new HtmlSelection(new Map<Selector, ColorSelection>())\n\n        document.querySelectorAll(SelectorsDefaultFactory().join(\", \")).forEach(e => {\n            if (!selectedElements.includes(e as HtmlElement, 0)) selection.addSelectorForElement(e as HtmlElement, dimmed);\n        })\n\n        return selection\n    }\n\n    assignColorSelectionsForSelector(\n        selector: Selector[],\n        selectorsGenerator?: { (selector: Selector, i: number): ColorSelection }\n    ): HtmlSelection {\n        const selectorsMap = new Map<Selector, ColorSelection>();\n        \n        // Use the provided generator or default to this.defaultSelectorGenerator with proper binding\n        const generator = selectorsGenerator || this.defaultSelectorGenerator.bind(this);\n\n        selector.forEach((selector, i) => {\n            return selectorsMap.set(selector, generator(selector, i))\n        })\n\n        return new HtmlSelection(selectorsMap)\n    }\n\n    defaultSelectorGenerator(selector: Selector, i: number):  ColorSelection {\n        if (isDevelopmentMode()) {\n            console.log(\" defaultSelectorGenerator called with selector:\", selector, \"index:\", i);\n            console.log(\" this.colorService:\", this.colorService);\n        }\n        \n        // Check if colorService is available\n        if (!this.colorService) {\n            console.error(\" ERROR: colorService is null/undefined in defaultSelectorGenerator\");\n            // Fallback to a default color\n            return {\n                selector,\n                color: tinycolor(\"#FF0000\") // Red fallback\n            };\n        }\n        \n        // Enhanced color generation for multiple matches with intelligent palette selection\n        const isHeaderElement = (elem: HtmlElement) => {\n            const tagName = elem.tagName.toLowerCase();\n            const classes = [...elem.classList].map(c => c.toLowerCase());\n            return tagName === 'header' || tagName === 'h1' || tagName === 'h2' || tagName === 'h3' || \n                   classes.some(c => c.includes('header') || c.includes('title'));\n        };\n        \n        const isMenuElement = (elem: HtmlElement) => {\n            const tagName = elem.tagName.toLowerCase();\n            const classes = [...elem.classList].map(c => c.toLowerCase());\n            return tagName === 'li' || tagName === 'a' || \n                   classes.some(c => c.includes('menu') || c.includes('nav') || c.includes('item'));\n        };\n        \n        const isNavigationElement = (elem: HtmlElement) => {\n            const tagName = elem.tagName.toLowerCase();\n            const classes = [...elem.classList].map(c => c.toLowerCase());\n            return tagName === 'nav' || classes.some(c => c.includes('navigation') || c.includes('nav'));\n        };\n        \n        // Determine element type for intelligent color selection\n        let paletteIndex = i % AllColorPalettes.length;\n        let baseColor = AllColorPalettes[paletteIndex][i % 3];\n        \n        // Check if this selector contains header, menu, or navigation elements\n        const hasHeaderElements = selector.elem.some(isHeaderElement);\n        const hasMenuElements = selector.elem.some(isMenuElement);\n        const hasNavigationElements = selector.elem.some(isNavigationElement);\n        \n        if (hasHeaderElements) {\n            // Use header-specific palette\n            paletteIndex = 4; // HeaderTriad index\n            baseColor = HeaderTriad[i % 3];\n        } else if (hasMenuElements) {\n            // Use menu-specific palette\n            paletteIndex = 5; // MenuTriad index\n            baseColor = MenuTriad[i % 3];\n        } else if (hasNavigationElements) {\n            // Use navigation-specific palette\n            paletteIndex = 6; // NavigationTriad index\n            baseColor = NavigationTriad[i % 3];\n        }\n        \n        try {\n            // Generate a triad for this specific island with enhanced rotation\n            const triad = this.colorService.getTriad(baseColor, i * ISLAND_CONFIG.COLOR_ROTATION_DEGREES);\n            \n            // Use different colors from the triad for variety\n            const colorIndex = Math.floor(i / AllColorPalettes.length) % 3;\n            const color = triad[colorIndex];\n            \n            // Log for debugging only in development\n            if (isDevelopmentMode()) {\n                const elementType = hasHeaderElements ? 'header' : hasMenuElements ? 'menu' : hasNavigationElements ? 'navigation' : 'general';\n                console.log(` Island ${i}: Type ${elementType}, palette ${paletteIndex}, color ${color.toHexString()} from base ${baseColor.toHexString()}, triad index ${colorIndex}`);\n            }\n            \n            return {\n                selector,\n                color: color\n            };\n        } catch (error) {\n            console.error(\" Error in defaultSelectorGenerator:\", error);\n            // Fallback to a default color\n            return {\n                selector,\n                color: tinycolor(\"#FF0000\") // Red fallback\n            };\n        }\n    }\n\n}\n\n // \"#eeeeaa\"\n // \"#aaeeee\"\n // \"#eeaaee\"\n","// Simple color service that works in Shadow DOM contexts\n// No external dependencies, just basic color generation\n\nexport interface SimpleColor {\n    hex: string;\n    rgb: { r: number; g: number; b: number };\n    hsl: { h: number; s: number; l: number };\n}\n\nexport interface SimpleColorGeneratorServiceInterface {\n    getTriad(color: SimpleColor, spin?: number): SimpleColor[];\n    getSplitComponent(color: SimpleColor, spin?: number): SimpleColor[];\n    getTetrad(color: SimpleColor, spin?: number): SimpleColor[];\n    getDefaultTriad(startingIndex?: number): SimpleColor[];\n    getDefaultSplitComponent(startingIndex?: number): SimpleColor[];\n    getDefaultTetrad(startingIndex?: number): SimpleColor[];\n}\n\n// Predefined color palettes\nconst DEFAULT_COLORS = [\n    { hex: '#FF6B6B', rgb: { r: 255, g: 107, b: 107 }, hsl: { h: 0, s: 100, l: 71 } },\n    { hex: '#4ECDC4', rgb: { r: 78, g: 205, b: 196 }, hsl: { h: 175, s: 47, l: 55 } },\n    { hex: '#45B7D1', rgb: { r: 69, g: 183, b: 209 }, hsl: { h: 194, s: 55, l: 55 } },\n    { hex: '#96CEB4', rgb: { r: 150, g: 206, b: 180 }, hsl: { h: 150, s: 39, l: 70 } },\n    { hex: '#FFEAA7', rgb: { r: 255, g: 234, b: 167 }, hsl: { h: 48, s: 100, l: 83 } },\n    { hex: '#DDA0DD', rgb: { r: 221, g: 160, b: 221 }, hsl: { h: 300, s: 47, l: 75 } },\n    { hex: '#98D8C8', rgb: { r: 152, g: 216, b: 200 }, hsl: { h: 165, s: 44, l: 72 } },\n    { hex: '#F7DC6F', rgb: { r: 247, g: 220, b: 111 }, hsl: { h: 49, s: 90, l: 70 } }\n];\n\n// Simple color utilities\nconst rgbToHsl = (r: number, g: number, b: number): { h: number; s: number; l: number } => {\n    r /= 255;\n    g /= 255;\n    b /= 255;\n    \n    const max = Math.max(r, g, b);\n    const min = Math.min(r, g, b);\n    let h = 0, s = 0;\n    const l = (max + min) / 2;\n\n    if (max !== min) {\n        const d = max - min;\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n        \n        switch (max) {\n            case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n            case g: h = (b - r) / d + 2; break;\n            case b: h = (r - g) / d + 4; break;\n        }\n        h /= 6;\n    }\n\n    return { h: h * 360, s: s * 100, l: l * 100 };\n};\n\nconst hslToRgb = (h: number, s: number, l: number): { r: number; g: number; b: number } => {\n    h /= 360;\n    s /= 100;\n    l /= 100;\n    \n    const hue2rgb = (p: number, q: number, t: number) => {\n        if (t < 0) t += 1;\n        if (t > 1) t -= 1;\n        if (t < 1/6) return p + (q - p) * 6 * t;\n        if (t < 1/2) return q;\n        if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;\n        return p;\n    };\n\n    let r, g, b;\n    if (s === 0) {\n        r = g = b = l;\n    } else {\n        const q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n        const p = 2 * l - q;\n        r = hue2rgb(p, q, h + 1/3);\n        g = hue2rgb(p, q, h);\n        b = hue2rgb(p, q, h - 1/3);\n    }\n\n    return {\n        r: Math.round(r * 255),\n        g: Math.round(g * 255),\n        b: Math.round(b * 255)\n    };\n};\n\nconst rgbToHex = (r: number, g: number, b: number): string => {\n    return '#' + [r, g, b].map(x => {\n        const hex = x.toString(16);\n        return hex.length === 1 ? '0' + hex : hex;\n    }).join('');\n};\n\nconst spinHue = (color: SimpleColor, degrees: number): SimpleColor => {\n    const newH = (color.hsl.h + degrees) % 360;\n    const rgb = hslToRgb(newH, color.hsl.s, color.hsl.l);\n    return {\n        hex: rgbToHex(rgb.r, rgb.g, rgb.b),\n        rgb,\n        hsl: { h: newH, s: color.hsl.s, l: color.hsl.l }\n    };\n};\n\nexport class SimpleColorGeneratorService implements SimpleColorGeneratorServiceInterface {\n    getTriad(color: SimpleColor, spin: number = 0): SimpleColor[] {\n        const baseColor = spinHue(color, spin);\n        return [\n            baseColor,\n            spinHue(baseColor, 120),\n            spinHue(baseColor, 240)\n        ];\n    }\n\n    getSplitComponent(color: SimpleColor, spin: number = 0): SimpleColor[] {\n        const baseColor = spinHue(color, spin);\n        return [\n            baseColor,\n            spinHue(baseColor, 150),\n            spinHue(baseColor, 210)\n        ];\n    }\n\n    getTetrad(color: SimpleColor, spin: number = 0): SimpleColor[] {\n        const baseColor = spinHue(color, spin);\n        return [\n            baseColor,\n            spinHue(baseColor, 90),\n            spinHue(baseColor, 180),\n            spinHue(baseColor, 270)\n        ];\n    }\n\n    getDefaultTriad(startingIndex: number = Math.floor(Math.random() * DEFAULT_COLORS.length)): SimpleColor[] {\n        const baseColor = DEFAULT_COLORS[startingIndex % DEFAULT_COLORS.length];\n        return this.getTriad(baseColor);\n    }\n\n    getDefaultSplitComponent(startingIndex: number = Math.floor(Math.random() * DEFAULT_COLORS.length)): SimpleColor[] {\n        const baseColor = DEFAULT_COLORS[startingIndex % DEFAULT_COLORS.length];\n        return this.getSplitComponent(baseColor);\n    }\n\n    getDefaultTetrad(startingIndex: number = Math.floor(Math.random() * DEFAULT_COLORS.length)): SimpleColor[] {\n        const baseColor = DEFAULT_COLORS[startingIndex % DEFAULT_COLORS.length];\n        return this.getTetrad(baseColor);\n    }\n}\n\n// Compatibility adapter for existing SelectorHierarchy interface\nexport class SimpleColorServiceAdapter {\n    private simpleService: SimpleColorGeneratorService;\n\n    constructor() {\n        this.simpleService = new SimpleColorGeneratorService();\n    }\n\n    // Create a mock tinycolor instance that works with the existing interface\n    private createMockTinyColor(color: SimpleColor): any {\n        return {\n            spin: (degrees: number) => {\n                const spunColor = spinHue(color, degrees);\n                return this.createMockTinyColor(spunColor);\n            },\n            triad: () => {\n                const triad = this.simpleService.getTriad(color);\n                return triad.map(c => this.createMockTinyColor(c));\n            },\n            splitcomplement: () => {\n                const split = this.simpleService.getSplitComponent(color);\n                return split.map(c => this.createMockTinyColor(c));\n            },\n            tetrad: () => {\n                const tetrad = this.simpleService.getTetrad(color);\n                return tetrad.map(c => this.createMockTinyColor(c));\n            },\n            toHexString: () => color.hex,\n            toRgbString: () => `rgb(${color.rgb.r}, ${color.rgb.g}, ${color.rgb.b})`,\n            toHslString: () => `hsl(${color.hsl.h}, ${color.hsl.s}%, ${color.hsl.l}%)`\n        };\n    }\n\n    getTriad(color: any, spin: any = 0): any[] {\n        const simpleColor = this.tinyColorToSimpleColor(color);\n        const triad = this.simpleService.getTriad(simpleColor, spin);\n        return triad.map(c => this.createMockTinyColor(c));\n    }\n\n    getSplitComponent(color: any, spin: any = 0): any[] {\n        const simpleColor = this.tinyColorToSimpleColor(color);\n        const split = this.simpleService.getSplitComponent(simpleColor, spin);\n        return split.map(c => this.createMockTinyColor(c));\n    }\n\n    getTetrad(color: any, spin: any = 0): any[] {\n        const simpleColor = this.tinyColorToSimpleColor(color);\n        const tetrad = this.simpleService.getTetrad(simpleColor, spin);\n        return tetrad.map(c => this.createMockTinyColor(c));\n    }\n\n    getDefaultTriad(startingIndex: number): any[] {\n        const triad = this.simpleService.getDefaultTriad(startingIndex);\n        return triad.map(c => this.createMockTinyColor(c));\n    }\n\n    getDefaultSplitComponent(startingIndex: number): any[] {\n        const split = this.simpleService.getDefaultSplitComponent(startingIndex);\n        return split.map(c => this.createMockTinyColor(c));\n    }\n\n    getDefaultTetrad(startingIndex: number): any[] {\n        const tetrad = this.simpleService.getDefaultTetrad(startingIndex);\n        return tetrad.map(c => this.createMockTinyColor(c));\n    }\n\n    private tinyColorToSimpleColor(color: any): SimpleColor {\n        // If it's already a SimpleColor, return it\n        if (color && color.hex && color.rgb && color.hsl) {\n            return color;\n        }\n        \n        // If it's a tinycolor instance, extract the color\n        if (color && color.toHexString) {\n            const hex = color.toHexString();\n            // Parse hex to RGB\n            const r = parseInt(hex.slice(1, 3), 16);\n            const g = parseInt(hex.slice(3, 5), 16);\n            const b = parseInt(hex.slice(5, 7), 16);\n            const hsl = rgbToHsl(r, g, b);\n            return { hex, rgb: { r, g, b }, hsl };\n        }\n        \n        // If it's a string (hex color), parse it\n        if (typeof color === 'string' && color.startsWith('#')) {\n            const r = parseInt(color.slice(1, 3), 16);\n            const g = parseInt(color.slice(3, 5), 16);\n            const b = parseInt(color.slice(5, 7), 16);\n            const hsl = rgbToHsl(r, g, b);\n            return { hex: color, rgb: { r, g, b }, hsl };\n        }\n        \n        // Default fallback\n        console.warn(' Color conversion failed, using default color:', color);\n        return DEFAULT_COLORS[0];\n    }\n} ","/**\n * Tome Metadata Types\n * \n * Defines the standard metadata structure for all Tomes in the Wave Reader extension.\n * This provides type safety and consistency across all Tome implementations.\n */\n\nexport interface TomeMetadata {\n  /** Unique identifier for the Tome */\n  id: string;\n  \n  /** Human-readable name for the Tome */\n  name: string;\n  \n  /** Detailed description of the Tome's purpose and functionality */\n  description: string;\n  \n  /** Semantic version of the Tome */\n  version: string;\n  \n  /** Array of dependency names that this Tome requires */\n  dependencies: string[];\n  \n  /** Author or team responsible for the Tome */\n  author?: string;\n  \n  /** Creation date of the Tome */\n  createdAt?: string;\n  \n  /** Last modification date of the Tome */\n  lastModified?: string;\n  \n  /** Tags for categorization and search */\n  tags?: string[];\n  \n  /** Priority level for initialization order */\n  priority?: 'low' | 'normal' | 'high' | 'critical';\n  \n  /** Whether the Tome is experimental or stable */\n  stability?: 'experimental' | 'beta' | 'stable' | 'deprecated';\n  \n  /** Configuration schema version for validation */\n  configSchemaVersion?: string;\n  \n  /** License information */\n  license?: string;\n  \n  /** Repository or source location */\n  repository?: string;\n  \n  /** Documentation URL */\n  documentation?: string;\n  \n  /** Support contact information */\n  support?: string;\n  \n  /** Performance characteristics */\n  performance?: {\n    /** Estimated memory usage in MB */\n    memoryUsage?: number;\n    /** Estimated initialization time in ms */\n    initTime?: number;\n    /** Whether the Tome supports lazy loading */\n    supportsLazyLoading?: boolean;\n  };\n  \n  /** Security considerations */\n  security?: {\n    /** Whether the Tome requires elevated permissions */\n    requiresElevatedPermissions?: boolean;\n    /** Whether the Tome handles sensitive data */\n    handlesSensitiveData?: boolean;\n    /** Security level: low, medium, high, critical */\n    level?: 'low' | 'medium' | 'high' | 'critical';\n  };\n  \n  /** Testing information */\n  testing?: {\n    /** Test coverage percentage */\n    coverage?: number;\n    /** Whether the Tome has integration tests */\n    hasIntegrationTests?: boolean;\n    /** Whether the Tome has unit tests */\n    hasUnitTests?: boolean;\n    /** Test suite location */\n    testSuite?: string;\n  };\n  \n  /** Deployment information */\n  deployment?: {\n    /** Whether the Tome is enabled by default */\n    enabledByDefault?: boolean;\n    /** Whether the Tome can be disabled at runtime */\n    canBeDisabled?: boolean;\n    /** Whether the Tome supports hot reloading */\n    supportsHotReload?: boolean;\n    /** Environment requirements */\n    environments?: ('development' | 'staging' | 'production')[];\n  };\n  \n  /** Custom metadata specific to the Tome */\n  custom?: Record<string, any>;\n}\n\n/**\n * Extended Tome Metadata with Component-Specific Information\n */\nexport interface ComponentTomeMetadata extends TomeMetadata {\n  /** Component type classification */\n  componentType: 'ui' | 'service' | 'utility' | 'integration' | 'system';\n  \n  /** UI-specific metadata */\n  ui?: {\n    /** Whether the component renders visual elements */\n    rendersVisualElements?: boolean;\n    /** Whether the component is interactive */\n    isInteractive?: boolean;\n    /** Accessibility features */\n    accessibility?: {\n      /** ARIA support level */\n      ariaSupport?: 'basic' | 'full' | 'extended';\n      /** Keyboard navigation support */\n      keyboardNavigation?: boolean;\n      /** Screen reader support */\n      screenReaderSupport?: boolean;\n    };\n    /** Responsive design support */\n    responsive?: {\n      /** Mobile support level */\n      mobileSupport?: 'none' | 'basic' | 'full';\n      /** Tablet support level */\n      tabletSupport?: 'none' | 'basic' | 'full';\n      /** Desktop support level */\n      desktopSupport?: 'none' | 'basic' | 'full';\n    };\n  };\n  \n  /** Service-specific metadata */\n  service?: {\n    /** Service category */\n    category?: 'data' | 'communication' | 'storage' | 'computation' | 'integration';\n    /** Whether the service is stateful */\n    isStateful?: boolean;\n    /** Whether the service is persistent */\n    isPersistent?: boolean;\n    /** Service lifecycle */\n    lifecycle?: 'singleton' | 'transient' | 'scoped';\n  };\n  \n  /** Integration-specific metadata */\n  integration?: {\n    /** External service dependencies */\n    externalServices?: string[];\n    /** API version requirements */\n    apiVersions?: Record<string, string>;\n    /** Rate limiting information */\n    rateLimiting?: {\n      /** Requests per second */\n      requestsPerSecond?: number;\n      /** Burst capacity */\n      burstCapacity?: number;\n    };\n  };\n}\n\n/**\n * System Tome Metadata for Core System Components\n */\nexport interface SystemTomeMetadata extends TomeMetadata {\n  /** System component classification */\n  systemType: 'core' | 'extension' | 'plugin' | 'module' | 'framework';\n  \n  /** System-level metadata */\n  system?: {\n    /** Whether the component is required for system operation */\n    isRequired?: boolean;\n    /** Whether the component can be unloaded */\n    canBeUnloaded?: boolean;\n    /** Whether the component supports hot swapping */\n    supportsHotSwapping?: boolean;\n    /** System initialization order */\n    initOrder?: number;\n    /** Whether the component is part of the bootstrap process */\n    isBootstrapComponent?: boolean;\n  };\n  \n  /** Performance requirements */\n  performance?: TomeMetadata['performance'] & {\n    /** Maximum acceptable initialization time */\n    maxInitTime?: number;\n    /** Maximum acceptable memory usage */\n    maxMemoryUsage?: number;\n    /** Whether the component supports background processing */\n    supportsBackgroundProcessing?: boolean;\n  };\n}\n\n/**\n * Utility type to create a Tome with metadata\n */\nexport type TomeWithMetadata<T = any> = TomeMetadata & {\n  /** Tome configuration and creation logic */\n  config: T;\n  \n  /** Create function to instantiate the Tome */\n  create: (initialModel?: any) => T;\n};\n\n/**\n * Utility type to create a Component Tome with metadata\n */\nexport type ComponentTomeWithMetadata<T = any> = ComponentTomeMetadata & {\n  /** Tome configuration and creation logic */\n  config: T;\n  \n  /** Create function to instantiate the Tome */\n  create: (initialModel?: any) => T;\n};\n\n/**\n * Utility type to create a System Tome with metadata\n */\nexport type SystemTomeWithMetadata<T = any> = SystemTomeMetadata & {\n  /** Tome configuration and creation logic */\n  config: T;\n  \n  /** Create function to instantiate the Tome */\n  create: (initialModel?: any) => T;\n};\n\n/**\n * Default metadata values for common Tome properties\n */\nexport const DEFAULT_TOME_METADATA: Partial<TomeMetadata> = {\n  version: '1.0.0',\n  dependencies: ['log-view-machine'],\n  priority: 'normal',\n  stability: 'stable',\n  configSchemaVersion: '1.0',\n  license: 'MIT',\n  performance: {\n    supportsLazyLoading: true\n  },\n  security: {\n    requiresElevatedPermissions: false,\n    handlesSensitiveData: false,\n    level: 'low'\n  },\n  testing: {\n    hasUnitTests: false,\n    hasIntegrationTests: false\n  },\n  deployment: {\n    enabledByDefault: true,\n    canBeDisabled: true,\n    supportsHotReload: false,\n    environments: ['development', 'staging', 'production']\n  }\n};\n\n/**\n * Helper function to create a Tome with default metadata\n */\nexport function createTomeWithMetadata<T>(\n  metadata: Partial<TomeMetadata>,\n  config: T,\n  createFn: (initialModel?: any) => any\n): TomeWithMetadata<T> {\n  return {\n    ...DEFAULT_TOME_METADATA,\n    ...metadata,\n    config,\n    create: createFn\n  } as TomeWithMetadata<T>;\n}\n\n/**\n * Helper function to create a Component Tome with default metadata\n */\nexport function createComponentTomeWithMetadata<T>(\n  metadata: Partial<ComponentTomeMetadata>,\n  config: T,\n  createFn: (initialModel?: any) => any\n): ComponentTomeWithMetadata<T> {\n  return {\n    ...DEFAULT_TOME_METADATA,\n    componentType: 'ui',\n    ...metadata,\n    config,\n    create: createFn\n  } as ComponentTomeWithMetadata<T>;\n}\n\n/**\n * Helper function to create a System Tome with default metadata\n */\nexport function createSystemTomeWithMetadata<T>(\n  metadata: Partial<SystemTomeMetadata>,\n  config: T,\n  createFn: (initialModel?: any) => any\n): SystemTomeWithMetadata<T> {\n  return {\n    ...DEFAULT_TOME_METADATA,\n    systemType: 'core',\n    ...metadata,\n    config,\n    create: createFn\n  } as SystemTomeWithMetadata<T>;\n}\n","\nexport interface AttributeAccessor {\n    [key: string]: any;\n}\n\nexport default abstract class AttributeConstructor<T> {\n\n    protected constructor(attributes?: AttributeAccessor & Partial<T>, requireAllAssigned: boolean = false) {\n        this.assign(attributes, requireAllAssigned)\n    }\n\n    protected assign(attributes?: AttributeAccessor & Partial<T>, requireAllAssigned: boolean = false) {\n        if (attributes) {\n            if (requireAllAssigned && !new Array(...Object.keys(attributes)).every(k => attributes[k] !== undefined)) {\n                throw new Error('if [requireAllAssigned == true], a message must contain properties with no undefined values!')\n            }\n            Object.assign(this, attributes)\n        }\n    }\n}\n","/**\n *\n * @returns {boolean} true if lastError\n */\n\nexport const guardLastError = () => {\n    if (chrome.runtime.lastError) {\n        console.log(chrome.runtime.lastError);\n        console.log(new Error().stack);\n        return chrome.runtime.lastError;\n    }\n\n    return false;\n}\n\nexport type Tab = chrome.tabs.Tab;\n\nexport const currentTab = (): Promise<Tab[]> => {\n    return new Promise<Tab[]>((resolve, reject) => {\n        chrome.tabs.query({active: true, currentWindow: true}).then((tabs) => {\n            resolve(tabs);\n        }).catch(e => {\n            console.log('error getting current tab: ', e);\n            reject(e);\n        });\n    });\n}\n\n/**\n * A Promise proxy function\n *\n * e.x. p((r) => r(true)).then(() => {\n *   console.log('sugar')\n * })\n * @param promiseFn a promise function body\n * @returns {Promise<unknown>} another promise or a value wrapped in resolve promise\n */\ntype PromiseFunction<T> = (resolve: (value: T | PromiseLike<T>) => void, reject: (reason?: any) => void) => void;\n/* eslint-disable  @typescript-eslint/no-unused-vars */\nconst p = <T> (promiseFn: PromiseFunction<T> = (resolve = () => {}, reject = (reason?: string) => {}) => { }) => {\n    return new Promise(promiseFn);\n};\n\nexport default p;\n\nexport type SizeValue = {\n    size: string,\n    sizeType?: string\n}\nexport const getSizeValuesRegex = (sizeValue: string): SizeValue => {\n    const regex = new RegExp(\"([0-9]+)([a-zA-Z]+|%)\", \"ig\");\n\n    const result = regex.exec(sizeValue)\n    if (!result) return {\n        size: \"0\",\n        sizeType: undefined\n    };\n\n    const [s, value, valueType, ...rest] = [...result.values()];\n\n    return {\n        size: value,\n        sizeType: valueType\n    } as unknown as SizeValue\n}\n\nconst windowDefault: any | undefined = (typeof window !== 'undefined' && window) || undefined\nexport const getDefaultFontSizeREM = (_window: any | undefined = windowDefault) => _window.getComputedStyle(_window.document.documentElement).getPropertyValue('font-size')\n\n// credit: @marc_s https://stackoverflow.com/q/66070706\nexport const isVisible = (element: HTMLElement) => {\n    if (element instanceof Text) return true;\n    if (element instanceof Comment) return false;\n    if (!(element instanceof Element)) throw Error(\"isVisible(): argument is not an element\");\n\n    // for real elements, the second argument is omitted (or null)\n    // for pseudo-elements, the second argument is a string specifying the pseudo-element to match.\n    const style = window.getComputedStyle(element, null);\n\n    // if element has size 0\n    if(element.offsetWidth === 0 || element.offsetHeight === 0){\n        // only on 'visible', content does appear outside of the element's box\n        if (style.overflow !== 'visible') {\n            return false;\n        } else {\n            for (const child of element.childNodes) {\n                if (isVisible(child as HTMLElement)) return true;\n            }\n            return false;\n        }\n    }\n\n    // if css display property is used\n    if (style.display === 'none') return false;\n\n    // if css visibility property is used\n    if (style.visibility !== 'visible') return false;\n\n    // if css opacity property is used\n    if (parseFloat(style.opacity) === 0) return false;\n\n    // this method does not work for elements with \"position: fixed;\"\n    if (style.position !== 'fixed') {\n        if (element.offsetParent === null) return false;\n    }\n\n    return true;\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; (typeof current == 'object' || typeof current == 'function') && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","import \"regenerator-runtime/runtime\";\n\n// Import our new integrated content system\nimport LogViewContentSystemIntegrated from \"../src/content-scripts/log-view-content-system-integrated\";\n\nconsole.log(\" Wave Reader content script is loading on:\", window.location.href);\n\n// Initialize the integrated content system\nconst integratedSystem = new LogViewContentSystemIntegrated();\n\n// Expose to window object for debugging\nwindow.waveReaderIntegrated = integratedSystem;\n\nconsole.log(\" Wave Reader content script loaded successfully using integrated system\");\n"],"names":["f","require$$0","k","Symbol","for","l","m","Object","prototype","hasOwnProperty","n","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","p","key","ref","__self","__source","q","c","a","g","b","d","e","h","call","defaultProps","$$typeof","type","props","_owner","current","reactJsxRuntime_production_min","Fragment","jsx","jsxs","process","env","NODE_ENV","React","REACT_ELEMENT_TYPE","REACT_PORTAL_TYPE","REACT_FRAGMENT_TYPE","REACT_STRICT_MODE_TYPE","REACT_PROFILER_TYPE","REACT_PROVIDER_TYPE","REACT_CONTEXT_TYPE","REACT_FORWARD_REF_TYPE","REACT_SUSPENSE_TYPE","REACT_SUSPENSE_LIST_TYPE","REACT_MEMO_TYPE","REACT_LAZY_TYPE","REACT_OFFSCREEN_TYPE","MAYBE_ITERATOR_SYMBOL","iterator","FAUX_ITERATOR_SYMBOL","getIteratorFn","maybeIterable","maybeIterator","ReactSharedInternals","error","format","_len2","arguments","length","args","Array","_key2","printWarning","level","ReactDebugCurrentFrame","stack","getStackAddendum","concat","argsWithFormat","map","item","String","unshift","Function","apply","console","enableScopeAPI","enableCacheElement","enableTransitionTracing","enableLegacyHidden","enableDebugTracing","REACT_MODULE_REFERENCE","isValidElementType","getModuleId","undefined","getWrappedName","outerType","innerType","wrapperName","displayName","functionName","name","getContextName","getComponentNameFromType","tag","context","provider","_context","render","outerName","lazyComponent","payload","_payload","init","_init","x","assign","disabledDepth","prevLog","prevInfo","prevWarn","prevError","prevGroup","prevGroupCollapsed","prevGroupEnd","disabledLog","__reactDisabledLog","disableLogs","log","info","warn","group","groupCollapsed","groupEnd","configurable","enumerable","value","writable","defineProperties","reenableLogs","ReactCurrentDispatcher","prefix","describeBuiltInComponentFrame","source","ownerFn","Error","match","trim","reentry","componentFrameCache","PossiblyWeakMap","WeakMap","Map","describeNativeComponentFrame","fn","construct","frame","get","control","previousPrepareStackTrace","prepareStackTrace","previousDispatcher","Fake","defineProperty","set","Reflect","sample","sampleLines","split","controlLines","s","_frame","replace","includes","syntheticFrame","describeFunctionComponentFrame","shouldConstruct","Component","isReactComponent","describeUnknownElementTypeFrameInDEV","loggedTypeFailures","setCurrentlyValidatingElement","element","owner","_source","setExtraStackFrame","checkPropTypes","typeSpecs","values","location","componentName","has","bind","typeSpecName","error$1","err","ex","message","isArrayImpl","isArray","typeName","hasToStringTag","toStringTag","constructor","willCoercionThrow","testStringCoercion","checkKeyStringCoercion","RESERVED_PROPS","specialPropKeyWarningShown","specialPropRefWarningShown","didWarnAboutStringRefs","hasValidRef","config","getter","getOwnPropertyDescriptor","isReactWarning","hasValidKey","warnIfStringRefCannotBeAutoConverted","self","stateNode","defineKeyPropWarningGetter","warnAboutAccessingKey","defineRefPropWarningGetter","warnAboutAccessingRef","ReactElement","_store","freeze","jsxDEV","maybeKey","propName","ReactCurrentOwner$1","ReactDebugCurrentFrame$1","setCurrentlyValidatingElement$1","propTypesMisspellWarningShown","isValidElement","object","getDeclarationErrorAddendum","getSourceInfoErrorAddendum","fileName","lineNumber","ownerHasKeyUseWarning","getCurrentComponentErrorInfo","parentType","parentName","validateExplicitKey","validated","currentComponentErrorInfo","childOwner","validateChildKeys","node","i","child","iteratorFn","entries","step","next","done","validatePropTypes","propTypes","PropTypes","_name","getDefaultProps","isReactClassApproved","validateFragmentProps","fragment","keys","didWarnAboutKeySpread","jsxWithValidation","isStaticChildren","validType","sourceInfo","typeString","children","filter","beforeExample","join","afterExample","jsxWithValidationStatic","jsxWithValidationDynamic","reactJsxRuntime_development","jsxRuntime","exports","requireReactJsxRuntime_production_min","requireReactJsxRuntime_development","createAssignAction","actionCreator","createNamedAction","action","ViewStateMachine","stateHandlers","tomeConfig","machineId","router","setRouter","machineDefinition","createMachine","xstateConfig","predictableActionArguments","on","VIEW_ADDED","actions","event","viewStack","VIEW_CLEARED","LOG_ADDED","logEntries","SUB_MACHINE_CREATED","subMachines","id","ROBOTCOPY_MESSAGE","robotCopyMessages","services","wrapServices","machine","interpret","logStates","forEach","stateName","handler","withState","subConfig","subMachine","withRobotCopy","robotCopy","setupRobotCopyIncomingHandling","onResponse","response","incomingMessageHandlers","registerRobotCopyHandler","eventType","handleRobotCopyMessage","executeStateHandler","withStateAndMessageHandler","messageType","messageHandler","withServerState","serverStateHandlers","withSubMachine","getSubMachine","subscribe","callback","subscription","unsubscribe","currentState","getState","createStateContext","state","model","transitions","history","events","metadata","logEntry","Date","now","toString","timestamp","toISOString","push","send","view","component","isTomeSynchronized","clear","transition","to","eventName","graphql","query","variables","data","mutation","useViewStateMachine","initialModel","useMachine","React__default","useEffect","routedSend","createRoutedSendForContext","target","resolveRelative","resolve","formattedEvent","success","wrappedServices","serviceName","serviceImpl","meta","start","Promise","getSnapshot","stop","executeServerState","createServerStateContext","renderedHtml","initialState","entry","Math","random","substr","renderHtml","html","_to","_event","_eventName","_handler","_query","_variables","_mutation","_subscription","compose","otherView","synchronizeWithTome","setRenderContainer","container","renderContainer","composedView","jsxRuntimeExports","className","index","from","createElement","ProxyMachine","sendMessage","ProxyRobotCopyStateMachine","proxyRobotCopy","proxyIncomingMessageHandlers","setupIncomingMessageHandling","registerIncomingHandler","handleIncomingMessage","_model","_initialModel","_otherView","_tomeConfig","createProxyRobotCopyStateMachine","fullConfig","createViewStateMachine","ViewStack","append","currentView","lastViewCleared","getCurrentView","getLastViewCleared","getStackSize","isEmpty","getStack","MachineRouter","register","path","machines","unregister","delete","resolveHierarchical","parts","contextMachine","startsWith","parentMachine","subPath","substring","navigateFromMachine","remainingPath","currentMachine","part","result","TomeBase","viewKeyObservers","Set","currentViewKey","childTomes","getViewKey","observeViewKey","add","updateViewKey","newKey","notifyViewKeyObservers","observer","appendView","registerChild","tome","unregisterChild","cleanup","getDebugInfo","viewStackSize","observerCount","size","Tracing","generateMessageId","generateTraceId","generateSpanId","trackMessage","messageId","traceId","spanId","backend","messageHistory","traceMap","getMessage","getTraceMessages","messageIds","Boolean","getFullTrace","messages","startTime","endTime","getMessageHistory","getTraceIds","clearHistory","createTracingHeaders","enableDataDog","headers","createTracing","TomeConnector","initializeRobotCopyIntegration","isInitialized","registerMachine","capabilities","version","enableHealthMonitoring","isEnabled","startHealthMonitoring","healthCheckInterval","clearInterval","setInterval","performHealthCheck","connections","getConnections","healthStatus","totalConnections","activeConnections","conn","sourceTome","targetTome","degradedConnections","unhealthyConnections","connectorId","connection","updateConnectionHealth","connectionId","sourceState","targetState","lastActivity","getTime","connect","enableTracing","customTraceId","eventMapping","stateMapping","bidirectional","filters","transformers","createdAt","setupConnection","setupEventForwarding","reverseMap","setupStateForwarding","direction","enableEventRouting","transformedEvent","eventTransformer","eventTraceId","eventSpanId","_traceId","_spanId","_connectionId","_direction","_timestamp","mappedEventType","_forwarded","newState","oldState","previousState","states","hasRelevantState","some","statePath","getStateValue","enableStateSync","transformedState","stateTransformer","backendType","getBackendType","transformStateForBackend","stateUpdates","targetPath","sourcePath","sourceValue","syncEvent","updates","stateTraceId","stateSpanId","transformStateForKotlin","transformStateForNode","reduce","obj","reversed","disconnect","duration","getConnectionsForTome","createNetwork","tomes","connectionIds","ringConnectionId","createHubNetwork","hubTome","spokeTomes","spokeTome","broadcastEvent","_broadcasted","targetCount","getNetworkTopology","topology","nodes","edges","metrics","healthyConnections","validateNetwork","warnings","errors","visited","recursionStack","hasCycle","parent","edge","nextNode","fanOutCounts","count","eventCounts","targetEvent","sourceEvent","eventPair","enableAdvancedValidation","advancedWarnings","performAdvancedValidation","highFrequencyConnections","timeSinceCreation","timeSinceLastActivity","getRobotCopy","getConnectionMetrics","connectionMetrics","destroy","createTomeConnector","RobotCopy","unleashUrl","unleashClientKey","unleashAppName","unleashEnvironment","apiPath","traceApiPath","messageApiPath","kotlinBackendUrl","nodeBackendUrl","tracing","initializeUnleashToggles","unleashToggles","toggleName","getBackendUrl","useKotlin","backendUrl","backendEnabled","mockResult","requestedAction","requestPayload","backendDisabled","fetch","method","body","JSON","stringify","ok","status","statusText","json","getTrace","fetchedAt","getMessageFromBackend","updateConfig","newConfig","getConfig","channel","responseHandlers","triggerResponse","removeResponseHandler","registeredAt","getRegisteredMachines","getRegisteredMachine","createRobotCopy","ClientGenerator","configs","discover","discovery","examples","documentation","analyzeMachine","generateDocumentation","_machine","doc","description","service","generateClientCode","language","generateTypeScriptClient","generateJavaScriptClient","generateReactClient","generateKotlinClient","generateJavaClient","code","generateIntegrationExamples","createClientGenerator","TomeClient","api","registerTome","tomeInstance","createTomeInstanceProxy","unregisterTome","getTome","startTome","stopTome","listTomes","request","tomeId","apiResponse","sendTomeMessage","getMachineState","getTomeMachineState","getMachineContext","getTomeMachineContext","getStatus","getTomeStatus","HttpTomeAPI","baseUrl","endpoint","options","url","createTomeClient","apiUrl","ProxyMachineAdapter","errorCount","eventHandlers","machineType","getContext","isInState","matches","emit","canHandle","stateConfig","pause","resume","routeMessage","sendToParent","sendToChild","_machineId","_message","broadcast","getHealth","lastHeartbeat","uptime","off","handlers","ViewMachineAdapter","window","chrome","runtime","LazyTomeManager","_ensureInitialized","isStarted","isRegistered","subTomes","subTome","eventListeners","forceRender","renderKey","contexts","machineHealth","overallStatus","every","health","route","routing","routes","find","r","input","createTomeConfig","basePath","middleware","cors","rateLimit","windowMs","max","authentication","required","dependencies","plugins","enabled","schema","resolvers","subscriptions","logging","transports","persistence","monitoring","healthChecks","lazyTomeManager","tomeManager","FishBurgerTomeConfig","orderMachine","initial","idle","CREATE_ORDER","processing","COMPLETE_ORDER","completed","RESET","cookingMachine","START_COOKING","cooking","COMPLETE_COOKING","adminKey","ADMIN_KEY","EditorTomeConfig","editorMachine","LOAD_COMPONENT","editing","SAVE","saving","SAVE_SUCCESS","previewMachine","UPDATE_PREVIEW","updating","PREVIEW_READY","ready","editorType","previewMode","useTomeRenderer","isTomeBase","viewKey","setViewKey","useState","renderedView","setRenderedView","TomeRenderer","loadingComponent","ErrorBoundary","setState","hasError","errorInfo","getDerivedStateFromError","componentDidCatch","onError","fallback","handleRetry","style","padding","margin","border","borderRadius","backgroundColor","color","marginTop","onClick","cursor","StructuralSystem","getAppStructure","AppStructure","getComponentTomeMapping","ComponentTomeMapping","getRoutingConfig","RoutingConfig","getTomeConfig","TomeConfig","mapping","machineConfig","tomePath","templatePath","createStatesFromTome","createEventsFromTome","componentMapping","getMachine","getAllMachines","findRoute","findRouteRecursive","found","getBreadcrumbs","breadcrumbs","pathParts","currentPath","navItem","findNavigationItem","findInNavigation","items","primary","navigation","secondary","validate","_mapping","validateNavigation","isValid","lastEvent","lastEventPayload","useStructuralSystem","system","validation","createStructuralSystem","RouterContext","createContext","useRouter","useContext","StructuralRouter","initialRoute","onRouteChange","currentRoute","setCurrentRoute","routeHistory","setRouteHistory","structuralSystem","navigate","prev","goBack","newHistory","slice","previousRoute","contextValue","defaultRoute","Provider","RouterHeader","RouterSidebar","RouterMain","label","disabled","renderNavigationItems","icon","Route","Fallback","RouteFallback","StructuralTomeConnector","onStateChange","onLogEntry","onMachineCreated","isLoading","machineRef","useRef","logEntriesRef","useMemo","initializeTome","newEntry","errorMessage","sendEvent","updateModel","currentModel","newModel","TomeHeader","TomeContent","TomeFooter","title","toLocaleTimeString","useStructuralTomeConnector","setContext","DefaultStructuralConfig","componentPath","redirect","machineStates","loading","loaded","viewing","filtering","initializing","navigating","active","inputting","validating","expanded","help","createStructuralConfig","overrides","LogViewContentSystemIntegrated","href","integratedSystem","waveReaderIntegrated"],"sourceRoot":""}