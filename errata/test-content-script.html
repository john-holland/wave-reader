<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Content Script Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background-color: #f0f0f0;
        }
        .test-content {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .log-output {
            background: #f8f8f8;
            border: 1px solid #ddd;
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            font-family: monospace;
            white-space: pre-wrap;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>
    <div class="test-content">
        <h1>ðŸŒŠ Wave Reader Content Script Test</h1>
        <p>This page is designed to test if the Wave Reader content script is working properly.</p>
        
        <div>
            <button onclick="testContentScript()">Test Content Script</button>
            <button onclick="testWaveAnimation()">Test Wave Animation</button>
            <button onclick="clearLogs()">Clear Logs</button>
        </div>
        
        <div id="log-output" class="log-output">Waiting for content script test...</div>
        
        <div id="test-content">
            <h2>Test Content for Wave Animation</h2>
            <p>This is a test paragraph that should wave when the animation is applied.</p>
            <p>Another paragraph to test the wave effect.</p>
            <div>
                <span>Some inline text</span>
                <strong>Bold text</strong>
                <em>Italic text</em>
            </div>
        </div>
    </div>

    <script>
        let logOutput = document.getElementById('log-output');
        
        function log(message) {
            const timestamp = new Date().toLocaleTimeString();
            logOutput.textContent += `[${timestamp}] ${message}\n`;
            console.log(`[${timestamp}] ${message}`);
        }
        
        function clearLogs() {
            logOutput.textContent = '';
        }
        
        function testContentScript() {
            log('ðŸ” Testing content script...');
            
            // Check if content script is loaded
            if (typeof window.waveReaderIntegrated !== 'undefined') {
                log('âœ… Content script is loaded!');
                log('âœ… Session ID: ' + window.waveReaderIntegrated.getSessionId());
                log('âœ… Current State: ' + JSON.stringify(window.waveReaderIntegrated.getCurrentState()));
                log('âœ… Message History: ' + JSON.stringify(window.waveReaderIntegrated.getMessageHistory()));
            } else {
                log('âŒ Content script is NOT loaded - window.waveReaderIntegrated is undefined');
            }
            
            // Check for console logs
            log('ðŸ” Checking for content script console logs...');
            
            // Check if Chrome extension APIs are available
            if (typeof chrome !== 'undefined' && chrome.runtime) {
                log('âœ… Chrome extension APIs are available');
                log('âœ… Chrome runtime ID: ' + chrome.runtime.id);
            } else {
                log('âŒ Chrome extension APIs are NOT available');
            }
            
            // Check document ready state
            log('ðŸ” Document ready state: ' + document.readyState);
            log('ðŸ” Window location: ' + window.location.href);
            
            log('ðŸ” Content script test complete');
        }
        
        function testWaveAnimation() {
            log('ðŸŒŠ Testing wave animation...');
            
            // Try to trigger wave animation
            if (typeof window.waveReaderIntegrated !== 'undefined') {
                log('âœ… Content script available, testing wave animation...');
                
                // Create a test message
                const testMessage = {
                    name: 'start',
                    options: {
                        wave: {
                            cssTemplate: `
                                @keyframes wave {
                                    0%, 100% { transform: translateX(0px); }
                                    50% { transform: translateX(5px); }
                                }
                                .wave-animation {
                                    animation: wave 0.5s ease-in-out infinite;
                                }
                            `
                        }
                    }
                };
                
                log('âœ… Test message created: ' + JSON.stringify(testMessage));
                
                // Try to send message to content script
                if (typeof chrome !== 'undefined' && chrome.runtime) {
                    chrome.runtime.sendMessage(testMessage, (response) => {
                        log('âœ… Message sent to background script, response: ' + JSON.stringify(response));
                    });
                } else {
                    log('âŒ Cannot send message - Chrome APIs not available');
                }
            } else {
                log('âŒ Content script not available for wave animation test');
            }
        }
        
        // Auto-test on page load
        window.addEventListener('load', () => {
            log('ðŸ“„ Page loaded, running auto-test...');
            setTimeout(() => {
                testContentScript();
            }, 1000);
        });
        
        // Listen for messages from content script
        window.addEventListener('message', (event) => {
            if (event.data && event.data.source === 'wave-reader-extension') {
                log('ðŸ“¨ Message received from content script: ' + JSON.stringify(event.data));
            }
        });
        
        log('ðŸ“„ Test page loaded and ready');
    </script>
</body>
</html>


